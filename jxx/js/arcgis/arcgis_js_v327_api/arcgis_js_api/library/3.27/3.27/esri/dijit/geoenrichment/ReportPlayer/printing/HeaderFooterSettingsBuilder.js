// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/printing/HeaderFooterSettingsBuilder",["dojo/string","dojo/when","esri/dijit/geoenrichment/utils/DateUtil","../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer","dojo/i18n!esri/nls/jsapi"],function(k,l,m,n,f){f=f.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{createHeaderFooterParams:function(b,a,c){var h;h=a.dynamicReportInfo.isMultiFeature?[a.dynamicReportInfo.combinedAreasInfo]:b.getAnalysisAreas();var e=a.getDocumentDefaultStyles();
return l(this._getSourceText(b,a,c),function(g){return h.map(function(d){return{header:{show:c.addHeader,title:c.reportTitle||b.getReportTitle(),subtitle:c.reportSubtitle||b.printConfig.subtitle,siteName:d.name,siteDesc:d.description,siteAddr:d.address,latitude:d.latitude,longitude:d.longitude,style:{headerStyle:e,titleStyle:a.getTableDefaultStyles(null,"ReportTitle"),latLongStyle:a.getTableDefaultStyles(null,"GreyText")}},dataSource:{show:g&&c.addDataSource,sourceText:g&&k.substitute(f.sourcePattern,
{source:g}),style:{dataSourceStyle:e}},footer:{show:c.addFooter,copyrightText:"\u00a9"+(new Date).getFullYear()+" Esri",formattedDate:m.getReportFooterDate(),style:{footerStyle:e}},documentStyle:e}})})},_getSourceText:function(b,a,c){if(!c.addDataSource)return null;a=b.getReportData();return b.isDataDrillingPlayer?(b=a.config,c=n.collectVariablesStats(a.templateJson),a.templateVariableProvider.getVariablesDataVintageDescription({usedVariablesCache:c,countryID:b.countryID,hierarchy:b.hierarchy})):
a.reportObject.dataVintageDescription}}});