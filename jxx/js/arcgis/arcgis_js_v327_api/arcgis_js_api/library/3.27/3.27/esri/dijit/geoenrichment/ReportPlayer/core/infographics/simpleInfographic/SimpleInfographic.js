// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/SimpleInfographic.html":'\x3cdiv class\x3d"esriGESimpleInfographic"\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"mainViewDiv" class\x3d"esriGEAbsoluteStretched"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"dataDrillingViewDiv" class\x3d"simpleInfographic_dataDrillingViewDiv esriGEReportPlayer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"drilledDataViewDiv" class\x3d"simpleInfographic_drilledDataViewDiv esriGEAbsoluteStretched"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"drilledDataViewDivScaler"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"topToolbar" class\x3d"simpleInfographic_topToolbar"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"dynamicSettingsToolbarRoot" class\x3d"dijitInline simpleInfographic_dynamicSettingsToolbarRoot"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"drillingOptionsButton" class\x3d"dijitInline simpleInfographic_drillingOptionsButton"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"exportButton" class\x3d"dijitInline simpleInfographic_exportButton"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printButton" class\x3d"dijitInline simpleInfographic_printButton"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"backToMainViewButton" class\x3d"dijitInline simpleInfographic_backToMainViewButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n\r\n\r\n'}});
define("esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/SimpleInfographic","dojo/_base/declare dojo/_base/lang dojo/when dojo/dom-construct dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin ../utils/InfographicLayoutResizer ../utils/InfographicJsonConversionUtil ../utils/InfographicThemeUtil ../../supportClasses/tableJson/TableJsonUtil ../../sections/supportClasses/InfographicValueController esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/WaitingUtil dojo/text!../../templates/SimpleInfographic.html".split(" "),
function(p,k,q,r,f,t,u,v,w,x,h,y,z,l,g,m,A,B){function n(a){return a&&a.shape&&a.shape.shapeJson.showAsBar}return p([t,u],{templateString:B,viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,isEditMode:!1,adjustElementsWhenResized:!1,_sections:null,_currentInfographicJson:null,_updatePromise:null,_destroySections:function(){this._sections=this._sections||[];this._sections.forEach(function(a){a.destroy()});this._sections.length=0;this.domNode&&r.empty(this.mainViewDiv)},updateInfographic:function(a){if(this.domNode)if(this._currentInfographicJson=
this._applyThemeToJson(a),this.isEditMode)this._doUpdateInfographic();else return this.onContentLoadingStart(),this._updatePromise=g.invoke(this,"_doUpdateInfographic",50),A.showProgressPromise(this.domNode,this._updatePromise),this._updatePromise.always(function(){this.onContentLoadingEnd()}.bind(this)),this._updatePromise},refresh:function(){this.updateInfographic(this._currentInfographicJson)},_doUpdateInfographic:function(){if(this.domNode){this._destroySections();var a=this._currentInfographicJson;
this._syncJsonDimensions();var b=this.viewModel.getStaticInfographicDefaultStyles(this.theme);f.set(this.domNode,"backgroundColor",a.style.backgroundColor||b&&b.backgroundColor);f.set(this.domNode,{width:a.style.width+"px",height:a.style.height+"px"});this._preRender();this._renderHeader();this._renderVariableTables();this._postRender()}},_infographicViewController:null,_preRender:function(){this._infographicViewController=new y;var a=this._currentInfographicJson.variableTables.filter(n);this._infographicViewController.setVariableTables(a)},
_renderHeader:function(){if(this._currentInfographicJson.header){var a=this._currentInfographicJson.header;this._createSection(h.getTableWidth(a),h.getTableHeight(a),[a],a.style,null,-1,null)}},_renderVariableTables:function(){var a=this;this._currentInfographicJson.variableTables.forEach(function(b,f){var d=w.variableTableToNormalTables(b);a._createSection(b.style.width,b.style.height,d.tableJsons,b.style,b,f,d)})},_prepareSectionCreationParams:function(a,b){return null},_createSection:function(a,
b,h,d,g,e,c){e=-1===e;c={};c.initialWidth=a;c.json={type:z.DETAILS,stack:h};c.viewModel=this.viewModel;c.theme=this.theme;c.parentWidget=this;c.currentFeatureIndex=this.currentFeatureIndex;c.initialViewMode=this.isEditMode?l.EDIT:l.PREVIEW_VALUES;c.hasFixedLayout=!1;c.isInfographicSection=!0;c.isInfographicHeaderSection=e;c.infographicViewController=n(g)&&this._infographicViewController;k.mixin(c,this._prepareSectionCreationParams(g,e));a=this.viewModel.layoutBuilder.createElement("section",c,this.mainViewDiv);
a.setResizedHeight(b);f.set(a.domNode,{position:"absolute",left:(e?0:d.left||0)+"px",top:(e?0:d.spaceBefore||d.top||0)+"px"});this._sections.push(a);return a},_postRender:function(){},getVisualState:function(){return null},setVisualState:function(a){},_applyThemeToJson:function(a){var b=this.viewModel.getStaticInfographicDefaultStyles(this.theme);return x.applyThemeSettingsToJson(a,b)},notifyShown:function(){q(this._updatePromise,function(){this._sections&&this._sections.forEach(function(a){a.notifyShown()})}.bind(this))},
width:null,height:null,resize:function(a,b){void 0!==a&&(this.width=a,this.height=b);if(this.isEditMode)this._checkNeedResize()&&this._doUpdateInfographic();else return this._checkNeedResize()&&g.invoke(this,"_doUpdateInfographic",50)},_checkNeedResize:function(){return this._currentInfographicJson&&this.width&&this.height&&(!m.compareEqual(this._currentInfographicJson.style.width,this.width,1)||!m.compareEqual(this._currentInfographicJson.style.height,this.height,1))},_syncJsonDimensions:function(){this._checkNeedResize()&&
v.resizeLayout(this._currentInfographicJson,this.width,this.height,{allowResizeInnerElements:this.adjustElementsWhenResized,ignoreMinMaxConstraints:this.adjustElementsWhenResized,updateFontSize:this.adjustElementsWhenResized})},toJson:function(){return k.clone(this._currentInfographicJson)},onContentLoadingStart:function(){},onContentLoadingEnd:function(){},destroy:function(){this._destroySections();this.inherited(arguments)}})});