// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartLegendSupport","dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style ./utils/ChartTypes ./utils/ChartStyleUtil ./legends/ChartLegendTypes ./legends/ChartLegendPlacements ./legends/MinMaxLegend esri/dijit/geoenrichment/SelectableLegend".split(" "),function(h,d,c,f,e,k,g,b,l,m){return h(null,{legend:null,_placements:[b.LEFT,b.RIGHT,b.TOP,b.BOTTOM],_excludedSeriesHash:null,_createLegend:function(){this._excludedSeriesHash={};
this._placements.forEach(function(a){c.remove(this.domNode,"legendPlacement"+a)},this);this._currentVisualProperties.legend.type===g.MIN_MAX?this._createMinMaxLegend():this._createSeriesLegend()},_createSeriesLegend:function(){this._currentVisualProperties.legend.series.placement!==b.NONE&&(this.legend=(new m(d.mixin({chart:this.chart,allowSelect:!!this.viewModel.dynamicReportInfo&&(e.isColumnBarLike(this._currentChartType)||e.isLineLike(this._currentChartType)),isRtlPlacement:this._currentVisualProperties.legend.series.placement===
b.LEFT,keepItemsTheSameWidth:!0,onSeriesExclusionChanged:d.hitch(this,this._onSeriesExclusionChanged)},this._getAdditionalLegendParams()))).placeAt(this.getLegendNode()),this._applyStyleToSeriesLegend(),c.add(this.domNode,"legendPlacement"+this._currentVisualProperties.legend.series.placement))},_applyStyleToSeriesLegend:function(){var a=this.viewModel.getChartDefaultStyles(this.theme),a=d.mixin({},a.legendStyle,this._currentVisualProperties.legend.series.style);this.viewModel.isGraphicStyle||delete a.backgroundColor;
f.set(this.legend.domNode,k.getStyleObjWithUnits(a));this._currentVisualProperties.legend.series.hasBorder||f.set(this.legend.domNode,"border","none")},_createMinMaxLegend:function(){this._currentVisualProperties.legend.minMax.placement!==b.NONE&&(this.legend=(new l({viewModel:this.viewModel,theme:this.theme})).placeAt(this.getLegendNode()),c.add(this.domNode,"hasMinMaxLegend"),c.add(this.domNode,"legendPlacement"+this._currentVisualProperties.legend.minMax.placement))},_getAdditionalLegendParams:function(){return null},
_onSeriesExclusionChanged:function(a){this._excludedSeriesHash=a;this._updateSeries()},_updateLegend:function(){var a=this._currentSeries.filter(function(a){return!a.isComparisonSeries});this.legend&&(this._currentVisualProperties.legend.type===g.MIN_MAX?this.legend.refresh(a,this._currentVisualProperties):(this.legend.series=a,this.legend.showSeriesData=1===a.length&&!e.isLineLike(this._currentChartType),a=!!this.viewModel.dynamicReportInfo&&1<a.length,a!==this.legend.allowSelect&&(this.legend.allowSelect=
a),this.legend.refresh()))},_updateSeries:function(){},_destroyLegend:function(){this.legend&&this.legend.destroy();this.legend=null}})});