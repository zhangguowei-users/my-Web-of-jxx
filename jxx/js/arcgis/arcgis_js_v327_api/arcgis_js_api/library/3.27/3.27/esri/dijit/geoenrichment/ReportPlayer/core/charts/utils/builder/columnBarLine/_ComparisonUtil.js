// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/columnBarLine/_ComparisonUtil",["dojo/_base/lang","../../ChartTypes","../ChartPlots","../../ChartFilterUtil"],function(k,f,l,g){return{getComparisonPlotName:function(a,b){return b&&b.chartType===f.LINE&&!f.isLineLike(a)?l.SECONDARY:null},isComparisonInPrimaryPlot:function(a,b){return!this.getComparisonPlotName(a,b)},getEffectiveNumberOfSeries:function(a,b,c,e){return this.canShowComparison(c,a,e)?e?a.length:this.isComparisonInPrimaryPlot(b,
c)?2*a.length:a.length:a.length},canShowComparison:function(a,b,c){return a&&(c||1===b.length||2===b.length)},updateSeriesItemsForComparisonInfo:function(a){function b(d){return a.ge.getFieldValueAt("StdGeographyName",d)}if(this.canShowComparison(a.comparisonInfo,a.seriesItems,a.isMultiFeatureChart))if(a.isMultiFeatureChart)if(f.isLineLike(a.chartType)){var c=a.seriesItems.slice(),e=g.getFirstSeriesItem(a.seriesItems)||a.seriesItems[0];a.comparisonFeatureIds.forEach(function(d){c.push({isComparisonSeries:!0,
label:b(d),points:e.points.map(function(b){return{label:b.label,value:{value:a.ge.getFieldValueAt(b.fieldInfo.name,d)}}})})});a.seriesItemsWithComparison=c}else{var h=a.seriesItems.map(function(a){a=k.mixin({},a);a.points=a.points.slice();return a});a.comparisonFeatureIds.forEach(function(c){h.forEach(function(d){var e=g.getFirstSeriesPoint(d)||d.points[0];d.points.push({label:b(c),color:e.color,value:{value:a.ge.getFieldValueAt(e.fieldInfo.name,c)}})})});a.seriesItems=h;delete a.comparisonInfo}else c=
[],a.seriesItems.forEach(function(d,e){c.push(d);c.push({isComparisonSeries:!0,label:b(a.comparisonFeatureIds[0])+(1<a.seriesItems.length?" ("+d.label+")":""),points:d.points.slice()})}),a.seriesItemsWithComparison=c}}});