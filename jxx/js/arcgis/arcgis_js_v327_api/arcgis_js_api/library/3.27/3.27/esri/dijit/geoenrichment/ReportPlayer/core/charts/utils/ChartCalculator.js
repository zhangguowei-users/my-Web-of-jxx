// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartCalculator","dojo/_base/lang dojo/dom-style ./ChartTypes ../legends/ChartLegendTypes ../legends/ChartLegendPlacements ../../themes/ThemeLibrary esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(B,h,u,y,k,n,z){return{calcChartDimentions:function(a,c){var d=c.visualProps,g=c.comparisonInfo,b=c.chartType,f=c.maxIconSize;c=d.width;var e=d.height,v=0,A=0,n=0,l,p,m,w,C=!z.isHidden(a.chartLabel),q=0;u.isColumnLike(b)&&!d.xAxis.show&&
d.showAxisIcons&&(e+=30);C&&(q=h.get(a.chartLabel,"height")+(d.title.verticalShift||0),e-=q);d.showAxisIcons&&(u.isColumnLike(b)?e-=f:u.isBarLike(b)&&(v+=f,c-=f));var r=d.legend[d.legend.type===y.MIN_MAX?"minMax":"series"],f=r.placement,r=(r.placementOffset||0)/100,t=f===k.LEFT||f===k.RIGHT,E=a.comparisonSelectBlock&&a.comparisonSelectBlock.offsetWidth+20,D=a.comparisonSelectBlock&&a.comparisonSelectBlock.offsetHeight+20;!g||!u.isComparisonEnabled(b)||d.legend.type===y.MIN_MAX&&t||(e-=D);t||h.set(a.getLegendNode(),
{width:c-20+"px"});b=a.legend&&z.position(a.legend.domNode);b=B.mixin({w:0,h:0},b);t||h.set(a.getLegendNode(),{width:""});var x=t?e-48:0;b.h=x?Math.min(b.h,x):b.h;b.h+=20;d.legend.type===y.MIN_MAX&&t&&(b.w=Math.max(b.w,E));switch(f){case k.LEFT:l=10;p=q+e*r;v+=2*l+b.w;c-=v;break;case k.RIGHT:m=10;p=q+e*r;A+=2*m+b.w;c-=A;break;case k.TOP:e-=b.h;p=C?q+10:10;m=l=10;n+=b.h;break;case k.BOTTOM:e-=b.h,w=m=l=10,g&&(w+=D-10)}h.set(a.chartLabel,{marginLeft:"10px",marginRight:"10px"});h.set(a.chartContainerWithAxis,
{marginTop:n+"px",marginLeft:v+"px",marginRight:A+"px"});a.legend&&h.set(a.legend.domNode,{maxHeight:x?x+"px":""});h.set(a.getLegendNode(),{left:void 0!==l?l+"px":"",right:void 0!==m?m+"px":"",top:void 0!==p?p+"px":"",bottom:void 0!==w?w+"px":""});return{w:c,h:e}},calcAxisLabelsAutoTitle:function(a,c,d,g){if(!c||!c.length||0!==d.xAxis.labelsAngle)return!1;var b=!1,f=(a-50)/c[0].data.length-20;a=B.mixin({},g.xAxis.axisStyle,g.xAxis.style,d.xAxis.style);var e=z.getMeasureContext({style:"font-size:"+
(a.fontSize||n.CHART_DATA_FONT_SIZE-1)+"px;font-family:"+(a.fontFamily||n.DEFAULT_FONT_FAMILY_GRAPHIC)});c[0].data.some(function(a){return e.measureText(a.name).w>f})&&(b=20);e.destroy();return b},resizeVisualProperties:function(a,c,d){var g=a.width,b=a.height;a.width=c;a.height=d;a.floatingTexts&&a.floatingTexts.forEach(function(a){a.style.left*=c/g;a.style.spaceBefore*=d/b});a.floatingIcons&&a.floatingIcons.forEach(function(a){a.style.left*=c/g;a.style.spaceBefore*=d/b})}}});