// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/RasterFunctionEditor/EditableGridMixin","dojo/_base/declare dojo/has dojo/query ../../kernel dojo/dom-construct dojo/_base/array dojo/_base/lang dojo/dom-class dojo/Evented".split(" "),function(f,g,h,k,p,l,c,m,n){f=f([n],{attachGridEvents:function(){this.own(this._grid.on("dgrid-datachange",c.hitch(this,"_onDataChange")),this._grid.on(".dgrid-content .dgrid-cell:mouseover",c.hitch(this,"_onGridMouseOver")),this._grid.on(".dgrid-content .dgrid-cell:mouseout",c.hitch(this,"_onGridMouseOut")),
this._grid.on(".dgrid-content .dgrid-cell:click",c.hitch(this,"_onGridCellClick")))},_addBlankObject:function(){var a=this._store.data,b=this._store,e=this._grid;a.length&&(a[a.length-1].idNum=a.length);var d={id:a.length?a[a.length-1].id+1:1,idNum:"*"};l.forEach(Object.keys(e.columns),function(a){a=e.columns[a];var b=a.field;"idNum"!==b&&"id"!==b&&(d[a.field]="")});b.add(d)},_onDataChange:function(a){var b=this._grid;a&&("*"===a.cell.row.data.idNum&&this._addBlankObject(),a.cell.row.data[a.cell.column.field]=
a.value);b.refresh();this.emit("change",{bubbles:!1,cancelable:!1})},_onGridMouseOver:function(a){this._toggleDeleteButton(a,!0)},_onGridMouseOut:function(a){this._toggleDeleteButton(a,!1)},_toggleDeleteButton:function(a,b){var e=this._grid,d=this._store.data.length;a=e.cell(a);var c;a&&a.row&&(c=h(".field-idNum",a.row.element)[0]);if(1<d&&c){for(d=0;d<this.dataLength;d++)e.store.data[d].idNum=d+1;void 0!==a.column&&"*"!=a.row.data.idNum&&m.toggle(c,"esriBandMatrixDeleteIcon",b)}},_onGridCellClick:function(a){var b=
this._grid,c=this._store.data.length;a=b.cell(a);if(1<c&&"*"!=a.row.data.idNum&&"idNum"===a.column.field){b.store.remove(a.row.data.id);for(a=0;a<c-2;a++)b.store.data[a].idNum=a+1;b.store.data[c-2].idNum="*";b.refresh();this.emit("change",{bubbles:!1,cancelable:!1})}}});g("extend-esri")&&c.setObject("dijit.RasterFunctionEditor.EditableGridMixin",f,k);return f});