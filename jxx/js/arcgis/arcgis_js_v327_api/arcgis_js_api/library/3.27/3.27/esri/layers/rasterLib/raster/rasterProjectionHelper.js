// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/layers/rasterLib/raster/rasterProjectionHelper","dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/sniff ../../../kernel ../../../geometry/Extent ../../../geometry/projection ../../../geometry/webMercatorUtils ../../../SpatialReference ../../../geometry/Point".split(" "),function(f,g,m,n,p,q,d,w,z,x){f={requirePE:function(a,b){return!(a.equals(b.spatialReference)||a._canProject(b))},load:function(){var a=new m;if(!this._loadPromise)if(d.isSupported())this._loadPromise=d.load();
else{var b=new m;b.reject("projection engine is not supported on this version of the browser, please try with a modern browser");this._loadPromise=b.promise}this._loadPromise.isFulfilled()?this._loadPromise.isResolved()?a.resolve():this._loadPromise.isRejected()&&a.resolve():(this._pendingdfds=this._pendingdfds||[],this._pendingdfds.push(a),this._loadPromise.then(g.hitch(this,function(){this._pendingdfds.forEach(function(a){a.resolve()})}),g.hitch(this,function(){this._pendingdfds.forEach(function(a){a.reject()})})));
return a.promise},project:function(a,b){return a.spatialReference.wkid===b.wkid?a:(d.isLoaded()?d:w).project(a,b)},projectResolution:function(a,b,c){var d=c.xmin+(c.xmax-c.xmin)/2;c=c.ymin+(c.ymax-c.ymin)/2;a=new q(d,c,d+a.x,c+a.y,a.spatialReference);a=this.project(a,b);return new x(a.xmax-a.xmin,a.ymax-a.ymin,b)},getProjectionOffsetGrid:function(a,b,c){c=c||20;var f=a.xmin,g=a.ymin,r=a.xmax,t=a.ymax;a=a.spatialReference;var m=b.spatialReference,n=d.isLoaded()?d:w,h=b.spatialReference._getInfo(),
p=h&&h.valid[0],q=h&&h.valid[1],r=(r-f)/(c-1),t=(t-g)/(c-1),e,k,l,u=[],y,v;for(k=0;k<c;k++)for(y=v,v=[],l=0;l<c;l++)e=new x({x:f+r*k,y:g+t*l,spatialReference:a}),e=n.project(e,m),v.push(e),0<k&&h&&e.x<y[l].x&&(e.x+=q-p),u.push((e.x-b.xmin)/(b.xmax-b.xmin)),u.push((e.y-b.ymin)/(b.ymax-b.ymin));return u}};n("extend-esri")&&g.setObject("layers.rasterLib.raster.rasterProjectionHelper",f,p);return f});