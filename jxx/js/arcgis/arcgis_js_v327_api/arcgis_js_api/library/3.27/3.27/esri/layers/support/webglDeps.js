// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/layers/support/WebGLRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-style dojox/gfx/matrix ../../kernel ../../lang ../../geometry/scaleUtils ../vectorTiles/core/promiseUtils ../vectorTiles/views/2d/engine/StageGL ../vectorTiles/views/2d/engine/webgl/WGLFeatureView ../vectorTiles/views/2d/layers/features/processors/SymbolProcessor ../vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer ../vectorTiles/views/2d/support/HighlightOptions ../vectorTiles/layers/support/TileInfo ../vectorTiles/views/2d/tiling/TileInfoView ../vectorTiles/geometry/SpatialReference ../vectorTiles/geometry/support/spatialReferenceUtils ../vectorTiles/renderers/SimpleRenderer ../vectorTiles/renderers/ClassBreaksRenderer ../vectorTiles/renderers/UniqueValueRenderer".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z,g,n,r,B){function C(g){Object.defineProperty(g,"width",{get:function(){return this.size[0]}});Object.defineProperty(g,"height",{get:function(){return this.size[1]}});Object.defineProperty(g,"center",{get:function(){var g=this.viewpoint.targetGeometry;return[g.x,g.y]}})}var D=q.default,F=t.SymbolProcessor,H=v.default,J=d("esri-will-change"),I=function(){var g,b=window.performance||{},n=b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow;if(void 0!==n)return function(){return n.call(b)};
g=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-g}}();q=d("ff");t=d("ie");v=d("webkit");var G=d("opera"),O=(new Date).getTime(),X=window.requestAnimationFrame;X||(X=window[(v&&"webkit"||q&&"moz"||G&&"o"||t&&"ms")+"RequestAnimationFrame"])||(X=function(g){var b=I(),n=Math.max(0,16-(b-O)),d=window.setTimeout(function(){g(I())},n);O=b+n;return d});c=c(null,
{surfaceType:"webgl",surface:null,map:null,layer:null,updateOnPan:!1,renderOnNav:!1,_canvas:null,_mapSR4:null,_dprWatchDelay:2E3,_dprTimer:null,_rendererEvalTimer:null,_redrawPromises:null,_defaultTileSize:512,_tileInfo:null,_tileInfoView:null,_wglContainer:null,_wglView:null,_tileRenderer:null,_tileRendererProps:null,_layerListenerHandles:null,_mapListenerHandles:null,_symbolProcessor:null,_returnCentroid:null,_started:!1,_renderRequested:!1,_updateRequested:!1,_frameRequested:!1,_frameHandle:null,
_viewState:null,_renderParameters:null,_updateParameters:null,_zooming:!1,_panning:!1,_scaleMatrix:null,_defaultTransition:"transform 500ms ease",constructor:function(g){this._frame=this._frame.bind(this);this._evalRendererChange=this._evalRendererChange.bind(this);this._redrawPromises=new Map;f.mixin(this,g);this._setup()},destroy:function(){this._teardown()},getNode:function(){return this._canvas},getEventSource:function(){return this.getNode()},setClip:function(g){},start:function(){this._started=
!0;this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=window.devicePixelRatio;this._watchDPR();this._updateMapView(this.map.extent)},stop:function(){this._started=!1;this._unwatchDPR();this._stopFrame()},redraw:function(){this._handleRendererChange()},hitTest:function(g,b){return this.layer.suspended?l.resolve(null):this._wglView.hitTest(g,b).then(function(g){return 0===g.length?null:this.layer._mode._featureMap[g[0]]}.bind(this))},syncHitTest:function(g,b){var n=this._wglContainer.prepareChildrenRenderParameters(this._renderParameters),
n=this._wglView.prepareChildrenRenderParameters(n);g=this._wglView._hitTest(n,g,b);this._scheduleRender();return this.layer._mode._featureMap[g[0]]},_setup:function(){this._initState();this._createWGLContainer();this._createTileRenderer();this._applyLayerSettings();this._createMapListeners();this._setViewState();this._initRendering()},_teardown:function(){this._destroyRendering();this._destroyMapListeners();this._destroyLayerListeners();this._destroyTileRenderer();this._destroyWGLContainer();this.stop();
this.surface.getEventSource().removeChild(this.getNode())},_createWGLContainer:function(){this._wglContainer=new p;this._canvas=this._wglContainer.createElement();J&&e.set(this._canvas,"will-change","transform");this._wglContainer.setElement(this._canvas);this.surface.getEventSource().appendChild(this._canvas);this._wglContainer.parent={requestChildRender:this._scheduleRender.bind(this)};this._wglContainer.attach(this._renderParameters)},_destroyWGLContainer:function(){this._wglContainer.detach(this._renderParameters);
this._wglContainer=null},_createTileRenderer:function(){var g=this.layer;this._tileRendererProps={layerView:{requestUpdate:function(){this._scheduleUpdate()}.bind(this)},highlightOptions:new y,layer:{objectIdField:g.objectIdField,geometryType:this._getNormalizedGeometryType(g),spatialReference:new z(g.spatialReference.toJson()),fields:g.fields,typeIdField:g.typeIdField,types:b.map(g.types,function(g){return g.toJson()}),outFields:g.getOutFields(),definitionExpression:null,renderer:this._getRenderer4(),
gdbVersion:null,historicMoment:null},tileInfoView:this._tileInfoView};this._tileRenderer=new H(this._tileRendererProps);this._installTileRenderer(this._tileRenderer)},_installTileRenderer:function(g){this._wglView=new D({highlightOptions:g.highlightOptions,tileInfoView:g.tileInfoView,layer:this.layer});g._featuresView=this._wglView;this._wglContainer.addChild(this._wglView);this._wglView._container=this._wglContainer},_getNormalizedGeometryType:function(g){return g.hasXYFootprint()?"esriGeometryPolygon":
g.geometryType},_destroyTileRenderer:function(){this._wglContainer.removeChild(this._wglView);this._wglView.dispose();this._tileRendererProps=this._tileRenderer=this._wglView=this._wglView._container=null},_applyLayerSettings:function(){this._wglContainer.opacity=this.layer.opacity;this._wglContainer.visible=!this.layer.suspended;this._createLayerListeners()},_createLayerListeners:function(){this._destroyLayerListeners();var g=this.layer;this._layerListenerHandles=[g.on("opacity-change",function(){this._wglContainer.opacity=
this.layer.opacity}.bind(this)),g.on("suspend",function(){this._wglContainer.visible=!1}.bind(this)),g.on("resume",function(){this._wglContainer.visible=!0}.bind(this)),g.on("renderer-change",function(){this._handleRendererChange()}.bind(this))]},_destroyLayerListeners:function(){b.forEach(this._layerListenerHandles,function(g){g.remove()});this._layerListenerHandles=null},_createMapListeners:function(){this._destroyMapListeners();var g=this.map;this._mapListenerHandles=[g.on("pan-start",function(g){this._panning=
!0;this.updateOnPan||this.renderOnNav||this._stopFrame()}.bind(this)),g.on("pan",function(g){this._applyPanEvent(g)}.bind(this)),g.on("pan-end",function(g){this._panning=!1;this._applyPanEvent(g)}.bind(this)),g.on("extent-change",function(g){e.set(this.getNode(),m._css.names.transition,"none");this._updateMapView(g.extent)}.bind(this)),g.on("zoom-start",function(g){this._zooming=!0;this._stopFrame()}.bind(this)),g.on("zoom-end",function(g){this._zooming=!1}.bind(this)),g.on("scale",function(g){if(!this.renderOnNav){e.set(this.getNode(),
m._css.names.transition,g.immediate?"none":this._defaultTransition);var b=this.map.__visibleDelta,b=h.translate(-b.x,-b.y);this._scaleMatrix=g=h.multiply(h.invert(b),g.matrix,b);this._applyTransform(g)}}.bind(this))]},_destroyMapListeners:function(){b.forEach(this._mapListenerHandles,function(g){g.remove()});this._mapListenerHandles=null},_getRenderer4:function(g){if(g=g||this.layer._getRenderer()){g=this._fixImageUrl(g.toJson());var b;"simple"===g.type?b=n.fromJSON(g):"classBreaks"===g.type?b=r.fromJSON(g):
"uniqueValue"===g.type?b=B.fromJSON(g):console.error("WebGLRenderer: unsupported layer.renderer!");return b}},_fixImageUrl:function(g){var n=[];switch(g.type){case "simple":n.push(g.symbol);break;case "uniqueValue":n.push(g.defaultSymbol);n=n.concat(b.map(g.uniqueValueInfos,function(g){return g.symbol}));break;case "classBreaks":n.push(g.defaultSymbol),n=n.concat(b.map(g.classBreakInfos,function(g){return g.symbol}))}var n=b.filter(n,function(g){return!!g}),d=this.layer._url.path+"/images/",a=this.layer._getToken();
b.forEach(n,function(g){var b=g.url;b&&(-1===b.search(/https?\:/)&&-1===b.indexOf("data:")&&(g.url=d+b),a&&-1!==g.url.search(/https?\:/)&&(g.url+="?token\x3d"+a))});return g},_setRenderer:function(g){this._tileRendererProps.layer.renderer=g;g=this._tileRenderer.getProcessorConfiguration();var b=this._symbolProcessor;b.setConfiguration(g);this._returnCentroid=b._getReturnCentroid(b.getRendererInfo().renderer);return g},_handleRendererChange:function(){this._rendererEvalTimer||(this._rendererEvalTimer=
setTimeout(this._evalRendererChange,0))},_cancelRendererEval:function(){clearTimeout(this._rendererEvalTimer);this._rendererEvalTimer=null},_evalRendererChange:function(){this._cancelRendererEval();var g=this._returnCentroid,b=this._setRenderer(this._getRenderer4());this._cancelRedraw();this._tileRenderer.needsProcessorReconfiguration(b)?(this._tileRenderer.applyConfiguration(b,!0),g!==this._returnCentroid&&this._returnCentroid?this.layer._mode.refresh():this._redrawView()):(this._tileRenderer.applyConfiguration(b,
!1),this._scheduleUpdate())},_redrawView:function(){this._wglView.children.slice(0).forEach(function(g,b){b=g.key.id;var n=this.layer._mode._tileRequests.get(b);n&&(g=this._redrawTile(n.tsTile,g,n.featureSet),g.isFulfilled()||this._redrawPromises.set(b,g))}.bind(this))},_redrawTile:function(g,b,n){return this._symbolProcessor.getMeshData(g,n).then(function(g){var n=b.key.id;this._redrawPromises["delete"](n);this.layer._mode._tileRequests.get(n)&&this._repaintTile(b,g.data)}.bind(this)).otherwise(function(g){this._redrawPromises["delete"](b.key.id)}.bind(this))},
_repaintTile:function(g,b){this._wglView.removeChild(g);g.attached=!1;this._tileRenderer.onTileData({tileKey:g.key.id,data:b});this._wglView.addChild(g)},_cancelRedraw:function(g){g?(g=this._redrawPromises.get(g))&&g.cancel():this._redrawPromises.forEach(function(g,b){g.cancel()})},_initState:function(){this._mapSR4=new z(this.map.spatialReference.toJson());var g={};C(g);this._viewState=f.mixin(g,{scale:0,size:[0,0],rotation:0,resolution:1,worldScreenWidth:0,spatialReference:this._mapSR4,viewpoint:{rotation:0,
scale:0,targetGeometry:{x:0,y:0},camera:null,clone:function(){var g=f.mixin({},this);g.targetGeometry&&(g.targetGeometry=f.mixin({},g.targetGeometry));return g}},toScreen:function(g,b){var n=this.center[1]+this.resolution*this.height*.5;g[0]=(b[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;g[1]=(n-b[1])/this.resolution;return g},toMap:function(g,b){var n=this.center[1]+this.resolution*this.height*.5;g[0]=this.center[0]-this.resolution*this.width*.5+b[0]*this.resolution;g[1]=n-
b[1]*this.resolution;return g},clone:function(){var g=f.mixin({},this);C(g);g.size&&(g.size=g.size.slice(0));g.viewpoint&&(g.viewpoint=g.viewpoint.clone());return g}});this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._tileInfo=u.create({spatialReference:this._mapSR4,size:this._defaultTileSize});this._tileInfoView=new A(this._tileInfo)},_initRendering:function(){var g=
this._tileRendererProps.layer;this._symbolProcessor=new F({configuration:null,service:{fields:g.fields,geometryType:g.geometryType,objectIdField:g.objectIdField},spatialReference:this._mapSR4,tileRenderer:this._tileRenderer});g=this._setRenderer(this._getRenderer4());this._tileRenderer.applyConfiguration(g,!0)},_destroyRendering:function(){this._symbolProcessor&&this._symbolProcessor.destroy();this._cancelRendererEval();this._cancelRedraw()},_updateMapView:function(g){this._setViewState(g);this._scheduleUpdate();
this._scheduleRender()},_setViewState:function(g){var b=this.map;if(b.loaded){g=g?g.getCenter():b.extent.getCenter();var n=this._viewState;n.viewpoint.targetGeometry=g.toJson();n.scale=n.viewpoint.scale=b.getScale();n.size=[b.width,b.height]}},_updateViewState:function(){var b=this._viewState;b.resolution=b.scale/(39.37*k.getUnitValueForSR(this.map.spatialReference)*96);var n=0;b.spatialReference.isWrappable&&(n=g.getInfo(b.spatialReference),n=n.valid[1]-n.valid[0]);b.worldScreenWidth=Math.round(n/
b.resolution)},_stopFrame:function(){this._frameRequested=this._updateRequested=this._renderRequested=!1;cancelAnimationFrame(this._frameHandle);this._frameHandle=null},_canRender:function(){return this.renderOnNav||!this._zooming&&!this._panning},_canUpdate:function(){return this.updateOnPan||!this._zooming&&!this._panning},_watchDPR:function(){this._unwatchDPR();this._dprTimer=setTimeout(function(){this._renderParameters.pixelRatio!==window.devicePixelRatio&&this._scheduleRender();this._watchDPR()}.bind(this),
this._dprWatchDelay)},_unwatchDPR:function(){clearTimeout(this._dprTimer);this._dprTimer=null},_scheduleRender:function(){this._started&&this._canRender()&&(this._renderRequested=!0,this._scheduleFrame())},_scheduleUpdate:function(){this._started&&this._canUpdate()&&(this._updateRequested=!0,this._scheduleFrame())},_scheduleFrame:function(){this._frameRequested||(this._frameRequested=!0,this._frameHandle=X(this._frame))},_frame:function(){this._frameRequested&&(this._frameRequested=!1,this._renderParameters.pixelRatio!==
window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=window.devicePixelRatio),this._updateParameters.stationary=this._renderParameters.stationary=!0,this._updateViewState(),this._renderRequested&&this._canRender()&&(this._renderRequested=!1,e.set(this._canvas,m._css.names.transition,"none"),this._applyTransform(),this._scaleMatrix=null,this._wglContainer.doRender(this._renderParameters)),this._updateRequested&&this._canUpdate()&&(this._updateRequested=!1,this.layer._mode.update(this._updateParameters)))},
_applyPanEvent:function(g){if(!this.renderOnNav){var b=h.translate(g.delta.x,g.delta.y),b=this._scaleMatrix?h.multiply(b,this._scaleMatrix):b;this._applyTransform(b)}(this.updateOnPan||this.renderOnNav)&&this._updateMapView(g.extent)},_applyTransform:function(g){g=g?m._css.matrix(g):"";e.set(this._canvas,m._css.names.transform,g)}});d("extend-esri")&&a.setObject("layers.support.WebGLRenderer",c,m);return c})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),
function(c,a,b,d,e,h){function m(d){if(d){if("function"!==typeof d.forEach){var a=Object.keys(d),f=a.map(function(b){return d[b]});return m(f).then(function(b){var d={};a.forEach(function(a,f){return d[a]=b[f]});return d})}var e=new b,c=[],h=d.length;0===h&&e.resolve(c);d.forEach(function(b){var d={promise:b};c.push(d);b.then(function(b){d.value=b}).catch(function(b){d.error=b}).then(function(){--h;0===h&&e.resolve(c)})});return e.promise}}Object.defineProperty(a,"__esModule",{value:!0});a.all=function(b){return e(b)};
a.filter=function(b,d){var a=b.slice();return e(b.map(function(b,a){return d(b,a)})).then(function(b){return a.filter(function(d,a){return b[a]})})};a.eachAlways=m;a.create=function(a,e){var f=new b(e);a(function(b){void 0===b&&(b=null);return d(b).then(f.resolve)},f.reject);return f.promise};a.reject=function(d){var a=new b;a.reject(d);return a.promise};a.resolve=function(d){void 0===d&&(d=null);var a=new b;a.resolve(d);return a.promise};a.after=function(d,a){void 0===a&&(a=null);var f=0,e=new b(function(){f&&
(clearTimeout(f),f=0)}),f=setTimeout(function(){e.resolve(a)},d);return e.promise};a.timeout=function(d,a,e){var f=0,l=new b(d.cancel);d.then(function(b){l.isFulfilled()||(l.resolve(b),f&&(clearTimeout(f),f=0))});d.catch(function(b){l.isFulfilled()||(l.reject(b),f&&(clearTimeout(f),f=0))});f=setTimeout(function(){var b=e||new h("promiseUtils:timeout","The wrapped promise did not resolve within "+a+" ms");l.reject(b)},a);return l.promise};a.wrapCallback=function(d){var a=!1,f=new b(function(){return a=
!0});d(function(b){a||f.resolve(b)});return f.promise};a.isThenable=function(b){return b&&"function"===typeof b.then};a.when=function(b){return d(b)}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(c,a,b,d,e){c=function(a){function e(b,d,l){var f=a.call(this,b,d,l)||this;return f instanceof e?f:new e(b,d,l)}b(e,a);e.prototype.toJSON=function(){return{name:this.name,message:this.message,details:d.clone(this.details),
dojoType:this.dojoType}};e.fromJSON=function(b){var d=new e(b.name,b.message,b.details);null!=b.dojoType&&(d.dojoType=b.dojoType);return d};return e}(e);c.prototype.type="error";return c})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return function(a,b){function d(){this.constructor=a}
c(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(c,a,b,d,e,h){function m(b){return void 0!==b&&null!==b}function f(b){return m(b)?b:""}function k(l,k,c){var p=c.match(/([^\(]+)(\([^\)]+\))?/i),h=a.trim(p[1]);c=k[l];var p=JSON.parse((p[2]?a.trim(p[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,
'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),g=p.utcOffset;if(-1===q.indexOf(h))h=a.getObject(h),a.isFunction(h)&&(c=h(c,l,k,p));else if("number"===typeof c||"string"===typeof c&&c&&!isNaN(Number(c)))switch(c=Number(c),h){case "NumberFormat":l=a.mixin({},p);k=parseFloat(l.places);if(isNaN(k)||0>k)l.places=Infinity;return d.format(c,l);case "DateString":c=new Date(c);if(p.local||p.systemLocale)return p.systemLocale?c.toLocaleDateString()+(p.hideTime?"":" "+c.toLocaleTimeString()):
c.toDateString()+(p.hideTime?"":" "+c.toTimeString());c=c.toUTCString();p.hideTime&&(c=c.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return c;case "DateFormat":return c=new Date(c),m(g)&&(c=b.add(c,"minute",c.getTimezoneOffset()-g)),e.format(c,p)}return f(c)}function l(b,d){var a;if(d)for(a in b)b.hasOwnProperty(a)&&(void 0===b[a]?delete b[a]:b[a]instanceof Object&&l(b[a],!0));else for(a in b)b.hasOwnProperty(a)&&void 0===b[a]&&delete b[a];return b}function p(b){if(!b||"object"!=typeof b||a.isFunction(b))return b;
if(b instanceof Int8Array||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Int32Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof Date)return new b.constructor(b);if(b instanceof ArrayBuffer)return b.slice(0,b.byteLength);if("function"===typeof b.clone)b=b.clone();else if("function"===typeof b.map&&"function"===typeof b.forEach)b=b.map(p);else if("function"===typeof b.notifyChange&&
"function"===typeof b.watch)b=b.clone();else{var d={},f,e,l={};for(f in b){e=b[f];var g=!(f in l)||l[f]!==e;if(!(f in d)||d[f]!==e&&g)d[f]=p?p(e):e}b=d}return b}var q=["NumberFormat","DateString","DateFormat"],t=/<\/?[^>]+>/g;return{equals:function(b,d){return b===d||"number"===typeof b&&isNaN(b)&&"number"===typeof d&&isNaN(d)||a.isFunction((b||{}).getTime)&&a.isFunction((d||{}).getTime)&&b.getTime()==d.getTime()||a.isFunction((b||{}).equals)&&b.equals(d)||a.isFunction((d||{}).equals)&&d.equals(b)||
!1},mixin:a.mixin,valueOf:function(b,d){for(var a in b)if(b[a]==d)return a;return null},stripTags:function(b){if(b){var d=typeof b;if("string"===d)b=b.replace(t,"");else if("object"===d)for(var a in b)(d=b[a])&&"string"===typeof d&&(d=d.replace(t,"")),b[a]=d}return b},substitute:function(b,d,e){var l,c,g;m(e)&&(a.isObject(e)?(l=e.first,c=e.dateFormat,g=e.numberFormat):l=e);if(d&&"{*}"!==d)return a.replace(d,a.hitch({obj:b},function(b,n){b=n.split(":");return 1<b.length?(n=b[0],b.shift(),k(n,this.obj,
b.join(":"))):c&&-1!==(c.properties||[]).indexOf(n)?k(n,this.obj,c.formatter||"DateString"):g&&-1!==(g.properties||[]).indexOf(n)?k(n,this.obj,g.formatter||"NumberFormat"):f(this.obj[n])}));d=[];var n;d.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+h.fieldsSummary+'"\x3e\x3ctbody\x3e');for(n in b)if(e=b[n],c&&-1!==(c.properties||[]).indexOf(n)?e=k(n,b,c.formatter||"DateString"):g&&-1!==(g.properties||[]).indexOf(n)&&(e=k(n,b,g.formatter||"NumberFormat")),d.push("\x3ctr\x3e\x3cth\x3e"+
n+"\x3c/th\x3e\x3ctd\x3e"+f(e)+"\x3c/td\x3e\x3c/tr\x3e"),l)break;d.push("\x3c/tbody\x3e\x3c/table\x3e");return d.join("")},filter:function(b,d,f){d=[a.isString(b)?b.split(""):b,f||c.global,a.isString(d)?new Function("item","index","array",d):d];f={};var e;b=d[0];for(e in b)d[2].call(d[e],b[e],e,b)&&(f[e]=b[e]);return f},startsWith:function(b,d,a){a=a||0;return b.indexOf(d,a)===a},endsWith:function(b,d,a){if("number"!==typeof a||!isFinite(a)||Math.floor(a)!==a||a>b.length)a=b.length;a-=d.length;b=
b.indexOf(d,a);return-1!==b&&b===a},isDefined:m,fixJson:l,clone:p}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(c,a,b){return function(){function d(a,c,m){this instanceof d&&(this.name=a,this.message=c&&b.substitute(c,m,function(b){return null==b?"":b})||"",this.details=m)}d.prototype.toString=function(){return"["+this.name+"]: "+this.message};return d}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z,g,n,r){function B(g){return{state:g.state,pixelRatio:g.pixelRatio,stationary:g.stationary}}var C={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(a){function c(){var g=null!==a&&a.apply(this,arguments)||this;g._clipData=new Float32Array(8);g._upperLeft=v.create();g._upperRight=v.create();g._lowerLeft=v.create();g._lowerRight=v.create();g._mat2=t.create();g._clipRendererInitialized=!1;g._contextVersion=null;g._labelFader=new m.default(g);
return g}b(c,a);Object.defineProperty(c.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});c.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};c.prototype.createElement=function(){var g=document.createElement("canvas");g.setAttribute("class","esri-display-object");return g};c.prototype.setElement=function(g){this.element=g};c.prototype.useContextVersion=function(g){this._renderingContext||(this._contextVersion=g)};c.prototype.attach=
function(g){if(this.attached)return!0;this._resizeCanvas(g);var b=A.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new n(b);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=B(g);this._painter||(this._painter=new l.default,this._painter.initialize(this._renderingContext));return a.prototype.attach.call(this,g)};c.prototype.detach=function(g){a.prototype.detach.call(this,
g);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};c.prototype.renderChildren=function(g){var b=this.children;g.drawPhase=k.WGLDrawPhase.FILL|k.WGLDrawPhase.LINE|k.WGLDrawPhase.MARKER|k.WGLDrawPhase.TEXT;for(var n=b.length,a=0;a<n;a++){var f=b[a];f.attached&&this.renderChild(f,g)}if(d("esri-featurelayer-webgl-labeling")){var e=g.context,r=e.getBoundFramebufferObject();e.bindFramebuffer(this._labelsFBO2);a=g.stationary;e.setClearColor(0,
0,0,a?0:1);e.clear(e.gl.COLOR_BUFFER_BIT);if(a)for(g.drawPhase=k.WGLDrawPhase.LABEL_ALPHA,g.labelFBO=this._labelsFBO1,g.labelStep=this._labelFader.step(),a=0;a<n;a++)f=b[a],f.attached&&this.renderChild(f,g);else this._labelFader.reset();e.bindFramebuffer(r);g.labelFBO=this._labelsFBO2;g.drawPhase=k.WGLDrawPhase.LABEL;for(a=0;a<n;a++)f=b[a],f.attached&&this.renderChild(f,g);g=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=g}};c.prototype.beforeRenderChildren=function(g,b){g=b.context;
var n=b.state,a=b.pixelRatio;if(b=this._painter){g.enforceState();b.update(n,a);var f=n.width;b=n.height;var e=n.rotation,f=Math.round(f*a);b=Math.round(b*a);this._boundFBO=g.getBoundFramebufferObject();!d("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===f&&this._labelsFBO1.height===b||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=z.createWithAttachments(g,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:f,height:b},{colorTarget:0,depthStencilTarget:0}),g.bindFramebuffer(this._labelsFBO1),g.setDepthWriteEnabled(!0),g.setStencilWriteMask(255),g.setClearColor(0,0,0,0),g.setClearDepth(1),g.setClearStencil(0),g.clear(g.gl.COLOR_BUFFER_BIT|g.gl.DEPTH_BUFFER_BIT|g.gl.STENCIL_BUFFER_BIT),g.setDepthWriteEnabled(!1),g.bindFramebuffer(this._boundFBO),this._labelsFBO2=z.createWithAttachments(g,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,
width:f,height:b},{colorTarget:0,depthStencilTarget:0}));if(n.spatialReference&&(n.spatialReference._isWrappable?n.spatialReference._isWrappable():n.spatialReference.isWrappable)){var r=q.toRadian(e),l=Math.abs(Math.cos(r)),c=Math.abs(Math.sin(r)),k=Math.round(n.worldScreenWidth);if(Math.round(f*l+b*c)<=k)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===f&&this._clipFBO.height===b||(this._clipFBO=new z(g,{colorTarget:0,depthStencilTarget:3,width:f,height:b}));var p=.5*f,m=.5*b,n=1/f,h=
1/b,a=.5*k*a,B=.5*(f*c+b*l),f=this._upperLeft,l=this._upperRight,c=this._lowerLeft,k=this._lowerRight;v.set(f,-a,-B);v.set(l,a,-B);v.set(c,-a,B);v.set(k,a,B);t.identity(this._mat2);t.translate(this._mat2,this._mat2,[p,m]);0!==e&&t.rotate(this._mat2,this._mat2,r);v.transformMat2d(f,f,this._mat2);v.transformMat2d(l,l,this._mat2);v.transformMat2d(c,c,this._mat2);v.transformMat2d(k,k,this._mat2);e=this._clipData;e.set([2*c[0]*n-1,2*(b-c[1])*h-1,2*k[0]*n-1,2*(b-k[1])*h-1,2*f[0]*n-1,2*(b-f[1])*h-1,2*l[0]*
n-1,2*(b-l[1])*h-1]);this._clipRendererInitialized||this._initializeClipRenderer(g);this._clipVBO.setData(e);this._boundFBO=g.getBoundFramebufferObject();g.bindFramebuffer(this._clipFBO);g.setDepthWriteEnabled(!0);g.setStencilWriteMask(255);g.setClearColor(0,0,0,0);g.setClearDepth(1);g.setClearStencil(0);g.clear(g.gl.COLOR_BUFFER_BIT|g.gl.DEPTH_BUFFER_BIT|g.gl.STENCIL_BUFFER_BIT);g.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};c.prototype.afterRenderChildren=function(g,b){this._clipFrame&&
this._clipRendererInitialized&&(g=this._renderingContext,g.bindFramebuffer(this._boundFBO),this._boundFBO=null,g.bindVAO(this._clipVAO),g.bindProgram(this._clipStencilProgram),g.setDepthWriteEnabled(!1),g.setDepthTestEnabled(!1),g.setStencilTestEnabled(!0),g.setBlendingEnabled(!1),g.setColorMask(!1,!1,!1,!1),g.setStencilOp(7680,7680,7681),g.setStencilWriteMask(255),g.setStencilFunction(519,1,255),g.drawElements(4,6,5123,0),g.bindVAO(),g.setColorMask(!0,!0,!0,!0),g.setBlendingEnabled(!0),g.setStencilFunction(514,
1,255),this._blitRenderer.render(g,this._clipFBO.colorTexture,9728,1),g.setStencilTestEnabled(!1))};c.prototype.doRender=function(g){var b=this.element.style;this.visible?(b.display="block",b.opacity=""+this.opacity,this._resizeCanvas(g),a.prototype.doRender.call(this,g),this._cachedRenderParams=B(g)):b.display="none"};c.prototype.takeScreenshot=function(g){void 0===g&&(g={});var b=g.pixelRatio||1;this._cachedRenderParams.pixelRatio=b;var n=Math.round(b*this._cachedRenderParams.state.width),d=Math.round(b*
this._cachedRenderParams.state.height),a=0,f=0,r=n,l=d,c=n,k=d;if(c=g.area)a=Math.round(b*c.x),f=Math.round(b*c.y),r=Math.round(b*c.width),l=Math.round(b*c.height);void 0!==g.width&&void 0!==g.height?(c=g.width/g.height,l*c<r?(c*=l,a+=Math.floor((r-c)/2),r=Math.floor(c)):(c=r/c,f+=Math.floor((l-c)/2),l=Math.floor(c)),c=g.width,k=g.height):(c=r,k=l);b=document.createElement("canvas");b.width=c;b.height=k;var p=b.getContext("2d"),m=new Uint8Array(r*l*4),h=this._renderingContext,B=z.create(h,{colorTarget:1,
depthStencilTarget:3,width:n,height:d});h.bindFramebuffer(B);h.setViewport(0,0,n,d);var q=this._cachedRenderParams,t=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT);q.context=this._renderingContext;q.painter=this._painter;this.beforeRenderChildren(q,q);if(void 0!==g.rotation&&null!==g.rotation){var t=q.state,
v=t.clone();v.viewpoint.rotation=g.rotation;q.state=v;this.renderChildren(q);q.state=t}else this.renderChildren(q);this.afterRenderChildren(q,q);B.readPixels(a,d-(f+l),r,l,6408,5121,m);h.bindFramebuffer();h=p.getImageData(0,0,c,k);if(0!==a||0!==f||r!==n||l!==d||c!==n||k!==d)y.resampleHermite(m,r,l,h.data,c,k,!0);else{f=l-1;l=0;B=4*r;for(v=t=a=d=n=r=q=void 0;l<f;){t=l*B;v=f*B;for(q=0;q<B;q+=4)r=m[t+q],n=m[t+q+1],d=m[t+q+2],a=m[t+q+3],m[t+q]=m[v+q],m[t+q+1]=m[v+q+1],m[t+q+2]=m[v+q+2],m[t+q+3]=m[v+q+
3],m[v+q]=r,m[v+q+1]=n,m[v+q+2]=d,m[v+q+3]=a;l++;f--}r=h.data;n=m.length;for(f=0;f<n;f++)r[f]=m[f]}m=h.data;l=m.length;for(f=0;f<l;f+=4)a=m[f+3],0<a&&(d=a/255,r=Math.floor(m[f+0]/d),n=Math.floor(m[f+1]/d),d=Math.floor(m[f+2]/d),m[f+0]=255>=r?r:255,m[f+1]=255>=n?n:255,m[f+2]=255>=d?d:255);p.putImageData(h,0,0);p=C[g.format?g.format.toLowerCase():"png"];m=1;void 0!==g.quality&&(m=g.quality/100);g=b.toDataURL(p,m);return e.resolve({dataURL:g,x:0,y:0,width:c,height:k})};c.prototype.prepareChildrenRenderParameters=
function(g){if(!this.attached||!this._renderingContext)return null;g=B(g);var b=this._renderingContext,n=b.gl;b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT);b.setViewport(0,0,this.element.width,this.element.height);b.setDepthWriteEnabled(!1);g.context=b;g.painter=this._painter;return g};c.prototype.attachChild=function(g,b){return g.attach(b)};c.prototype.detachChild=
function(g,b){return g.detach(b)};c.prototype.renderChild=function(g,b){return g.processRender(b)};c.prototype._resizeCanvas=function(g){var b=this.element,n=b.style,d=g.state,a=g.pixelRatio;g=Math.round(d.width*a);a=Math.round(d.height*a);if(b.width!==g||b.height!==a)b.width=g,b.height=a;n.width=d.width+"px";n.height=d.height+"px"};c.prototype._initializeClipRenderer=function(b){if(this._clipRendererInitialized)return!0;this._blitRenderer=new f;var n={a_pos:0},d=new g(b,p.stencilVS,p.stencilFS,n);
if(!d)return!1;var a=u.createVertex(b,35040,32),e=new Uint16Array([0,1,2,2,1,3]),e=u.createIndex(b,35044,e);b=new r(b,n,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:a},e);this._clipStencilProgram=d;this._clipVBO=a;this._clipVAO=b;return this._clipRendererInitialized=!0};return c}(h)})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(c,
a,b,d){var e;(function(b){b[b.BEFORE=0]="BEFORE";b[b.ATTACHING=1]="ATTACHING";b[b.DETACHING=2]="DETACHING";b[b.RENDERING=3]="RENDERING";b[b.AFTER=4]="AFTER";b[b.DONE=5]="DONE"})(e||(e={}));return function(d){function a(){var b=null!==d&&d.apply(this,arguments)||this;b._childrenSet=new Set;b._childrenToAttach=[];b._childrenToDetach=[];b._renderPhase=e.DONE;b.children=[];return b}b(a,d);Object.defineProperty(a.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});
a.prototype.detach=function(b){var d=this.children.concat(this._childrenToDetach);b=this.prepareChildrenRenderParameters(b);for(var a=0;a<d.length;a++){var f=d[a];f.attached&&(this.detachChild(f,b),f.attached=!1,f.parent=null)}};a.prototype.doRender=function(b){var d=this.prepareChildrenRenderParameters(b);this._renderPhase=e.BEFORE;this.beforeRenderChildren(b,d);this._renderPhase=e.ATTACHING;this.attachChildren(d);this._renderPhase=e.DETACHING;for(var a=this._childrenToDetach;0<a.length;){var f=
a.shift();this.detachChild(f,d);f.attached=!1;f.parent=null}this._renderPhase=e.RENDERING;this.renderChildren(d);this._renderPhase=e.AFTER;this.afterRenderChildren(b,d);this._renderPhase=e.DONE};a.prototype.addChild=function(b){return this.addChildAt(b,this.children.length)};a.prototype.addChildAt=function(b,d){void 0===d&&(d=this.numChildren);if(!b||this.contains(b))return b;var a=b.parent;a&&a!==this&&a.removeChild(b);d>=this.numChildren?this.children.push(b):this.children.splice(d,0,b);this._childrenSet.add(b);
d=this._childrenToDetach.indexOf(b);-1<d&&this._childrenToDetach.splice(d,1);this._childrenToAttach.push(b);this._renderPhase>=e.RENDERING&&this.requestRender();return b};a.prototype.contains=function(b){return this._childrenSet.has(b)};a.prototype.getChildIndex=function(b){return this.children.indexOf(b)};a.prototype.getChildAt=function(b){return 0>b||b>this.children.length?null:this.children[b]};a.prototype.removeAllChildren=function(){for(var b=this.numChildren;b--;)this.removeChildAt(0)};a.prototype.removeChild=
function(b){return this.contains(b)?this.removeChildAt(this.getChildIndex(b)):b};a.prototype.removeChildAt=function(b){if(0>b||b>=this.children.length)return null;b=this.children.splice(b,1)[0];this._childrenSet["delete"](b);if(b.attached)this._childrenToDetach.push(b),this._renderPhase>=e.RENDERING&&this.requestRender();else{var d=this._childrenToAttach.indexOf(b);-1<d&&this._childrenToAttach.splice(d,1)}return b};a.prototype.requestChildRender=function(b){b&&b.parent===this&&this._renderPhase>=
e.RENDERING&&this.requestRender()};a.prototype.setChildIndex=function(b,d){var a=this.getChildIndex(b);-1<a&&(this.children.splice(a,1),this.children.splice(d,0,b),this._renderPhase>=e.RENDERING&&this.requestRender())};a.prototype.sortChildren=function(b){this._renderPhase>e.RENDERING&&this.requestRender();return this.children.sort(b)};a.prototype.attachChildren=function(b){var d=this._childrenToAttach;if(0!==d.length)for(var a=0,e=!1;!e;)e=d[a],this.attachChild(e,b)?(e.attached=!0,e.parent=this,
d.splice(a,1)):++a,e=d.length===a};a.prototype.renderChildren=function(b){for(var d=this.children,a=d.length,e=0;e<a;e++){var f=d[e];f.attached&&this.renderChild(f,b)}};a.prototype.beforeRenderChildren=function(b,d){};a.prototype.attachChild=function(b,d){return b.attach(d)};a.prototype.detachChild=function(b,d){b.detach(d)};a.prototype.renderChild=function(b,d){b.processRender(d)};a.prototype.afterRenderChildren=function(b,d){};return a}(d)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./Evented"],function(c,a,b,d){return function(d){function a(){var b=null!==d&&d.apply(this,arguments)||this;b._renderRequestedCalled=!1;b._attached=!1;b._opacity=1;b.renderRequested=!1;b._visible=!0;return b}b(a,d);Object.defineProperty(a.prototype,"attached",{get:function(){return this._attached},set:function(b){this._attached!==b&&((this._attached=b)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"opacity",{get:function(){return this._opacity},set:function(b){this._opacity!==b&&(this._opacity=b,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(b){this._visible!==b&&(this._visible=b,this.requestRender())},enumerable:!0,configurable:!0});a.prototype.attach=function(b){return!0};a.prototype.detach=function(b){};a.prototype.processRender=
function(b){this._renderRequestedCalled=!1;this.doRender(b);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};a.prototype.requestRender=function(){var b=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);b!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};a.prototype.dispose=function(){};return a}(d.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(c,a,b,d,e){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function b(){}b.prototype.on=function(b,a){return d.after(this,"on"+b,a,!0)};b.prototype.once=function(b,d){return e.once(this,b,d)};b.prototype.emit=function(b){e.emit(this,b,this)};b.prototype.hasEventListener=function(b){b="on"+b;return!(!this[b]||!this[b].after)};return b}();a.Evented=c;a.EventedMixin=function(a){return function(a){function f(){return null!==
a&&a.apply(this,arguments)||this}b(f,a);f.prototype.on=function(b,a){return d.after(this,"on"+b,a,!0)};f.prototype.once=function(b,d){return e.once(this,b,d)};f.prototype.emit=function(b,d){e.emit(this,b,d)};f.prototype.hasEventListener=function(b){b="on"+b;return!(!this[b]||!this[b].after)};return f}(a)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function b(b,a){void 0===
a&&(a=250);this.duration=a;this._startTime=this._lastTime=0;this._parent=b}b.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};b.prototype.step=function(){var b=performance.now();if(0===this._lastTime)return this._lastTime=b,this._parent.requestRender(),0;var a=b-this._lastTime;this._lastTime=b;b-this._startTime<2*this.duration&&this._parent.requestRender();return a/this.duration};return b}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),
function(c,a,b,d,e,h){return function(){function a(){this._initialized=!1}a.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};a.prototype.render=function(b,d,a,e){b&&(this._initialized||this._initialize(b),b.setBlendFunctionSeparate(1,771,1,771),b.bindVAO(this._vertexArrayObject),b.bindProgram(this._program),d.setSamplingMode(a),b.bindTexture(d,0),this._program.setUniform1i("u_tex",
0),this._program.setUniform1f("u_opacity",e),b.drawArrays(5,0,4),b.bindVAO())};a.prototype._initialize=function(a){if(this._initialized)return!0;var f={a_pos:0,a_tex:1},c=new e(a,b.bitblitVS,b.bitblitFS,f);if(!c)return!1;var p=new Int8Array(16);p[0]=-1;p[1]=-1;p[2]=0;p[3]=0;p[4]=1;p[5]=-1;p[6]=1;p[7]=0;p[8]=-1;p[9]=1;p[10]=0;p[11]=1;p[12]=1;p[13]=1;p[14]=1;p[15]=1;a=new h(a,f,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,
stride:4,normalized:!1,divisor:0}]},{geometry:d.createVertex(a,35044,p)});this._program=c;this._vertexArrayObject=a;return this._initialized=!0};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(c,a,b,d,e,h,m){c=new m;m.parse(b,c);m.parse(d,c);m.parse(e,
c);m.parse(h,c);return c})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(c,a,b){return function(){function d(b){if(b)for(var d in b)this[d]=b[d]}d.parse=function(d,a){d=b.parse(d).getElementsByTagName("snippet");for(var e=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,f=/[\$\s]+/g,c=/\(([^\(\)]*)\)/,l=0;l<d.length;l++){for(var p=d[l].getAttribute("name"),h=d[l].textContent;;){var t=h.match(e);if(null==t)break;var v=t[0].replace(f,
""),y=v.match(c),u=void 0;y&&(u=y[1].split(",").map(function(b){return b.trim()}));v=v.replace(c,"");u=a._instantiate(v,u);h=h.replace(t[0],u)}a[p]=h}};d.prototype._instantiate=function(b,d){b=this[b];for(d||(d=[]);;){var a=b.match(/\$(\d+)/);if(null==a)break;var e=parseInt(a[1],10);b=b.replace(a[0],d[e])}return b};return d}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(c){c.getObject("xml.parser",
!0,dojox);dojox.xml.parser.parse=function(a,b){var d=c.doc,e;b=b||"text/xml";if(a&&c.trim(a)&&"DOMParser"in c.global){e=(new DOMParser).parseFromString(a,b);a=e.documentElement;if("parsererror"==a.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==a.namespaceURI){if(d=a.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])d=d.firstChild.data;throw Error("Error parsing text "+a.firstChild.data+" \n"+d);}return e}if("ActiveXObject"in c.global){d=
function(b){return"MSXML"+b+".DOMDocument"};d=["Microsoft.XMLDOM",d(6),d(4),d(3),d(2)];c.some(d,function(b){try{e=new ActiveXObject(b)}catch(f){return!1}return!0});if(a&&e&&(e.async=!1,e.loadXML(a),a=e.parseError,0!==a.errorCode))throw Error("Line: "+a.line+"\nCol: "+a.linepos+"\nReason: "+a.reason+"\nError Code: "+a.errorCode+"\nSource: "+a.srcText);if(e)return e}else if(d.implementation&&d.implementation.createDocument){if(a&&c.trim(a)&&d.createElement){b=d.createElement("xml");b.innerHTML=a;var h=
d.implementation.createDocument("foo","",null);c.forEach(b.childNodes,function(b){h.importNode(b,!0)});return h}return d.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(a,b){if(1<arguments.length)return dojox.xml.parser.replaceChildren(a,(a.ownerDocument||c.doc).createTextNode(b)),b;if(void 0!==a.textContent)return a.textContent;var d="";a&&c.forEach(a.childNodes,function(b){switch(b.nodeType){case 1:case 5:d+=dojox.xml.parser.textContent(b);break;case 3:case 2:case 4:d+=
b.nodeValue}});return d};dojox.xml.parser.replaceChildren=function(a,b){var d=[];c.isIE&&c.forEach(a.childNodes,function(b){d.push(b)});dojox.xml.parser.removeChildren(a);c.forEach(d,c.destroy);c.isArray(b)?c.forEach(b,function(b){a.appendChild(b)}):a.appendChild(b)};dojox.xml.parser.removeChildren=function(a){for(var b=a.childNodes.length;a.hasChildNodes();)a.removeChild(a.firstChild);return b};dojox.xml.parser.innerXML=function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?
(new XMLSerializer).serializeToString(a):null};return dojox.xml.parser})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(c,a,b){return function(){function d(a,c,m,f,k){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=a;this._bufferType=c;this._usage=m;this._id=d._nextId++;this._glName=this._context.gl.createBuffer();b("esri-webgl-debug")&&a.instanceCounter.incrementCount(1);
f&&this.setData(f,k)}d.createIndex=function(b,a,c,f){return new d(b,34963,a,c,f)};d.createVertex=function(b,a,c){return new d(b,34962,a,c)};Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"usage",
{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});d.prototype.dispose=
function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};d.prototype.setData=function(b,d){if(b){if("number"===typeof b){if(0>b&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&d)switch(this._indexType=d,this._size=b,d){case 5123:b*=2;break;case 5125:b*=4}}else d=b.byteLength,b instanceof Uint16Array&&(d/=2,this._indexType=5123),b instanceof
Uint32Array&&(d/=4,this._indexType=5125),this._size=d,ArrayBuffer.isView(b)&&(b=b.buffer);d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,b,this._usage);this._context.bindVAO(d)}};d.prototype.setSubData=function(b,d,a,f){void 0===d&&(d=0);void 0===a&&(a=0);if(b){(0>d||d>=this._size)&&console.error("offset is out of range!");var e=d,c=a,p=f,m=b.byteLength;b instanceof Uint16Array&&(m/=2,e*=2,c*=2,p*=2);b instanceof
Uint32Array&&(m/=4,e*=4,c*=4,p*=4);void 0===f&&(f=m-1);a>=f&&console.error("end must be bigger than start!");d+a-f>this._size&&console.error("An attempt to write beyond the end of the buffer!");d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);a=this._context.gl;b=ArrayBuffer.isView(b)?b.buffer:b;a.bufferSubData(this._bufferType,e,b.slice(c,p));this._context.bindVAO(d)}};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require",
"exports","dojo/has","./ShaderTranspiler"],function(c,a,b,d){var e=b("dojo-debug-messages");return function(){function a(d,f,e,c,p){void 0===p&&(p={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4=
{};d||console.error("RenderingContext isn't initialized!");0===f.length&&console.error("Shaders source should not be empty!");this._context=d;this._vertexShaderSource=f;this._fragmentShaderSource=e;if(Array.isArray(p))for(f=0;f<p.length;f++)this._defines[p[f]]="1";else this._defines=p;this._id=a._nextId++;this._locations=c;b("esri-webgl-debug")&&d.instanceCounter.incrementCount(3)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.getDefine=function(b){return this._defines[b]};a.prototype.dispose=function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),
this._glName=null);b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);this._context=null}};a.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var b=this._context.gl,a=b.createProgram();b.attachShader(a,this._vShader);b.attachShader(a,this._fShader);for(var d in this._locations)b.bindAttribLocation(a,this._locations[d],d);b.linkProgram(a);
b.getProgramParameter(a,b.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+b.getProgramParameter(a,b.VALIDATE_STATUS)+", gl error ["+b.getError()+"]infoLog: "+b.getProgramInfoLog(a));this._glName=a;this._initialized=!0}};a.prototype.getUniformLocation=function(b){this.initialize();void 0===this._nameToUniformLocation[b]&&(this._nameToUniformLocation[b]=this._context.gl.getUniformLocation(this._glName,b));return this._nameToUniformLocation[b]};a.prototype.hasUniform=function(b){return null!==
this.getUniformLocation(b)};a.prototype.getAttribLocation=function(b){this.initialize();void 0===this._nameToAttribLocation[b]&&(this._nameToAttribLocation[b]=this._context.gl.getAttribLocation(this._glName,b));return this._nameToAttribLocation[b]};a.prototype.setUniform1i=function(b,a){var d=this._nameToUniform1[b];if(void 0===d||a!==d)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(b),a),this._nameToUniform1[b]=a};a.prototype.setUniform1f=function(b,a){var d=this._nameToUniform1[b];
if(void 0===d||a!==d)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(b),a),this._nameToUniform1[b]=a};a.prototype.setUniform1fv=function(b,d){var e=this._nameToUniform2[b];void 0!==e&&a._arraysEqual(d,e)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(b),d),void 0===e?this._nameToUniform2[b]=new Float32Array(d):e.set(d))};a.prototype.setUniform2f=function(b,a,d){var e=this._nameToUniform2[b];if(void 0===e||a!==e[0]||d!==e[1])this._context.bindProgram(this),
this._context.gl.uniform2f(this.getUniformLocation(b),a,d),void 0===e?this._nameToUniform2[b]=new Float32Array([a,d]):(e[0]=a,e[1]=d)};a.prototype.setUniform2fv=function(b,d){e&&0!==d.length%2&&console.error("Value array must have even number of elements!");var f=this._nameToUniform2[b];void 0!==f&&a._arraysEqual(d,f)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(b),d),void 0===f?this._nameToUniform2[b]=new Float32Array(d):f.set(d))};a.prototype.setUniform3f=
function(b,a,d,e){var f=this._nameToUniform3[b];if(void 0===f||a!==f[0]||d!==f[1]||e!==f[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(b),a,d,e),void 0===f?this._nameToUniform3[b]=new Float32Array([a,d,e]):(f[0]=a,f[1]=d,f[2]=e)};a.prototype.setUniform3fv=function(b,d){e&&0!==d.length%3&&console.error("Value array must contain sets of three values!");var f=this._nameToUniform3[b];void 0!==f&&a._arraysEqual(d,f)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(b),
d),void 0===f?this._nameToUniform3[b]=new Float32Array(d):f.set(d))};a.prototype.setUniform4f=function(b,a,d,e,c){var f=this._nameToUniform4[b];if(void 0===f||a!==f[0]||d!==f[1]||e!==f[2]||c!==f[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(b),a,d,e,c),void 0===f?this._nameToUniform4[b]=new Float32Array([a,d,e,c]):(f[0]=a,f[1]=d,f[2]=e,f[3]=c)};a.prototype.setUniform4fv=function(b,d){e&&0!==d.length%4&&console.error("Value array must contain sets of four values!");
var f=this._nameToUniform4[b];void 0!==f&&a._arraysEqual(d,f)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(b),d),void 0===f?this._nameToUniform4[b]=new Float32Array(d):f.set(d))};a.prototype.setUniformMatrix3fv=function(b,d,c){void 0===c&&(c=!1);e&&0!==d.length%9&&console.error("Matrix array must contain sets ot 9 elements!");var f=this._nameToUniformMatrix3[b];void 0!==f&&(9===f.length?a._matrix3Equal(f,d):a._arraysEqual(d,f))||(this._context.bindProgram(this),
this._context.gl.uniformMatrix3fv(this.getUniformLocation(b),c,d),void 0===f?this._nameToUniformMatrix3[b]=new Float32Array(d):f.set(d))};a.prototype.setUniformMatrix4fv=function(b,d,c){void 0===c&&(c=!1);e&&0!==d.length%16&&console.error("Matrix array must contain sets ot 16 elements!");var f=this._nameToUniformMatrix4[b];void 0!==f&&(16===f.length?a._matrix4Equal(f,d):a._arraysEqual(d,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(b),c,d),void 0===
f?this._nameToUniformMatrix4[b]=new Float32Array(d):f.set(d))};a._padToThree=function(b){var d=b.toString();1E3>b&&(d=("  "+b).slice(-3));return d};a.prototype._addLineNumbers=function(b){var d=2;return b.replace(/\n/g,function(){return"\n"+a._padToThree(d++)+":"})};a.prototype._loadShader=function(b){var a=35633===b,e=a?this._vertexShaderSource:this._fragmentShaderSource,c;c="";for(var p in this._defines)c+="#define "+p+" "+this._defines[p]+"\n";c+=e;"webgl2"===this._context.contextVersion&&(c=d.transpileShader(c,
a?"vertex":"fragment"));a=this._context.gl;b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);a.getShaderParameter(b,a.COMPILE_STATUS)||(console.error(a.getShaderInfoLog(b)),console.error(this._addLineNumbers(c)),"webgl2"===this._context.contextVersion&&(console.log("Shader source before transpilation:"),console.log(e)));return b};a._matrix4Equal=function(b,d){e&&(16===b.length&&16===d.length||console.error("Matrix object must contain 16 elements!"));return b[0]===d[0]&&b[1]===d[1]&&b[2]===
d[2]&&b[3]===d[3]&&b[4]===d[4]&&b[5]===d[5]&&b[6]===d[6]&&b[7]===d[7]&&b[8]===d[8]&&b[9]===d[9]&&b[10]===d[10]&&b[11]===d[11]&&b[12]===d[12]&&b[13]===d[13]&&b[14]===d[14]&&b[15]===d[15]};a._matrix3Equal=function(b,d){e&&(9===b.length&&9===d.length||console.error("Matrix object must contain 16 elements!"));return b[0]===d[0]&&b[1]===d[1]&&b[2]===d[2]&&b[3]===d[3]&&b[4]===d[4]&&b[5]===d[5]&&b[6]===d[6]&&b[7]===d[7]&&b[8]===d[8]};a._arraysEqual=function(b,d){if(b.length!==d.length)return!1;for(var a=
0;a<b.length;++a)if(b[a]!==d[a])return!1;return!0};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(c,a,b,d){function e(b){return b.map(function(b){return"eof"!==b.type?b.data:""}).join("")}function h(b,d,a,e){e=e||a;for(var f=0;f<b.length;f++){var c=b[f];if("ident"===c.type&&c.data===a)return e in d?d[e]++:d[e]=0,h(b,d,e+"_"+d[e],e)}return a}function m(b,d,a){void 0===
a&&(a="afterVersion");var e={data:"\n",type:"whitespace"},f=function(d){return d<b.length?/[^\r\n]$/.test(b[d].data):!1},c=function(b){for(var d=-1,g=0,n=-1,e=0;e<b.length;e++){var f=b[e];"preprocessor"===f.type&&(f.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++g:f.data.match(/\#endif\s*.*/)&&--g);("afterVersion"===a||"afterPrecision"===a)&&"preprocessor"===f.type&&/^#version/.test(f.data)&&(n=Math.max(n,e));if("afterPrecision"===a&&"keyword"===f.type&&"precision"===f.data){a:{for(f=e;f<b.length;f++){var c=
b[f];if("operator"===c.type&&";"===c.data)break a}f=null}if(null===f)throw Error("precision statement not followed by any semicolons!");n=Math.max(n,f)}d<n&&0===g&&(d=e)}return d+1}(b);f(c-1)&&b.splice(c++,0,e);for(var l=0;l<d.length;l++){var k=d[l];b.splice(c++,0,k)}f(c-1)&&f(c)&&b.splice(c,0,e)}Object.defineProperty(a,"__esModule",{value:!0});var f=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];a.transpileShader=function(a,c){a=d(a);var l;a:{l=
"100";var k="300 es";void 0===l&&(l="100");void 0===k&&(k="300 es");for(var t=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,v=0;v<a.length;v++){var y=a[v];if("preprocessor"===y.type){var u=t.exec(y.data);if(u)if(t=u[1].replace(/\s\s+/g," "),t===k){l=t;break a}else if(t===l){y.data="#version "+k;break a}else throw Error("unknown glsl version: "+t);}}a.splice(0,0,{type:"preprocessor",data:"#version "+k},{type:"whitespace",data:"\n"});l=null}if("300 es"===l)throw Error("shader is already glsl 300 es");
t=y=null;v={};u={};for(l=0;l<a.length;++l)switch(k=a[l],k.type){case "keyword":"vertex"===c&&"attribute"===k.data?k.data="in":"varying"===k.data&&(k.data="vertex"===c?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(k.data.trim())&&(k.data=k.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===c&&"gl_FragColor"===k.data){if(!y){var y=h(a,v,"fragColor"),A=void 0;void 0===A&&(A="lowp");m(a,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:A},
{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:y},{type:"operator",data:";"}],"afterPrecision")}k.data=y}else"fragment"===c&&"gl_FragDepthEXT"===k.data&&(t||(t=h(a,v,"gl_FragDepth")),k.data=t);break;case "ident":if(0<=b.indexOf(k.data)){if(A="vertex"===c)a:{for(A=l-1;0<=A;A--){var z=a[A];if("whitespace"!==z.type&&"block-comment"!==z.type)if("keyword"===z.type){if("attribute"===z.data||"in"===z.data){A=!0;break a}}else break}A=!1}if(A)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");
k.data in u||(u[k.data]=h(a,v,k.data));k.data=u[k.data]}}for(l=a.length-1;0<=l;--l)k=a[l],"preprocessor"===k.type&&((c=k.data.match(/\#extension\s+(.*)\:/))&&c[1]&&0<=f.indexOf(c[1].trim())&&(c=a[l+1],a.splice(l,c&&"whitespace"===c.type?2:1)),(c=k.data.match(/\#ifdef\s+(.*)/))&&c[1]&&0<=f.indexOf(c[1].trim())&&(k.data="#if 1"),(c=k.data.match(/\#ifndef\s+(.*)/))&&c[1]&&0<=f.indexOf(c[1].trim())&&(k.data="#if 0"));return e(a)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require",
"exports"],function(c,a){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(c){"use strict;";return function(a){var b=c(),d=[],d=d.concat(b(a));return d=d.concat(b(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(c,a,b){"use strict;";var d="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function e(b){b.length&&
z.push({type:d[v],data:b,position:r,line:g,column:n})}function h(){A=A.length?[]:A;if("/"===u&&"*"===y)return r=t+q-1,v=0,u=y,q+1;if("/"===u&&"/"===y)return r=t+q-1,v=1,u=y,q+1;if("#"===y)return v=2,r=t+q,q;if(/\s/.test(y))return v=9,r=t+q,q;B=/\d/.test(y);C=/[^\w_]/.test(y);r=t+q;v=B?4:C?3:9999;return q}function m(){if(("\r"===y||"\n"===y)&&"\\"!==u)return e(A.join("")),v=999,q;A.push(y);u=y;return q+1}function f(){if("."===u&&/\d/.test(y))return v=5,q;if("/"===u&&"*"===y)return v=0,q;if("/"===u&&
"/"===y)return v=1,q;if("."===y&&A.length){for(;k(A););v=5;return q}if(";"===y||")"===y||"("===y){if(A.length)for(;k(A););e(y);v=999;return q+1}var b=2===A.length&&"\x3d"!==y;if(/[\w_\d\s]/.test(y)||b){for(;k(A););v=999;return q}A.push(y);u=y;return q+1}function k(b){var g=0,d,n;do{d=a.indexOf(b.slice(0,b.length+g).join(""));n=a[d];if(-1===d){if(0<g--+b.length)continue;n=b.slice(0,1).join("")}e(n);r+=n.length;A=A.slice(n.length);return A.length}while(1)}function l(){if("."===y||/[eE]/.test(y))return A.push(y),
v=5,u=y,q+1;if("x"===y&&1===A.length&&"0"===A[0])return v=11,A.push(y),u=y,q+1;if(/[^\d]/.test(y))return e(A.join("")),v=999,q;A.push(y);u=y;return q+1}function p(){"f"===y&&(A.push(y),u=y,q+=1);if(/[eE]/.test(y)||"-"===y&&/[eE]/.test(u))return A.push(y),u=y,q+1;if(/[^\d]/.test(y))return e(A.join("")),v=999,q;A.push(y);u=y;return q+1}var q=0,t=0,v=999,y,u,A=[],z=[],g=1,n=0,r=0,B=!1,C=!1,D="",F;return function(d){z=[];if(null!==d){d=d.replace?d.replace(/\r\n/g,"\n"):d;q=0;D+=d;for(F=D.length;y=D[q],
q<F;){d=q;switch(v){case 0:"/"===y&&"*"===u?(A.push(y),e(A.join("")),v=999):(A.push(y),u=y);q+=1;break;case 1:q=m();break;case 2:q=m();break;case 3:q=f();break;case 4:q=l();break;case 11:/[^a-fA-F0-9]/.test(y)?(e(A.join("")),v=999):(A.push(y),u=y,q+=1);break;case 5:q=p();break;case 9999:if(/[^\d\w_]/.test(y)){var a=A.join("");v=-1<c.indexOf(a)?8:-1<b.indexOf(a)?7:6;e(A.join(""));v=999}else A.push(y),u=y,q+=1;break;case 9:/[^\s]/g.test(y)?(e(A.join("")),v=999):(A.push(y),u=y,q+=1);break;case 999:q=
h()}if(d!==q)switch(D[d]){case "\n":n=0;++g;break;default:++n}}t+=q;D=D.slice(q);return z}A.length&&e(A.join(""));v=10;e("(eof)");return z}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(c,a,b,d){return function(){function a(d,e,f,c,l){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=d;this._layout=f;this._buffers=c;this._locations=e;l&&(this._indexBuffer=l);this._id=a._nextId++;b("esri-webgl-debug")&&d.instanceCounter.incrementCount(2)}Object.defineProperty(a.prototype,"id",
{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){var b=this;return Object.keys(this._buffers).reduce(function(d,
a){return d+b._buffers[a].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.dispose=function(d){void 0===d&&(d=!0);if(this._context){var a=this._context.capabilities.vao;a&&this._glName&&(a.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(d){for(var e in this._buffers)this._buffers[e].dispose(),delete this._buffers[e];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};a.prototype.initialize=function(){if(!this._initialized){var b=this._context.capabilities.vao;if(b){var d=b.createVertexArray();b.bindVertexArray(d);this._bindLayout();b.bindVertexArray(null);
this._glName=d}this._initialized=!0}};a.prototype.bind=function(){this.initialize();var b=this._context.capabilities.vao;b?b.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};a.prototype._bindLayout=function(){var b=this._buffers,a=!!this._context.capabilities.vao,e=this._layout,c=this._indexBuffer;b||console.error("Vertex buffer dictionary is empty!");var l=this._context.gl,p;for(p in b){var q=b[p];q||console.error("Vertex buffer is uninitialized!");var t=e[p];t||console.error("Vertex element descriptor is empty!");
d.bindVertexBufferLayout(this._context,this._locations,q,t)}c&&(a?l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,c.glName):this._context.bindBuffer(c))};a.prototype.unbind=function(){this.initialize();var b=this._context.capabilities.vao;b?b.bindVertexArray(null):this._unbindLayout()};a.prototype._unbindLayout=function(){var b=this._buffers,a=this._layout;b||console.error("Vertex buffer dictionary is empty!");for(var e in b){var c=b[e];c||console.error("Vertex buffer is uninitialized!");d.unbindVertexBufferLayout(this._context,
this._locations,c,a[e])}(b=this._indexBuffer)&&this._context.unbindBuffer(b.bufferType)};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],function(c,a,b,d){return function(){function a(){}a.vertexCount=function(b,d){return b.vertexBuffers[d].size/a.getStride(b.layout[d])};a.getStride=function(b){return b[0].stride};a.getBytesPerElement=function(b){switch(b){case 5126:return 4;case 5124:return 4;
case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};a.addDescriptor=function(b,d,e,c,l,p){var f=a.getBytesPerElement(c);if(0<b.length){var k=b[0].stride,h=k+f*e;b.forEach(function(b){return b.stride=h});b.push({name:d,count:e,type:c,offset:k,stride:h,normalized:l,divisor:p})}else b.push({name:d,count:e,type:c,offset:0,stride:f*e,normalized:l,divisor:p})};a.assertCompatibleVertexAttributeLocations=function(b,d){(b=
b.locations===d.locations)||console.error("VertexAttributeLocations are incompatible");return b};a.hasAttribute=function(b,d){for(var a=0;a<b.length;a++)if(b[a].name===d)return!0;return!1};a.findAttribute=function(b,d){for(var a=0;a<b.length;a++)if(b[a].name===d)return b[a];return null};a.copyFramebufferToTexture=function(b,d,a,e,c){void 0===c&&(c=0);var f=b.getBoundFramebufferObject(),l=b.getBoundTexture(0);b.bindFramebuffer(d);b.bindTexture(a,0);b.gl.copyTexImage2D(b.gl.TEXTURE_2D,c,a.descriptor.pixelFormat,
e[0],e[1],e[2],e[3],0);b.gl.flush();b.bindFramebuffer(f);b.bindTexture(l,0)};a.assert=function(b,a){if(!b)throw new d(a);};a.setBaseInstanceOffset=function(a,d){var e={},c;for(c in a)e[c]=a[c].map(function(a){return a.divisor?b({},a,{baseInstance:d}):a});return e};a.bindVertexBufferLayout=function(b,a,d,e,c){var f=b.gl,l=b.capabilities.instancing;b.bindBuffer(d);e.forEach(function(b){var d=a[b.name],e=(c?c:0+b.baseInstance?b.baseInstance:0)*b.stride;void 0===d&&console.error("There is no location for vertex attribute '"+
b.name+"' defined.");b.baseInstance&&!b.divisor&&console.error("Vertex attribute '"+b.name+"' uses baseInstanceOffset without divisor.");if(4>=b.count)f.vertexAttribPointer(d,b.count,b.type,b.normalized,b.stride,b.offset+e),f.enableVertexAttribArray(d),b.divisor&&0<b.divisor&&l&&l.vertexAttribDivisor(d,b.divisor);else if(9===b.count)for(var k=0;3>k;k++)f.vertexAttribPointer(d+k,3,b.type,b.normalized,b.stride,b.offset+12*k+e),f.enableVertexAttribArray(d+k),b.divisor&&0<b.divisor&&l&&l.vertexAttribDivisor(d+
k,b.divisor);else if(16===b.count)for(k=0;4>k;k++)f.vertexAttribPointer(d+k,4,b.type,b.normalized,b.stride,b.offset+16*k+e),f.enableVertexAttribArray(d+k),b.divisor&&0<b.divisor&&l&&l.vertexAttribDivisor(d+k,b.divisor);else console.error("Unsupported vertex attribute element count: "+b.count)})};a.unbindVertexBufferLayout=function(b,d,a,e){var f=b.gl;b.bindBuffer(a);e.forEach(function(b){var a=d[b.name];if(4>=b.count)f.disableVertexAttribArray(a);else if(9===b.count)for(b=0;3>b;b++)f.disableVertexAttribArray(a+
b);else if(16===b.count)for(b=0;4>b;b++)f.disableVertexAttribArray(a+b);else console.error("Unsupported vertex attribute element count: "+b.count)});b.unbindBuffer(34962)};return a}()})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(c){for(var a,b=1,d=arguments.length;b<d;b++){a=arguments[b];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e])}return c}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require",
"exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});(function(b){b[b.FILL=0]="FILL";b[b.LINE=1]="LINE";b[b.MARKER=2]="MARKER";b[b.TEXT=3]="TEXT";b[b.LABEL=4]="LABEL";b[b.NONE=5]="NONE";b[b.UNKNOWN=6]="UNKNOWN";b[b.COUNT=7]="COUNT"})(a.WGLGeometryType||(a.WGLGeometryType={}));(function(b){b[b.SUCCEEDED=0]="SUCCEEDED";b[b.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(a.WGLGeometryTransactionStatus||(a.WGLGeometryTransactionStatus={}));(function(b){b[b.NONE=0]="NONE";b[b.FILL=
1]="FILL";b[b.LINE=2]="LINE";b[b.MARKER=4]="MARKER";b[b.TEXT=8]="TEXT";b[b.LABEL=16]="LABEL";b[b.LABEL_ALPHA=32]="LABEL_ALPHA";b[b.HITTEST=64]="HITTEST";b[b.HIGHLIGHT=128]="HIGHLIGHT";b[b.CLIP=256]="CLIP";b[b.DEBUG=512]="DEBUG";b[b.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(a.WGLDrawPhase||(a.WGLDrawPhase={}));(function(b){b[b.SIZE=0]="SIZE";b[b.COLOR=1]="COLOR";b[b.OPACITY=2]="OPACITY";b[b.ROTATION=3]="ROTATION"})(a.VVType||(a.VVType={}));(function(b){b[b.NONE=0]="NONE";b[b.OPACITY=1]="OPACITY";b[b.COLOR=
2]="COLOR";b[b.ROTATION=4]="ROTATION";b[b.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";b[b.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";b[b.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";b[b.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(a.WGLVVFlag||(a.WGLVVFlag={}));(function(b){b[b.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";b[b.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";b[b.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";b[b.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(a.WGLVVTarget||(a.WGLVVTarget=
{}));(function(b){b[b.UNKNOWN=0]="UNKNOWN";b[b.BUTT=1]="BUTT";b[b.ROUND=2]="ROUND";b[b.SQUARE=3]="SQUARE"})(a.CapType||(a.CapType={}));(function(b){b[b.UNKNOWN=0]="UNKNOWN";b[b.MITER=1]="MITER";b[b.BEVEL=2]="BEVEL";b[b.ROUND=3]="ROUND"})(a.JoinType||(a.JoinType={}));(function(b){b.SIMPLE_MARKER="esriSMS";b.SIMPLE_LINE="esriSLS";b.SIMPLE_FILL="esriSFS";b.PICTURE_MARKER="esriPMS";b.PICTURE_FILL="esriPFS";b.TEXT="esriTS"})(a.EsriSymbolType||(a.EsriSymbolType={}));(function(b){b.SIMPLE_MARKER="simple-marker";
b.SIMPLE_LINE="simple-line";b.SIMPLE_FILL="simple-fill";b.PICTURE_MARKER="picture-marker";b.PICTURE_FILL="picture-fill";b.TEXT="text"})(a.EsriSymbolTypeKebab||(a.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function b(){this._initialized=!1}b.prototype.registerPass=function(b,g){this._initialize();for(var d=0;d<g.length;d++)this._passMap.set(g[d],b);return this};b.prototype.getPaintPassTs=function(b){this._initialize();return this._passMap.has(b)?[this._passMap.get(b)]:[]};b.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return b}();a.WGLPainterOptions=
c;var g=new Uint8Array(4*k.C_HITTEST_SEARCH_SIZE*k.C_HITTEST_SEARCH_SIZE),n=new Uint32Array(g.buffer);c=function(){function a(){this._hlPainter=new A;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new f}a.allGeometryPhases=function(){return[h.WGLDrawPhase.FILL,
h.WGLDrawPhase.LINE,h.WGLDrawPhase.MARKER,h.WGLDrawPhase.TEXT]};a.toWGLDrawPhases=function(b){for(var g=[],a,d=0;d<h.WGLDrawPhase.NUM_DRAW_PHASES;d++)a=1<<d,a&b&&g.push(a);return g};Object.defineProperty(a.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(b){return b.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(b){return b.forEach(function(b){return b.dispose()})}),this._brushes.clear())};a.prototype.initialize=function(b){this.materialManager.initialize(b)};a.prototype.update=function(b,g){this._state=b;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/b.width,this._extrudeScaleVector[1]=-2/b.height,e.identity(this._extrudeMatrix),e.rotate(this._extrudeMatrix,this._extrudeMatrix,-b.rotation*m.C_DEG_TO_RAD,this._extrudeRotateVector),e.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),e.transpose(this._extrudeMatrix,this._extrudeMatrix),e.identity(this._extrudeNoRotationMatrix),e.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),e.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};a.prototype.getBrushes=function(b){if(!this._brushes){var g=new q.default,a=new y.default,d=new v.default,n=new u.default,e=new t.default,r=new l.default,f=new p.default;this._brushes=new Map;this._brushes.set(h.WGLDrawPhase.FILL,[g]);this._brushes.set(h.WGLDrawPhase.MARKER,
[a]);this._brushes.set(h.WGLDrawPhase.LINE,[d]);this._brushes.set(h.WGLDrawPhase.TEXT,[n]);this._brushes.set(h.WGLDrawPhase.LABEL,[e]);this._brushes.set(h.WGLDrawPhase.LABEL_ALPHA,[e]);this._brushes.set(h.WGLDrawPhase.HITTEST,[g,a,d,n]);this._brushes.set(h.WGLDrawPhase.HIGHLIGHT,[g,a,d,n]);this._brushes.set(h.WGLDrawPhase.CLIP,[f]);this._brushes.set(h.WGLDrawPhase.DEBUG,[r])}if(!this._brushes.has(b))throw Error("WGLPainter: Tried to get brush for unknown phase: "+b);return this._brushes.get(b)};a.prototype.bindTextureManager=
function(b){this.textureManager=b};a.prototype.draw=function(b,g,a,d){a[0]===h.WGLDrawPhase.LABEL_ALPHA&&a[0]===h.WGLDrawPhase.LABEL||this._drawClippingRects(b,g);var n=b.context;n.setBlendingEnabled(!0);n.setStencilWriteMask(0);n.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(b,g,a,d);this._debugTiles(b,g)};a.prototype.setHighlightOptions=function(b){this._hlPainter.setHighlightOptions(b)};a.prototype.highlight=function(b,g){var a=b.context,d=a.getViewport();this._hlPainter.setup(a,d.width,
d.height);this._hlPainter.startMaskDraw(a);this._drawClippingRects(b,g);a.setBlendingEnabled(!0);a.setStencilWriteMask(0);a.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(b,g,[h.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(a)};a.prototype.hitTest=function(b,a){var d=k.C_HITTEST_SEARCH_SIZE,e=[0,0],r=[0,0],f=b.state;f.toMap(e,[0,0]);f.toMap(r,[d,d]);if(0===a.filter(function(b){return!(e[0]>b.bounds[2]||r[0]<b.bounds[0]||e[1]<b.bounds[1]||r[1]>b.bounds[3])}).length)return[];f=b.context;this._hittestFBO||
(this._hittestFBO=z.create(f,{colorTarget:0,depthStencilTarget:3,width:d,height:d}));var c=f.getViewport(),l=f.getBoundFramebufferObject();f.bindFramebuffer(this._hittestFBO);f.setViewport(0,0,d,d);this._drawClippingRects(b,a);var p=f.gl;f.setClearColor(1,1,1,1);f.clear(p.COLOR_BUFFER_BIT);f.setBlendingEnabled(!1);f.setStencilWriteMask(0);this._drawPhases(b,a,[h.WGLDrawPhase.HITTEST]);f.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,d,d,6408,5121,g);b=d*d;a=new Set;for(d=0;d<b;d++)p=n[d],
4294967295!==p&&a.add(p);f.bindFramebuffer(l);f.setViewport(c.x,c.y,c.width,c.height);var m=[];a.forEach(function(b){m.push(b)});return m};a.prototype._getPaintPass=function(b){this._passes||(this._passes=new Map);if(!this._passes.has(b))try{this._passes.set(b,new b)}catch(C){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+b+",\n"+C);}return this._passes.get(b)};a.prototype._getPaintPasses=function(b,g){var a=this;return g.getPaintPassTs(b).map(function(b){return a._getPaintPass(b)})};
a.prototype._drawPhases=function(g,a,d,n){g.context.setStencilTestEnabled(!0);for(var e=0;e<d.length;e++){var f=d[e],r=n?this._getPaintPasses(f,n):[],f=b({},g,{drawPhase:f});r.forEach(function(b){return b.preRender(g,g.rendererInfo)});for(var c=0,l=a;c<l.length;c++)l[c].doRender(f);r.reverse().forEach(function(b){return b.postRender(g,g.rendererInfo)})}g.context.setStencilTestEnabled(!1)};a.prototype._debugTiles=function(b,g){d("esri-feature-tiles-debug")&&this._drawPhases(b,g,[h.WGLDrawPhase.DEBUG])};
a.prototype._drawClippingRects=function(b,g){if(0!==g.length){var a=b.context;a.setDepthWriteEnabled(!1);a.setDepthTestEnabled(!1);a.setStencilTestEnabled(!0);a.setBlendingEnabled(!1);a.setColorMask(!1,!1,!1,!1);a.setStencilOp(7680,7680,7681);a.setClearStencil(0);a.clear(a.gl.STENCIL_BUFFER_BIT);a.setStencilWriteMask(255);for(var a=0,d=g.length;a<g.length;a++,d--){var n=g[a];n.attached&&(n.stencilRef=d)}this._drawPhases(b,g,[h.WGLDrawPhase.CLIP]);b.context.setColorMask(!0,!0,!0,!0)}};return a}();
a.default=c})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(c){var a={scalar:{},SIMD:{},create:function(){var b=new c.ARRAY_TYPE(16);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},clone:function(b){var a=new c.ARRAY_TYPE(16);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=
b[14];a[15]=b[15];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},fromValues:function(b,a,e,h,m,f,k,l,p,q,t,v,y,u,A,z){var g=new c.ARRAY_TYPE(16);g[0]=b;g[1]=a;g[2]=e;g[3]=h;g[4]=m;g[5]=f;g[6]=k;g[7]=l;g[8]=p;g[9]=q;g[10]=t;g[11]=v;g[12]=y;g[13]=u;g[14]=A;g[15]=z;return g},set:function(b,a,e,c,m,f,k,l,p,q,t,v,y,u,A,z,g){b[0]=a;b[1]=e;b[2]=
c;b[3]=m;b[4]=f;b[5]=k;b[6]=l;b[7]=p;b[8]=q;b[9]=t;b[10]=v;b[11]=y;b[12]=u;b[13]=A;b[14]=z;b[15]=g;return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}};a.scalar.transpose=function(b,a){if(b===a){var d=a[1],c=a[2],m=a[3],f=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=d;b[6]=a[9];b[7]=a[13];b[8]=c;b[9]=f;b[11]=a[14];b[12]=m;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],
b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};a.SIMD.transpose=function(b,a){var d,c,m,f,k,l;d=SIMD.Float32x4.load(a,0);c=SIMD.Float32x4.load(a,4);m=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,12);f=SIMD.Float32x4.shuffle(d,c,0,1,4,5);k=SIMD.Float32x4.shuffle(m,a,0,1,4,5);l=SIMD.Float32x4.shuffle(f,k,0,2,4,6);f=SIMD.Float32x4.shuffle(f,k,1,3,5,7);SIMD.Float32x4.store(b,0,l);SIMD.Float32x4.store(b,4,
f);f=SIMD.Float32x4.shuffle(d,c,2,3,6,7);k=SIMD.Float32x4.shuffle(m,a,2,3,6,7);d=SIMD.Float32x4.shuffle(f,k,0,2,4,6);c=SIMD.Float32x4.shuffle(f,k,1,3,5,7);SIMD.Float32x4.store(b,8,d);SIMD.Float32x4.store(b,12,c);return b};a.transpose=c.USE_SIMD?a.SIMD.transpose:a.scalar.transpose;a.scalar.invert=function(b,a){var d=a[0],c=a[1],m=a[2],f=a[3],k=a[4],l=a[5],p=a[6],q=a[7],t=a[8],v=a[9],y=a[10],u=a[11],A=a[12],z=a[13],g=a[14];a=a[15];var n=d*l-c*k,r=d*p-m*k,B=d*q-f*k,C=c*p-m*l,D=c*q-f*l,F=m*q-f*p,H=t*
z-v*A,J=t*g-y*A,I=t*a-u*A,G=v*g-y*z,O=v*a-u*z,X=y*a-u*g,K=n*X-r*O+B*G+C*I-D*J+F*H;if(!K)return null;K=1/K;b[0]=(l*X-p*O+q*G)*K;b[1]=(m*O-c*X-f*G)*K;b[2]=(z*F-g*D+a*C)*K;b[3]=(y*D-v*F-u*C)*K;b[4]=(p*I-k*X-q*J)*K;b[5]=(d*X-m*I+f*J)*K;b[6]=(g*B-A*F-a*r)*K;b[7]=(t*F-y*B+u*r)*K;b[8]=(k*O-l*I+q*H)*K;b[9]=(c*I-d*O-f*H)*K;b[10]=(A*D-z*B+a*n)*K;b[11]=(v*B-t*D-u*n)*K;b[12]=(l*J-k*G-p*H)*K;b[13]=(d*G-c*J+m*H)*K;b[14]=(z*r-A*C-g*n)*K;b[15]=(t*C-v*r+y*n)*K;return b};a.SIMD.invert=function(b,a){var d,c,m,f,k,l,
p,q;k=SIMD.Float32x4.load(a,0);l=SIMD.Float32x4.load(a,4);p=SIMD.Float32x4.load(a,8);q=SIMD.Float32x4.load(a,12);a=SIMD.Float32x4.shuffle(k,l,0,1,4,5);c=SIMD.Float32x4.shuffle(p,q,0,1,4,5);d=SIMD.Float32x4.shuffle(a,c,0,2,4,6);c=SIMD.Float32x4.shuffle(c,a,1,3,5,7);a=SIMD.Float32x4.shuffle(k,l,2,3,6,7);f=SIMD.Float32x4.shuffle(p,q,2,3,6,7);m=SIMD.Float32x4.shuffle(a,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,a,1,3,5,7);a=SIMD.Float32x4.mul(m,f);a=SIMD.Float32x4.swizzle(a,1,0,3,2);k=SIMD.Float32x4.mul(c,
a);l=SIMD.Float32x4.mul(d,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,a),k);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,a),l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);a=SIMD.Float32x4.mul(c,m);a=SIMD.Float32x4.swizzle(a,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,a),k);q=SIMD.Float32x4.mul(d,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(f,a));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,a),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);
a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,3,0,1),f);a=SIMD.Float32x4.swizzle(a,1,0,3,2);m=SIMD.Float32x4.swizzle(m,2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,a),k);p=SIMD.Float32x4.mul(d,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(m,a));p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,a),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);a=SIMD.Float32x4.mul(d,c);a=SIMD.Float32x4.swizzle(a,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,a),p);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,
a),q);a=SIMD.Float32x4.swizzle(a,2,3,0,1);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,a),p);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(m,a));a=SIMD.Float32x4.mul(d,f);a=SIMD.Float32x4.swizzle(a,1,0,3,2);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(m,a));p=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,a),p);a=SIMD.Float32x4.swizzle(a,2,3,0,1);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,a),l);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(c,a));a=SIMD.Float32x4.mul(d,m);a=SIMD.Float32x4.swizzle(a,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,
a),l);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(c,a));a=SIMD.Float32x4.swizzle(a,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(f,a));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,a),q);d=SIMD.Float32x4.mul(d,k);d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,2,3,0,1),d);d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,1,0,3,2),d);a=SIMD.Float32x4.reciprocalApproximation(d);d=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(d,SIMD.Float32x4.mul(a,a)));d=SIMD.Float32x4.swizzle(d,0,0,0,0);if(!d)return null;
SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(d,k));SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(d,l));SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(d,p));SIMD.Float32x4.store(b,12,SIMD.Float32x4.mul(d,q));return b};a.invert=c.USE_SIMD?a.SIMD.invert:a.scalar.invert;a.scalar.adjoint=function(b,a){var d=a[0],c=a[1],m=a[2],f=a[3],k=a[4],l=a[5],p=a[6],q=a[7],t=a[8],v=a[9],y=a[10],u=a[11],A=a[12],z=a[13],g=a[14];a=a[15];b[0]=l*(y*a-u*g)-v*(p*a-q*g)+z*(p*u-q*y);b[1]=-(c*(y*a-u*g)-v*(m*a-f*g)+z*(m*u-f*y));b[2]=
c*(p*a-q*g)-l*(m*a-f*g)+z*(m*q-f*p);b[3]=-(c*(p*u-q*y)-l*(m*u-f*y)+v*(m*q-f*p));b[4]=-(k*(y*a-u*g)-t*(p*a-q*g)+A*(p*u-q*y));b[5]=d*(y*a-u*g)-t*(m*a-f*g)+A*(m*u-f*y);b[6]=-(d*(p*a-q*g)-k*(m*a-f*g)+A*(m*q-f*p));b[7]=d*(p*u-q*y)-k*(m*u-f*y)+t*(m*q-f*p);b[8]=k*(v*a-u*z)-t*(l*a-q*z)+A*(l*u-q*v);b[9]=-(d*(v*a-u*z)-t*(c*a-f*z)+A*(c*u-f*v));b[10]=d*(l*a-q*z)-k*(c*a-f*z)+A*(c*q-f*l);b[11]=-(d*(l*u-q*v)-k*(c*u-f*v)+t*(c*q-f*l));b[12]=-(k*(v*g-y*z)-t*(l*g-p*z)+A*(l*y-p*v));b[13]=d*(v*g-y*z)-t*(c*g-m*z)+A*(c*
y-m*v);b[14]=-(d*(l*g-p*z)-k*(c*g-m*z)+A*(c*p-m*l));b[15]=d*(l*y-p*v)-k*(c*y-m*v)+t*(c*p-m*l);return b};a.SIMD.adjoint=function(b,a){var d,c,m,f,k,l,p,q;d=SIMD.Float32x4.load(a,0);c=SIMD.Float32x4.load(a,4);m=SIMD.Float32x4.load(a,8);f=SIMD.Float32x4.load(a,12);l=SIMD.Float32x4.shuffle(d,c,0,1,4,5);k=SIMD.Float32x4.shuffle(m,f,0,1,4,5);a=SIMD.Float32x4.shuffle(l,k,0,2,4,6);k=SIMD.Float32x4.shuffle(k,l,1,3,5,7);l=SIMD.Float32x4.shuffle(d,c,2,3,6,7);c=SIMD.Float32x4.shuffle(m,f,2,3,6,7);d=SIMD.Float32x4.shuffle(l,
c,0,2,4,6);c=SIMD.Float32x4.shuffle(c,l,1,3,5,7);l=SIMD.Float32x4.mul(d,c);l=SIMD.Float32x4.swizzle(l,1,0,3,2);m=SIMD.Float32x4.mul(k,l);f=SIMD.Float32x4.mul(a,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,l),m);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);l=SIMD.Float32x4.mul(k,d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),m);q=SIMD.Float32x4.mul(a,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);
m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(c,l));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),q);q=SIMD.Float32x4.swizzle(q,2,3,0,1);l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,3,0,1),c);l=SIMD.Float32x4.swizzle(l,1,0,3,2);d=SIMD.Float32x4.swizzle(d,2,3,0,1);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,l),m);p=SIMD.Float32x4.mul(a,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(d,l));p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),p);p=SIMD.Float32x4.swizzle(p,2,3,0,
1);l=SIMD.Float32x4.mul(a,k);l=SIMD.Float32x4.swizzle(l,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),p);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,l),q);l=SIMD.Float32x4.swizzle(l,2,3,0,1);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,l),p);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(d,l));l=SIMD.Float32x4.mul(a,c);l=SIMD.Float32x4.swizzle(l,1,0,3,2);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(d,l));p=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,l),p);l=SIMD.Float32x4.swizzle(l,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,
l),f);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(k,l));l=SIMD.Float32x4.mul(a,d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),f);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(k,l));l=SIMD.Float32x4.swizzle(l,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(c,l));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,l),q);SIMD.Float32x4.store(b,0,m);SIMD.Float32x4.store(b,4,f);SIMD.Float32x4.store(b,8,p);SIMD.Float32x4.store(b,12,q);return b};a.adjoint=c.USE_SIMD?a.SIMD.adjoint:
a.scalar.adjoint;a.determinant=function(b){var a=b[0],e=b[1],c=b[2],m=b[3],f=b[4],k=b[5],l=b[6],p=b[7],q=b[8],t=b[9],v=b[10],y=b[11],u=b[12],A=b[13],z=b[14];b=b[15];return(a*k-e*f)*(v*b-y*z)-(a*l-c*f)*(t*b-y*A)+(a*p-m*f)*(t*z-v*A)+(e*l-c*k)*(q*b-y*u)-(e*p-m*k)*(q*z-v*u)+(c*p-m*l)*(q*A-t*u)};a.SIMD.multiply=function(b,a,e){var d=SIMD.Float32x4.load(a,0),c=SIMD.Float32x4.load(a,4),f=SIMD.Float32x4.load(a,8);a=SIMD.Float32x4.load(a,12);var k=SIMD.Float32x4.load(e,0),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,
0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),a))));SIMD.Float32x4.store(b,0,k);k=SIMD.Float32x4.load(e,4);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),f),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),a))));SIMD.Float32x4.store(b,4,k);k=SIMD.Float32x4.load(e,8);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),a))));SIMD.Float32x4.store(b,8,k);e=SIMD.Float32x4.load(e,12);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,
0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),a))));SIMD.Float32x4.store(b,12,d);return b};a.scalar.multiply=function(b,a,e){var d=a[0],c=a[1],f=a[2],k=a[3],l=a[4],p=a[5],q=a[6],t=a[7],v=a[8],y=a[9],u=a[10],A=a[11],z=a[12],g=a[13],n=a[14];a=a[15];var r=e[0],B=e[1],C=e[2],D=e[3];b[0]=r*d+B*l+C*v+D*z;b[1]=r*c+B*p+C*y+D*g;b[2]=r*f+B*
q+C*u+D*n;b[3]=r*k+B*t+C*A+D*a;r=e[4];B=e[5];C=e[6];D=e[7];b[4]=r*d+B*l+C*v+D*z;b[5]=r*c+B*p+C*y+D*g;b[6]=r*f+B*q+C*u+D*n;b[7]=r*k+B*t+C*A+D*a;r=e[8];B=e[9];C=e[10];D=e[11];b[8]=r*d+B*l+C*v+D*z;b[9]=r*c+B*p+C*y+D*g;b[10]=r*f+B*q+C*u+D*n;b[11]=r*k+B*t+C*A+D*a;r=e[12];B=e[13];C=e[14];D=e[15];b[12]=r*d+B*l+C*v+D*z;b[13]=r*c+B*p+C*y+D*g;b[14]=r*f+B*q+C*u+D*n;b[15]=r*k+B*t+C*A+D*a;return b};a.multiply=c.USE_SIMD?a.SIMD.multiply:a.scalar.multiply;a.mul=a.multiply;a.scalar.translate=function(b,a,e){var d=
e[0],c=e[1];e=e[2];var f,k,l,p,q,t,v,y,u,A,z,g;a===b?(b[12]=a[0]*d+a[4]*c+a[8]*e+a[12],b[13]=a[1]*d+a[5]*c+a[9]*e+a[13],b[14]=a[2]*d+a[6]*c+a[10]*e+a[14],b[15]=a[3]*d+a[7]*c+a[11]*e+a[15]):(f=a[0],k=a[1],l=a[2],p=a[3],q=a[4],t=a[5],v=a[6],y=a[7],u=a[8],A=a[9],z=a[10],g=a[11],b[0]=f,b[1]=k,b[2]=l,b[3]=p,b[4]=q,b[5]=t,b[6]=v,b[7]=y,b[8]=u,b[9]=A,b[10]=z,b[11]=g,b[12]=f*d+q*c+u*e+a[12],b[13]=k*d+t*c+A*e+a[13],b[14]=l*d+v*c+z*e+a[14],b[15]=p*d+y*c+g*e+a[15]);return b};a.SIMD.translate=function(b,a,e){var d=
SIMD.Float32x4.load(a,0),c=SIMD.Float32x4.load(a,4),f=SIMD.Float32x4.load(a,8),k=SIMD.Float32x4.load(a,12);e=SIMD.Float32x4(e[0],e[1],e[2],0);a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11]);d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(e,0,0,0,0));c=SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(e,1,1,1,1));f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(e,2,2,2,2));a=SIMD.Float32x4.add(d,SIMD.Float32x4.add(c,SIMD.Float32x4.add(f,
k)));SIMD.Float32x4.store(b,12,a);return b};a.translate=c.USE_SIMD?a.SIMD.translate:a.scalar.translate;a.scalar.scale=function(b,a,e){var d=e[0],c=e[1];e=e[2];b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[3]=a[3]*d;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*e;b[9]=a[9]*e;b[10]=a[10]*e;b[11]=a[11]*e;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};a.SIMD.scale=function(b,a,e){var d;e=SIMD.Float32x4(e[0],e[1],e[2],0);d=SIMD.Float32x4.load(a,0);SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(d,
SIMD.Float32x4.swizzle(e,0,0,0,0)));d=SIMD.Float32x4.load(a,4);SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(e,1,1,1,1)));d=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(e,2,2,2,2)));b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};a.scale=c.USE_SIMD?a.SIMD.scale:a.scalar.scale;a.rotate=function(b,a,e,h){var d=h[0],f=h[1];h=h[2];var k=Math.sqrt(d*d+f*f+h*h),l,p,q,t,v,y,u,A,z,g,n,r,B,C,D,F,H,J,I,G;if(Math.abs(k)<c.EPSILON)return null;
k=1/k;d*=k;f*=k;h*=k;l=Math.sin(e);p=Math.cos(e);q=1-p;e=a[0];k=a[1];t=a[2];v=a[3];y=a[4];u=a[5];A=a[6];z=a[7];g=a[8];n=a[9];r=a[10];B=a[11];C=d*d*q+p;D=f*d*q+h*l;F=h*d*q-f*l;H=d*f*q-h*l;J=f*f*q+p;I=h*f*q+d*l;G=d*h*q+f*l;d=f*h*q-d*l;f=h*h*q+p;b[0]=e*C+y*D+g*F;b[1]=k*C+u*D+n*F;b[2]=t*C+A*D+r*F;b[3]=v*C+z*D+B*F;b[4]=e*H+y*J+g*I;b[5]=k*H+u*J+n*I;b[6]=t*H+A*J+r*I;b[7]=v*H+z*J+B*I;b[8]=e*G+y*d+g*f;b[9]=k*G+u*d+n*f;b[10]=t*G+A*d+r*f;b[11]=v*G+z*d+B*f;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);
return b};a.scalar.rotateX=function(b,a,e){var d=Math.sin(e);e=Math.cos(e);var c=a[4],f=a[5],k=a[6],l=a[7],p=a[8],q=a[9],t=a[10],v=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=c*e+p*d;b[5]=f*e+q*d;b[6]=k*e+t*d;b[7]=l*e+v*d;b[8]=p*e-c*d;b[9]=q*e-f*d;b[10]=t*e-k*d;b[11]=v*e-l*d;return b};a.SIMD.rotateX=function(b,a,e){var d=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],
b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);var c=SIMD.Float32x4.load(a,4);a=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(b,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(c,e),SIMD.Float32x4.mul(a,d)));SIMD.Float32x4.store(b,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,e),SIMD.Float32x4.mul(c,d)));return b};a.rotateX=c.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX;a.scalar.rotateY=function(b,a,e){var d=Math.sin(e);e=Math.cos(e);var c=a[0],f=a[1],k=a[2],l=a[3],p=a[8],q=a[9],t=a[10],v=a[11];a!==b&&(b[4]=a[4],
b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=c*e-p*d;b[1]=f*e-q*d;b[2]=k*e-t*d;b[3]=l*e-v*d;b[8]=c*d+p*e;b[9]=f*d+q*e;b[10]=k*d+t*e;b[11]=l*d+v*e;return b};a.SIMD.rotateY=function(b,a,e){var d=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);var c=SIMD.Float32x4.load(a,0);a=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(b,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,
e),SIMD.Float32x4.mul(a,d)));SIMD.Float32x4.store(b,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(c,d),SIMD.Float32x4.mul(a,e)));return b};a.rotateY=c.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY;a.scalar.rotateZ=function(b,a,e){var d=Math.sin(e);e=Math.cos(e);var c=a[0],f=a[1],k=a[2],l=a[3],p=a[4],q=a[5],t=a[6],v=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=c*e+p*d;b[1]=f*e+q*d;b[2]=k*e+t*d;b[3]=l*e+v*d;b[4]=p*e-c*d;b[5]=q*e-f*d;b[6]=t*e-k*
d;b[7]=v*e-l*d;return b};a.SIMD.rotateZ=function(b,a,e){var d=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);var c=SIMD.Float32x4.load(a,0);a=SIMD.Float32x4.load(a,4);SIMD.Float32x4.store(b,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(c,e),SIMD.Float32x4.mul(a,d)));SIMD.Float32x4.store(b,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,e),SIMD.Float32x4.mul(c,d)));return b};a.rotateZ=c.USE_SIMD?
a.SIMD.rotateZ:a.scalar.rotateZ;a.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};a.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.fromRotation=function(b,a,e){var d=e[0],m=e[1];e=e[2];var f=Math.sqrt(d*d+m*m+e*e),k;if(Math.abs(f)<c.EPSILON)return null;f=1/f;d*=f;
m*=f;e*=f;f=Math.sin(a);a=Math.cos(a);k=1-a;b[0]=d*d*k+a;b[1]=m*d*k+e*f;b[2]=e*d*k-m*f;b[3]=0;b[4]=d*m*k-e*f;b[5]=m*m*k+a;b[6]=e*m*k+d*f;b[7]=0;b[8]=d*e*k+m*f;b[9]=m*e*k-d*f;b[10]=e*e*k+a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.fromXRotation=function(b,a){var d=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=d;b[7]=0;b[8]=0;b[9]=-d;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.fromYRotation=function(b,a){var d=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=
0;b[2]=-d;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=d;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.fromZRotation=function(b,a){var d=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=d;b[2]=0;b[3]=0;b[4]=-d;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.fromRotationTranslation=function(b,a,e){var d=a[0],c=a[1],f=a[2],k=a[3],l=d+d,p=c+c,q=f+f;a=d*l;var t=d*p,d=d*q,v=c*p,c=c*q,f=f*q,l=k*l,p=k*p,k=k*q;b[0]=1-(v+f);b[1]=t+k;b[2]=d-p;b[3]=0;b[4]=
t-k;b[5]=1-(a+f);b[6]=c+l;b[7]=0;b[8]=d+p;b[9]=c-l;b[10]=1-(a+v);b[11]=0;b[12]=e[0];b[13]=e[1];b[14]=e[2];b[15]=1;return b};a.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};a.getRotation=function(b,a){var d=a[0]+a[5]+a[10],c=0;0<d?(c=2*Math.sqrt(d+1),b[3]=.25*c,b[0]=(a[6]-a[9])/c,b[1]=(a[8]-a[2])/c,b[2]=(a[1]-a[4])/c):a[0]>a[5]&a[0]>a[10]?(c=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/c,b[0]=.25*c,b[1]=(a[1]+a[4])/c,b[2]=(a[8]+a[2])/c):a[5]>a[10]?(c=2*Math.sqrt(1+a[5]-
a[0]-a[10]),b[3]=(a[8]-a[2])/c,b[0]=(a[1]+a[4])/c,b[1]=.25*c,b[2]=(a[6]+a[9])/c):(c=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/c,b[0]=(a[8]+a[2])/c,b[1]=(a[6]+a[9])/c,b[2]=.25*c);return b};a.fromRotationTranslationScale=function(b,a,c,h){var d=a[0],e=a[1],k=a[2],l=a[3],p=d+d,q=e+e,t=k+k;a=d*p;var v=d*q,d=d*t,y=e*q,e=e*t,k=k*t,p=l*p,q=l*q,l=l*t,t=h[0],u=h[1];h=h[2];b[0]=(1-(y+k))*t;b[1]=(v+l)*t;b[2]=(d-q)*t;b[3]=0;b[4]=(v-l)*u;b[5]=(1-(a+k))*u;b[6]=(e+p)*u;b[7]=0;b[8]=(d+q)*h;b[9]=(e-p)*h;b[10]=
(1-(a+y))*h;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];b[15]=1;return b};a.fromRotationTranslationScaleOrigin=function(b,a,c,h,m){var d=a[0],e=a[1],l=a[2],p=a[3],q=d+d,t=e+e,v=l+l;a=d*q;var y=d*t,d=d*v,u=e*t,e=e*v,l=l*v,q=p*q,t=p*t,p=p*v,v=h[0],A=h[1];h=h[2];var z=m[0],g=m[1];m=m[2];b[0]=(1-(u+l))*v;b[1]=(y+p)*v;b[2]=(d-t)*v;b[3]=0;b[4]=(y-p)*A;b[5]=(1-(a+l))*A;b[6]=(e+q)*A;b[7]=0;b[8]=(d+t)*h;b[9]=(e-q)*h;b[10]=(1-(a+u))*h;b[11]=0;b[12]=c[0]+z-(b[0]*z+b[4]*g+b[8]*m);b[13]=c[1]+g-(b[1]*z+b[5]*g+b[9]*
m);b[14]=c[2]+m-(b[2]*z+b[6]*g+b[10]*m);b[15]=1;return b};a.fromQuat=function(b,a){var d=a[0],c=a[1],m=a[2];a=a[3];var f=d+d,k=c+c,l=m+m,d=d*f,p=c*f,c=c*k,q=m*f,t=m*k,m=m*l,f=a*f,k=a*k;a*=l;b[0]=1-c-m;b[1]=p+a;b[2]=q-k;b[3]=0;b[4]=p-a;b[5]=1-d-m;b[6]=t+f;b[7]=0;b[8]=q+k;b[9]=t-f;b[10]=1-d-c;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.frustum=function(b,a,c,h,m,f,k){var d=1/(c-a),e=1/(m-h),q=1/(f-k);b[0]=2*f*d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*f*e;b[6]=0;b[7]=0;b[8]=(c+a)*d;b[9]=(m+h)*e;b[10]=
(k+f)*q;b[11]=-1;b[12]=0;b[13]=0;b[14]=k*f*2*q;b[15]=0;return b};a.perspective=function(b,a,c,h,m){a=1/Math.tan(a/2);var d=1/(h-m);b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(m+h)*d;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*m*h*d;b[15]=0;return b};a.perspectiveFromFieldOfView=function(b,a,c,h){var d=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),k=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var l=2/(k+a),p=2/(d+e);b[0]=
l;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=p;b[6]=0;b[7]=0;b[8]=-((k-a)*l*.5);b[9]=(d-e)*p*.5;b[10]=h/(c-h);b[11]=-1;b[12]=0;b[13]=0;b[14]=h*c/(c-h);b[15]=0;return b};a.ortho=function(b,a,c,h,m,f,k){var d=1/(a-c),e=1/(h-m),q=1/(f-k);b[0]=-2*d;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*e;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*q;b[11]=0;b[12]=(a+c)*d;b[13]=(m+h)*e;b[14]=(k+f)*q;b[15]=1;return b};a.lookAt=function(b,d,e,h){var m,f,k,l,p,q,t,v,y=d[0],u=d[1];d=d[2];k=h[0];l=h[1];f=h[2];t=e[0];h=e[1];m=e[2];if(Math.abs(y-
t)<c.EPSILON&&Math.abs(u-h)<c.EPSILON&&Math.abs(d-m)<c.EPSILON)return a.identity(b);e=y-t;h=u-h;t=d-m;v=1/Math.sqrt(e*e+h*h+t*t);e*=v;h*=v;t*=v;m=l*t-f*h;f=f*e-k*t;k=k*h-l*e;(v=Math.sqrt(m*m+f*f+k*k))?(v=1/v,m*=v,f*=v,k*=v):k=f=m=0;l=h*k-t*f;p=t*m-e*k;q=e*f-h*m;(v=Math.sqrt(l*l+p*p+q*q))?(v=1/v,l*=v,p*=v,q*=v):q=p=l=0;b[0]=m;b[1]=l;b[2]=e;b[3]=0;b[4]=f;b[5]=p;b[6]=h;b[7]=0;b[8]=k;b[9]=q;b[10]=t;b[11]=0;b[12]=-(m*y+f*u+k*d);b[13]=-(l*y+p*u+q*d);b[14]=-(e*y+h*u+t*d);b[15]=1;return b};a.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};a.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};a.add=function(b,a,
c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];b[9]=a[9]+c[9];b[10]=a[10]+c[10];b[11]=a[11]+c[11];b[12]=a[12]+c[12];b[13]=a[13]+c[13];b[14]=a[14]+c[14];b[15]=a[15]+c[15];return b};a.subtract=function(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];b[9]=a[9]-c[9];b[10]=a[10]-c[10];b[11]=a[11]-c[11];b[12]=a[12]-c[12];
b[13]=a[13]-c[13];b[14]=a[14]-c[14];b[15]=a[15]-c[15];return b};a.sub=a.subtract;a.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12]*c;b[13]=a[13]*c;b[14]=a[14]*c;b[15]=a[15]*c;return b};a.multiplyScalarAndAdd=function(b,a,c,h){b[0]=a[0]+c[0]*h;b[1]=a[1]+c[1]*h;b[2]=a[2]+c[2]*h;b[3]=a[3]+c[3]*h;b[4]=a[4]+c[4]*h;b[5]=a[5]+c[5]*h;b[6]=a[6]+c[6]*h;b[7]=a[7]+c[7]*
h;b[8]=a[8]+c[8]*h;b[9]=a[9]+c[9]*h;b[10]=a[10]+c[10]*h;b[11]=a[11]+c[11]*h;b[12]=a[12]+c[12]*h;b[13]=a[13]+c[13]*h;b[14]=a[14]+c[14]*h;b[15]=a[15]+c[15]*h;return b};a.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};a.equals=function(b,a){var d=b[0],h=b[1],m=b[2],f=b[3],k=b[4],l=b[5],p=b[6],q=b[7],
t=b[8],v=b[9],y=b[10],u=b[11],A=b[12],z=b[13],g=b[14];b=b[15];var n=a[0],r=a[1],B=a[2],C=a[3],D=a[4],F=a[5],H=a[6],J=a[7],I=a[8],G=a[9],O=a[10],X=a[11],K=a[12],aa=a[13],ba=a[14];a=a[15];return Math.abs(d-n)<=c.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))&&Math.abs(h-r)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(r))&&Math.abs(m-B)<=c.EPSILON*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(f-C)<=c.EPSILON*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(k-D)<=c.EPSILON*Math.max(1,Math.abs(k),Math.abs(D))&&
Math.abs(l-F)<=c.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(p-H)<=c.EPSILON*Math.max(1,Math.abs(p),Math.abs(H))&&Math.abs(q-J)<=c.EPSILON*Math.max(1,Math.abs(q),Math.abs(J))&&Math.abs(t-I)<=c.EPSILON*Math.max(1,Math.abs(t),Math.abs(I))&&Math.abs(v-G)<=c.EPSILON*Math.max(1,Math.abs(v),Math.abs(G))&&Math.abs(y-O)<=c.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(u-X)<=c.EPSILON*Math.max(1,Math.abs(u),Math.abs(X))&&Math.abs(A-K)<=c.EPSILON*Math.max(1,Math.abs(A),Math.abs(K))&&Math.abs(z-
aa)<=c.EPSILON*Math.max(1,Math.abs(z),Math.abs(aa))&&Math.abs(g-ba)<=c.EPSILON*Math.max(1,Math.abs(g),Math.abs(ba))&&Math.abs(b-a)<=c.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};return a})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var c={EPSILON:1E-6};c.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;c.RANDOM=Math.random;c.ENABLE_SIMD=!1;c.SIMD_AVAILABLE=c.ARRAY_TYPE===Float32Array&&"SIMD"in this;c.USE_SIMD=c.ENABLE_SIMD&&c.SIMD_AVAILABLE;
c.setMatrixArrayType=function(b){c.ARRAY_TYPE=b};var a=Math.PI/180;c.toRadian=function(b){return b*a};c.equals=function(b,a){return Math.abs(b-a)<=c.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(c,a){function b(b,a){b%=a;return 0<=b?b:b+a}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;
a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var d=1/Math.LN2;a.positiveMod=b;a.radToByte=function(d){return b(d*a.C_RAD_TO_256,256)};a.degToByte=function(d){return b(d*a.C_DEG_TO_256,256)};a.log2=function(b){return Math.log(b)*d};a.sqr=function(b){return b*b};a.clamp=function(b,a,d){return Math.min(Math.max(b,a),d)};a.interpolate=function(b,a,d){return b*(1-d)+a*d};a.between=function(b,a,d){return b>=
a&&b<=d||b>=d&&b<=a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),function(c,a,b,d,e,h,m,f,k,l){return function(){function a(){this._programRep=new Map;this.isInitialize=!1}a.prototype.dispose=function(){this._fillShaderVariations&&
(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(b){return b.dispose()}),this._programRep.clear())};a.prototype.initialize=
function(b){if(!this.isInitialize){var a=new l("label",["labelVS","labelFS"],[],m,b);a.addDefine("ID","ID",[!0,!0],"ID");a.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");a.addDefine("SDF","SDF",[!1,!1],"SDF");a.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");a.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");a.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");a.addDefine("VV_SIZE_UNIT_VALUE",
"VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");a.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");a.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");a.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");a.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");a.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");a.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var d=new l("text",["textVS","textFS"],[],k,b);d.addDefine("ID","ID",[!0,!0],"ID");d.addDefine("HIGHLIGHT",
"HIGHLIGHT",[!1,!1],"HIGHLIGHT");d.addDefine("SDF","SDF",[!1,!1],"SDF");d.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");d.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");d.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");d.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");d.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");d.addDefine("VV_ROTATION",
"VV_ROTATION",[!0,!1],"VV_ROTATION");d.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");d.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");d.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");d.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var c=new l("icon",["iconVS","iconFS"],[],h,b);c.addDefine("ID","ID",[!0,!0],"ID");c.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");c.addDefine("SDF","SDF",[!0,!0],"SDF");c.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",
[!0,!1],"VV_SIZE_MIN_MAX_VALUE");c.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");c.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");c.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");c.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");c.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");c.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");c.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",
[!1,!1],"VERTEX_VISIBILITY");c.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");c.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var p=new l("fill",["fillVS","fillFS"],[],e,b);p.addDefine("ID","ID",[!0,!0],"ID");p.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");p.addDefine("SDF","SDF",[!1,!1],"SDF");p.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");p.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");p.addDefine("VV_SIZE_FIELD_STOPS",
"VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");p.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");p.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");p.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");p.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");p.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");p.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");p.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");b=new l("line",
["lineVS","lineFS"],[],f,b);b.addDefine("ID","ID",[!0,!0],"ID");b.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");b.addDefine("SDF","SDF",[!0,!0],"SDF");b.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");b.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");b.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");b.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");
b.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");b.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");b.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");b.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");b.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");b.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=a;this._textShaderVariations=d;this._fillShaderVariations=p;this._iconShaderVariations=c;this._lineShaderVariations=
b;this.isInitialize=!0}};a.prototype.getProgram=function(a,c,f){a|=c===b.WGLDrawPhase.HITTEST?8:0;a|=c===b.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[a])return this._programRep[a];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;c=d.getMaterialVariations(a);var e;switch(c.geometryType){case b.WGLGeometryType.MARKER:e=this._iconShaderVariations.getProgram(c.variations,null,null,f);break;case b.WGLGeometryType.TEXT:e=
this._textShaderVariations.getProgram(c.variations,null,null,f);break;case b.WGLGeometryType.LABEL:e=this._labelShaderVariations.getProgram(c.variations,null,null,f);break;case b.WGLGeometryType.FILL:e=this._fillShaderVariations.getProgram(c.variations,null,null,f);break;case b.WGLGeometryType.LINE:e=this._lineShaderVariations.getProgram(c.variations,null,null,f)}e&&(this._programRep[a]=e);return e};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require",
"exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(c,a,b,d,e){function h(b){var a=[];a[0]=b.sdf?!0:!1;a[1]=b.vvSizeMinMaxValue?!0:!1;a[2]=b.vvSizeScaleStops?!0:!1;a[3]=b.vvSizeFieldStops?!0:!1;a[4]=b.vvSizeUnitValue?!0:!1;a[5]=b.vvColor?!0:!1;a[6]=b.vvRotation?!0:!1;a[7]=b.vvOpacity?!0:!1;a[8]=b.visibility?!0:!1;a[9]=b.pattern?!0:!1;a[10]=b.heatmap?!0:!1;return a.reduce(function(b,a,d){a&&(b|=1<<d+2);return b},0)}function m(a){if(a.geometryType===b.WGLGeometryType.UNKNOWN)return-1;
var d=h(a)<<3;return a.geometryType+d}Object.defineProperty(a,"__esModule",{value:!0});a.createTextMaterialInfo=function(a,c,l){var f=new d.default,k=new e;k.geometryType=l;k.sdf=!0;k.pattern=!1;k.visibility=!1;k.heatmap=!1;f.texBindingInfo.push(new d.TexBindingInfo(2,a.page,"u_texture"));0===c?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(c&b.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(c&b.WGLVVFlag.SIZE_MINMAX_VALUE),
k.vvSizeScaleStops=0!==(c&b.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(c&b.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=0!==(c&b.WGLVVFlag.SIZE_UNIT_VALUE),k.vvColor=0!==(c&b.WGLVVFlag.COLOR),k.vvRotation=0!==(c&b.WGLVVFlag.ROTATION));f.materialKey=m(k);f.materialKeyInfo=k;return f};a.createMaterialInfo=function(a,c,l){var f=new d.default,k=new e;k.geometryType=c;a?(a=a.spriteMosaicItem,k.sdf=a.sdf,k.pattern=!0,f.texBindingInfo.push(new d.TexBindingInfo(1,a.page,"u_texture"))):(k.sdf=!1,
k.pattern=!1);0===l?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(l&b.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(l&b.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(l&b.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(l&b.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=0!==(l&b.WGLVVFlag.SIZE_UNIT_VALUE),k.vvColor=0!==(l&b.WGLVVFlag.COLOR),k.vvRotation=0!==(l&b.WGLVVFlag.ROTATION));k.visibility=!1;f.materialKey=
m(k);f.materialKeyInfo=k;return f};a.getMaterialKey=m;a.getMaterialVariations=function(b){var a=b&7;b>>=3;return{geometryType:a,variations:[0!==(b&1),0!==(b&2),0!==(b&4),0!==(b&8),0!==(b&16),0!==(b&32),0!==(b&64),0!==(b&128),0!==(b&256),0!==(b&512),0!==(b&1024),0!==(b&2048),0!==(b&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(c,a,b,d,e,h,m){Object.defineProperty(a,"__esModule",{value:!0});var f=function(){function b(b,a,d){this.unit=b;this.pageId=a;this.semantic=d}b.prototype.clone=function(){return new b(this.unit,this.pageId,this.semantic)};b.prototype.serialize=function(b){b.writeInt32(this.unit);b.writeInt32(this.pageId);return b};b.deserialize=function(a){var d=a.readInt32();a=a.readInt32();return new b(d,a,"u_texture")};return b}();a.TexBindingInfo=f;var k=function(){function b(b,a){this.name=b;this.value=
a}b.prototype.clone=function(){return new b(this.name,this.value)};b.prototype.serialize=function(b){b.writeInt32(this.value);return b};b.deserialize=function(a){a=a.readInt32();return new b("u_my_param",a)};return b}();a.MaterialParam=k;c=function(){function a(){this.texBindingInfo=[];this.materialParams=[]}a.fromSprite=function(c,e,l){var k=new a,p=new h;p.geometryType=e;c?(p.sdf=c.sdf,p.pattern=!0,k.texBindingInfo.push(new f(1,c.page,"u_texture"))):(p.sdf=!1,p.pattern=!1);0===l?p.vvOpacity=p.vvSizeMinMaxValue=
p.vvSizeScaleStops=p.vvSizeFieldStops=p.vvSizeUnitValue=p.vvColor=p.vvRotation=!1:(p.vvOpacity=0!==(l&b.WGLVVFlag.OPACITY),p.vvSizeMinMaxValue=0!==(l&b.WGLVVFlag.SIZE_MINMAX_VALUE),p.vvSizeScaleStops=0!==(l&b.WGLVVFlag.SIZE_SCALE_STOPS),p.vvSizeFieldStops=0!==(l&b.WGLVVFlag.SIZE_FIELD_STOPS),p.vvSizeUnitValue=0!==(l&b.WGLVVFlag.SIZE_UNIT_VALUE),p.vvColor=0!==(l&b.WGLVVFlag.COLOR),p.vvRotation=0!==(l&b.WGLVVFlag.ROTATION));p.visibility=!1;k.materialKey=d.getMaterialKey(p);k.materialKeyInfo=p;return k};
a.fromGlyph=function(c,e,l){var k=new a,p=new h;p.geometryType=e;p.sdf=!0;p.pattern=!1;p.visibility=!1;p.heatmap=!1;k.texBindingInfo.push(new f(2,c.page,"u_texture"));0===l?p.vvOpacity=p.vvSizeMinMaxValue=p.vvSizeScaleStops=p.vvSizeFieldStops=p.vvSizeUnitValue=p.vvColor=p.vvRotation=!1:(p.vvOpacity=0!==(l&b.WGLVVFlag.OPACITY),p.vvSizeMinMaxValue=0!==(l&b.WGLVVFlag.SIZE_MINMAX_VALUE),p.vvSizeScaleStops=0!==(l&b.WGLVVFlag.SIZE_SCALE_STOPS),p.vvSizeFieldStops=0!==(l&b.WGLVVFlag.SIZE_FIELD_STOPS),p.vvSizeUnitValue=
0!==(l&b.WGLVVFlag.SIZE_UNIT_VALUE),p.vvColor=0!==(l&b.WGLVVFlag.COLOR),p.vvRotation=0!==(l&b.WGLVVFlag.ROTATION));k.materialKey=d.getMaterialKey(p);k.materialKeyInfo=p;return k};a.prototype.copy=function(b){this.materialParams=b.materialParams.map(function(b){return b.clone()});this.texBindingInfo=b.texBindingInfo.map(function(b){return b.clone()});b.materialKeyInfo&&(this.materialKeyInfo=new h,this.materialKeyInfo.copy(b.materialKeyInfo));this.materialKey=b.materialKey};a.prototype.serialize=function(b){b.writeInt32(this.materialKey);
m.serializeList(b,this.texBindingInfo);m.serializeList(b,this.materialParams);return b};a.deserialize=function(b){var d=new a;d.materialKey=b.readInt32();d.texBindingInfo=m.deserializeList(b,f);d.materialParams=m.deserializeList(b,k);d.materialKeyInfo=new h;e(d.materialKeyInfo,d.materialKey);return d};return a}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(c,a){return function(b,a){b.geometryType=
a&7;a>>=3;b.sdf=0!==(a&4);b.vvSizeMinMaxValue=0!==(a&8);b.vvSizeScaleStops=0!==(a&16);b.vvSizeFieldStops=0!==(a&32);b.vvSizeUnitValue=0!==(a&64);b.vvColor=0!==(a&128);b.vvRotation=0!==(a&256);b.vvOpacity=0!==(a&512);b.visibility=0!==(a&1024);b.pattern=0!==(a&2048);b.heatmap=0!==(a&4096);return b}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(c,a){return function(){function b(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}b.prototype.copy=function(b){this.geometryType=b.geometryType;this.sdf=b.sdf;this.vvSizeMinMaxValue=b.vvSizeMinMaxValue;this.vvSizeScaleStops=b.vvSizeScaleStops;this.vvSizeFieldStops=b.vvSizeFieldStops;this.vvSizeUnitValue=b.vvSizeUnitValue;this.vvColor=b.vvColor;this.vvRotation=b.vvRotation;this.vvOpacity=b.vvOpacity;this.visibility=b.visibility;this.pattern=b.pattern;
this.heatmap=b.heatmap};b.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};b.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};b.prototype.hasVVColor=function(){return this.vvColor};b.prototype.hasVVRotation=function(){return this.vvRotation};b.prototype.hasVVOpacity=
function(){return this.vvOpacity};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.serializeList=function(b,a){if(null===a)b.writeInt32(0);else{b.writeInt32(a.length);for(var d=0;d<a.length;d++)a[d].serialize(b);return b}};a.deserializeList=function(b,a,c){for(var d=b.readInt32(),d=Array(d),e=0;e<d.length;e++)d[e]=a.deserialize(b,c);return d}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(c,a,b,d){c=new d;d.parse(b,c);return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require","exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(c,a,b,d){c=new d;d.parse(b,c);return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml",
"../../../../webgl/ShaderSnippets"],function(c,a,b,d){c=new d;d.parse(b,c);return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml","../../../../webgl/ShaderSnippets"],function(c,a,b,d){c=new d;d.parse(b,c);return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(c,
a,b,d){c=new d;d.parse(b,c);return c})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(c,a,b,d,e){function h(b){return b.reduce(function(b,a,d){a&&(b|=1<<d);return b},0)}return function(){function a(b,a,d,c,e,m){"string"===typeof b?this._initParams(b,a,d,c,e,m):this._initObject({programNamePrefix:b.programNamePrefix,shaderSnippetPrefixes:b.shaderSnippetPrefixes,baseDefines:b.baseDefines,snippets:b.snippets,
rctx:b.rctx,vertexAttribLocs:b.vertexAttribLocs})}a.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(b){return b.dispose()}),this._programCache.clear())};a.prototype._initObject=function(b){this._initParams(b.programNamePrefix,b.shaderSnippetPrefixes,b.baseDefines,b.snippets,b.rctx,b.vertexAttribLocs)};a.prototype._initParams=function(b,a,c,e,m,h){this._defaultSnippets=e;this._defaultRctx=m;this._defaultVertexAttribLocs=h;this._programCache=new Map;this._variationInfo=
new Map;this._shaderSourceVariator=new d(b,a,c)};a.prototype.addDefine=function(b,a,d,c){this._shaderSourceVariator.addDefine(b,a,d,c)};a.prototype.addBinaryShaderSnippetSuffix=function(b,a,d){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(b,a,d)};a.prototype.addNaryShaderSnippetSuffix=function(b,a){this._shaderSourceVariator.addNaryShaderSnippetSuffix(b,a)};a.prototype.getProgram=function(a,d,c,p){d=d||this._defaultSnippets;c=c||this._defaultRctx;p=p||this._defaultVertexAttribLocs;if(!d)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");
if(!c)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!p)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");var f=h(a);if(this._programCache.has(f))return this._programCache.get(f);a=this._shaderSourceVariator.getShaderVariation(a);var l,k;l=a.shaderSnippetNames[0];k=d[l];e.assert(null!=k,"shader snippet '"+l+"' does not exist");l=a.shaderSnippetNames[1];d=d[l];e.assert(null!=d,"shader snippet '"+
l+"' does not exist");c=new b(c,k,d,p,a.defines);this._programCache.set(f,c);return c};a.prototype.getProgramByKey=function(a){if(this._programCache.has(a))return this._programCache.get(a);if(!this._variationInfo[a])return null;var d=this._variationInfo[a],c=this._defaultSnippets,f=this._defaultRctx,m=this._defaultVertexAttribLocs,h,v;h=d.shaderSnippetNames[0];v=c[h];e.assert(null!=v,"shader snippet '"+h+"' does not exist");h=d.shaderSnippetNames[1];c=c[h];e.assert(null!=c,"shader snippet '"+h+"' does not exist");
d=new b(f,v,c,m,d.defines);this._programCache.set(a,d);return d};a.prototype.getProgramInfo=function(b){var a=this._shaderSourceVariator.getShaderVariation(b);b=h(b);this._variationInfo[b]||(this._variationInfo[b]=a);return{name:a.programName,key:b}};return a}()})},"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(c,a,b,d){return function(){function a(b,a,c){var e;"string"===typeof b?e=b:(e=b.programNamePrefix,a=
b.shaderSnippetPrefixes,c=b.baseDefines);d.assert(a,"you must specify shader snippet prefixes");d.assert(2===a.length,"you must specify shader snippet prefixes for vertex and fragment shaders");c&&0!==c.length||(c=[]);this.programNamePrefix=e;this.shaderSnippetPrefixes=a;this.baseDefines=c;this.variables=[];this.sealed=!1}a.prototype.addDefine=function(b,a,c,e){d.assert(!this.sealed,"you cannot add another variable after the first program has been generated");d.assert(b,"you must specify a program name suffix");
this.variables.push({programNameSuffixes:["",b],shaderNameSuffixes:e||b,defineStr:a,affectsShaderTypes:c||[!0,!0]})};a.prototype.addBinaryShaderSnippetSuffix=function(b,a,c){d.assert(!this.sealed,"you cannot add another variable after the first program has been generated");d.assert(b,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",b],shaderSnippetSuffixes:["",a],affectsShaderTypes:c||[!0,!0]})};a.prototype.addNaryShaderSnippetSuffix=function(b,a){d.assert(!this.sealed,
"you cannot add another variable after the first program has been generated");var c=b.map(function(b){d.assert(null!=b.value,"value must always be specified");return b.value});this.variables.push({values:c,programNameSuffixes:b.map(function(b,a){return null!=b.programNameSuffix?b.programNameSuffix:c[a]}),shaderSnippetSuffixes:b.map(function(b,a){return null!=b.shaderSnippetSuffix?b.shaderSnippetSuffix:c[a]}),affectsShaderTypes:a||[!0,!0]})};a.prototype.getShaderVariation=function(a){d.assert(a.length===
this.variables.length,"you must specify a value for each variable");for(var c=this.programNamePrefix,e=b.clone(this.shaderSnippetPrefixes),k=b.clone(this.shaderSnippetPrefixes),l=b.clone(this.baseDefines),p=0;p<this.variables.length;p++){var h=this.variables[p],t=a[p],v=void 0;h.values?(v=h.values.indexOf(t),d.assert(0<=v,"invalid value "+t+" for variable "+p)):v=t?1:0;c+=h.programNameSuffixes[v];for(t=0;2>t;t++)h.affectsShaderTypes[t]&&(h.shaderSnippetSuffixes&&(e[t]+=h.shaderSnippetSuffixes[v],
k[t]+=h.shaderSnippetSuffixes[v]),h.defineStr&&v&&(l.push(h.defineStr),k[t]+=h.shaderNameSuffixes))}return{programName:c,shaderSnippetNames:e,shaderNames:k,defines:l}};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(c,a,b,d,e,h,m,f,k,l){function p(b){return b.map(function(b){return b.name})}
function q(b){for(var a={},g=0;g<b.length;g++){var n=b[g];a[n.name]=n.strideInBytes}return a}function t(b,g){switch(b){case k.WGLGeometryType.MARKER:return g?a.C_ICON_VERTEX_NAMES_VV:a.C_ICON_VERTEX_NAMES;case k.WGLGeometryType.FILL:return g?a.C_FILL_VERTEX_NAMES_VV:a.C_FILL_VERTEX_NAMES;case k.WGLGeometryType.LINE:return g?a.C_LINE_VERTEX_NAMES_VV:a.C_LINE_VERTEX_NAMES;case k.WGLGeometryType.TEXT:return g?a.C_TEXT_VERTEX_NAMES_VV:a.C_TEXT_VERTEX_NAMES;case k.WGLGeometryType.LABEL:return a.C_LABEL_VERTEX_NAMES}return null}
function v(b){switch(b){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return b}function y(b){if(b=v(b.type)){switch(b){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function u(b){if(b=v(b.type)){switch(b){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}
function A(b){if(b=v(b.type)){switch(b){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}function z(b){if(b=v(b.type)){switch(b){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function g(b){return b&&b.length||0}function n(b){return"string"===typeof b}Object.defineProperty(a,"__esModule",{value:!0});var r=e.getLogger("esri.views.2d.engine.webgl.Utils");a.C_HITTEST_SEARCH_SIZE=4;a.C_VBO_GEOMETRY="geometry";a.C_VBO_PERINSTANCE="per_instance";a.C_VBO_PERINSTANCE_VV=
"per_instance_vv";a.C_VBO_VISIBILITY="visibility";a.C_VBO_VISIBILITY_RANGE="visibilityRange";a.C_ICON_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];a.C_ICON_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:40,divisor:0}];a.C_ICON_HEATMAP=[{name:a.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];a.C_FILL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];a.C_FILL_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];a.C_LINE_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,
strideInBytes:32,divisor:0}];a.C_LINE_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];a.C_TEXT_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_TEXT_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_LABEL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:a.C_VBO_VISIBILITY_RANGE,
strideInBytes:2,divisor:0}];a.C_ICON_VERTEX_NAMES=p(a.C_ICON_VERTEX_DEF);a.C_ICON_VERTEX_NAMES_VV=p(a.C_ICON_VERTEX_DEF_VV);a.C_FILL_VERTEX_NAMES=p(a.C_FILL_VERTEX_DEF);a.C_FILL_VERTEX_NAMES_VV=p(a.C_FILL_VERTEX_DEF_VV);a.C_LINE_VERTEX_NAMES=p(a.C_LINE_VERTEX_DEF);a.C_LINE_VERTEX_NAMES_VV=p(a.C_LINE_VERTEX_DEF_VV);a.C_TEXT_VERTEX_NAMES=p(a.C_TEXT_VERTEX_DEF);a.C_TEXT_VERTEX_NAMES_VV=p(a.C_TEXT_VERTEX_DEF_VV);a.C_LABEL_VERTEX_NAMES=p(a.C_LABEL_VERTEX_DEF);a.C_ICON_STRIDE_SPEC=q(a.C_ICON_VERTEX_DEF);
a.C_ICON_STRIDE_SPEC_VV=q(a.C_ICON_VERTEX_DEF_VV);a.C_ICON_STRIDE_SPEC_HEATMAP=q(a.C_ICON_HEATMAP);a.C_FILL_STRIDE_SPEC=q(a.C_FILL_VERTEX_DEF);a.C_FILL_STRIDE_SPEC_VV=q(a.C_FILL_VERTEX_DEF_VV);a.C_LINE_STRIDE_SPEC=q(a.C_LINE_VERTEX_DEF);a.C_LINE_STRIDE_SPEC_VV=q(a.C_LINE_VERTEX_DEF_VV);a.C_TEXT_STRIDE_SPEC=q(a.C_TEXT_VERTEX_DEF);a.C_TEXT_STRIDE_SPEC_VV=q(a.C_TEXT_VERTEX_DEF_VV);a.C_LABEL_STRIDE_SPEC=q(a.C_LABEL_VERTEX_DEF);a.getStrides=function(b,g,n){void 0===n&&(n=!1);switch(b){case k.WGLGeometryType.MARKER:return g?
a.C_ICON_STRIDE_SPEC_VV:n?a.C_ICON_STRIDE_SPEC_HEATMAP:a.C_ICON_STRIDE_SPEC;case k.WGLGeometryType.FILL:return g?a.C_FILL_STRIDE_SPEC_VV:a.C_FILL_STRIDE_SPEC;case k.WGLGeometryType.LINE:return g?a.C_LINE_STRIDE_SPEC_VV:a.C_LINE_STRIDE_SPEC;case k.WGLGeometryType.TEXT:return g?a.C_TEXT_STRIDE_SPEC_VV:a.C_TEXT_STRIDE_SPEC;case k.WGLGeometryType.LABEL:return a.C_LABEL_STRIDE_SPEC}return null};a.getNamedBuffers=t;a.getSymbolGeometryType=function(b){return y(b)?k.WGLGeometryType.MARKER:A(b)?k.WGLGeometryType.LINE:
u(b)?k.WGLGeometryType.FILL:z(b)?k.WGLGeometryType.TEXT:k.WGLGeometryType.UNKNOWN};a.normalizeSymbolType=v;a.isMarkerSymbol=y;a.isFillSymbol=u;a.isLineSymbol=A;a.isPictureSymbol=function(b){if(b=v(b.type))switch(b){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};a.isTextSymbol=z;a.getTextProperties=function(b){return l.TextProperties.pool.acquire(b.color?f.copyAndPremultiply(b.color):[255,255,255,255],b.haloColor?f.copyAndPremultiply(b.haloColor):[255,255,255,255],
h.pt2px(b.haloSize),h.pt2px(b.font.size),b.angle*Math.PI/180,b.xoffset/b.font.size,b.yoffset/b.font.size,"left"===b.horizontalAlignment?0:"right"===b.horizontalAlignment?1:.5,"top"===b.verticalAlignment?0:"bottom"===b.verticalAlignment?1:.5)};a.isSameUniformValue=function(b,a){return!1};a.isSameMaterialInfo=function(b,a){if(b.materialKey!==a.materialKey||g(b.texBindingInfo)!==g(a.texBindingInfo)||g(b.materialParams)!==g(a.materialParams))return!1;for(var n=b.texBindingInfo.length,d=0;d<n;++d){var c=
b.texBindingInfo[d],r=a.texBindingInfo[d];if(c.unit!==r.unit||c.pageId!==r.pageId||c.semantic!==r.semantic)return!1}b=b.materialParams.length;for(d=0;d<b;)return!1;return!0};a.serializeString=function(b,a,g){for(var n=0,d=b.length,c=0;c<d;++c)a&&(a[g+n]=b.charCodeAt(c)),++n;a&&(a[g+n]=0);++n;return n};a.deserializeString=function(b,a,g){var n=0;b.s="";for(var d=!0;d;){var c=a[g+n];++n;0!==c?b.s+=String.fromCharCode(c):d=!1}return n};a.isDefined=function(b){return null!==b&&void 0!==b};a.isNumber=
function(b){return"number"===typeof b};a.isString=n;a.isStringOrNull=function(b){return null==b||n(b)};a.lerp=function(b,a,g){return b+(a-b)*g};c=function(){function b(){this._arr=[];this._push=this._push.bind(this)}b.prototype._push=function(b,a){this._arr.push(a)};b.prototype.getKeys=function(b){this._arr.length=0;b&&b.forEach(this._push);return this._arr};return b}();a.KeysGetter=c;c=function(){function b(){this._arr=[];this._push=this._push.bind(this)}b.prototype._push=function(b,a){this._arr.push(b)};
b.prototype.getValues=function(b){this._arr.length=0;b&&b.forEach(this._push);return this._arr};return b}();a.ValuesGetter=c;a.getCapType=function(b){switch(b){case "butt":return k.CapType.BUTT;case "round":return k.CapType.ROUND;case "square":return k.CapType.SQUARE;default:return r.error("Cannot interpret unknown cap: "+b),k.CapType.UNKNOWN}};a.getJoinType=function(b){switch(b){case "miter":return k.JoinType.MITER;case "bevel":return k.JoinType.BEVEL;case "round":return k.JoinType.ROUND;default:return r.error("Cannot interpret unknown join: "+
b),k.JoinType.UNKNOWN}};a.getVVType=function(b){switch(b){case "opacity":return k.VVType.OPACITY;case "color":return k.VVType.COLOR;case "rotation":return k.VVType.ROTATION;case "size":return k.VVType.SIZE;default:return r.error("Cannot interpret unknown vv: "+b),null}};a.createArcadeFunction=function(a,g){var n=a.spatialReference,c=a.layer,r=m.createFunction(a.valueExpression),e=new d;return function(a,d){e.repurposeFromGraphicLikeObject(a.geometry,a.attributes,c);a=d&&new b({viewingMode:d.viewingMode,
scale:d.scale});a=m.executeFunction(r,{vars:{$feature:e,$view:a||{}},spatialReference:n});return g?g(a):a}};a.copyMeshData=function(b,a,g,n,d,c,r){for(var e in c)for(var f=c[e].stride,l=c[e].data,k=g[e].data,p=f*d.vertexCount/4,B=f*b/4,m=f*d.vertexFrom/4,f=0;f<p;++f)k[f+B]=l[f+m];g=d.indexCount;for(f=0;f<g;++f)n[f+a]=r[f+d.indexFrom]-d.vertexFrom+b};a.C_VBO_INFO=(B={},B[a.C_VBO_GEOMETRY]=35044,B[a.C_VBO_VISIBILITY]=35044,B[a.C_VBO_VISIBILITY_RANGE]=35048,B);a.createGeometryData=function(b,a,g){for(var n=
[],d=0;5>d;++d){for(var c={},r=0,e=t(d,b);r<e.length;r++){var f=e[r];c[f]={data:g(d,f)}}n.push({data:a(d),buffers:c})}return n};var B})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(c,a,b){return b})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(c,a,b){b.prototype.repurposeFromGraphicLikeObject=function(b,a,c){void 0===c&&(c=null);null===a&&(a={});this.attributes=
a;this.geometry=b;this._datesfixed=(this._layer=c)?!1:!0};return b})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(c,a,b){var d={info:0,warn:1,error:2};c=function(){function b(a){void 0===a&&(a={});this.module=a.module||"";this.writer=a.writer||null;this.level=a.level||null;null!=a.enabled&&(this.enabled=!!a.enabled);b._loggers[this.module]=this;a=this.module.lastIndexOf(".");-1!==a&&(this.parent=b.getLogger(this.module.slice(0,a)))}b.prototype.log=
function(b){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(b)&&(d=this._inheritedWriter())&&d.apply(void 0,[b,this.module].concat(a))};b.prototype.error=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["error"].concat(b))};b.prototype.warn=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["warn"].concat(b))};b.prototype.info=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=
arguments[a];this.log.apply(this,["info"].concat(b))};b.prototype.getLogger=function(a){return b.getLogger(this.module+"."+a)};b.getLogger=function(a){var d=b._loggers[a];d||(d=new b({module:a}));return d};b.prototype._parentWithMember=function(b,a){for(var d=this;d&&null==d[b];)d=d.parent;return d?d[b]:a};b.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};b.prototype._consoleWriter=function(b,a){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];
console[b].apply(console,["["+a+"]"].concat(d))};b.prototype._matchLevel=function(b){return d[this._parentWithMember("level","error")]<=d[b]};b.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};b._loggers={};return b}();a=c.getLogger("esri");b("dojo-debug-messages")?a.level="info":a.level="warn";return c})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],function(c,a){function b(b){return b?72*b/a.DPI:0}Object.defineProperty(a,"__esModule",
{value:!0});var d=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.DPI=96;a.pt2px=function(b){return b?b/72*a.DPI:0};a.px2pt=b;a.toPt=function(a){if("string"===typeof a){if(d.test(a)){var c=a.match(d),e=Number(c[1]),c=c[3]&&c[3].toLowerCase();a="-"===a.charAt(0);e="px"===c?b(e):e;return a?-e:e}console.warn("screenUtils.toPt: input not recognized!");return null}return a}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils","esri/arcade/Dictionary"],
function(c,a,b,d){Object.defineProperty(a,"__esModule",{value:!0});a.createSyntaxTree=function(a){return b.createSyntaxTree(a)};a.createFunction=function(a,d){return b.createFunction(a,d)};a.createExecContext=function(a,d){return b.createExecContext(a,d)};a.executeFunction=function(a,d){return b.executeFunction(a,d)};a.extractFieldNames=function(a){return b.extractFieldNames(a)};a.getViewInfo=function(b){if(b&&b.viewingMode&&null!=b.scale&&b.spatialReference)return{view:new d({viewingMode:b.viewingMode,
scale:b.scale}),sr:b.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(c,a,b,d){a("extend-esri")&&c.setObject("renderer.arcadeUtils",d,b);return d})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(c,a,b){function d(b,a){Array.isArray(a)?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=a.r,b[1]=a.g,b[2]=a.b,b[3]=a.a);return b}function e(b,
a,d){void 0===a&&(a=0);void 0===d&&(d=!1);var c=b[a+3];b[a+0]*=c;b[a+1]*=c;b[a+2]*=c;d||(b[a+3]*=255);return b}Object.defineProperty(a,"__esModule",{value:!0});a.white=[255,255,255,1];var h=[0,0,0,0];a.premultiplyAlpha=e;a.copyAndPremultiply=function(b){return e(d([],b))};a.premultiplyAlphaUint32=function(a){e(d(h,a));return b.i8888to32(h[0],h[1],h[2],h[3])};a.premultiplyAlphaRGBA=function(a){var d=a.a;return b.i8888to32(a.r*d,a.g*d,a.b*d,255*d)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require",
"exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var b=new Float32Array(1),d=new Uint32Array(b.buffer);a.nextHighestPowerOfTwo=function(b){b--;b|=b>>1;b|=b>>2;b|=b>>4;b|=b>>8;b|=b>>16;b++;return b};a.toUint32=function(a){b[0]=a;return d[0]};a.i1616to32=function(b,a){return 65535&b|a<<16};a.i8888to32=function(b,a,d,c){return b&255|(a&255)<<8|(d&255)<<16|c<<24};a.i8816to32=function(b,a,d){return b&255|(a&255)<<8|d<<16};a.numTo32=function(b){return b|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require",
"exports","../../../../core/ObjectPool"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}a.prototype.acquire=function(b,a,d,c,k,l,p,q,t){this.color=b;this.haloColor=a;this.haloSize=d;this.size=c;this.angle=k;this.offsetX=l;this.offsetY=p;this.hAnchor=q;this.vAnchor=t};a.prototype.release=function(){this.color[0]=this.color[1]=
this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};a.pool=new b(a);return a}();a.TextProperties=c})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(c,a){var b=function(){return function(){}}();return function(){function a(b,a,d,c,k){void 0===c&&(c=1);void 0===k&&(k=0);this.classConstructor=b;this.acquireFunctionOrWithConstructor=
a;this.releaseFunction=d;this.growthSize=c;!0===a?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof a&&(this.acquireFunction=a);this._pool=Array(k);this._set=new Set;this._initialSize=k;for(b=0;b<k;b++)this._pool[b]=new this.classConstructor;this.growthSize=Math.max(c,1)}a.prototype.acquire=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];d=this.classConstructor||b;if(0===this._pool.length)for(var c=this.growthSize,f=0;f<c;f++)this._pool[f]=new d;d=this._pool.shift();
this.acquireFunction?this.acquireFunction.apply(this,[d].concat(a)):d&&d.acquire&&"function"===typeof d.acquire&&d.acquire.apply(d,a);this._set.delete(d);return d};a.prototype.release=function(b){b&&!this._set.has(b)&&(this.releaseFunction?this.releaseFunction(b):b&&b.release&&"function"===typeof b.release&&b.release(),this._pool.push(b),this._set.add(b))};a.prototype.prune=function(b){void 0===b&&(b=this._initialSize);if(!(this._pool.length<=b))for(var a;b>this._pool.length;)a=this._pool.shift(),
this._set.delete(a),a.dispose&&"function"===typeof a.dispose&&a.dispose()};a.prototype._constructorAcquireFunction=function(b){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];(c=this.classConstructor).call.apply(c,[b].concat(a));var c};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=a.call(this)||this;b._initialized=!1;b._maxWidth=0;b._color=new Float32Array([1,0,0,1]);return b}b(c,a);c.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=
null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};c.prototype.draw=function(b,a){b=b.context;if(a.status!==m.TileStatus.INITIALIZED){this._initialized||this._initialize(b);b.bindVAO(this._outlineVertexArrayObject);b.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",a.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord);
this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);b.setLineWidth(2);b.drawArrays(3,0,4);b.bindVAO();var d=this._getTexture(b,a);d&&(b.bindVAO(this._tileInfoVertexArrayObject),b.bindProgram(this._tileInfoProgram),b.bindTexture(d,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",a.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),
this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",d.descriptor.width,d.descriptor.height),b.drawArrays(5,0,4),b.bindVAO())}};c.prototype._initialize=function(b){if(this._initialized)return!0;var a={a_pos:0},d=new k(b,h.backgroundVS,h.backgroundFS,a),c=new k(b,h.tileInfoVS,h.tileInfoFS,a),e={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,
normalized:!1,divisor:0}]},g=new Int8Array([0,0,1,0,1,1,0,1]),g=f.createVertex(b,35044,g),g=new p(b,a,e,{geometry:g}),n=new Int8Array([0,0,1,0,0,1,1,1]),n=f.createVertex(b,35044,n);b=new p(b,a,e,{geometry:n});this._outlineProgram=d;this._tileInfoProgram=c;this._outlineVertexArrayObject=g;this._tileInfoVertexArrayObject=b;return this._initialized=!0};c.prototype._getTexture=function(b,a){if(a.texture)return a.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",
"canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var c=a.key.id,f=this._canvas.getContext("2d");f.font="24px sans-serif";f.textAlign="left";f.textBaseline="middle";var e=f.measureText(c),e=Math.pow(2,Math.ceil(d.log2(e.width+2)));e>this._maxWidth&&(this._maxWidth=e);f.clearRect(0,0,this._maxWidth,32);f.fillStyle="blue";f.fillText(c,0,16);a.texture=new l(b,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},
this._canvas);return a.texture};return c}(e.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(){}}();a.default=c})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=a.TileStatus||(a.TileStatus={});c[c.INITIALIZED=0]="INITIALIZED";
c[c.NO_DATA=1]="NO_DATA";c[c.READY=2]="READY";c[c.MODIFIED=3]="MODIFIED";c[c.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(c,a,b){return function(){function a(d,c,m){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=d;this._desc={pixelFormat:c.pixelFormat,internalFormat:c.internalFormat,dataType:c.dataType,target:c.target?
c.target:3553,samplingMode:c.samplingMode?c.samplingMode:9729,wrapMode:c.wrapMode?c.wrapMode:10497,maxAnisotropy:c.maxAnisotropy,flipped:void 0!==c.flipped?c.flipped:!1,hasMipmap:void 0!==c.hasMipmap?c.hasMipmap:!1,level:void 0!==c.level?c.level:0,unpackAlignment:c.unpackAlignment?c.unpackAlignment:4,width:c.width,height:c.height,preMultiplyAlpha:void 0!==c.preMultiplyAlpha?c.preMultiplyAlpha:!1};this._id=++a._nextId;b("esri-webgl-debug")&&d.instanceCounter.incrementCount(0);this.setData(m)}Object.defineProperty(a.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){var a=this;if(this._context){if(this._glName){var d=this._context.gl;this._boundToUnits.forEach(function(b){a._context.bindTexture(null,b)});d.deleteTexture(this._glName);this._glName=
null}b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);this._context=null}};a.prototype.resize=function(b,a){var d=this._desc;if(d.width!==b||d.height!==a)d.width=b,d.height=a,this.setData(null)};a.prototype.setData=function(b){var d=this._context.gl;this._glName||(this._glName=d.createTexture());void 0===b&&(b=null);null===b&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);
var f=this._desc;a._validateTexture(f);d.pixelStorei(d.UNPACK_ALIGNMENT,f.unpackAlignment);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,f.flipped?1:0);d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f.preMultiplyAlpha);if(b instanceof ImageData||b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof HTMLVideoElement)f.width&&f.height&&console.assert(b.width===f.width&&b.height===f.height),d.texImage2D(d.TEXTURE_2D,f.level,f.internalFormat?f.internalFormat:f.pixelFormat,f.pixelFormat,f.dataType,
b),void 0===this._desc.width&&(this._desc.width=b.width),void 0===this._desc.height&&(this._desc.height=b.height);else{null!=f.width&&null!=f.height||console.error("Width and height must be specified!");var e=f.internalFormat?f.internalFormat:f.pixelFormat,l=f.pixelFormat;d.DEPTH24_STENCIL8&&e===d.DEPTH_STENCIL&&(e=d.DEPTH24_STENCIL8);d.texImage2D(d.TEXTURE_2D,f.level,e,f.width,f.height,0,l,f.dataType,b)}f.hasMipmap&&this.generateMipmap();a._applySamplingMode(d,this._desc);a._applyWrapMode(d,this._desc);
a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(c,0)};a.prototype.updateData=function(b,a,d,c,k,l){l||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var f=this._context.gl,e=this._desc,m=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>a||0>d||c>e.width||k>e.height||a+c>e.width||d+k>e.height)&&console.error("An attempt to update out of bounds of the texture!");
l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?(console.assert(l.width===c&&l.height===k),f.texSubImage2D(f.TEXTURE_2D,b,a,d,e.pixelFormat,e.dataType,l)):f.texSubImage2D(f.TEXTURE_2D,b,a,d,c,k,e.pixelFormat,e.dataType,l);this._context.bindTexture(m,0)};a.prototype.generateMipmap=function(){var b=this._desc;b.hasMipmap||(b.hasMipmap=!0,a._validateTexture(b));9729===b.samplingMode?(this._samplingModeDirty=!0,b.samplingMode=9985):
9728===b.samplingMode&&(this._samplingModeDirty=!0,b.samplingMode=9984);b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._context.gl;d.generateMipmap(d.TEXTURE_2D);this._context.bindTexture(b,0)};a.prototype.setSamplingMode=function(b){b!==this._desc.samplingMode&&(this._desc.samplingMode=b,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=function(b){b!==this._desc.wrapMode&&(this._desc.wrapMode=b,a._validateTexture(this._desc),this._wrapModeDirty=
!0)};a.prototype.applyChanges=function(){var b=this._context.gl,d=this._desc;this._samplingModeDirty&&(a._applySamplingMode(b,d),this._samplingModeDirty=!1);this._wrapModeDirty&&(a._applyWrapMode(b,d),this._wrapModeDirty=!1)};a.prototype.setBoundToUnit=function(b,a){a?this._boundToUnits.add(b):this._boundToUnits.delete(b)};a._isPowerOfTwo=function(b){return 0===(b&b-1)};a._validateTexture=function(b){(0>b.width||0>b.height)&&console.error("Negative dimension parameters are not allowed!");a._isPowerOfTwo(b.width)&&
a._isPowerOfTwo(b.height)||(33071!==b.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),b.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};a._applySamplingMode=function(b,a){var d=a.samplingMode;if(9985===d||9987===d)d=9729;else if(9984===d||9986===d)d=9728;b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,d);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.samplingMode)};a._applyWrapMode=function(b,a){b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_S,a.wrapMode);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,a.wrapMode)};a._applyAnisotropicFilteringParameters=function(b,a){if(null!=a.maxAnisotropy){var d=b.capabilities.textureFilterAnisotropic;d&&(b=b.gl,b.texParameterf(b.TEXTURE_2D,d.TEXTURE_MAX_ANISOTROPY,a.maxAnisotropy))}};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(c,a,b,d,e,h,m,f,k){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=a.call(this)||this;b._color=d.create();b._initialized=!1;b._color.set([1,0,0,1]);return b}b(c,a);c.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};c.prototype.draw=function(b,a){b=b.context;this._initialized||this._initialize(b);
b.setStencilFunctionSeparate(1032,519,a.stencilRef,255);b.bindVAO(this._solidVertexArrayObject);b.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",a.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);b.drawArrays(5,0,4);b.bindVAO()};c.prototype._initialize=
function(b){if(this._initialized)return!0;var a={a_pos:0},d=new f(b,h.backgroundVS,h.backgroundFS,a);if(!d)return!1;var c=new Int8Array([0,0,1,0,0,1,1,1]),c=m.createVertex(b,35044,c);b=new k(b,a,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:c});this._solidProgram=d;this._solidVertexArrayObject=b;return this._initialized=!0};return c}(e.default);a.default=c})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(c){var a=
{create:function(){var b=new c.ARRAY_TYPE(4);b[0]=0;b[1]=0;b[2]=0;b[3]=0;return b},clone:function(b){var a=new c.ARRAY_TYPE(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},fromValues:function(b,a,e,h){var d=new c.ARRAY_TYPE(4);d[0]=b;d[1]=a;d[2]=e;d[3]=h;return d},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set:function(b,a,c,h,m){b[0]=a;b[1]=c;b[2]=h;b[3]=m;return b},add:function(b,a,c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];return b},subtract:function(b,
a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];return b}};a.sub=a.subtract;a.multiply=function(b,a,c){b[0]=a[0]*c[0];b[1]=a[1]*c[1];b[2]=a[2]*c[2];b[3]=a[3]*c[3];return b};a.mul=a.multiply;a.divide=function(b,a,c){b[0]=a[0]/c[0];b[1]=a[1]/c[1];b[2]=a[2]/c[2];b[3]=a[3]/c[3];return b};a.div=a.divide;a.ceil=function(b,a){b[0]=Math.ceil(a[0]);b[1]=Math.ceil(a[1]);b[2]=Math.ceil(a[2]);b[3]=Math.ceil(a[3]);return b};a.floor=function(b,a){b[0]=Math.floor(a[0]);b[1]=Math.floor(a[1]);b[2]=
Math.floor(a[2]);b[3]=Math.floor(a[3]);return b};a.min=function(b,a,c){b[0]=Math.min(a[0],c[0]);b[1]=Math.min(a[1],c[1]);b[2]=Math.min(a[2],c[2]);b[3]=Math.min(a[3],c[3]);return b};a.max=function(b,a,c){b[0]=Math.max(a[0],c[0]);b[1]=Math.max(a[1],c[1]);b[2]=Math.max(a[2],c[2]);b[3]=Math.max(a[3],c[3]);return b};a.round=function(b,a){b[0]=Math.round(a[0]);b[1]=Math.round(a[1]);b[2]=Math.round(a[2]);b[3]=Math.round(a[3]);return b};a.scale=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*
c;return b};a.scaleAndAdd=function(b,a,c,h){b[0]=a[0]+c[0]*h;b[1]=a[1]+c[1]*h;b[2]=a[2]+c[2]*h;b[3]=a[3]+c[3]*h;return b};a.distance=function(b,a){var c=a[0]-b[0],d=a[1]-b[1],m=a[2]-b[2];b=a[3]-b[3];return Math.sqrt(c*c+d*d+m*m+b*b)};a.dist=a.distance;a.squaredDistance=function(b,a){var c=a[0]-b[0],d=a[1]-b[1],m=a[2]-b[2];b=a[3]-b[3];return c*c+d*d+m*m+b*b};a.sqrDist=a.squaredDistance;a.length=function(b){var a=b[0],c=b[1],h=b[2];b=b[3];return Math.sqrt(a*a+c*c+h*h+b*b)};a.len=a.length;a.squaredLength=
function(b){var a=b[0],c=b[1],h=b[2];b=b[3];return a*a+c*c+h*h+b*b};a.sqrLen=a.squaredLength;a.negate=function(b,a){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};a.inverse=function(b,a){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};a.normalize=function(b,a){var c=a[0],d=a[1],m=a[2];a=a[3];var f=c*c+d*d+m*m+a*a;0<f&&(f=1/Math.sqrt(f),b[0]=c*f,b[1]=d*f,b[2]=m*f,b[3]=a*f);return b};a.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]};a.lerp=function(b,a,c,h){var d=
a[0],f=a[1],e=a[2];a=a[3];b[0]=d+h*(c[0]-d);b[1]=f+h*(c[1]-f);b[2]=e+h*(c[2]-e);b[3]=a+h*(c[3]-a);return b};a.random=function(b,d){d=d||1;b[0]=c.RANDOM();b[1]=c.RANDOM();b[2]=c.RANDOM();b[3]=c.RANDOM();a.normalize(b,b);a.scale(b,b,d);return b};a.transformMat4=function(b,a,c){var d=a[0],e=a[1],f=a[2];a=a[3];b[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*a;b[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*a;b[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*a;b[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*a;return b};a.transformQuat=function(b,a,c){var d=a[0],e=
a[1],f=a[2],k=c[0],l=c[1],p=c[2];c=c[3];var q=c*d+l*f-p*e,t=c*e+p*d-k*f,v=c*f+k*e-l*d,d=-k*d-l*e-p*f;b[0]=q*c+d*-k+t*-p-v*-l;b[1]=t*c+d*-l+v*-k-q*-p;b[2]=v*c+d*-p+q*-l-t*-k;b[3]=a[3];return b};a.forEach=function(){var b=a.create();return function(a,c,h,m,f,k){c||(c=4);h||(h=0);for(m=m?Math.min(m*c+h,a.length):a.length;h<m;h+=c)b[0]=a[h],b[1]=a[h+1],b[2]=a[h+2],b[3]=a[h+3],f(b,b,k),a[h]=b[0],a[h+1]=b[1],a[h+2]=b[2],a[h+3]=b[3];return a}}();a.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+
b[3]+")"};a.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};a.equals=function(b,a){var d=b[0],h=b[1],m=b[2];b=b[3];var f=a[0],k=a[1],l=a[2];a=a[3];return Math.abs(d-f)<=c.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(h-k)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(m-l)<=c.EPSILON*Math.max(1,Math.abs(m),Math.abs(l))&&Math.abs(b-a)<=c.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(c,a,b,d,e,h,m){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._isInitialized=!1;b._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};b._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};b._spritesTextureSize=new Float32Array(2);return b}b(c,a);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return d.WGLGeometryType.FILL};c.prototype.drawGeometry=
function(b,a,c,d){d=b.context;var f=b.painter,e=b.rendererInfo,l=b.requiredLevel,k=b.stationary,p=c.indexCount,g=c.indexFrom;this._initialize();var n=c.materialInfo.materialKeyInfo,r=n.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(r=b.painter.materialManager.getProgram(c.materialInfo.materialKey,b.drawPhase,r)){d.bindProgram(r);var B=this._getVAO(d,a,n.hasVV());d.bindVAO(B);if(0<c.materialInfo.texBindingInfo.length){c=c.materialInfo.texBindingInfo[0];var B=c.pageId,m=b.painter.textureManager.sprites;
this._spritesTextureSize[0]=m.getWidth(B);this._spritesTextureSize[1]=m.getHeight(B);r.setUniform1f("u_zoomFactor",1/Math.pow(2,l-a.key.level)/b.pixelRatio);f.textureManager.bindSpritePage(d,B,c.unit,k?9728:9729);r.setUniform1i(c.semantic,c.unit);r.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}r.setUniformMatrix4fv("u_transformMatrix",a.tileTransform.transform);r.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord);r.setUniform1f("u_opacity",1);n.vvColor&&(r.setUniform1fv("u_vvColorValues",
e.vvColorValues),r.setUniform4fv("u_vvColors",e.vvColors));n.vvOpacity&&(r.setUniform1fv("u_vvOpacityValues",e.vvOpacityValues),r.setUniform1fv("u_vvOpacities",e.vvOpacities));d.drawElements(4,p,5125,4*g);d.bindVAO(null)}};c.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};c.prototype._getVAO=function(b,a,c){if(a.fillGeometry.vao)return a.fillGeometry.vao;var d=a.fillGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],f=a.fillGeometry.indexBuffer;if(!d||!f)return null;a.fillGeometry.vao=c?new m(b,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:d},f):new m(b,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:d},f);return a.fillGeometry.vao};return c}(h.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(c,a,b,d,e){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,
a);c.prototype.draw=function(b,a){var c=this;if(a.canDisplay){var d=this.getGeometryType(),f=a.getDisplayList(b.drawPhase),k=a.getGeometry(d);k&&e.forEachIter(f.ofType(d),function(d){return c.drawGeometry(b,a,d,k)})}};return c}(d.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.forEachIter=function(b,a){for(;;){var c=b.next();if(c.done)break;a(c.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(c,a,b,d,e,h,m){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};b._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};b._glyphsTextureSize=new Float32Array(2);return b}b(c,a);c.prototype.dispose=function(){};c.prototype.drawGeometry=function(b,a,c,f){if(b.requiredLevel===a.key.level){f=b.context;var e=b.painter,l=b.drawPhase,k=c.materialInfo,p=c.indexCount;c=c.indexFrom;var m=this._attributeLocations,g=b.drawPhase===d.WGLDrawPhase.LABEL_ALPHA,n=k.materialKey;
g&&(n|=8);if(l=e.materialManager.getProgram(n,l,m))f.setStencilTestEnabled(!1),f.bindProgram(l),m=this._getVAO(f,a),f.bindVAO(m),g?(f.setBlendingEnabled(!1),l.setUniform1f("u_fadeStep",b.labelStep)):(k=k.texBindingInfo[0],e.textureManager.bindGlyphsPage(f,k.pageId,k.unit),l.setUniform1i(k.semantic,k.unit)),k=e.textureManager.glyphs,this._glyphsTextureSize[0]=k.width/4,this._glyphsTextureSize[1]=k.height/4,e=e.extrudeNoRotationMatrix,f.bindTexture(b.labelFBO.colorTexture,3),l.setUniform1i("u_referenceTex",
3),l.setUniformMatrix4fv("u_transformMatrix",a.tileTransform.transform),l.setUniformMatrix4fv("u_extrudeMatrix",e),l.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),l.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),l.setUniform1f("u_pixelRatio",b.pixelRatio),l.setUniform1f("u_opacity",1),l.setUniform1f("u_zoomLevel",10*b.displayLevel),l.setUniform1f("u_mapRotation",b.state.rotation),l.setUniform1f("u_mapAligned",0),l.setUniform2fv("u_screenSize",b.state.size),f.drawElements(4,
p,5125,4*c),f.bindVAO(null),f.setStencilTestEnabled(!0),f.setBlendingEnabled(!0)}};c.prototype.getGeometryType=function(){return d.WGLGeometryType.LABEL};c.prototype._getVAO=function(b,a){if((a=a.labelGeometry)&&a.vao)return a.vao;var c=a.vertexBufferMap[e.C_VBO_GEOMETRY],d=a.vertexBufferMap[e.C_VBO_VISIBILITY_RANGE],f=a.indexBuffer;if(!c||!f||!d)return null;a.vao=new m(b,this._attributeLocations,this._vertexAttributeLayout,{geometry:c,visibility:a.vertexBufferMap[e.C_VBO_VISIBILITY],visibilityRange:d},
f);return a.vao};return c}(h.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(c,a,b,d,e,h,m){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};b._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};b._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};b._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};b._spritesTextureSize=new Float32Array(2);return b}b(c,a);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return d.WGLGeometryType.LINE};c.prototype.drawGeometry=function(b,a,c,d){d=b.context;var f=b.painter,e=b.rendererInfo,l=b.requiredLevel,k=b.drawPhase,p=c.indexFrom,g=c.indexCount,n=c.materialInfo;c=n.materialKeyInfo;var r=c.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(k=f.materialManager.getProgram(n.materialKey,
k,r)){d.bindProgram(k);r=this._getVAO(d,a,c.hasVV());d.bindVAO(r);r=1/b.pixelRatio;if(0<n.texBindingInfo.length){var n=n.texBindingInfo[0],B=n.pageId,m=f.textureManager.sprites;this._spritesTextureSize[0]=m.getWidth(B);this._spritesTextureSize[1]=m.getHeight(B);f.textureManager.bindSpritePage(d,B,n.unit);k.setUniform1i(n.semantic,n.unit);k.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}b=Math.pow(2,l-a.key.level)/b.pixelRatio;k.setUniform1f("u_zoomFactor",b);k.setUniformMatrix4fv("u_transformMatrix",
a.tileTransform.transform);k.setUniformMatrix4fv("u_extrudeMatrix",f.extrudeMatrix);k.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord);k.setUniform1f("u_opacity",1);k.setUniform1f("u_blur",0+r);k.setUniform1f("u_antialiasing",r);k.setUniform1f("u_zoomFactor",b);c.vvSizeMinMaxValue&&k.setUniform4fv("u_vvSizeMinMaxValue",e.vvSizeMinMaxValue);c.vvSizeScaleStops&&k.setUniform1f("u_vvSizeScaleStopsValue",e.vvSizeScaleStopsValue);c.vvSizeFieldStops&&(k.setUniform1fv("u_vvSizeFieldStopsValues",
e.vvSizeFieldStopsValues),k.setUniform1fv("u_vvSizeFieldStopsSizes",e.vvSizeFieldStopsSizes));c.vvSizeUnitValue&&k.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",e.vvSizeUnitValueToPixelsRatio);c.vvColor&&(k.setUniform1fv("u_vvColorValues",e.vvColorValues),k.setUniform4fv("u_vvColors",e.vvColors));c.vvOpacity&&(k.setUniform1fv("u_vvOpacityValues",e.vvOpacityValues),k.setUniform1fv("u_vvOpacities",e.vvOpacities));d.setFaceCullingEnabled(!0);d.setFrontFace(2305);d.setCullFace(1029);d.drawElements(4,
g,5125,4*p);d.setFaceCullingEnabled(!1);d.bindVAO(null)}};c.prototype._getVAO=function(b,a,c){if(a.lineGeometry.vao)return a.lineGeometry.vao;var d=a.lineGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],f=a.lineGeometry.indexBuffer;if(!d||!f)return null;a.lineGeometry.vao=c?new m(b,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:d},f):new m(b,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:d},f);return a.lineGeometry.vao};return c}(h.default);a.default=
c})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(c,a,b,d,e,h,m,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._iconAttributeLocations={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,
a_sizeAndOutlineWidth:5};b._iconAttributeLocationsVV={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_vv:6};b._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffsetAndTex:1,a_id:2,a_color:3,a_outlineColor:4,a_sizeAndOutlineWidth:5,a_weight:6};b._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_id",
count:4,type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:24,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};b._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:40,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:40,
normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:40,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:40,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:40,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:40,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:24,stride:40,normalized:!1,divisor:0}]};b._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,
type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffsetAndTex",count:4,type:5120,offset:4,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:8,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:20,stride:28,normalized:!1,divisor:0},{name:"a_weight",count:1,
type:5126,offset:24,stride:28,normalized:!1,divisor:0}]};b._spritesTextureSize=new Float32Array(2);return b}b(c,a);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return d.WGLGeometryType.MARKER};c.prototype.drawGeometry=function(b,a,c,d){d=b.context;var f=b.painter,e=b.rendererInfo,l=b.drawPhase;b=c.indexCount;var k=c.indexFrom,g=c.materialInfo;c=g.materialKeyInfo;var n=c.heatmap,r=c.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(l=f.materialManager.getProgram(g.materialKey,
l,r))d.bindProgram(l),r=this._getVAO(d,a,c.hasVV(),n),d.bindVAO(r),n?(g=this._getIntensityTexture(d,e.heatmapParameters),d.bindTexture(g,1),l.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(e.heatmapParameters.radius),this._spritesTextureSize[1]=Math.round(e.heatmapParameters.radius)):(n=g.texBindingInfo[0],g=n.pageId,f.textureManager.bindSpritePage(d,g,n.unit),l.setUniform1i(n.semantic,n.unit),n=f.textureManager.sprites,this._spritesTextureSize[0]=n.getWidth(g)/4,this._spritesTextureSize[1]=
n.getHeight(g)/4),f=e.vvMaterialParameters.vvRotationEnabled&&"geographic"===e.vvMaterialParameters.vvRotationType?f.extrudeMatrix:f.extrudeNoRotationMatrix,l.setUniformMatrix4fv("u_transformMatrix",a.tileTransform.transform),l.setUniformMatrix4fv("u_extrudeMatrix",f),l.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),l.setUniform2fv("u_mosaicSize",this._spritesTextureSize),l.setUniform1f("u_opacity",1),c.vvSizeMinMaxValue&&l.setUniform4fv("u_vvSizeMinMaxValue",e.vvSizeMinMaxValue),
c.vvSizeScaleStops&&l.setUniform1f("u_vvSizeScaleStopsValue",e.vvSizeScaleStopsValue),c.vvSizeFieldStops&&(l.setUniform1fv("u_vvSizeFieldStopsValues",e.vvSizeFieldStopsValues),l.setUniform1fv("u_vvSizeFieldStopsSizes",e.vvSizeFieldStopsSizes)),c.vvSizeUnitValue&&l.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",e.vvSizeUnitValueToPixelsRatio),c.vvColor&&(l.setUniform1fv("u_vvColorValues",e.vvColorValues),l.setUniform4fv("u_vvColors",e.vvColors)),c.vvOpacity&&(l.setUniform1fv("u_vvOpacityValues",
e.vvOpacityValues),l.setUniform1fv("u_vvOpacities",e.vvOpacities)),c.vvRotation&&l.setUniform1f("u_vvRotationType","geographic"===e.vvMaterialParameters.vvRotationType?0:1),d.drawElements(4,b,5125,4*k),d.bindVAO(null)};c.prototype._getVAO=function(b,a,c,d){if(a.iconGeometry.vao)return a.iconGeometry.vao;var l=a.iconGeometry.vertexBufferMap[e.C_VBO_GEOMETRY],k=a.iconGeometry.indexBuffer;if(!l||!k)return null;a.iconGeometry.vao=c?new f(b,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,
{geometry:l},k):d?new f(b,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:l},k):new f(b,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:l},k);return a.iconGeometry.vao};c.prototype._getIntensityTexture=function(b,a){if(a.intensityKernel&&!a.refreshIntensityKernel)return a.intensityKernel;a.intensityKernel&&(a.intensityKernel.dispose(),a.intensityKernel=null);for(var c=a.radius,d=a.kernelSize,f=a.blurRadius,e=c*c,l=[],k=-1;++k<d;)l[k]=Math.exp(-Math.pow(k-
f,2)/(2*e))/(c/2*Math.sqrt(2*Math.PI));for(var c=[],g,n=0;n<d;n++)for(e=l[n],k=0;k<d;k++)g=n*d+k,f=l[k],c[4*g+0]=e*f,c[4*g+1]=0,c[4*g+2]=0,c[4*g+3]=1;b=new m(b,{target:3553,pixelFormat:6408,internalFormat:b.capabilities.colorBufferFloat.RGBA32F,dataType:5126,samplingMode:b.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:d,height:d},new Float32Array(c));a.intensityKernel=b;a.refreshIntensityKernel=!1;return b};return c}(h.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(c,a,b,d,e,h,m){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};b._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};b._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};b._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,
type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};b._glyphsTextureSize=new Float32Array(2);
return b}b(c,a);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return d.WGLGeometryType.TEXT};c.prototype.drawGeometry=function(b,a,c,d){d=b.context;var f=b.painter,e=b.rendererInfo,l=c.materialInfo,k=c.indexCount;c=c.indexFrom;var p=l.materialKeyInfo,g=p.vvSizeMinMaxValue||p.vvSizeScaleStops||p.vvSizeFieldStops||p.vvSizeUnitValue||p.vvColor||p.vvRotation||p.vvOpacity;if(b=f.materialManager.getProgram(l.materialKey,b.drawPhase,g?this._attributeLocationsVV:this._attributeLocations))d.bindProgram(b),
g=this._getVAO(d,a,g,this.getGeometryType()),d.bindVAO(g),l=l.texBindingInfo[0],f.textureManager.bindGlyphsPage(d,l.pageId,l.unit),b.setUniform1i(l.semantic,l.unit),l=f.textureManager.glyphs,this._glyphsTextureSize[0]=l.width/4,this._glyphsTextureSize[1]=l.height/4,f=e.vvMaterialParameters.vvRotationEnabled&&"geographic"===e.vvMaterialParameters.vvRotationType?f.extrudeMatrix:f.extrudeNoRotationMatrix,b.setUniformMatrix4fv("u_transformMatrix",a.tileTransform.transform),b.setUniformMatrix4fv("u_extrudeMatrix",
f),b.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),b.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),b.setUniform1f("u_pixelRatio",1),b.setUniform1f("u_opacity",1),p.vvSizeMinMaxValue&&b.setUniform4fv("u_vvSizeMinMaxValue",e.vvSizeMinMaxValue),p.vvSizeScaleStops&&b.setUniform1f("u_vvSizeScaleStopsValue",e.vvSizeScaleStopsValue),p.vvSizeFieldStops&&(b.setUniform1fv("u_vvSizeFieldStopsValues",e.vvSizeFieldStopsValues),b.setUniform1fv("u_vvSizeFieldStopsSizes",e.vvSizeFieldStopsSizes)),
p.vvSizeUnitValue&&b.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",e.vvSizeUnitValueToPixelsRatio),p.vvColor&&(b.setUniform1fv("u_vvColorValues",e.vvColorValues),b.setUniform4fv("u_vvColors",e.vvColors)),p.vvOpacity&&(b.setUniform1fv("u_vvOpacityValues",e.vvOpacityValues),b.setUniform1fv("u_vvOpacities",e.vvOpacities)),p.vvRotation&&b.setUniform1f("u_vvRotationType","geographic"===e.vvMaterialParameters.vvRotationType?0:1),d.drawElements(4,k,5125,4*c),d.bindVAO(null)};c.prototype._getVAO=function(b,
a,c,d){if((a=a.getGeometry(d))&&a.vao)return a.vao;d=a.vertexBufferMap[e.C_VBO_GEOMETRY];var f=a.vertexBufferMap[e.C_VBO_VISIBILITY],l=a.indexBuffer;if(!d||!l)return null;a.vao=c?new m(b,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:d,visibility:f},l):new m(b,this._attributeLocations,this._vertexAttributeLayout,{geometry:d,visibility:f},l);return a.vao};return c}(h.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require",
"exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],function(c,a,b,d,e){return function(){function a(){this._hlRenderer=new d;this._hlSurfaces=new e;this._height=this._width=void 0}a.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};a.prototype.setup=function(b,a,c){var d=a%4,f=c%4;a+=2>d?-d:4-d;c+=2>f?-f:4-f;this._width=a;this._height=c;this._boundFBO=b.getBoundFramebufferObject();
a=Math.round(.75*a);c=Math.round(.75*c);this._hlRenderer.setup(b,a,c);this._hlSurfaces.setup(b,a,c)};a.prototype.setHighlightOptions=function(b){this._hlRenderer.setHighlightOptions({fillColor:b.fillColor,outlineColor:b.outlineColor,outlineWidth:.75*b.outlineWidth,outerHaloWidth:.75*b.outerHaloWidth,innerHaloWidth:.75*b.innerHaloWidth,outlinePosition:.75*b.outlinePosition})};a.prototype.startMaskDraw=function(b){b.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);b.setClearColor(0,0,0,0);b.setClearStencil(0);
b.clear(b.gl.COLOR_BUFFER_BIT|b.gl.STENCIL_BUFFER_BIT);b.setViewport(0,0,.75*this._width,.75*this._height)};a.prototype.draw=function(a){a.setStencilTestEnabled(!1);a.setBlendingEnabled(!1);a.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);a.setClearColor(0,0,0,0);a.clear(a.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(a,this._hlSurfaces.sharedBlur1Tex);b("esri-feature-highlight-debug")?(a.bindFramebuffer(null),a.clear(a.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex)):
(a.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),a.setClearColor(0,0,0,0),a.clear(a.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(a,this._hlSurfaces.sharedBlur2Tex),a.bindFramebuffer(this._boundFBO),a.setBlendingEnabled(!0),a.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(a,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(c,a,b,d,e,h,m){var f=[void 0,void 0,void 0,1],k=[3,4],l=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function a(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}a.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};a.prototype.preBlur=function(b,a){b.bindTexture(a,k[0]);b.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",l);b.bindVAO(this._resources.quadVAO);b.drawArrays(5,0,4);b.bindVAO()};a.prototype.finalBlur=function(b,a){b.bindTexture(a,k[0]);b.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",p);b.bindVAO(this._resources.quadVAO);b.drawArrays(5,0,4);b.bindVAO()};a.prototype.renderHighlight=function(b,a){b.bindTexture(a,k[0]);b.bindTexture(this._resources.shadeTex,k[1]);b.bindProgram(this._resources.highlightProgram);b.bindVAO(this._resources.quadVAO);b.drawArrays(5,0,4);b.bindVAO()};a.prototype._initialize=function(a,c,l){this._width=c;this._height=
l;c=new d(a,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);l=new m(a,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:c});var p=(new e("hl",["texturedVS","highlightFS"],[],b,a,{a_position:0,a_texcoord:1})).getProgram([]),q=(new e("hl",["texturedVS","blurFS"],[],b,a,{a_position:0,a_texcoord:1})).getProgram([]);
p.setUniform1i("u_texture",k[0]);p.setUniform1i("u_shade",k[1]);p.setUniform4fv("u_sigmas",f);q.setUniform1i("u_texture",k[0]);q.setUniform4fv("u_sigmas",f);a=new h(a,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:c,quadVAO:l,highlightProgram:p,blurProgram:q,shadeTex:a}};a.prototype.setHighlightOptions=function(b){function a(b,a,g){r[0]=(1-g)*b[0]+g*a[0];r[1]=(1-g)*b[1]+g*a[1];r[2]=(1-g)*b[2]+g*a[2];r[3]=(1-g)*b[3]+g*
a[3]}this._highlightOptions=b;if(this._resources){var c=b.outlinePosition-b.outlineWidth/2-b.outerHaloWidth,d=b.outlinePosition-b.outlineWidth/2,e=b.outlinePosition+b.outlineWidth/2,l=b.outlinePosition+b.outlineWidth/2+b.innerHaloWidth,g=Math.sqrt(Math.PI/2)*f[3],n=Math.abs(c)>g?Math.round(10*(Math.abs(c)-g))/10:0,g=Math.abs(l)>g?Math.round(10*(Math.abs(l)-g))/10:0;n&&!g?console.warn("The outer rim of the highlight is "+n+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):
!n&&g?console.warn("The inner rim of the highlight is "+g+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):n&&g&&console.warn("The highlight is "+Math.max(n,g)+"px away from the edge of the feature; consider reducing some width values.");for(var n=new Uint8Array(1024),r=[void 0,void 0,void 0,void 0],k=0;256>k;++k)g=c+k/255*(l-c),g<c?(n[4*k+0]=0,n[4*k+1]=0,n[4*k+2]=0,n[4*k+3]=0):g<d?a([0,0,0,0],b.outlineColor,
(g-c)/(d-c)):g<e?(r[0]=b.outlineColor[0],r[1]=b.outlineColor[1],r[2]=b.outlineColor[2],r[3]=b.outlineColor[3]):g<l?a(b.outlineColor,b.fillColor,(g-e)/(l-e)):(n[4*k+0]=b.fillColor[0],n[4*k+1]=b.fillColor[1],n[4*k+2]=b.fillColor[2],n[4*k+3]=b.fillColor[3]),n[4*k+0]=255*r[0]*r[3],n[4*k+1]=255*r[1]*r[3],n[4*k+2]=255*r[2]*r[3],n[4*k+3]=255*r[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[c,l]);this._resources.shadeTex.updateData(0,0,0,256,1,n)}};a.prototype.setup=function(b,a,c){this._resources?
(this._width=a,this._height=c):(this._initialize(b,a,c),this.setHighlightOptions(this._highlightOptions))};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(c,a,b,d){c=new d;d.parse(b,c);return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject",
"../../../../../webgl/Texture"],function(c,a,b,d){function e(a,c,f){c=new d(a,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:c,height:f,samplingMode:9729});a=b.createWithAttachments(a,c,{colorTarget:0,depthStencilTarget:2});return[c,a]}return function(){function b(){this._height=this._width=void 0;this._resources=null}b.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),
this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};b.prototype._initialize=function(b,a,c){this._width=a;this._height=c;var d=e(b,a,c),f=d[0],d=d[1];b=e(b,a,c);this._resources={sharedBlur1Tex:f,sharedBlur1Fbo:d,sharedBlur2Tex:b[0],sharedBlur2Fbo:b[1]}};b.prototype.setup=function(b,a,c){!this._resources||this._width===a&&this._height===c||this.dispose();this._resources||this._initialize(b,a,c)};Object.defineProperty(b.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return b}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require",
"exports","dojo/has","./Renderbuffer","./Texture"],function(c,a,b,d,e){return function(){function a(c,f,k,l){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=c;this._desc={colorTarget:f.colorTarget,depthStencilTarget:f.depthStencilTarget,width:f.width,height:f.height,multisampled:f.multisampled};this._id=a._nextId++;b("esri-webgl-debug")&&c.instanceCounter.incrementCount(4);k&&(c=void 0,k instanceof e?(this._colorAttachment=
k,c=k.descriptor):(c=k,this._colorAttachment=new e(this._context,c)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),a._validateTextureDimensions(c,this._desc));l instanceof d?(2===f.depthStencilTarget?this._stencilAttachment=l:1===f.depthStencilTarget||3===f.depthStencilTarget?this._depthAttachment=l:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),
a._validateBufferDimensions(l.descriptor,this._desc)):l&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),f=void 0,l instanceof e?(this._depthStencilTexture=l,f=this._depthStencilTexture.descriptor):(f=l,this._depthStencilTexture=new e(this._context,f)),a._validateTextureDimensions(f,this._desc))}a.create=function(b,c){return new a(b,c)};a.createWithAttachments=function(b,
c,d,e){return new a(b,d,c,e)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof e?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};a.prototype.attachColorTexture=function(b){if(b){a._validateTextureDimensions(b.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b.glName,0)}this._colorAttachment=b}};a.prototype.detachColorTexture=
function(){var b=void 0;if(this._colorAttachment instanceof e){b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var a=this._context.gl;this._context.gl.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)}this._colorAttachment=null}return b};a.prototype.attachDepthStencilTexture=function(b){if(b){var c=b.descriptor;34041!==c.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==c.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");
this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");a._validateTextureDimensions(c,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,b.glName,0));this._depthStencilTexture=
b}};a.prototype.detachDepthStencilTexture=function(){var b=this._depthStencilTexture;if(b&&this._initialized){this._context.bindFramebuffer(this);var a=this._context.gl;this._context.gl.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return b};a.prototype.attachDepthStencilBuffer=function(b){if(b){var c=b.descriptor;34041!==c.internalFormat&&33189!==c.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");
a._validateBufferDimensions(c,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===c.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),c=this._context.gl,c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,b.glName));this._depthAttachment=b}};a.prototype.detachDepthStencilBuffer=function(){var b=this._context.gl,a=this._depthAttachment;a&&this._initialized&&
(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null));this._depthAttachment=null;return a};a.prototype.copyToTexture=function(b,a,c,d,e,q,h){(0>b||0>a||0>e||0>q)&&console.error("Offsets cannot be negative!");(0>=c||0>=d)&&console.error("Copy width and height must be greater than zero!");var f=this._desc,l=h.descriptor;3553!==h.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");
(b+c>f.width||a+d>f.height||e+c>l.width||q+d>l.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");f=this._context;f.bindTexture(h);f.bindFramebuffer(this);f.gl.copyTexSubImage2D(3553,0,e,q,b,a,c,d)};a.prototype.readPixels=function(b,a,c,d,e,q,h){(0>=c||0>=d)&&console.error("Copy width and height must be greater than zero!");h||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(b,
a,c,d,e,q,h)};a.prototype.resize=function(b,c){var d=this._desc;if(d.width!==b||d.height!==c)if(this._initialized)d.width=b,d.height=c,this._colorAttachment instanceof e?(f=this._colorAttachment,d=f.descriptor,d.width=b,d.height=c,this._colorAttachment.dispose(),this._colorAttachment=new e(this._context,d),a._validateTextureDimensions(f.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(d=this._depthStencilTexture.descriptor,d.width=b,d.height=
c,this._depthStencilTexture.dispose(),this._depthStencilTexture=new e(this._context,d)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{d.width=b;d.height=c;if(this._colorAttachment instanceof e){var f=this._colorAttachment;f.resize(b,c)}this._depthStencilTexture&&this._depthStencilTexture.resize(b,c)}};a.prototype.initialize=function(){if(this._initialized)return!1;
var b=this._context.gl;this._glName&&b.deleteFramebuffer(this._glName);var a=b.createFramebuffer(),c=this._desc;b.bindFramebuffer(b.FRAMEBUFFER,a);if(!this._colorAttachment)if(0===c.colorTarget)this._colorAttachment=new e(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:c.width,height:c.height});else{var l=new d(this._context,{internalFormat:32854,width:c.width,height:c.height});b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.RENDERBUFFER,
l.glName);this._colorAttachment=l}this._colorAttachment instanceof e&&b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this._colorAttachment.glName,0);switch(c.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new d(this._context,{internalFormat:1===c.depthStencilTarget?33189:34041,width:c.width,height:c.height}));b.framebufferRenderbuffer(b.FRAMEBUFFER,1===c.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new d(this._context,{internalFormat:36168,width:c.width,height:c.height}));b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new e(this._context,
{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:c.width,height:c.height})),b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,this._depthStencilTexture.glName,0)}b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=a;return this._initialized=!0};a.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof e){var b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);
var a=this._context.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)}b.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(b=this._colorAttachment,a=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(b));this._colorAttachment=null};a.prototype._disposeDepthStencilAttachments=function(){var b=this._context.gl;this._depthAttachment&&
(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&
(this._initialized&&(this._context.bindFramebuffer(this),b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};a._validateBufferDimensions=function(b,a){console.assert(0<=b.width&&0<=b.height);void 0!==a.width&&0<=a.width&&void 0!==a.height&&0<=a.height?a.width===b.width&&a.height===b.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(a.width=b.width,a.height=b.height)};
a._validateTextureDimensions=function(b,a){console.assert(0<=b.width&&0<=b.height);3553!==b.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==a.width&&0<=a.width&&void 0!==a.height&&0<=a.height?a.width===b.width&&a.height===b.height||console.error("Color attachment texture must match the framebuffer's!"):(a.width=b.width,a.height=b.height)};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(c,a,
b){return function(){function a(c,d){this._context=c;this._desc=d;this._glName=null;this._id=-1;c=this._context.gl;b("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++a._nextId;this._glName=c.createRenderbuffer();this._context.bindRenderbuffer(this);c.renderbufferStorage(c.RENDERBUFFER,d.internalFormat,d.width,d.height)}Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",
{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});a.prototype.resize=function(b,a){var c=this._context.gl,d=this._desc;if(d.width!==b||d.height!==a)d.width=b,d.height=a,this._context.bindRenderbuffer(this),c.renderbufferStorage(c.RENDERBUFFER,d.internalFormat,d.width,d.height)};a.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),
this._glName=null);b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);this._context=null};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!c)var c=1E-6;if(!a)var a="undefined"!==typeof Float32Array?Float32Array:Array;if(!b)var b=Math.random;var d={GLMAT_EPSILON:c,GLMAT_ARRAY_TYPE:a,GLMAT_RANDOM:b,setMatrixArrayType:function(b){d.GLMAT_ARRAY_TYPE=b}},e=Math.PI/180,h=180/Math.PI;d.toRadian=function(b){return b*
e};d.toDegree=function(b){return b*h};d.setMatrixArrayType(Array);return d})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(c){var a=c.GLMAT_ARRAY_TYPE;c={create:function(){var b=new a(6);b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var c=new a(6);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];return c},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},identity:function(b){b[0]=
1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},invert:function(b,a){var c=a[0],d=a[1],m=a[2],f=a[3],k=a[4];a=a[5];var l=c*f-d*m;if(!l)return null;l=1/l;b[0]=f*l;b[1]=-d*l;b[2]=-m*l;b[3]=c*l;b[4]=(m*a-f*k)*l;b[5]=(d*k-c*a)*l;return b},determinant:function(b){return b[0]*b[3]-b[1]*b[2]},multiply:function(b,a,c){var d=a[0],e=a[1],f=a[2],k=a[3],l=a[4];a=a[5];var p=c[0],q=c[1],t=c[2],v=c[3],y=c[4];c=c[5];b[0]=d*p+f*q;b[1]=e*p+k*q;b[2]=d*t+f*v;b[3]=e*t+k*v;b[4]=d*y+f*c+l;b[5]=e*y+k*c+a;return b}};c.mul=
c.multiply;c.rotate=function(b,a,c){var d=a[0],e=a[1],f=a[2],k=a[3],l=a[4];a=a[5];var p=Math.sin(c);c=Math.cos(c);b[0]=d*c+f*p;b[1]=e*c+k*p;b[2]=d*-p+f*c;b[3]=e*-p+k*c;b[4]=l;b[5]=a;return b};c.scale=function(b,a,c){var d=a[1],e=a[2],f=a[3],k=a[4],l=a[5],p=c[0];c=c[1];b[0]=a[0]*p;b[1]=d*p;b[2]=e*c;b[3]=f*c;b[4]=k;b[5]=l;return b};c.translate=function(b,a,c){var d=a[0],e=a[1],f=a[2],k=a[3],l=a[4];a=a[5];var p=c[0];c=c[1];b[0]=d;b[1]=e;b[2]=f;b[3]=k;b[4]=d*p+f*c+l;b[5]=e*p+k*c+a;return b};c.fromRotation=
function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=c;b[2]=-c;b[3]=a;b[4]=0;b[5]=0;return b};c.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=a[1];b[4]=0;b[5]=0;return b};c.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=a[0];b[5]=a[1];return b};c.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],
2)+1)};return c})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(c){var a=c.GLMAT_ARRAY_TYPE,b=c.GLMAT_RANDOM,d={create:function(){var b=new a(2);b[0]=0;b[1]=0;return b},clone:function(b){var c=new a(2);c[0]=b[0];c[1]=b[1];return c},fromValues:function(b,c){var d=new a(2);d[0]=b;d[1]=c;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,
b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};d.sub=d.subtract;d.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};d.mul=d.multiply;d.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};d.div=d.divide;d.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};d.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};d.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};d.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=
b[1]+c[1]*d;return a};d.distance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)};d.dist=d.distance;d.squaredDistance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a};d.sqrDist=d.squaredDistance;d.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};d.len=d.length;d.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};d.sqrLen=d.squaredLength;d.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};d.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};
d.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};d.lerp=function(a,b,c,d){var f=b[0];b=b[1];a[0]=f+d*(c[0]-f);a[1]=b+d*(c[1]-b);return a};d.random=function(a,c){c=c||1;var d=2*b()*Math.PI;a[0]=Math.cos(d)*c;a[1]=Math.sin(d)*c;return a};d.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*
d+c[3]*b;return a};d.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};d.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};d.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};d.forEach=function(){var a=d.create();return function(b,c,d,e,l,p){c||(c=2);d||(d=0);for(e=e?Math.min(e*c+d,b.length):b.length;d<e;d+=c)a[0]=b[d],a[1]=b[d+
1],l(a,a,p),b[d]=a[0],b[d+1]=a[1];return b}}();d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return d})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.adjustScreenshotSettings=function(a,c){a=b({format:"png",quality:100},a);var d,e;a.includePadding?(d=c.width,e=c.height):(d=c.width-c.padding.left-c.padding.right,e=c.height-c.padding.top-c.padding.bottom);
var f=d/e;void 0!==a.width&&void 0===a.height?a.height=a.width/f:void 0!==a.height&&void 0===a.width&&(a.width=f*a.height);void 0!==a.height&&(a.height=Math.floor(a.height));void 0!==a.width&&(a.width=Math.floor(a.width));a.area||a.includePadding||(a.area={x:c.padding.left,y:c.padding.top,width:d,height:e});return a};a.resampleHermite=function(a,b,c,m,f,k,l){void 0===l&&(l=!0);var d=b/f;c/=k;for(var e=Math.ceil(d/2),h=Math.ceil(c/2),v=0;v<k;v++)for(var y=0;y<f;y++){for(var u=4*(y+(l?k-v-1:v)*f),A=
0,z=0,g=0,n=0,r=0,B=0,C=0,D=(v+.5)*c,F=Math.floor(v*c);F<(v+1)*c;F++)for(var H=Math.abs(D-(F+.5))/h,J=(y+.5)*d,H=H*H,I=Math.floor(y*d);I<(y+1)*d;I++){var G=Math.abs(J-(I+.5))/e,A=Math.sqrt(H+G*G);-1<=A&&1>=A&&(A=2*A*A*A-3*A*A+1,0<A&&(G=4*(I+F*b),C+=A*a[G+3],g+=A,255>a[G+3]&&(A=A*a[G+3]/250),n+=A*a[G],r+=A*a[G+1],B+=A*a[G+2],z+=A))}m[u]=n/z;m[u+1]=r/z;m[u+2]=B/z;m[u+3]=C/g}}})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(c,a){function b(a,b,c){void 0===
b&&(b={});var d;switch(c){case "webgl":d=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":d=["webgl2"];break;default:d=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}c=null;for(var f=0;f<d.length;f++){var e=d[f];try{c=a.getContext(e,b)}catch(t){}if(c)break}return c}function d(a,b){(a=a.parentNode)&&(a.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
b+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(a,"__esModule",{value:!0});a.createContextOrErrorHTML=function(a,c,k){void 0===c&&(c={});if(!window.WebGLRenderingContext)return d(a,e),null;c=b(a,c,k);return c?c:(d(a,h),null)};a.createContext=b;var e='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',h='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(c,a,b,d,e,h,m){return function(){function a(a,c){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=
!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,
zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=h.default(a)?"webgl2":"webgl";this.gl=a;a instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=m.loadCapabilities(a,c);a=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:a[0],y:a[1],
width:a[2],height:a[3]};a=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:a?this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};b("esri-webgl-debug")&&(this.instanceCounter=new e);
this.enforceState()}Object.defineProperty(a.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};b("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};a.prototype.setBlendingEnabled=
function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)};a.prototype.setBlendColor=function(a,b,c,d){if(a!==this._blendColorState.r||b!==this._blendColorState.g||c!==this._blendColorState.b||d!==this._blendColorState.a)this.gl.blendColor(a,b,c,d),this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=c,this._blendColorState.a=d};a.prototype.setBlendFunction=function(a,b){if(a!==this._blendFunctionState.srcRGB||
b!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b};a.prototype.setBlendFunctionSeparate=function(a,b,c,d){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==c||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==d)this.gl.blendFuncSeparate(a,b,c,d),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=
c,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=d};a.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a)};a.prototype.setBlendEquationSeparate=function(a,b){if(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==b)this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b};a.prototype.setColorMask=
function(a,b,c,d){if(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==c||this._colorMaskState.a!==d)this.gl.colorMask(a,b,c,d),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=c,this._colorMaskState.a=d};a.prototype.setClearColor=function(a,b,c,d){if(this._clearColor.r!==a||this._clearColor.g!==b||this._clearColor.b!==c||this._clearColor.a!==d)this.gl.clearColor(a,b,c,d),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=c,this._clearColor.a=
d};a.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)};a.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)};a.prototype.setPolygonOffset=function(a,b){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==
b)this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b)};a.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)};a.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=a)};a.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};a.prototype.setScissorRect=function(a,
b,c,d){if(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==c||this._scissorRect.height!==d)this.gl.scissor(a,b,c,d),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=c,this._scissorRect.height=d};a.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)};a.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),
this._clearDepth=a)};a.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)};a.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)};a.prototype.setDepthRange=function(a,b){if(this._depthRange.zNear!==a||this._depthRange.zFar!==b)this.gl.depthRange(a,b),this._depthRange.zNear=a,this._depthRange.zFar=b};a.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==
a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)};a.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};a.prototype.setStencilFunction=function(a,b,c){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==c)this.gl.stencilFunc(a,b,c),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=
c};a.prototype.setStencilFunctionSeparate=function(a,b,c,d){if(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==c||this._stencilFunction.mask!==d)this.gl.stencilFuncSeparate(a,b,c,d),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=c,this._stencilFunction.mask=d};a.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)};a.prototype.setStencilOp=function(a,
b,c){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==c)this.gl.stencilOp(a,b,c),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=c};a.prototype.setStencilOpSeparate=function(a,b,c,d){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==c||this._stencilOperation.zPass!==d)this.gl.stencilOpSeparate(a,b,c,d),this._stencilOperation.face=
a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=c,this._stencilOperation.zPass=d};a.prototype.setLineWidth=function(a){var b=this._lineWidth;this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a);return b};a.prototype.setActiveTexture=function(a){var b=this._activeTextureUnit;0<=a&&a!==this._activeTextureUnit&&(this.gl.activeTexture(d.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a);return b};a.prototype.clear=function(a){a&&this.gl.clear(a)};a.prototype.drawArrays=
function(a,b,c){this.gl.drawArrays(a,b,c)};a.prototype.drawElements=function(a,b,c,d){5123===c?this.gl.drawElements(a,b,c,d):5125===c&&this.gl.drawElements(a,b,c,d)};Object.defineProperty(a.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});a.prototype.setViewport=function(a,b,c,d){var f=this._viewport;if(f.x!==a||f.y!==b||f.width!==c||f.height!==d)f.x=a,f.y=b,f.width=c,f.height=d,this.gl.viewport(a,b,c,d)};a.prototype.getViewport=function(){return{x:this._viewport.x,
y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};a.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),this._activeShaderProgram=null)};a.prototype.bindTexture=function(b,c){void 0===c&&(c=0);-1===a._MAX_TEXTURE_IMAGE_UNITS&&(a._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(c>=a._MAX_TEXTURE_IMAGE_UNITS||0>c)&&console.error("Input texture unit is out of range of available units!");
var d=this._textureUnitMap[c];this.setActiveTexture(c);null==b||null==b.glName?(null!=d&&(this.gl.bindTexture(d.descriptor.target,null),d.setBoundToUnit(c,!1)),this._textureUnitMap[c]=null):d&&d.id===b.id?b.applyChanges():(this.gl.bindTexture(b.descriptor.target,b.glName),b.setBoundToUnit(c,!0),b.applyChanges(),this._textureUnitMap[c]=b)};a.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=
a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};a.prototype.bindBuffer=function(b){b&&(34962===b.bufferType?this._activeVertexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeIndexBuffer))};a.prototype.bindRenderbuffer=function(a){var b=this.gl;a||(b.bindRenderbuffer(b.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==a&&(b.bindRenderbuffer(b.RENDERBUFFER,
a.glName),this._activeRenderbuffer=a)};a.prototype.unbindBuffer=function(b){34962===b?this._activeVertexBuffer=a._bindBuffer(this.gl,null,b,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,null,b,this._activeIndexBuffer)};a.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};
a.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};a.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};a.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};a.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,
0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,
0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};a.prototype.enforceState=function(){var a=this.gl,b=this._capabilities.vao;b&&b.bindVertexArray(null);for(var c=0;c<this.parameters.maxVertexAttributes;c++)a.disableVertexAttribArray(c);this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
a.bindBuffer(34962,null);this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null);if(b&&this._activeVertexArrayObject){if(b=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(b)}a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);a.bindRenderbuffer(a.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,
this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(this._lineWidth);
!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);
a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(b=0;b<this.parameters.maxTextureImageUnits;b++)a.activeTexture(d.BASE_TEXTURE_UNIT+b),a.bindTexture(3553,null),(c=this._textureUnitMap[b])&&a.bindTexture(c.descriptor.target,c.glName);a.activeTexture(d.BASE_TEXTURE_UNIT+this._activeTextureUnit);
a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};a._bindBuffer=function(a,b,c,d){if(!b)return a.bindBuffer(c,null),null;if(d===b)return d;a.bindBuffer(c,b.glName);return b};a._MAX_TEXTURE_IMAGE_UNITS=-1;return a}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require",
"exports"],function(c,a){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(a){switch(a){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};
a.prototype.decrementCount=function(a){switch(a){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){console.log("Live objects:");console.log("Textures: "+this._instanceCount.textureCount);console.log("Buffers: "+this._instanceCount.bufferCount);
console.log("VAOs: "+this._instanceCount.vaoCount);console.log("Programs: "+this._instanceCount.programCount);console.log("Framebuffers: "+this._instanceCount.framebufferCount);console.log("Renderbuffers: "+this._instanceCount.renderBufferCount)};return a}()})},"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return window.WebGL2RenderingContext&&a instanceof
window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(c,a,b,d,e,h){function m(a,b,c,d,q){if(d&&e.default(a))return!0;if(b[c])return!1;for(b=0;b<q.length;b++)if(a.getExtension(q[b]))return!0;return!1}Object.defineProperty(a,"__esModule",{value:!0});a.loadCapabilities=function(a,c){c=c&&c.disabledExtensions||{};var f=d.load(a,c),p=h.load(a,
c),k;k=c.compressedTextureS3TC?null:(k=a.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:k.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:k.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:k.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:k.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var t;t=c.textureFilterAnisotropic?null:(t=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?
{MAX_TEXTURE_MAX_ANISOTROPY:t.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:t.TEXTURE_MAX_ANISOTROPY_EXT}:null;var v=b.load(a,c),y;if(e.default(a))y=c.colorBufferFloat||!a.getExtension("EXT_color_buffer_float")?null:{R16F:a.R16F,RG16F:a.RG16F,RGBA16F:a.RGBA16F,R32F:a.R32F,RG32F:a.RG32F,RGBA32F:a.RGBA32F,R11F_G11F_B10F:a.R11F_G11F_B10F};else if(a instanceof WebGLRenderingContext){y=!c.colorBufferFloat&&a.getExtension("EXT_color_buffer_half_float");var u=!c.colorBufferFloat&&a.getExtension("WEBGL_color_buffer_float");
y=y||u?{RGBA16F:y?y.RGBA16F_EXT:void 0,RGBA32F:u?u.RGBA32F_EXT:void 0}:null}else y=void 0;u=e.default(a)?{MIN:a.MIN,MAX:a.MAX}:c.blendMinMax?null:(u=a.getExtension("EXT_blend_minmax"))?{MIN:u.MIN_EXT,MAX:u.MAX_EXT}:null;return{instancing:f,vao:p,compressedTextureS3TC:k,textureFilterAnisotropic:t,disjointTimerQuery:v,colorBufferFloat:y,blendMinMax:u,depthTexture:m(a,c,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:m(a,c,"standardDerivatives",
!0,["OES_standard_derivatives"]),shaderTextureLOD:m(a,c,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:m(a,c,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:m(a,c,"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.load=function(a,c){if(c.disjointTimerQuery)return null;var d=a.getExtension("EXT_disjoint_timer_query")||
a.getExtension("EXT_disjoint_timer_query_webgl2");return d?b.default(a)?{createQuery:function(){return a.createQuery()},resultAvailable:function(b){return a.getQueryParameter(b,a.QUERY_RESULT_AVAILABLE)},getResult:function(b){return a.getQueryParameter(b,a.QUERY_RESULT)},disjoint:function(){return a.getParameter(d.GPU_DISJOINT_EXT)},beginTimeElapsed:function(b){return a.beginQuery(d.TIME_ELAPSED_EXT,b)},endTimeElapsed:function(){return a.endQuery(d.TIME_ELAPSED_EXT)},createTimestamp:function(a){return d.queryCounterEXT(a,
d.TIMESTAMP_EXT)},timestampBits:function(){return a.getQuery(d.TIMESTAMP_EXT,d.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return d.createQueryEXT()},resultAvailable:function(a){return d.getQueryObjectEXT(a,d.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(a){return d.getQueryObjectEXT(a,d.QUERY_RESULT_EXT)},disjoint:function(){return a.getParameter(d.GPU_DISJOINT_EXT)},beginTimeElapsed:function(a){return d.beginQueryEXT(d.TIME_ELAPSED_EXT,a)},endTimeElapsed:function(){return d.endQueryEXT(d.TIME_ELAPSED_EXT)},
createTimestamp:function(a){return d.queryCounterEXT(a,d.TIMESTAMP_EXT)},timestampBits:function(){return d.getQueryEXT(d.TIMESTAMP_EXT,d.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.load=function(a,c){return b.default(a)?{drawArraysInstanced:a.drawArraysInstanced.bind(a),drawElementsInstanced:a.drawElementsInstanced.bind(a),
vertexAttribDivisor:a.vertexAttribDivisor.bind(a)}:c.angleInstancedArrays?null:(a=a.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:a.drawArraysInstancedANGLE.bind(a),drawElementsInstanced:a.drawElementsInstancedANGLE.bind(a),vertexAttribDivisor:a.vertexAttribDivisorANGLE.bind(a)}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.load=
function(a,c){return b.default(a)?{createVertexArray:a.createVertexArray.bind(a),deleteVertexArray:a.deleteVertexArray.bind(a),bindVertexArray:a.bindVertexArray.bind(a)}:c.vao?null:(a=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:a.createVertexArrayOES.bind(a),deleteVertexArray:a.deleteVertexArrayOES.bind(a),bindVertexArray:a.bindVertexArrayOES.bind(a)}:null}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLFeatureView":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec3 ../../../../geometry/Point ../Container ../StageGL ../../engine/webgl/TileData ./enums ./GeometryUtils ./TextureManager ./Utils ./WGLPainter ./WGLRendererInfo".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function g(b){var g=a.call(this)||this;g._rendererInfo=new z;g._stage=new p;g._container=null;g._tileCoordinateScale=f.create();g._orientationVec=f.fromValues(0,0,1);g._displayScale=f.create();g._defaultTransform=m.create();g._pointToCallbacks=new Map;g._highlightIDs=new Set;g._tileId=void 0;g._patches={};g._displayWidth=0;g._displayHeight=0;g._highlightOptionsUpToDate=!1;g.layer=null;g.textureManager=
new y;g.highlightOptions=b.highlightOptions;g.tileInfoView=b.tileInfoView;g._stage.useContextVersion("webgl");g.layer=b.layer;g._layerView=b.layerView;return g}d(g,a);g.prototype.dispose=function(){this.textureManager&&(this.textureManager.dispose(),this.textureManager=null);this.removeAllChildren();for(var a=0,b=this.children;a<b.length;a++)b[a].dispose()};g.prototype.disposeWebGLResources=function(){for(var a=0,b=this.children;a<b.length;a++)b[a].clear()};g.prototype.displayWidth=function(){return this._displayWidth};
Object.defineProperty(g.prototype,"displayHeight",{get:function(){return this._displayHeight},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"highlightOptions",{get:function(){return this._highlightOptions},set:function(a){this._highlightOptions=a;this._highlightOptionsUpToDate=!1},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"visualVariablesInfo",{get:function(){return this._visualVariablesInfo},set:function(a){this._visualVariablesInfo=a;this.requestRender()},
enumerable:!0,configurable:!0});g.prototype.install=function(a){a.addChild(this._stage);this._stage.addChild(this);this._container=a};g.prototype.uninstall=function(a){a.removeChild(this._stage);this._stage.removeChild(this);this.dispose();this._container=null};g.prototype.hitTest=function(a,b){var g=this,c=[a,b];return e.create(function(a,b){g._pointToCallbacks.set(c,{resolve:a,reject:b});g.requestRender()},function(){g._pointToCallbacks.has(c)&&g._pointToCallbacks.delete(c)})};g.prototype.highlight=
function(a){var b=this;b.addHighlight(a);return{remove:function(){b.removeHighlight(a)}}};g.prototype.setHighlight=function(a){this._highlightIDs.clear();this.addHighlight(a)};g.prototype.setVisibility=function(a,b){for(var g=function(g){if(g.data){var c=g.data.tileDisplayData.displayObjectRegistry,n=a.filter(function(a){return c.has(a.id)});g.setVisibility(n,b)}},c=0,n=this.children;c<n.length;c++)g(n[c])};g.prototype.setVisibilityRange=function(a,b,g,c){for(var n=0,d=this.children;n<d.length;n++){var r=
d[n];r.data&&r.data.tileDisplayData.displayObjectRegistry.has(a)&&r.setVisibilityRange(a,b,g,c)}};g.prototype.addHighlight=function(a){for(var b=0;b<a.length;b++)this._highlightIDs.add(a[b]);this._buildHLList()};g.prototype.removeHighlight=function(a){for(var b=0;b<a.length;b++)this._highlightIDs.delete(a[b]);this._buildHLList()};g.prototype.getMaterialItems=function(a){if(a&&0!==a.length){for(var b=[],g=0;g<a.length;g++){var c=a[g];b.push(this.textureManager.rasterizeItem(c.symbol,c.glyphIds))}return h.all(b).then(function(a){return a.map(function(a,
b){return{id:b,mosaicItem:a}})})}};g.prototype.onTileData=function(a,b){var g=null;b&&(g=q.decode(b));a.setData(g,null!=this.visualVariablesInfo.vvFields,this.layer.labelsVisible);a.buildHLList(this._highlightIDs);this._layerView&&this._layerView.view.labelManager.requestUpdate();this.addChild(a);this._stage.fadeInLabels();this.requestRender()};g.prototype.onTileDataUpdate=function(a,b){this._patches[a.key.id]=this._patches[a.key.id]||[];this._patches[a.key.id].push({tile:a,patch:b});this._stage.fadeInLabels();
this.requestRender()};g.prototype.onTileError=function(a){a.clear();a.buildHLList(this._highlightIDs);this.addChild(a);this.requestRender()};g.prototype.addChild=function(b){var g=a.prototype.addChild.call(this,b);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.addTile(this.layer.uid,b);this._buildHLList();return g};g.prototype.removeChild=function(b){var g=a.prototype.removeChild.call(this,b);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.removeTile(this.layer.uid,
b.key.id);this._buildHLList();return g};g.prototype.prepareChildrenRenderParameters=function(a){this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,a.state);var g=this.tileInfoView.getClosestInfoForScale(a.state.scale).level,c=this.tileInfoView.tileInfo.scaleToZoom(a.state.scale);return b({},a,{rendererInfo:this._rendererInfo,requiredLevel:g,displayLevel:c})};g.prototype.renderChildren=function(a){for(var b=this,g=0;this._nextTile()&&4>g;){for(var c=0,n=this._patches[this._tileId];c<
n.length;c++){var d=n[c];this._patchTileVisuals(d.tile,d.patch)}delete this._patches[this._tileId];++g}g=a.painter;g.bindTextureManager(this.textureManager);this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,a.state);this.sortChildren(function(a,b){return 0!==a.key.level-b.key.level?a.key.level-b.key.level:0!==a.key.row-b.key.row?a.key.row-b.key.row:a.key.col-b.key.col});c=A.default.toWGLDrawPhases(a.drawPhase);if(0<c.length&&c[0]===t.WGLDrawPhase.LABEL||c[0]===t.WGLDrawPhase.LABEL_ALPHA){n=
this.layer;if(!(n.labelsVisible&&n.labelingInfo&&0<n.labelingInfo.length))return;this._updateTilesTransform(a.state,a.requiredLevel);g.update(a.state,a.pixelRatio)}g.draw(a,this.children,c,this._painterOptions);0<this._highlightIDs.size&&g.highlight(a,this.children);0!==this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(g,c){g.resolve(b._hitTest(a,c[0],c[1]))}),this._pointToCallbacks.clear())};g.prototype.attachChild=function(a,b){return a.attach(b)};g.prototype.detachChild=function(a,
b){a.detach(b)};g.prototype.renderChild=function(a,b){a.doRender(b)};g.prototype.beforeRenderChildren=function(a,b){this._updateTilesTransform(a.state,this.tileInfoView.getClosestInfoForScale(a.state.scale).level);this._updateHighlightOptions();this._stage.opacity=this._container.opacity};g.prototype._hitTest=function(a,b,g){var c=a.painter,n=a.requiredLevel,d=[0,0];a.state.toMap(d,[b,g]);b=a.state.clone();g=b.viewpoint.clone();g.targetGeometry=new k(d[0],d[1],a.state.spatialReference);b.viewpoint=
g;b.size=[u.C_HITTEST_SEARCH_SIZE,u.C_HITTEST_SEARCH_SIZE];this._updateTilesTransform(b,n);c.update(b,a.pixelRatio);return c.hitTest({context:a.context,drawPhase:t.WGLDrawPhase.HITTEST,painter:c,pixelRatio:a.pixelRatio,displayLevel:a.displayLevel,rendererInfo:this._rendererInfo,requiredLevel:n,state:b,stationary:a.stationary},this.children)};g.prototype._updateTilesTransform=function(a,b){var g=1/a.width,c=1/a.height,n=[0,0];this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[b].resolution,
a.resolution,a.rotation,this.tileInfoView.tileInfo.size[0],a.width,a.height,this._defaultTransform);for(var d=0,r=this.children;d<r.length;d++){var f=r[d];a.toScreen(n,f.coords);n[1]=a.height-n[1];f.tileTransform.displayCoord[0]=2*n[0]*g-1;f.tileTransform.displayCoord[1]=2*n[1]*c-1;f.key.level===b?f.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[f.key.level].resolution,a.resolution,a.rotation,this.tileInfoView.tileInfo.size[0],
a.width,a.height,f.tileTransform.transform)}};g.prototype._calculateRelativeViewProjMat=function(a,b,g,c,n,d,f){a/=b;this._tileCoordinateScale.set([a,a,1]);if(n!==this._displayWidth||d!==this._displayHeight)this._displayScale.set([2/n,-2/d,1]),this._displayWidth=n,this._displayHeight=d;m.identity(f);m.scale(f,f,this._tileCoordinateScale);m.rotate(f,f,-g*v.C_DEG_TO_RAD,this._orientationVec);m.scale(f,f,this._displayScale);m.transpose(f,f)};g.prototype._updateHighlightOptions=function(){if(!this._highlightOptionsUpToDate&&
this.parent){var a=this.parent.glPainter,b=this._highlightOptions;if(a){var g=b.color.toRgba();g[0]/=255;g[1]/=255;g[2]/=255;var c=g.slice();g[3]*=b.fillOpacity;c[3]*=b.haloOpacity;a.setHighlightOptions({fillColor:g,outlineColor:c,outlineWidth:2,outerHaloWidth:.3,innerHaloWidth:.3,outlinePosition:0})}}};g.prototype._buildHLList=function(){for(var a=0,b=this.children;a<b.length;a++)b[a].buildHLList(this._highlightIDs);this.requestRender()};g.prototype._nextTile=function(){var a=Object.keys(this._patches);
if(0===a.length)return this._tileId=void 0,!1;if(!this._tileId)return this._tileId=a[0],!0;var b=a.indexOf(this._tileId),b=(b+1)%a.length;this._tileId=a[b];return!0};g.prototype._patchTileVisuals=function(a,b){var g=b.addOrUpdate?q.decode(b.addOrUpdate):null;a.patchData({remove:b.remove||[],addOrUpdate:g},this.layer.labelsVisible);a.buildHLList(this._highlightIDs);this.contains(a)||this.addChild(a)};return g}(l);a.default=c})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],
function(c){var a={create:function(){var a=new c.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new c.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,d,e){var b=new c.ARRAY_TYPE(3);b[0]=a;b[1]=d;b[2]=e;return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a},set:function(a,c,e,h){a[0]=c;a[1]=e;a[2]=h;return a},add:function(a,c,e){a[0]=c[0]+e[0];a[1]=c[1]+e[1];a[2]=c[2]+e[2];return a},subtract:function(a,c,e){a[0]=c[0]-e[0];a[1]=c[1]-e[1];
a[2]=c[2]-e[2];return a}};a.sub=a.subtract;a.multiply=function(a,c,e){a[0]=c[0]*e[0];a[1]=c[1]*e[1];a[2]=c[2]*e[2];return a};a.mul=a.multiply;a.divide=function(a,c,e){a[0]=c[0]/e[0];a[1]=c[1]/e[1];a[2]=c[2]/e[2];return a};a.div=a.divide;a.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);a[2]=Math.ceil(c[2]);return a};a.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);return a};a.min=function(a,c,e){a[0]=Math.min(c[0],e[0]);a[1]=Math.min(c[1],e[1]);
a[2]=Math.min(c[2],e[2]);return a};a.max=function(a,c,e){a[0]=Math.max(c[0],e[0]);a[1]=Math.max(c[1],e[1]);a[2]=Math.max(c[2],e[2]);return a};a.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);a[2]=Math.round(c[2]);return a};a.scale=function(a,c,e){a[0]=c[0]*e;a[1]=c[1]*e;a[2]=c[2]*e;return a};a.scaleAndAdd=function(a,c,e,h){a[0]=c[0]+e[0]*h;a[1]=c[1]+e[1]*h;a[2]=c[2]+e[2]*h;return a};a.distance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1];a=c[2]-a[2];return Math.sqrt(b*b+d*d+a*a)};a.dist=
a.distance;a.squaredDistance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1];a=c[2]-a[2];return b*b+d*d+a*a};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a};a.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a};a.normalize=function(a,c){var b=c[0],d=c[1],
m=c[2],b=b*b+d*d+m*m;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b);return a};a.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]};a.cross=function(a,c,e){var b=c[0],d=c[1];c=c[2];var f=e[0],k=e[1];e=e[2];a[0]=d*e-c*k;a[1]=c*f-b*e;a[2]=b*k-d*f;return a};a.lerp=function(a,c,e,h){var b=c[0],d=c[1];c=c[2];a[0]=b+h*(e[0]-b);a[1]=d+h*(e[1]-d);a[2]=c+h*(e[2]-c);return a};a.hermite=function(a,c,e,h,m,f){var b=f*f,d=b*(2*f-3)+1,p=b*(f-2)+f,q=b*(f-1);f=b*(3-2*f);a[0]=c[0]*d+e[0]*p+h[0]*q+
m[0]*f;a[1]=c[1]*d+e[1]*p+h[1]*q+m[1]*f;a[2]=c[2]*d+e[2]*p+h[2]*q+m[2]*f;return a};a.bezier=function(a,c,e,h,m,f){var b=1-f,d=b*b,p=f*f,q=d*b,d=3*f*d,b=3*p*b;f*=p;a[0]=c[0]*q+e[0]*d+h[0]*b+m[0]*f;a[1]=c[1]*q+e[1]*d+h[1]*b+m[1]*f;a[2]=c[2]*q+e[2]*d+h[2]*b+m[2]*f;return a};a.random=function(a,d){d=d||1;var b=2*c.RANDOM()*Math.PI,h=2*c.RANDOM()-1,m=Math.sqrt(1-h*h)*d;a[0]=Math.cos(b)*m;a[1]=Math.sin(b)*m;a[2]=h*d;return a};a.transformMat4=function(a,c,e){var b=c[0],d=c[1];c=c[2];var f=e[3]*b+e[7]*d+
e[11]*c+e[15],f=f||1;a[0]=(e[0]*b+e[4]*d+e[8]*c+e[12])/f;a[1]=(e[1]*b+e[5]*d+e[9]*c+e[13])/f;a[2]=(e[2]*b+e[6]*d+e[10]*c+e[14])/f;return a};a.transformMat3=function(a,c,e){var b=c[0],d=c[1];c=c[2];a[0]=b*e[0]+d*e[3]+c*e[6];a[1]=b*e[1]+d*e[4]+c*e[7];a[2]=b*e[2]+d*e[5]+c*e[8];return a};a.transformQuat=function(a,c,e){var b=c[0],d=c[1],f=c[2];c=e[0];var k=e[1],l=e[2];e=e[3];var p=e*b+k*f-l*d,q=e*d+l*b-c*f,t=e*f+c*d-k*b,b=-c*b-k*d-l*f;a[0]=p*e+b*-c+q*-l-t*-k;a[1]=q*e+b*-k+t*-c-p*-l;a[2]=t*e+b*-l+p*-k-
q*-c;return a};a.rotateX=function(a,c,e,h){var b=[],d=[];b[0]=c[0]-e[0];b[1]=c[1]-e[1];b[2]=c[2]-e[2];d[0]=b[0];d[1]=b[1]*Math.cos(h)-b[2]*Math.sin(h);d[2]=b[1]*Math.sin(h)+b[2]*Math.cos(h);a[0]=d[0]+e[0];a[1]=d[1]+e[1];a[2]=d[2]+e[2];return a};a.rotateY=function(a,c,e,h){var b=[],d=[];b[0]=c[0]-e[0];b[1]=c[1]-e[1];b[2]=c[2]-e[2];d[0]=b[2]*Math.sin(h)+b[0]*Math.cos(h);d[1]=b[1];d[2]=b[2]*Math.cos(h)-b[0]*Math.sin(h);a[0]=d[0]+e[0];a[1]=d[1]+e[1];a[2]=d[2]+e[2];return a};a.rotateZ=function(a,c,e,h){var b=
[],d=[];b[0]=c[0]-e[0];b[1]=c[1]-e[1];b[2]=c[2]-e[2];d[0]=b[0]*Math.cos(h)-b[1]*Math.sin(h);d[1]=b[0]*Math.sin(h)+b[1]*Math.cos(h);d[2]=b[2];a[0]=d[0]+e[0];a[1]=d[1]+e[1];a[2]=d[2]+e[2];return a};a.forEach=function(){var b=a.create();return function(a,c,h,m,f,k){c||(c=3);h||(h=0);for(m=m?Math.min(m*c+h,a.length):a.length;h<m;h+=c)b[0]=a[h],b[1]=a[h+1],b[2]=a[h+2],f(b,b,k),a[h]=b[0],a[h+1]=b[1],a[h+2]=b[2];return a}}();a.angle=function(b,c){b=a.fromValues(b[0],b[1],b[2]);c=a.fromValues(c[0],c[1],c[2]);
a.normalize(b,b);a.normalize(c,c);c=a.dot(b,c);return 1<c?0:Math.acos(c)};a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]};a.equals=function(a,d){var b=a[0],h=a[1];a=a[2];var m=d[0],f=d[1];d=d[2];return Math.abs(b-m)<=c.EPSILON*Math.max(1,Math.abs(b),Math.abs(m))&&Math.abs(h-f)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(a-d)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))};return a})},"esri/layers/vectorTiles/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l){function p(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var q=[0,0],t=e.getLogger("esri.geometry.Point");c=function(a){function c(b,c,g,n,d){b=a.call(this)||this;b.x=0;b.y=0;b.z=void 0;b.m=void 0;b.type="point";return b}b(c,a);e=c;c.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};c.distance=function(a,b){var g=a.x-b.x,c=a.y-b.y;a=
a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(g*g+c*c+a*a)};c.prototype.normalizeCtorArgs=function(a,b,g,c,d){var n;if(Array.isArray(a))n=a,d=b,a=n[0],b=n[1],g=n[2],c=n[3];else if(a&&"object"===typeof a){if(n=a,a=null!=n.x?n.x:n.longitude,b=null!=n.y?n.y:n.latitude,g=null!=n.z?n.z:n.altitude,c=n.m,(d=n.spatialReference)&&"esri.geometry.SpatialReference"!==d.declaredClass&&(d=new f(d)),null!=n.longitude||null!=n.latitude)null==n.longitude?t.warn(".longitude\x3d","Latitude was defined without longitude"):
null==n.latitude?t.warn(".latitude\x3d","Longitude was defined without latitude"):!n.declaredClass&&d&&d.isWebMercator&&(b=l.lngLatToXY(n.longitude,n.latitude,q),a=b[0],b=b[1])}else p(g)?(d=g,g=null):p(c)&&(d=c,c=null);a={x:a,y:b};null!=d&&(a.spatialReference=d);null!=g&&(a.z=g);null!=c&&(a.m=c);return a};Object.defineProperty(c.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return l.xyToLngLat(this.x,this.y,q)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",
l.lngLatToXY(this.x,a,q)[1]):b.isWGS84&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return l.xyToLngLat(this._get("x"),this._get("y"),q)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",l.lngLatToXY(a,this._get("y"),q)[0]):b.isWGS84&&this._set("x",a),this._set("longitude",
a))},enumerable:!0,configurable:!0});c.prototype.clone=function(){var a=new e;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};c.prototype.copy=function(a){e.copy(a,this);return this};c.prototype.equals=function(a){if(!a)return!1;var b=this.x,g=this.y,c=this.z,d=this.m,f=this.spatialReference,e=a.z,p=a.m,k=a.x,q=a.y;a=a.spatialReference;if(!f.equals(a))if(f.isWebMercator&&a.isWGS84)q=l.lngLatToXY(k,q),k=q[0],q=q[1],a=f;else if(f.isWGS84&&a.isWebMercator)q=
l.xyToLngLat(k,q),k=q[0],q=q[1],a=f;else return!1;return b===k&&g===q&&c===e&&d===p&&f.wkid===a.wkid};c.prototype.offset=function(a,b,g){this.x+=a;this.y+=b;null!=g&&this.hasZ&&(this.z+=g);return this};c.prototype.normalize=function(){if(!this.spatialReference)return this;var a=k.getInfo(this.spatialReference);if(!a)return this;var b=this.x,g=a.valid,a=g[0],c=g[1],g=2*c;b>c?(a=Math.ceil(Math.abs(b-c)/g),b-=a*g):b<a&&(a=Math.ceil(Math.abs(b-a)/g),b+=a*g);this._set("x",b);return this};c.prototype.distance=
function(a){return e.distance(this,a)};c.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]};c.prototype.toJSON=function(a){return this.write(null,a)};d([h.property({dependsOn:["x","y","z","m","spatialReference"]})],c.prototype,"cache",void 0);d([h.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasM",null);d([h.property({type:Boolean,
dependsOn:["z"],json:{write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasZ",null);d([h.property({type:Number,dependsOn:["y"]})],c.prototype,"latitude",null);d([h.property({type:Number,dependsOn:["x"]})],c.prototype,"longitude",null);d([h.property({type:Number,json:{write:{isRequired:!0}}})],c.prototype,"x",void 0);d([h.property({type:Number,json:{write:!0}})],c.prototype,"y",void 0);d([h.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],c.prototype,
"z",void 0);d([h.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],c.prototype,"m",void 0);return c=e=d([h.subclass("esri.geometry.Point")],c);var e}(h.declared(m));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(c,a){return function(a,c){a.__bases__=c.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(c,
a,b,d){var e=arguments.length,h=3>e?a:null===d?d=Object.getOwnPropertyDescriptor(a,b):d,m;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(c,a,b,d);else for(var f=c.length-1;0<=f;f--)if(m=c[f])h=(3>e?m(h):3<e?m(a,b,h):m(a,b))||h;return 3<e&&h&&Object.defineProperty(a,b,h),h}})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p){function q(b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c])}Object.defineProperty(a,"__esModule",{value:!0});q(b);q(d);q(e);q(h);q(m);q(f);q(k);q(l);q(p)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.aliasOf=function(a){return function(c,d){b.getPropertyMetadata(c,d).aliasOf=a}}})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(c,a){function b(a){return null!=a.__accessorMetadata__}function d(a){return b(a)&&null!=e(a).properties}function e(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function h(a){a=e(a);var b=a.properties;b||(b=a.properties={});return b}function m(a,b){var c=e(a);a=c.parameters;a||(a=c.parameters={});c=a[b];c||(c=[],a[b]=c);return c}Object.defineProperty(a,"__esModule",{value:!0});
a.hasMetadata=b;a.hasPropertiesMetadata=d;a.hasPropertyMetadata=function(a,b){return d(a)&&null!=h(a)[b]};a.hasParametersMetadata=function(a,c){return b(a)&&null!=e(a).parameters&&null!=e(a).parameters[c]};a.getMetadata=e;a.getPropertiesMetadata=h;a.getPropertyMetadata=function(a,b){a=h(a);var c=a[b];c||(c=a[b]={});return c};a.setPropertyMetadata=function(a,b,c){h(a)[b]=c};a.getParametersMetadata=m;a.getParameterMetadata=function(a,b,c){var d=m(a,b)[c];d||(m(a,b)[c]=d={index:c});return d}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.autoDestroy=function(){return function(a,c,h){b.getMetadata(a).autoDestroy=!0;return a[c]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(c,a,b,d){function e(a){var c="_meta"in a?b.ensureType(a):a;return function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a.push(c);return"number"===typeof a[2]?
m.apply(this,a):h.apply(this,a)}}function h(a,b,c,f){d.getPropertyMetadata(a,b).cast=f}function m(a,b,c,f){d.getParameterMetadata(a,b,c).cast=f}function f(a){return function(b,c,f){d.getPropertyMetadata(b,a).cast=b[c]}}Object.defineProperty(a,"__esModule",{value:!0});var k=Object.prototype.toString;a.autocastMethod=function(a,b,c){if(d.hasParametersMetadata(a,b)){var f=d.getParametersMetadata(a,b).filter(function(a){return null!=a.cast});if(f.length){var e=c.value;c.value=function(){for(var a=[],
b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<f.length;b++){var c=f[b];a[c.index]=c.cast(a[c.index])}return e.apply(this,a)};return c}console.warn("Method "+a.declaredClass+"::"+b+" is decorated with @cast but no parameters are decorated")}};a.cast=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===k.call(a[0]))return e(a[0]);if(1===a.length&&"string"===typeof a[0])return f(a[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require",
"exports","../Logger"],function(c,a,b){function d(a,b){return b.isInstanceOf?b.isInstanceOf(a):b instanceof a}function e(a){return null==a?a:new Date(a)}function h(a){return null==a?a:!!a}function m(a){return null==a?a:a.toString()}function f(a){return null==a?a:parseFloat(a)}function k(a){return null==a?a:Math.round(parseFloat(a))}function l(a){return a&&a.constructor&&void 0!==a.constructor._meta}function p(a,b){return null!=b&&a&&!d(a,b)}function q(a,b){p(a,b)&&(l(b)?g.error("Accessor#set","Assigning an instance of '"+
(b.declaredClass||"unknown")+"' which is not a subclass of '"+(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"):b=new a(b));return b}function t(a){switch(a){case Number:return f;case n:return k;case Boolean:return h;case String:return m;case Date:return e;default:return q.bind(null,a)}}function v(a,b){var g=t(a);return 1===arguments.length?g:g(b)}function y(a,b){return 1===arguments.length?y.bind(null,a):b?Array.isArray(b)?b.map(a):[a(b)]:b}function u(a,b,g){return 0!==b&&Array.isArray(g)?
g.map(function(g){return u(a,b-1,g)}):a(g)}function A(a,b,g){if(2===arguments.length)return A.bind(null,a,b);if(!g)return g;g=u(a,b,g);for(var c=b,n=g;0<c&&Array.isArray(n);)c--,n=n[0];if(void 0!==n)for(n=0;n<c;n++)g=[g];return g}function z(a,b){if(2===arguments.length)return z(a).call(null,b);var c={},n=[],d=[],r;for(r in a.typeMap){var f=a.typeMap[r];c[r]=v(f);n.push(f&&f.prototype&&f.prototype.declaredClass||"unknown");d.push(r)}var e="string"===typeof a.key?function(b){return b[a.key]}:a.key;
return function(b){if(a.base&&!p(a.base,b))return b;var r=e(b)||a.defaultKeyValue,f=c[r];if(!f)return g.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+n.join("', '")+"'")+", or a plain object that can auto-cast (having .type \x3d "+("'"+d.join("', '")+"'")+")"),null;if(!p(a.typeMap[r],b))return b;if("string"!==typeof a.key||l(b))return f(b);var r={},k;for(k in b)k!==a.key&&(r[k]=b[k]);return f(r)}}Object.defineProperty(a,"__esModule",{value:!0});var g=b.getLogger("esri.core.Accessor");
a.isInstanceOf=d;a.ensureDate=e;a.ensureBoolean=h;a.ensureString=m;a.ensureNumber=f;a.ensureInteger=k;a.isClassedType=l;a.requiresType=p;a.ensureClass=q;a.ensureType=v;a.ensureArrayTyped=y;a.ensureArray=function(a,b){return 1===arguments.length?y(v.bind(null,a)):y(v.bind(null,a),b)};a.ensureNArrayTyped=A;a.ensureNArray=function(a,b,g){return 2===arguments.length?A(v.bind(null,a),b):A(v.bind(null,a),b,g)};a.ensureOneOfType=z;var n=function(){return function(){}}();a.Integer=n;a.default=v})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.declared=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];c=function(){return this||{}};c.__bases__=[a].concat(b);return c}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(c,a,b,d,e,h){Object.defineProperty(a,"__esModule",{value:!0});var m=e.getLogger("esri.core.accessorSupport.decorators.property");
a.property=function(a){void 0===a&&(a={});return function(c,f){var e=c.constructor.prototype;if(e===Function.prototype)b("dojo-debug-messages")&&m.error("Inappropriate use of @property() on a static field: "+c.name+"."+f+". Accessor does not support static properties.");else{var l=Object.getOwnPropertyDescriptor(c,f);l&&(l.get||l.set)?(a=d.clone(a),l.set&&(a.set=l.set),l.get&&(a.get=l.get)):l&&l.hasOwnProperty("value")&&(a=d.clone(a),b("dojo-debug-messages")&&a.hasOwnProperty("value")&&m.warn('@property() will redefine the value of "'+
f+'" on "'+c.constructor.name+'" already defined in the metadata',a),a.value=l.value);c=h.getPropertyMetadata(e,f);for(var k in a)f=a[k],Array.isArray(f)?c[k]=(c[k]||[]).concat(f):c[k]=f}}};a.propertyJSONMeta=function(a,b,c){a=h.getPropertyMetadata(a.constructor.prototype,c);a.json||(a.json={});a=a.json;void 0!==b&&(a.origins||(a.origins={}),a.origins[b]||(a.origins[b]={}),a=a.origins[b]);return a}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports",
"../../object","./property"],function(c,a,b,d){Object.defineProperty(a,"__esModule",{value:!0});a.reader=function(a,c,m){var f,e;void 0===c||Array.isArray(c)?(e=a,m=c,f=[void 0]):(e=c,f=Array.isArray(a)?a:[a]);return function(a,c,k){var l=a.constructor.prototype;f.forEach(function(f){f=d.propertyJSONMeta(a,f,e);f.read&&"object"!==typeof f.read&&(f.read={});b.setDeepValue("read.reader",l[c],f);m&&(f.read.source=(f.read.source||[]).concat(m))})}}})},"esri/layers/vectorTiles/core/object":function(){define(["require",
"exports"],function(c,a){function b(a,b,c){for(var d=0;d<a.length;d++){var f=a[d];if(!(f in c))if(b)c[f]={};else return;c=c[f]}return c}Object.defineProperty(a,"__esModule",{value:!0});a.getDeepValue=function(a,c){return b(a.split("."),!1,c)};a.setDeepValue=function(a,c,h){var d=a.split(".");a=d.pop();(h=b(d,!0,h))&&a&&(h[a]=c)}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});
a.shared=function(a){return function(b,c){b[c]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(c,a,b,d){function e(a,b){a.read&&("function"===typeof a.read?b.push(a.read):"object"===typeof a.read&&a.read.reader&&b.push(a.read.reader))}function h(a,b){a.write&&("function"===typeof a.write?b.push(a.write):"object"===typeof a.write&&a.write.writer&&b.push(a.write.writer))}function m(a){var b=[];a=
d.getPropertiesMetadata(a.prototype);if(!a)return b;for(var c in a){var f=a[c];f.cast&&b.push(f.cast);f.copy&&b.push(f.copy);if(f=f.json)if(e(f,b),h(f,b),f=f.origins)for(var l in f){var p=f[l];e(p,b);h(p,b)}}return b}function f(a){var b={values:{},descriptors:{}},c=["__bases__"],f=d.getPropertiesMetadata(a.prototype),e=m(a);Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==c.indexOf(b)||f&&f.hasOwnProperty(b)||!l(Object.getOwnPropertyDescriptor(a.prototype,b))&&-1!==e.indexOf(a.prototype[b])?
!1:!0}).forEach(function(c){var d=Object.getOwnPropertyDescriptor(a.prototype,c);l(d)?b.descriptors[c]=d:b.values[c]=a.prototype[c]});return b}function k(a){var b=Object.getOwnPropertyNames(a),c=Object.getPrototypeOf(a.prototype).constructor,d=Object.getOwnPropertyNames(Function);d.push("__bases__");var f=Object.getOwnPropertyNames(c),e={values:{},descriptors:{}};b.filter(function(b){return-1!==d.indexOf(b)?!1:-1===f.indexOf(b)||c[b]!==a[b]?!0:!1}).forEach(function(b){var c=Object.getOwnPropertyDescriptor(a,
b);l(c)?e.descriptors[b]=c:e.values[b]=a[b]});return e}function l(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(a,"__esModule",{value:!0});a.subclass=function(a){return function(c){var d=f(c),e=k(c);null!=a&&(d.values.declaredClass=a);c=b(c.__bases__,d.values);Object.defineProperties(c.prototype,d.descriptors);for(var l in e.values)c[l]=e.values[l];Object.defineProperties(c,e.descriptors);return c}}})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],
function(c,a,b){function d(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);a=a||[];b=b||{};return e([this].concat(a),b)}function e(a,c){a&&!Array.isArray(a)&&"function"!==typeof a&&(c=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);c=c||{};var f,e;f=0;for(e=h.length;f<e;f++)h[f](a,c);a=b(a,c);a.createSubclass=d;f=0;for(e=m.length;f<e;f++)m[f](a);return a}var h=[],m=[];(function(a){a.hasMixin=function(a,b){a=Array.isArray(a)?a.reduce(function(a,b){return b._meta?a.concat(b._meta.bases):
a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof b)for(var c=a.length-1;0<=c;c--)if(a[c].prototype.declaredClass===b)return!0;return-1!==a.indexOf(b)};a.safeMixin=function(a,c){return b.safeMixin(a,c)};a.before=function(a){h.push(a)};a.after=function(a){m.push(a)}})(e||(e={}));return e})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(c,a,b,d){Object.defineProperty(a,"__esModule",{value:!0});
a.writer=function(a,c,m){var f,e;void 0===c?(e=a,f=[void 0]):"string"!==typeof c?(e=a,f=[void 0],m=c):(e=c,f=Array.isArray(a)?a:[a]);return function(a,c,k){var l=a.constructor.prototype;f.forEach(function(f){f=d.propertyJSONMeta(a,f,e);f.write&&"object"!==typeof f.write&&(f.write={});m&&b.setDeepValue("write.target",m,f);b.setDeepValue("write.writer",l[c],f)})}}})},"esri/layers/vectorTiles/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),
function(c,a,b,d,e,h,m){return function(a){function c(){var b=a.call(this)||this;b.type=null;b.extent=null;b.hasM=!1;b.hasZ=!1;b.spatialReference=m.WGS84;return b}b(c,a);Object.defineProperty(c.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});c.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};c.prototype.clearCache=function(){this.notifyChange("cache")};c.prototype.getCacheValue=function(a){return this.cache[a]};
c.prototype.setCacheValue=function(a,b){this.cache[a]=b};d([h.property()],c.prototype,"type",void 0);d([h.property({readOnly:!0,dependsOn:["spatialReference"]})],c.prototype,"cache",null);d([h.property({readOnly:!0,dependsOn:["spatialReference"]})],c.prototype,"extent",void 0);d([h.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"hasM",void 0);d([h.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,
"hasZ",void 0);d([h.property({type:m,json:{write:!0}})],c.prototype,"spatialReference",void 0);return c=d([h.subclass("esri.geometry.Geometry")],c)}(h.declared(e))})},"esri/layers/vectorTiles/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),function(c,a,b,d,e,h,m,f,k){function l(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");
var c=new this;c.read(a,b);return c}var p=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);c.prototype.read=function(a,b){f.default(this,a,b);return this};c.prototype.write=function(a,b){return k.default(this,a||{},b)};c.prototype.toJSON=function(a){return this.write(null,a)};c.fromJSON=function(a,b){return l.call(this,a,b)};return c=d([m.subclass("esri.core.JSONSupport")],c)}(m.declared(e));p.prototype.toJSON.isDefaultToJSON=!0;h.after(function(a){h.hasMixin(a,p)&&(a.fromJSON=
l.bind(a))});return p})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(c,a,b,d,e,h){a=a.default;c.before(function(a,b){c.hasMixin(a,m)&&d.processPrototype(b)});c.after(function(a){c.hasMixin(a,m)&&(d.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||
!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var m=c(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===m)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new a(this)});
if(0<arguments.length&&this.normalizeCtorArgs){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,b)}},__accessor__:null,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;var c;null!=this.getDefaults&&(c=this.getDefaults(a||{}),this.set(c));b.initialize();a&&(this.set(a),b.ctorArgs=null);b.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(f){console.warn(f.stack)}else h.removeTarget(this),this.__accessor__.destroy()},get:function(a){return b.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,b){e.set(this,a,b);return this},watch:function(a,b,c){return h.watch(this,a,b,c)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,
b){return this.__accessor__.override(a,b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return m})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(c,a,b,d,e,h,m){function f(a,
c){return c.metadatas[a]?!0:(b("dojo-debug-messages")&&l.warn("cannot access unknown property '"+a+"' on instance of "+c.host.declaredClass+"."),!1)}function k(a,c,d,f){return a.nonNullable&&null==d?(b("dojo-debug-messages")&&l.warn("cannot set non-nullable property '"+c+"' to null on "+f.host.declaredClass+"."),!1):!0}Object.defineProperty(a,"__esModule",{value:!0});var l=d.getLogger("esri.core.accessorSupport.Properties");c=function(){function a(a){this.host=a;this._origin=h.OriginId.USER;this.ctorArgs=
this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new m.default;a=this.host.constructor.__accessorMetadata__;this.metadatas=a.properties;this.autoDestroy=a.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;e.instanceCreated(this.host,this.metadatas)};a.prototype.constructed=function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var b=0,c=Object.getOwnPropertyNames(a);b<c.length;b++){var d=
c[b],f=a[d];if(f){for(;0<f.length;)f.pop().propertyDestroyed(this,d);a[d]=null}}if(this.autoDestroy)for(d in this.metadatas)(a=this.internalGet(d))&&a&&"function"===typeof a.destroy&&(a.destroy(),this.metadatas[d].nonNullable||this.internalSet(d,null))};Object.defineProperty(a.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});a.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};a.prototype.get=
function(a){f(a,this);var b=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);var c=b.get;return c?(b=c.call(this.host),this.store.set(a,b,h.OriginId.COMPUTED),this.propertyCommitted(a),b):b.value};a.prototype.originOf=function(a){var b=this.store.originOf(a);return void 0===b&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":h.idToName(b)};a.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};a.prototype.internalGet=function(a){if(f(a,
this)){var b=this.store;return b.has(a)?b.get(a):this.metadatas[a].value}};a.prototype.internalSet=function(a,b){f(a,this)&&(this.propertyInvalidated(a),this.initialized?this.store.set(a,b,this._origin):this.store.set(a,b,h.OriginId.DEFAULTS),this.propertyCommitted(a))};a.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};a.prototype.keys=function(){return this.store.keys()};a.prototype.override=function(a,b){if(f(a,this)){this.overridden||(this.overridden={});
var c=this.metadatas[a];k(c,a,b,this)&&((c=c.cast)&&(b=c.call(this.host,b)),this.overridden[a]=!0,this.internalSet(a,b))}};a.prototype.set=function(a,b){if(f(a,this)){var c=this.metadatas[a];if(k(c,a,b,this)){var d=c.set;(c=c.cast)&&(b=c.call(this.host,b));d?d.call(this.host,b):this.internalSet(a,b)}}};a.prototype.setDefaultOrigin=function(a){this._origin=h.nameToId(a)};a.prototype.propertyInvalidated=function(a){var b=this.dirties,c=this.isOverridden(a),d=this.cursors&&this.cursors[a],f=this.metadatas[a].computes;
if(d)for(var e=0;e<d.length;e++)d[e].propertyInvalidated(this,a);c||(b[a]=!0);if(f)for(a=0;a<f.length;a++)this.propertyInvalidated(f[a])};a.prototype.propertyCommitted=function(a){var b=this.cursors&&this.cursors[a];this.dirties[a]=!1;if(b)for(var c=0;c<b.length;c++)b[c].propertyCommitted(this,a)};a.prototype.addCursor=function(a,b){this.cursors||(this.cursors={});var c=this.cursors[a];c||(this.cursors[a]=c=[]);c.push(b)};a.prototype.removeCursor=function(a,b){var c=this.cursors[a];this.cursors[a]&&
(c.splice(c.indexOf(b),1),0===c.length&&(this.cursors[a]=null))};return a}();a.default=c})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(c,a,b,d,e){Object.defineProperty(a,"__esModule",{value:!0});var h=[b.default,d.default,e.default];a.processPrototypeMetadatas=function(a,b){for(var c=Object.getOwnPropertyNames(a),d=0;d<h.length;d++){var f=
h[d];if(f.processPrototypePropertyMetadata)for(var e=0,m=c;e<m.length;e++){var v=m[e];f.processPrototypePropertyMetadata(v,a[v],a,b)}}};a.processClassMetadatas=function(a,b){for(var c=Object.getOwnPropertyNames(a),d=0;d<h.length;d++){var f=h[d];if(f.processClassPropertyMetadata)for(var e=0,m=c;e<m.length;e++){var v=m[e];f.processClassPropertyMetadata(v,a[v],a,b)}}};a.instanceCreated=function(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<h.length;d++){var f=h[d];f.instanceCreated&&f.instanceCreated(a,
b,c)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(c,a,b,d,e,h,m){function f(a,b,c){var d=h.getProperties(a);return m.wire(a,c.aliasOf,function(){d.propertyInvalidated(b)})}Object.defineProperty(a,"__esModule",{value:!0});var k=b("dojo-debug-messages");a.AliasedPropertyExtension={processClassPropertyMetadata:function(a,b,c,f){var l=b.aliasOf;if(l){var p=l.split(".")[0];
if(null==c[p])k&&console.error("[accessor] class '"+f+"' - property '"+a+"' is alias of aliased of '"+l+"', but '"+p+"' isn't declared as property. This can be fix by adding '"+p+"' to the metadata for example.");else if(b.set)k&&console.error("[accessor] class '"+f+"' - property '"+a+"' is alias of aliased of '"+l+"', so it cannot have a setter defined");else if(b.get)k&&console.error("[accessor] class '"+f+"' - property '"+a+"' is alias of aliased of '"+l+"', so it cannot have a getter defined");
else{var m;b.get=function(){var a=d.default(this,l);if("function"===typeof a){m||(m=l.split(".").slice(0,-1).join("."));var b=d.default(this,m);b&&(a=a.bind(b))}return a};b.readOnly||(b.set=function(a){return e.default(this,l,a)})}}},instanceCreated:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d],l=b[e];l.aliasOf&&f(a,e,l)}}};a.default=a.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(c,a,b){function d(a,
c,d){if(null!=d.getItemAt||Array.isArray(d)){var f=parseInt(a,10);if(!isNaN(f))return Array.isArray(d)?d[f]:d.getItemAt(f)}f=b.getProperties(d);return c?b.isPropertyDeclared(f,a)?f.get(a):d[a]:b.isPropertyDeclared(f,a)?f.internalGet(a):d[a]}function e(a,b,c,p){if(null==a)return a;if((a=d(b[p],c,a))||!(p<b.length-1))return p===b.length-1?a:e(a,b,c,p+1)}function h(a,c,l,p){void 0===l&&(l=!1);void 0===p&&(p=0);return"string"===typeof c&&-1===c.indexOf(".")?d(c,l,a):e(a,b.pathToArray(c),l,p)}function m(a,
b){return h(a,b,!0)}Object.defineProperty(a,"__esModule",{value:!0});a.valueOf=h;a.get=m;a.exists=function(a,b){return void 0!==h(b,a,!0)};a.default=m})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(c,a,b){function d(a,c){return c?Object.keys(c).reduce(function(a,f){if("value"===f)return a[f]=c[f],a;if(void 0===a[f])return a[f]=b.clone(c[f]),a;var e=a[f],l=c[f];if(e===l)return a;if(Array.isArray(l)||Array.isArray(a))e=e?Array.isArray(e)?
a[f]=e.concat():a[f]=[e]:a[f]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(function(a){-1===e.indexOf(a)&&e.push(a)}));else if(l&&"object"===typeof l)a[f]=d(e,l);else if(!a.hasOwnProperty(f)||c.hasOwnProperty(f))a[f]=l;return a},a||{}):a}function e(a){return Array.isArray(a)?a:a.split(".")}function h(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=Array.isArray(a)?a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function m(a){var b=!1;return function(){b||
(b=!0,a())}}Object.defineProperty(a,"__esModule",{value:!0});a.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};a.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};a.merge=d;a.pathToStringOrArray=function(a){return a?"string"===typeof a&&-1===a.indexOf(".")?a:e(a):a};a.pathToArray=e;a.splitPath=h;a.parse=function(a,b,c,d){b=h(b);if(Array.isArray(b)){var f=b.map(function(b){return d(a,b.trim(),c)});return{remove:m(function(){return f.forEach(function(a){return a.remove()})})}}return d(a,
b.trim(),c)};a.once=m})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(c,a,b,d,e){function h(a,c,d){if(a&&c)if("object"===typeof c){d=0;for(var f=Object.getOwnPropertyNames(c);d<f.length;d++){var l=f[d];h(a,l,c[l])}}else"_"!==c[0]&&(-1!==c.indexOf(".")?(c=c.split("."),l=c.splice(c.length-1,1)[0],h(e.default(a,c),l,d)):(b("dojo-debug-messages")&&(l=a.__accessor__,null==l||l.metadatas[c]||m.warn("setting unknown property '"+
c+"' on instance of "+l.host.declaredClass)),a[c]=d))}Object.defineProperty(a,"__esModule",{value:!0});var m=d.getLogger("esri.core.accessorSupport.set");a.set=h;a.default=h})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(c,a,b){function d(a,c,d){c=b.splitPath(c);if(Array.isArray(c)){for(var l=[],p=0;p<c.length;p++)l.push((new e(c[p],d)).install(a));return new f(l)}a=(new e(c,d)).install(a);return new k(a)}Object.defineProperty(a,"__esModule",
{value:!0});var e=function(){function a(a,c){this.path=a;this.callback=c;this.chain=null;this.path=a;-1<a.indexOf(".")&&(this.chain=b.pathToArray(a));this.callback=c;return this}a.prototype.install=function(a){a=this.chain?new m(this,a):new h(this,a);return a};a.prototype.notify=function(a){this.callback(a,this.path)};return a}(),h=function(){function a(a,c){this.binding=a;this.target=c;b.getProperties(c).addCursor(this.binding.path,this)}a.prototype.destroy=function(){this.target&&(b.getProperties(this.target).removeCursor(this.binding.path,
this),this.target=this.binding=null)};a.prototype.propertyDestroyed=function(a,c){b.getProperties(this.target).removeCursor(c,this)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&this.binding.notify(this.target)};return a}(),m=function(){function a(a,c){this.binding=a;this.target=c;this.stack=[];this.properties=b.getProperties(c);this.stack.push({properties:this.properties,propertyName:a.chain[0]});
this.properties.addCursor(a.chain[0],this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};a.prototype.propertyDestroyed=function(a,b){this.moveBackward(a,b)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&(this.moveBackward(a,b),this.moveForward(),this.binding.notify(this.target))};
a.prototype.moveBackward=function(a,b){for(var c=this.stack,d=c[c.length-1];d.properties!==a&&d.propertyName!==b;)d.properties.removeCursor(d.propertyName,this),c.pop(),d=c[c.length-1]};a.prototype.moveForward=function(){var a=this.stack,c=a[a.length-1],c=c.properties.internalGet(c.propertyName);(c=b.getProperties(c))&&a.length<this.binding.chain.length&&(a=this.binding.chain[a.length],this.stack.push({properties:c,propertyName:a}),c.addCursor(a,this),this.moveForward())};return a}(),f=function(){function a(a){this.cursors=
a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return a}(),k=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return a}();a.create=function(a,c){a=b.splitPath(a);if(Array.isArray(a)){for(var d=[],l=0;l<a.length;l++)d.push(new e(a[l],c));return function(a){for(var b=[],c=0;c<d.length;c++)b[c]=d[c].install(a);return new f(b)}}var p=new e(a,c);return function(a){return new k(p.install(a))}};
a.wire=d;a.default=d})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(c,a,b,d,e,h){Object.defineProperty(a,"__esModule",{value:!0});var m=b("dojo-debug-messages"),f=d.getLogger("esri.core.accessorSupport.extensions.computedProperty");a.ComputedPropertyExtension={processClassPropertyMetadata:function(a,b,c,d){if(m){var l=b.dependsOn;l&&l.length&&l.map(function(a){return a.split(".")[0]}).forEach(function(b){null==
c[b]&&f.error("[accessor] class '"+d+"' - property '"+a+"' depends on unknown property '"+b+"' which hasn't been found during introspection. This can be fix by adding '"+b+"' to the metadata for example.")})}b.dependsOn&&(l=void 0,l=b.dependsOn.slice())&&(b.wire=h.create(l,function(b){return e.getProperties(b).propertyInvalidated(a)}))},instanceCreated:function(a,b,c){for(var d=0;d<c.length;d++){var f=b[c[d]];f.wire&&f.wire(a)}}};a.default=a.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(c,a,b,d,e,h){function m(a,b,c){var d=a&&a.json;a&&a.json&&a.json.origins&&c&&(a=a.json.origins[c.origin])&&b in a&&(d=a);return d}Object.defineProperty(a,"__esModule",{value:!0});a.originSpecificReadPropertyDefinition=function(a,b){return m(a,"read",b)};a.originSpecificWritePropertyDefinition=function(a,b){return m(a,"write",b)};a.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,c,l,p){if(e.process(c)){b.process(c);l=c.type;for(p=0;Array.isArray(l);)l=l[0],p++;if(c.json.origins)for(var f in c.json.origins){var k=
c.json.origins[f];d.create(l,p,a,k);h.create(l,p,a,k)}d.create(l,p,a,c.json);h.create(l,p,a,c.json)}}};a.default=a.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,c={"web-document":["web-scene","web-map"]};a=function(a){if(b[a]){var d=b[a];c[a].forEach(function(a){b[a]=
d});delete b[a]}};for(var h in c)a(h)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(c,a,b,d){function e(a,b,c,d){if(1<b)return f(a,b);if(1===b)return k(a);if(l(a)){var e=k(a.prototype.itemType.Type);return function(b,c,g){return(b=e(b,c,g))?new a(b):b}}return h(a)}function h(a){return a.prototype.read?function(b,c,d){return null==b?b:(new a).read(b,d)}:a.fromJSON}function m(a,b,
c,d){return 0!==d&&Array.isArray(b)?b.map(function(b){return m(a,b,c,d-1)}):a(b,null,c)}function f(a,b){a=h(a);var c=m.bind(null,a);return function(a,d,e){if(null==a)return a;a=c(a,e,b);d=b;for(e=a;0<d&&Array.isArray(e);)d--,e=e[0];if(void 0!==e)for(e=0;e<d;e++)a=[a];return a}}function k(a){var b=h(a);return function(a,c,d){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,d)}):[b(a,null,d)]}}function l(a){return d.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?
p(a.Type):!1:!1}function p(a){return!!a&&(!!a.prototype.read||!!a.fromJSON||l(a))}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,c,d,f){(!f.read||!f.read.reader&&!1!==f.read.enabled)&&p(a)&&b.setDeepValue("read.reader",e(a,c,d,f),f)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&
0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(c,a){function b(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function d(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?
a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){a.json||(a.json={});b(a.json);d(a.json);if(a.json.origins)for(var c in a.json.origins)b(a.json.origins[c]),d(a.json.origins[c]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(c,a,b,d){function e(a,
c,d,f){b.setDeepValue(d,h(a,f),c)}function h(a,b){return a&&"function"===typeof a.write?a.write({},b):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function m(a,c,d,f){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return h(a,f)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[h(a,f)];b.setDeepValue(d,a,c)}function f(a,b,c){return 0!==c&&Array.isArray(a)?a.map(function(a){return f(a,
b,c-1)}):h(a,b)}function k(a){return function(c,d,e,l){if(null===c)c=null;else{c=f(c,l,a);l=a;for(var p=c;0<l&&Array.isArray(p);)l--,p=p[0];if(void 0!==p)for(p=0;p<l;p++)c=[c]}b.setDeepValue(e,c,d)}}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,b,c,f){f.write&&!f.write.writer&&!1!==f.write.enabled&&(1===b||d.isCollection(a)?f.write.writer=m:f.write.writer=1<b?k(b):e)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(c,
a){function b(a){switch(a){case "defaults":return e.DEFAULTS;case "service":return e.SERVICE;case "portal-item":return e.PORTAL_ITEM;case "web-scene":return e.WEB_SCENE;case "web-map":return e.WEB_MAP;case "user":return e.USER}}function d(a){switch(a){case e.DEFAULTS:return"defaults";case e.SERVICE:return"service";case e.PORTAL_ITEM:return"portal-item";case e.WEB_SCENE:return"web-scene";case e.WEB_MAP:return"web-map";case e.USER:return"user"}}Object.defineProperty(a,"__esModule",{value:!0});var e;
(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(e=a.OriginId||(a.OriginId={}));a.nameToId=b;a.idToName=d;a.readableNameToId=function(a){return b(a)};a.idToReadableName=function(a){return d(a)};a.writableNameToId=function(a){return b(a)};a.idToWritableName=function(a){return d(a)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return b.OriginId.USER};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,b){this._values[a]=b};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();a.default=c})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(c,a,b,d,e,h,m,f){Object.defineProperty(a,"__esModule",{value:!0});var k=Object.prototype.hasOwnProperty,l=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,p={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},q=/^_(set|get)([a-zA-Z0-9]+)Attr$/;a.processPrototype=function(a){for(var c=a.declaredClass,f=a.properties||{},t=0,A=Object.getOwnPropertyNames(f);t<A.length;t++){var z=A[t],g=f[z],n=typeof g;null==g?h.setPropertyMetadata(a,z,{value:g}):
Array.isArray(g)?h.setPropertyMetadata(a,z,{type:[g[0]],value:null}):"object"===n?m.getProperties(g)||g instanceof Date?h.setPropertyMetadata(a,z,{type:g.constructor,value:g}):h.setPropertyMetadata(a,z,g):"boolean"===n?h.setPropertyMetadata(a,z,{type:Boolean,value:g}):"string"===n?h.setPropertyMetadata(a,z,{type:String,value:g}):"number"===n?h.setPropertyMetadata(a,z,{type:Number,value:g}):"function"===n&&h.setPropertyMetadata(a,z,{type:g,value:null})}t=0;for(A=Object.getOwnPropertyNames(a);t<A.length;t++){var n=
A[t],g=a[n],f=z=void 0,r=l.exec(n);if(r)z=r[1],f=p[r[2]];else if(r=q.exec(n))z=r[2][0].toLowerCase()+r[2].substr(1),f=r[1].toLowerCase();z&&f&&(z=h.getPropertyMetadata(a,z),b.setDeepValue(f,g,z))}t=0;for(A=Object.getOwnPropertyNames(h.getPropertiesMetadata(a));t<A.length;t++)if(z=A[t],g=h.getPropertyMetadata(a,z),f=g.type,n=g.types,void 0===g.value&&k.call(a,z)&&(g.value=a[z]),!g.cast&&f){z=g;g=0;for(n=f;Array.isArray(n);)n=n[0],g++;f=1===g?d.ensureArray(n):1<g?d.ensureNArray(n,g):d.ensureType(f);
z.cast=f}else!g.cast&&n&&(Array.isArray(n)?g.cast=d.ensureArrayTyped(d.ensureOneOfType(n[0])):g.cast=d.ensureOneOfType(n));e.processPrototypeMetadatas(h.getPropertiesMetadata(a),c);return h.getPropertiesMetadata(a)};a.processClass=function(a){for(var b=a.prototype,c=b.declaredClass,d=a._meta.bases,l={},p=d.length-1;0<=p;p--)m.merge(l,h.getMetadata(d[p].prototype));var g=l.properties;e.processClassMetadatas(g,c);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:g,autoDestroy:!!l.autoDestroy}});
for(var n={},c=function(a){var b=g[a];n[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):b.value},set:function(c){var g=this.__accessor__;if(!g)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c});else if(!Object.isFrozen(this)){if(g.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===g.lifecycle&&b.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
a+"' of "+this.declaredClass);g.set(a,c)}}}},d=0,p=Object.getOwnPropertyNames(g);d<p.length;d++)c(p[d]);Object.defineProperties(a.prototype,n);if(l.parameters)for(a=0,c=Object.getOwnPropertyNames(l.parameters);a<c.length;a++)d=c[a],p=Object.getOwnPropertyDescriptor(b,d)||{value:b[d]},(p=f.autocastMethod(b,d,p))&&Object.defineProperty(b,d,p);return l}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(c,a,b,d,e,h,m,f,k){function l(a){z.has(a)?g.splice(g.indexOf(a),1):z.add(a);g.push(a);n||(n=h.schedule(q))}function p(a){if(!a.removed){var b=a.callback,c=a.path,g=a.oldValue,n=a.target,r=m.valueOf(n,a.propertyPath,!0);d.equals(g,r)||(a.oldValue=r,b.call(n,r,g,c,n))}}function q(){if(n){n=null;var a=g;g=A.acquire();z.clear();for(var b=A.acquire(),c=0;c<a.length;c++){var d=a[c];p(d);d.removed&&b.push(d)}for(c=0;c<g.length;c++)d=g[c],d.removed&&(b.push(d),z.delete(d),g.splice(c,1),--c);for(c=
0;c<b.length;c++)u.pool.release(b[c]);A.release(a);A.release(b);r.forEach(function(a){return a()})}}function t(a,b,c){var g=f.parse(a,b,c,function(a,b,c){var n=m.valueOf(a,b,!0),d,r=k.wire(a,b,function(a,b){a.__accessor__.destroyed?g.remove():(d||(d=u.pool.acquire(a,b,n,c),n=null),l(d))});return{remove:f.once(function(){r.remove();d&&(d.removed=!0,l(d),d=null);g=r=n=null})}});return g}function v(a,b,c){var g=f.parse(a,b,c,function(a,b,c){var n=m.valueOf(a,b,!0),r=!1;return k.wire(a,b,function(a,b){if(a.__accessor__.destroyed)g.remove();
else if(!r){r=!0;var f=m.valueOf(a,b,!0);d.equals(n,f)||c.call(a,f,n,b,a);n=m.valueOf(a,b,!0);r=!1}})});return g}function y(a,b,c,g){void 0===g&&(g=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:g?v(a,b,c):t(a,b,c)}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function a(a,b,c,g){this.target=a;this.path=b;this.oldValue=c;this.callback=g;this.removed=!1;this.propertyPath=f.pathToStringOrArray(b)}a.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};a.pool=new e(a,!0);return a}(),A=new b,z=new Set,g=A.acquire(),n;a.dispatchTarget=function(a){for(var b=A.copy(g),c=0;c<b.length;c++){var n=b[c];n.target===a&&(p(n),z.delete(n),g.splice(g.indexOf(n),1))}};a.removeTarget=function(a){for(var b=0;b<g.length;b++){var c=g[b];c.target===a&&(c.removed=!0)}};a.dispatch=q;var r=new Set;a.afterDispatch=function(a){r.add(a);return{remove:function(){r.delete(a)}}};a.watch=y;a.isValueInUse=function(a){return g.some(function(b){return b.oldValue===
a})};a.default=y})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(c,a,b){function d(a){a.length=0}var e=Array.prototype.splice;c=function(){function a(a,c){void 0===a&&(a=50);void 0===c&&(c=50);this._pool=new b(Array,!1,d,c,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var b=this.acquire();a.unshift(0,0);e.apply(b,a);a.splice(0,2);return b};a.prototype.release=function(a){this._pool.release(a)};
a.acquire=function(){return h.acquire()};a.copy=function(a){return h.copy(a)};a.release=function(a){return h.release(a)};return a}();var h=new c(100);return c})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(c,a,b,d,e){function h(b){void 0===b&&(b=a.now());a.debug.rafId=null;0<n.length&&(a.debug.rafId=m());if(0<t){var c=b-t;u=Math.min(c,u);if(c<v)return}a.debug.executeFrameTasks(b)}function m(){return a.debug.requestNextFrame?
a.debug.requestNextFrame(l):l()}function f(){for(var a=0;a<n.length;){var b=n[a];a++;if(b.removed){n.splice(a-1,1);for(var c=0;c<z.length;c++){var g=z[c];if(b.phases[g]){var g=r[g],d=g.indexOf(b);-1!==d&&g.splice(d,1)}}}}}function k(){for(;g.length;){var b=g.shift();b.isActive&&(b.isActive=!1,b.callback())}a.debug.willDispatch=!1}function l(){return e(h)}Object.defineProperty(a,"__esModule",{value:!0});a.now=d;var p=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=
-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),q=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),t=-1,v=0,y=0,u=Number.POSITIVE_INFINITY,A={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},z=["prepare","preRender","render","postRender","update"],g=[],n=[],r={prepare:[],preRender:[],render:[],postRender:[],update:[]},B=function(){function b(a){this._task=a}b.prototype.remove=function(){this._task.removed=!0};
b.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=a.now())};b.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=a.now()-this._task.pausedAt))};return b}();a.FrameTaskHandle=B;a.debug={frameTasks:n,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);for(var b=0;b<n.length;b++)n[b].removed=!0;a&&f()},dispatch:k,executeFrameTasks:function(b){void 0===b&&(b=
a.now());0>t&&(t=b);var c=b-t;t=b;for(var g=0;g<n.length;g++){var d=n[g];-1!==d.epoch&&(d.dt=c)}for(g=0;g<z.length;g++)for(var c=z[g],e=r[c],l=0;l<e.length;l++)d=e[l],d.paused||d.removed||(0===g&&d.ticks++,-1===d.epoch&&(d.epoch=b),A.time=b,A.deltaTime=d.dt,A.elapsedFrameTime=a.now()-b,A.frameDuration=0<y?y:u,A.spendInTask=b-d.epoch,d.phases[c].call(d,A));f()}};a.schedule=function(c){c=new q(c);g.push(c);a.debug.willDispatch||(a.debug.willDispatch=!0,b(k));return c};a.addFrameTask=function(b){var c=
new p(b);n.push(c);for(var g=0,d=z;g<d.length;g++){var f=d[g];b[f]&&r[f].push(c)}a.debug.rafId||(t=-1,a.debug.rafId=m());return new B(c)};a.setFrameRate=function(a){if(0>=a)y=v=0;else{var b=1.05*u;a=Math.ceil(1E3/a/b);v=(a-1)*b;y=a*u}};a.requestNextFrame=m})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(c,a,b){function d(){if(b.postMessage&&!b.importScripts){var a=b.onmessage,c=!0;b.onmessage=function(){c=!1};b.postMessage("","*");b.onmessage=
a;return c}return!1}var e=b.MutationObserver||b.WebKitMutationObserver;return function(){var a;if(b.process&&b.process.nextTick)a=function(a){b.process.nextTick(a)};else if(b.Promise)a=function(a){b.Promise.resolve().then(a)};else if(e){var c=[],f=document.createElement("div");(new e(function(){for(;0<c.length;)c.shift()()})).observe(f,{attributes:!0});a=function(a){c.push(a);f.setAttribute("queueStatus","1")}}else if(d()){var k=[];b.addEventListener("message",function(a){if(a.source===b&&"esri-nexttick-message"===
a.data)for(a.stopPropagation();k.length;)k.shift()()},!0);a=function(a){k.push(a);b.postMessage("esri-nexttick-message","*")}}else a=b.setImmediate?function(a){return b.setImmediate(a)}:function(a){return b.setTimeout(a,0)};return a}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(c,a){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require",
"exports","./global"],function(c,a,b){return function(){var a=b.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var c;c=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-c}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require",
"exports","./global","./now"],function(c,a,b,d){var e=d();c=b.requestAnimationFrame;if(!c){a=["ms","moz","webkit","o"];for(var h=0;h<a.length&&!c;++h)c=b[a[h]+"RequestAnimationFrame"];c||(c=function(a){var c=d(),k=Math.max(0,16-(c-e)),l=b.setTimeout(function(){a(d())},k);e=c+k;return l})}return c})},"esri/layers/vectorTiles/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(c,a,b,d,e,h){function m(a,
b,c){void 0===c&&(c=f);for(var l=e.getProperties(a),p=l.metadatas,k={},m=0,u=Object.getOwnPropertyNames(b);m<u.length;m++){var A=k,z=p,g=u[m],n=b,r=c,B=h.originSpecificReadPropertyDefinition(z[g],r);B&&(!B.read||!1!==B.read.enabled&&!B.read.source)&&(A[g]=!0);for(var C=0,D=Object.getOwnPropertyNames(z);C<D.length;C++){var F=D[C],B=h.originSpecificReadPropertyDefinition(z[F],r),H;a:{H=g;var J=n;if(B&&B.read&&!1!==B.read.enabled&&B.read.source)if(B=B.read.source,"string"===typeof B){if(B===H||-1<B.indexOf(".")&&
0===B.indexOf(H)&&d.exists(B,J)){H=!0;break a}}else for(var I=0;I<B.length;I++){var G=B[I];if(G===H||-1<G.indexOf(".")&&0===G.indexOf(H)&&d.exists(G,J)){H=!0;break a}}H=!1}H&&(A[F]=!0)}}l.setDefaultOrigin(c.origin);u=0;for(A=Object.getOwnPropertyNames(k);u<A.length;u++)m=A[u],g=(z=h.originSpecificReadPropertyDefinition(p[m],c).read)&&z.source,n=void 0,n=g&&"string"===typeof g?d.valueOf(b,g):b[m],z&&z.reader&&(n=z.reader.call(a,n,b,c)),void 0!==n&&l.set(m,n);b=0;for(p=Object.getOwnPropertyNames(p);b<
p.length;b++)m=p[b],k[m]||(u=a,A=l,z=c,g=(g=h.originSpecificReadPropertyDefinition(A.metadatas[m],z))&&g.read&&g.read.default,void 0!==g&&(u="function"===typeof g?g.call(u,m,z):g,void 0!==u&&A.set(m,u)));l.setDefaultOrigin("user")}Object.defineProperty(a,"__esModule",{value:!0});var f={origin:"service"};a.read=m;a.readLoadable=function(a,c,d,e){void 0===e&&(e=f);c=b({},e,{messages:[]});d(c);c.messages.forEach(function(b){"warning"!==b.type||a.loaded?e&&e.messages.push(b):a.loadWarnings.push(b)})};
a.default=m})},"esri/layers/vectorTiles/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(c,a,b,d,e,h,m){function f(a,c,d,f,k,m){if(!f||!f.write)return!1;var p=a.get(d);if(void 0===p)return!1;if(!k&&f.write.overridePolicy){var h=f.write.overridePolicy.call(a,p,d,m);void 0!==h&&(k=h)}k||(k=f.write);if(!k||!1===k.enabled)return!1;if(null===p){if(k.allowNull)return!0;k.isRequired&&((a=new b("web-document-write:property-required",
"Missing value for required property '"+d+"' on '"+a.declaredClass+"'",{propertyName:d,target:a}),m)&&m.messages?m.messages.push(a):a&&!m&&l.error(a.name,a.message));return!1}return!k.ignoreOrigin&&m&&m.origin&&c.store.originOf(d)<e.nameToId(m.origin)?!1:!0}function k(a,b,c){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return h.merge(b,a.toJSON());var d=h.getProperties(a),l=d.metadatas,p;for(p in l){var k=m.originSpecificWritePropertyDefinition(l[p],c);if(f(a,d,p,k,null,
c)){var q=a.get(p),g={};k.write.writer.call(a,q,g,"string"===typeof k.write.target?k.write.target:p,c);k=g;0<Object.keys(k).length&&(b=h.merge(b,k),c&&c.writtenProperties&&c.writtenProperties.push({target:a,propName:p,oldOrigin:e.idToReadableName(d.store.originOf(p)),newOrigin:c.origin}))}}return b}Object.defineProperty(a,"__esModule",{value:!0});var l=d.getLogger("esri.core.accessorSupport.write");a.willPropertyWrite=function(a,b,c,d){var e=h.getProperties(a),l=m.originSpecificWritePropertyDefinition(e.metadatas[b],
d);return l?f(a,e,b,l,c,d):!1};a.write=k;a.disableWriteDefaultPolicy=function(a){return function(b){return{enabled:b!==a}}};a.default=k})},"esri/layers/vectorTiles/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(c,a,b,d,e,h,m,f){c=function(a){function c(b){b=a.call(this)||this;b.latestWkid=null;
b.wkid=null;b.wkt=null;return b}b(c,a);e=c;c.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return e.WebMercator;if(4326===a.wkid)return e.WGS84}var b=new e;b.read(a);return b};c.prototype.normalizeCtorArgs=function(a){return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b);var b};Object.defineProperty(c.prototype,"isWGS84",{get:function(){return f.isWGS84(this)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isWebMercator",{get:function(){return f.isWebMercator(this)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isGeographic",{get:function(){return f.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isWrappable",{get:function(){return f.isWrappable(this)},enumerable:!0,configurable:!0});c.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)};c.prototype.clone=function(){if(this===e.WGS84)return e.WGS84;if(this===e.WebMercator)return e.WebMercator;var a=new e;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&
(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};c.prototype.equals=function(a){return f.equals(this,a)};c.prototype.toJSON=function(a){return this.write(null,a)};c.GCS_NAD_1927=null;c.WGS84=null;c.WebMercator=null;d([m.property({dependsOn:["wkid"],readOnly:!0})],c.prototype,"isWGS84",null);d([m.property({dependsOn:["wkid"],readOnly:!0})],c.prototype,"isWebMercator",
null);d([m.property({dependsOn:["wkid","wkt"],readOnly:!0})],c.prototype,"isGeographic",null);d([m.property({dependsOn:["wkid"],readOnly:!0})],c.prototype,"isWrappable",null);d([m.property({type:Number,json:{write:!0}})],c.prototype,"latestWkid",void 0);d([m.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],c.prototype,"wkid",void 0);d([m.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===
this.wkid?!0:!1}}}}}}})],c.prototype,"wkt",void 0);d([m.writer("wkt"),m.writer("web-scene","wkt")],c.prototype,"writeWkt",null);d([m.property({type:Number,json:{write:!0}})],c.prototype,"vcsWkid",void 0);d([m.property({type:Number,json:{write:!0}})],c.prototype,"latestVcsWkid",void 0);return c=e=d([m.subclass("esri.geometry.SpatialReference")],c);var e}(m.declared(e));c.prototype.toJSON.isDefaultToJSON=!0;c.GCS_NAD_1927=new c({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});
c.WGS84=new c(4326);c.WGS84.wkt=h.substitute({Central_Meridian:"0.0"},f.getInfo(c.WGS84).wkTemplate);c.WebMercator=new c({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(c.GCS_NAD_1927),Object.freeze(c.WGS84),Object.freeze(c.WebMercator));return c})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(c,a,b){function d(a){return a.wkid&&!0===e[a.wkid]}Object.defineProperty(a,"__esModule",{value:!0});var e=
{102113:!0,102100:!0,3857:!0,3785:!0},h={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};c=[-2.0037508342788905E7,2.0037508342788905E7];var m=[-2.0037508342787E7,2.0037508342787E7],f={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:c,origin:m,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:c,origin:m,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:c,origin:m,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:c,origin:m,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};a.equals=function(a,b){if(b){if(a===b)return!0;if(null!=a.wkid||null!=b.wkid)return a.wkid===b.wkid||d(a)&&d(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid;if(a.wkt&&b.wkt)return a.wkt.toUpperCase()===b.wkt.toUpperCase()}return!1};a.getInfo=function(a){return a.wkid?f[a.wkid]:null};a.isGeographic=function(a){return a.wkid?null==b[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1};a.isWGS84=function(a){return 4326===
a.wkid};a.isWebMercator=d;a.isWrappable=function(a){return a.wkid&&!0===h[a.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define([],function(){var c,a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(c=2E3;2045>=c;c++)a[c]=0;for(c=2056;2065>=c;c++)a[c]=0;for(c=2067;2135>=c;c++)a[c]=0;for(c=2137;2154>=c;c++)a[c]=0;for(c=2161;2170>=c;c++)a[c]=0;for(c=2172;2193>=c;c++)a[c]=0;for(c=2195;2198>=c;c++)a[c]=0;for(c=2200;2203>=c;c++)a[c]=0;for(c=2205;2217>=c;c++)a[c]=0;for(c=2222;2224>=c;c++)a[c]=1;for(c=2225;2250>=c;c++)a[c]=2;
for(c=2251;2253>=c;c++)a[c]=1;for(c=2257;2264>=c;c++)a[c]=2;for(c=2274;2279>=c;c++)a[c]=2;for(c=2280;2282>=c;c++)a[c]=1;for(c=2283;2289>=c;c++)a[c]=2;for(c=2290;2292>=c;c++)a[c]=0;for(c=2308;2313>=c;c++)a[c]=0;for(c=2315;2491>=c;c++)a[c]=0;for(c=2494;2866>=c;c++)a[c]=0;for(c=2867;2869>=c;c++)a[c]=1;for(c=2870;2888>=c;c++)a[c]=2;for(c=2891;2895>=c;c++)a[c]=2;for(c=2896;2898>=c;c++)a[c]=1;for(c=2902;2908>=c;c++)a[c]=2;for(c=2915;2920>=c;c++)a[c]=2;for(c=2921;2923>=c;c++)a[c]=1;for(c=2924;2930>=c;c++)a[c]=
2;for(c=2931;2962>=c;c++)a[c]=0;for(c=2964;2968>=c;c++)a[c]=2;for(c=2969;2973>=c;c++)a[c]=0;for(c=2975;2991>=c;c++)a[c]=0;for(c=2995;3051>=c;c++)a[c]=0;for(c=3054;3079>=c;c++)a[c]=0;for(c=3081;3088>=c;c++)a[c]=0;for(c=3092;3101>=c;c++)a[c]=0;for(c=3106;3138>=c;c++)a[c]=0;for(c=3146;3151>=c;c++)a[c]=0;for(c=3153;3166>=c;c++)a[c]=0;for(c=3168;3172>=c;c++)a[c]=0;for(c=3174;3203>=c;c++)a[c]=0;for(c=3294;3358>=c;c++)a[c]=0;for(c=3367;3403>=c;c++)a[c]=0;for(c=3408;3416>=c;c++)a[c]=0;for(c=3417;3438>=c;c++)a[c]=
2;for(c=3441;3446>=c;c++)a[c]=2;for(c=3447;3450>=c;c++)a[c]=0;for(c=3451;3459>=c;c++)a[c]=2;for(c=3460;3478>=c;c++)a[c]=0;for(c=3554;3559>=c;c++)a[c]=0;for(c=3560;3570>=c;c++)a[c]=2;for(c=3571;3581>=c;c++)a[c]=0;for(c=3594;3597>=c;c++)a[c]=0;for(c=3601;3604>=c;c++)a[c]=0;for(c=3637;3639>=c;c++)a[c]=0;for(c=3665;3667>=c;c++)a[c]=0;for(c=3693;3695>=c;c++)a[c]=0;for(c=3701;3727>=c;c++)a[c]=0;for(c=3728;3739>=c;c++)a[c]=2;for(c=3740;3751>=c;c++)a[c]=0;for(c=3753;3760>=c;c++)a[c]=2;for(c=3761;3773>=c;c++)a[c]=
0;for(c=3775;3777>=c;c++)a[c]=0;for(c=3779;3781>=c;c++)a[c]=0;for(c=3783;3785>=c;c++)a[c]=0;for(c=3788;3791>=c;c++)a[c]=0;for(c=3797;3802>=c;c++)a[c]=0;for(c=3814;3816>=c;c++)a[c]=0;for(c=3825;3829>=c;c++)a[c]=0;for(c=3832;3841>=c;c++)a[c]=0;for(c=3844;3852>=c;c++)a[c]=0;for(c=3873;3885>=c;c++)a[c]=0;for(c=3890;3893>=c;c++)a[c]=0;for(c=3907;3912>=c;c++)a[c]=0;for(c=3942;3950>=c;c++)a[c]=0;for(c=3968;3970>=c;c++)a[c]=0;for(c=3973;3976>=c;c++)a[c]=0;for(c=3986;3989>=c;c++)a[c]=0;for(c=3994;3997>=c;c++)a[c]=
0;for(c=4048;4051>=c;c++)a[c]=0;for(c=4056;4063>=c;c++)a[c]=0;for(c=4093;4096>=c;c++)a[c]=0;for(c=4390;4398>=c;c++)a[c]=0;for(c=4399;4413>=c;c++)a[c]=2;for(c=4418;4433>=c;c++)a[c]=2;for(c=4455;4457>=c;c++)a[c]=2;for(c=4484;4489>=c;c++)a[c]=0;for(c=4491;4554>=c;c++)a[c]=0;for(c=4568;4589>=c;c++)a[c]=0;for(c=4652;4656>=c;c++)a[c]=0;for(c=4766;4800>=c;c++)a[c]=0;for(c=5014;5016>=c;c++)a[c]=0;for(c=5069;5072>=c;c++)a[c]=0;for(c=5105;5130>=c;c++)a[c]=0;for(c=5173;5188>=c;c++)a[c]=0;for(c=5253;5259>=c;c++)a[c]=
0;for(c=5269;5275>=c;c++)a[c]=0;for(c=5292;5311>=c;c++)a[c]=0;for(c=5329;5331>=c;c++)a[c]=0;for(c=5343;5349>=c;c++)a[c]=0;for(c=5355;5357>=c;c++)a[c]=0;for(c=5387;5389>=c;c++)a[c]=0;for(c=5459;5463>=c;c++)a[c]=0;for(c=5479;5482>=c;c++)a[c]=0;for(c=5518;5520>=c;c++)a[c]=0;for(c=5530;5539>=c;c++)a[c]=0;for(c=5550;5552>=c;c++)a[c]=0;for(c=5562;5583>=c;c++)a[c]=0;for(c=5623;5625>=c;c++)a[c]=2;for(c=5631;5639>=c;c++)a[c]=0;for(c=5649;5653>=c;c++)a[c]=0;for(c=5663;5680>=c;c++)a[c]=0;for(c=5682;5685>=c;c++)a[c]=
0;for(c=5875;5877>=c;c++)a[c]=0;for(c=5921;5940>=c;c++)a[c]=0;for(c=6050;6125>=c;c++)a[c]=0;for(c=6244;6275>=c;c++)a[c]=0;for(c=6328;6348>=c;c++)a[c]=0;for(c=6350;6356>=c;c++)a[c]=0;for(c=6366;6372>=c;c++)a[c]=0;for(c=6381;6387>=c;c++)a[c]=0;for(c=6393;6404>=c;c++)a[c]=0;for(c=6480;6483>=c;c++)a[c]=0;for(c=6511;6514>=c;c++)a[c]=0;for(c=6579;6581>=c;c++)a[c]=0;for(c=6619;6624>=c;c++)a[c]=0;for(c=6625;6627>=c;c++)a[c]=2;for(c=6628;6632>=c;c++)a[c]=0;for(c=6634;6637>=c;c++)a[c]=0;for(c=6669;6692>=c;c++)a[c]=
0;for(c=6707;6709>=c;c++)a[c]=0;for(c=6720;6723>=c;c++)a[c]=0;for(c=6732;6738>=c;c++)a[c]=0;for(c=6931;6933>=c;c++)a[c]=0;for(c=6956;6959>=c;c++)a[c]=0;for(c=7005;7007>=c;c++)a[c]=0;for(c=7057;7070>=c;c++)a[c]=2;for(c=7074;7082>=c;c++)a[c]=0;for(c=7109;7118>=c;c++)a[c]=0;for(c=7119;7127>=c;c++)a[c]=1;for(c=7374;7376>=c;c++)a[c]=0;for(c=7528;7586>=c;c++)a[c]=0;for(c=7587;7645>=c;c++)a[c]=2;for(c=7755;7787>=c;c++)a[c]=0;for(c=7791;7795>=c;c++)a[c]=0;for(c=7799;7801>=c;c++)a[c]=0;for(c=7803;7805>=c;c++)a[c]=
0;for(c=7825;7831>=c;c++)a[c]=0;for(c=7845;7859>=c;c++)a[c]=0;for(c=8013;8032>=c;c++)a[c]=0;for(c=20002;20032>=c;c++)a[c]=0;for(c=20062;20092>=c;c++)a[c]=0;for(c=20135;20138>=c;c++)a[c]=0;for(c=20248;20258>=c;c++)a[c]=0;for(c=20348;20358>=c;c++)a[c]=0;for(c=20436;20440>=c;c++)a[c]=0;for(c=20822;20824>=c;c++)a[c]=0;for(c=20934;20936>=c;c++)a[c]=0;for(c=21035;21037>=c;c++)a[c]=0;for(c=21095;21097>=c;c++)a[c]=0;for(c=21148;21150>=c;c++)a[c]=0;for(c=21413;21423>=c;c++)a[c]=0;for(c=21473;21483>=c;c++)a[c]=
0;for(c=21780;21782>=c;c++)a[c]=0;for(c=21891;21894>=c;c++)a[c]=0;for(c=21896;21899>=c;c++)a[c]=0;for(c=22171;22177>=c;c++)a[c]=0;for(c=22181;22187>=c;c++)a[c]=0;for(c=22191;22197>=c;c++)a[c]=0;for(c=22234;22236>=c;c++)a[c]=0;for(c=22521;22525>=c;c++)a[c]=0;for(c=22991;22994>=c;c++)a[c]=0;for(c=23028;23038>=c;c++)a[c]=0;for(c=23830;23853>=c;c++)a[c]=0;for(c=23866;23872>=c;c++)a[c]=0;for(c=23877;23884>=c;c++)a[c]=0;for(c=23886;23894>=c;c++)a[c]=0;for(c=23946;23948>=c;c++)a[c]=0;for(c=24311;24313>=
c;c++)a[c]=0;for(c=24342;24347>=c;c++)a[c]=0;for(c=24370;24374>=c;c++)a[c]=10;for(c=24375;24381>=c;c++)a[c]=0;for(c=24718;24721>=c;c++)a[c]=0;for(c=24817;24821>=c;c++)a[c]=0;for(c=24877;24882>=c;c++)a[c]=0;for(c=24891;24893>=c;c++)a[c]=0;for(c=25391;25395>=c;c++)a[c]=0;for(c=25828;25838>=c;c++)a[c]=0;for(c=26191;26195>=c;c++)a[c]=0;for(c=26391;26393>=c;c++)a[c]=0;for(c=26701;26722>=c;c++)a[c]=0;for(c=26729;26799>=c;c++)a[c]=2;for(c=26801;26803>=c;c++)a[c]=2;for(c=26811;26813>=c;c++)a[c]=2;for(c=26847;26870>=
c;c++)a[c]=2;for(c=26891;26899>=c;c++)a[c]=0;for(c=26901;26923>=c;c++)a[c]=0;for(c=26929;26946>=c;c++)a[c]=0;for(c=26948;26998>=c;c++)a[c]=0;for(c=27037;27040>=c;c++)a[c]=0;for(c=27205;27232>=c;c++)a[c]=0;for(c=27258;27260>=c;c++)a[c]=0;for(c=27391;27398>=c;c++)a[c]=0;for(c=27561;27564>=c;c++)a[c]=0;for(c=27571;27574>=c;c++)a[c]=0;for(c=27581;27584>=c;c++)a[c]=0;for(c=27591;27594>=c;c++)a[c]=0;for(c=28191;28193>=c;c++)a[c]=0;for(c=28348;28358>=c;c++)a[c]=0;for(c=28402;28432>=c;c++)a[c]=0;for(c=28462;28492>=
c;c++)a[c]=0;for(c=29118;29122>=c;c++)a[c]=0;for(c=29168;29172>=c;c++)a[c]=0;for(c=29177;29185>=c;c++)a[c]=0;for(c=29187;29195>=c;c++)a[c]=0;for(c=29900;29903>=c;c++)a[c]=0;for(c=30161;30179>=c;c++)a[c]=0;for(c=30491;30494>=c;c++)a[c]=0;for(c=30729;30732>=c;c++)a[c]=0;for(c=31251;31259>=c;c++)a[c]=0;for(c=31265;31268>=c;c++)a[c]=0;for(c=31275;31279>=c;c++)a[c]=0;for(c=31281;31297>=c;c++)a[c]=0;for(c=31461;31469>=c;c++)a[c]=0;for(c=31491;31495>=c;c++)a[c]=0;for(c=31917;31922>=c;c++)a[c]=0;for(c=31965;32E3>=
c;c++)a[c]=0;for(c=32001;32003>=c;c++)a[c]=2;for(c=32005;32031>=c;c++)a[c]=2;for(c=32033;32060>=c;c++)a[c]=2;for(c=32064;32067>=c;c++)a[c]=2;for(c=32074;32077>=c;c++)a[c]=2;for(c=32081;32086>=c;c++)a[c]=0;for(c=32107;32130>=c;c++)a[c]=0;for(c=32133;32158>=c;c++)a[c]=0;for(c=32164;32167>=c;c++)a[c]=2;for(c=32180;32199>=c;c++)a[c]=0;for(c=32201;32260>=c;c++)a[c]=0;for(c=32301;32360>=c;c++)a[c]=0;for(c=32601;32662>=c;c++)a[c]=0;for(c=32664;32667>=c;c++)a[c]=2;for(c=32701;32761>=c;c++)a[c]=0;for(c=53001;53004>=
c;c++)a[c]=0;for(c=53008;53019>=c;c++)a[c]=0;for(c=53021;53032>=c;c++)a[c]=0;for(c=53042;53046>=c;c++)a[c]=0;for(c=53074;53080>=c;c++)a[c]=0;for(c=54001;54004>=c;c++)a[c]=0;for(c=54008;54019>=c;c++)a[c]=0;for(c=54021;54032>=c;c++)a[c]=0;for(c=54042;54046>=c;c++)a[c]=0;for(c=54048;54053>=c;c++)a[c]=0;for(c=54074;54080>=c;c++)a[c]=0;for(c=102001;102040>=c;c++)a[c]=0;for(c=102042;102063>=c;c++)a[c]=0;for(c=102065;102067>=c;c++)a[c]=0;for(c=102070;102117>=c;c++)a[c]=0;for(c=102122;102216>=c;c++)a[c]=
0;for(c=102221;102377>=c;c++)a[c]=0;for(c=102382;102388>=c;c++)a[c]=0;for(c=102389;102398>=c;c++)a[c]=2;for(c=102399;102444>=c;c++)a[c]=0;for(c=102445;102447>=c;c++)a[c]=2;for(c=102448;102458>=c;c++)a[c]=0;for(c=102459;102468>=c;c++)a[c]=2;for(c=102469;102497>=c;c++)a[c]=0;for(c=102500;102519>=c;c++)a[c]=1;for(c=102520;102524>=c;c++)a[c]=0;for(c=102525;102529>=c;c++)a[c]=2;for(c=102530;102568>=c;c++)a[c]=0;for(c=102570;102588>=c;c++)a[c]=0;for(c=102590;102598>=c;c++)a[c]=0;for(c=102601;102603>=c;c++)a[c]=
0;for(c=102605;102628>=c;c++)a[c]=0;for(c=102629;102646>=c;c++)a[c]=2;for(c=102648;102700>=c;c++)a[c]=2;for(c=102701;102703>=c;c++)a[c]=0;for(c=102707;102730>=c;c++)a[c]=2;for(c=102733;102758>=c;c++)a[c]=2;for(c=102767;102900>=c;c++)a[c]=0;for(c=102965;102969>=c;c++)a[c]=0;for(c=102971;102973>=c;c++)a[c]=0;for(c=102975;102989>=c;c++)a[c]=0;for(c=102990;102992>=c;c++)a[c]=1;for(c=102997;103002>=c;c++)a[c]=0;for(c=103003;103008>=c;c++)a[c]=2;for(c=103009;103011>=c;c++)a[c]=0;for(c=103012;103014>=c;c++)a[c]=
2;for(c=103019;103021>=c;c++)a[c]=0;for(c=103022;103024>=c;c++)a[c]=2;for(c=103029;103031>=c;c++)a[c]=0;for(c=103032;103034>=c;c++)a[c]=2;for(c=103065;103068>=c;c++)a[c]=0;for(c=103074;103076>=c;c++)a[c]=0;for(c=103077;103079>=c;c++)a[c]=1;for(c=103080;103082>=c;c++)a[c]=0;for(c=103083;103085>=c;c++)a[c]=2;for(c=103090;103093>=c;c++)a[c]=0;for(c=103097;103099>=c;c++)a[c]=0;for(c=103100;103102>=c;c++)a[c]=2;for(c=103107;103109>=c;c++)a[c]=0;for(c=103110;103112>=c;c++)a[c]=2;for(c=103113;103116>=c;c++)a[c]=
0;for(c=103117;103120>=c;c++)a[c]=2;for(c=103153;103157>=c;c++)a[c]=0;for(c=103158;103162>=c;c++)a[c]=2;for(c=103163;103165>=c;c++)a[c]=0;for(c=103166;103168>=c;c++)a[c]=1;for(c=103169;103171>=c;c++)a[c]=2;for(c=103186;103188>=c;c++)a[c]=0;for(c=103189;103191>=c;c++)a[c]=2;for(c=103192;103195>=c;c++)a[c]=0;for(c=103196;103199>=c;c++)a[c]=2;for(c=103200;103224>=c;c++)a[c]=0;for(c=103225;103227>=c;c++)a[c]=1;for(c=103232;103237>=c;c++)a[c]=0;for(c=103238;103243>=c;c++)a[c]=2;for(c=103244;103246>=c;c++)a[c]=
0;for(c=103247;103249>=c;c++)a[c]=2;for(c=103254;103256>=c;c++)a[c]=0;for(c=103257;103259>=c;c++)a[c]=2;for(c=103264;103266>=c;c++)a[c]=0;for(c=103267;103269>=c;c++)a[c]=2;for(c=103300;103375>=c;c++)a[c]=0;for(c=103381;103383>=c;c++)a[c]=0;for(c=103384;103386>=c;c++)a[c]=1;for(c=103387;103389>=c;c++)a[c]=0;for(c=103390;103392>=c;c++)a[c]=2;for(c=103397;103399>=c;c++)a[c]=0;for(c=103400;103471>=c;c++)a[c]=2;for(c=103476;103478>=c;c++)a[c]=0;for(c=103479;103481>=c;c++)a[c]=2;for(c=103486;103488>=c;c++)a[c]=
0;for(c=103489;103491>=c;c++)a[c]=2;for(c=103492;103495>=c;c++)a[c]=0;for(c=103496;103499>=c;c++)a[c]=2;for(c=103528;103543>=c;c++)a[c]=0;for(c=103544;103548>=c;c++)a[c]=2;for(c=103549;103551>=c;c++)a[c]=0;for(c=103552;103554>=c;c++)a[c]=1;for(c=103555;103557>=c;c++)a[c]=2;for(c=103558;103560>=c;c++)a[c]=0;for(c=103571;103573>=c;c++)a[c]=0;for(c=103574;103576>=c;c++)a[c]=2;for(c=103577;103580>=c;c++)a[c]=0;for(c=103581;103583>=c;c++)a[c]=2;for(c=103600;103694>=c;c++)a[c]=0;for(c=103700;103793>=c;c++)a[c]=
2;for(c=103794;103871>=c;c++)a[c]=0;for(c=103900;103971>=c;c++)a[c]=2;return a})},"esri/layers/vectorTiles/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(c,a,b,d){function e(a,b,c,d,f){if("point"===a.type&&"point"===f.type)b=b(a.x,a.y,k,0,d),f.x=b[0],f.y=b[1];else if("extent"===a.type&&"extent"===f.type)e=b(a.xmin,a.ymin,k,0,d),f.xmin=e[0],f.ymin=e[1],b=b(a.xmax,a.ymax,k,0,d),f.xmax=b[0],f.ymax=b[1];else if("polyline"===
a.type&&"polyline"===f.type||"polygon"===a.type&&"polygon"===f.type){var e="polyline"===a.type?a.paths:a.rings,l=[],p=void 0;for(a=0;a<e.length;a++){var m=e[a],p=[];l.push(p);for(var g=0;g<m.length;g++)p.push(b(m[g][0],m[g][1],[0,0],0,d)),2<m[g].length&&p[g].push(m[g][2]),3<m[g].length&&p[g].push(m[g][3])}"polyline"===f.type?f.paths=l:f.rings=l}else if("multipoint"===a.type&&"multipoint"===f.type){e=a.points;l=[];for(a=0;a<e.length;a++)l[a]=b(e[a][0],e[a][1],[0,0],0,d),2<e[a].length&&l[a].push(e[a][2]),
3<e[a].length&&l[a].push(e[a][3]);f.points=l}else if("mesh"===a.type&&"mesh"===f.type&&(e=a.vertexAttributes&&a.vertexAttributes.position,l=f.vertexAttributes&&f.vertexAttributes.position,e))for(p=[0,0],a=0;a<e.length;a+=3)b(e[a],e[a+1],p,0,d),l[a]=p[0],l[a+1]=p[1];f.spatialReference=c;return f;var e}function h(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?d.equals(b,a)?!0:d.isWebMercator(b)&&d.isWGS84(a)||d.isWebMercator(a)&&
d.isWGS84(b):!1}function m(a,b,c,d){void 0===c&&(c=[0,0]);void 0===d&&(d=0);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;c[d]=111319.49079327169*a;c[d+1]=3189068.5*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return c}function f(a,b,c,d,f){void 0===c&&(c=[0,0]);void 0===d&&(d=0);void 0===f&&(f=!1);a=a/6378137*57.29577951308232;c[d]=f?a:a-360*Math.floor((a+180)/360);c[d+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)));return c}Object.defineProperty(a,
"__esModule",{value:!0});var k=[0,0];a.canProject=h;a.project=function(a,c){var l=a&&a.spatialReference;c=c&&(null!=c.wkid||null!=c.wkt?c:c.spatialReference);return h(l,c)?d.equals(l,c)?a.clone():d.isWebMercator(c)?e(a,m,b.WebMercator,!1,a.clone()):d.isWGS84(c)?e(a,f,b.WGS84,!1,a.clone()):null:null};a.lngLatToXY=m;a.xyToLngLat=f;a.geographicToWebMercator=function(a,c,d){void 0===c&&(c=!1);void 0===d&&(d=a.clone());return e(a,m,b.WebMercator,c,d)};a.webMercatorToGeographic=function(a,c,d){void 0===
c&&(c=!1);void 0===d&&(d=a.clone());return e(a,f,b.WGS84,c,d)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileData":function(){define("require exports ./MemoryRequirements ./TileBufferData ./TileDisplayData ./Utils ./WGLDisplayList ./WGLDisplayObject ./WGLDisplayRecord ./mesh/VertexBuffer ./mesh/factories/WGLMeshFactory ./util/Reader ./util/serializationUtils ./util/Writer".split(" "),function(c,a,b,d,e,h,m,f,k,l,p,q,t,v){var y=new b.default,u=new b.default;return function(){function a(){this.tileBufferData=
this.tileDisplayData=null}a.prototype.reshuffle=function(){y.reset();var b=this._collectDisplayRecords(),c;for(c in b)for(var n=b[c],r=0,f=n;r<f.length;r++){var e=f[r];y.needMore(e.geometryType,e.meshData?e.meshData.vertexCount:e.vertexCount,e.meshData?e.meshData.indexData.length:e.indexCount)}r=b.length;f=new d;for(c=0;c<r;++c){f.geometries[c].indexBuffer=new Uint32Array(Math.round(1.15*y.indicesFor(c)));var e=[],l;for(l in this.tileBufferData.geometries[c].vertexBuffer)e.push(this.tileBufferData.geometries[c].vertexBuffer[l].stride);
var e=a._computeVertexAlignment(e),n=Math.round(1.15*y.verticesFor(c)),e=a._align(n,e),p;for(p in this.tileBufferData.geometries[c].vertexBuffer)n=this.tileBufferData.geometries[c].vertexBuffer[p].stride,f.geometries[c].vertexBuffer[p]={stride:n,data:new Uint32Array(Math.round(e*n/4))}}u.reset();this.tileDisplayData.displayList=new m;for(c=0;c<r;++c){n=b[c];l=0;for(p=n;l<p.length;l++){e=p[l];if(e.meshData)e.writeMeshDataToBuffers(u.verticesFor(c),f.geometries[c].vertexBuffer,u.indicesFor(c),f.geometries[c].indexBuffer),
e.meshData=null;else{var k=this.tileBufferData.geometries[c].vertexBuffer,q=this.tileBufferData.geometries[c].indexBuffer,t=f.geometries[c].vertexBuffer,v=f.geometries[c].indexBuffer,A=u.verticesFor(c),X=u.indicesFor(c);h.copyMeshData(A,X,t,v,e,k,q);e.vertexFrom=A;e.indexFrom=X}u.needMore(c,e.vertexCount,e.indexCount)}this.tileDisplayData.displayList.addToList(n)}this.tileBufferData=f};a.prototype.getStrides=function(){for(var a=[],b=0;b<this.tileBufferData.geometries.length;++b){var c=this.tileBufferData.geometries[b];
a[b]={};for(var d in c.vertexBuffer)a[b][d]=c.vertexBuffer[d].stride}return a};a.prototype._guessSize=function(){for(var a=this.tileDisplayData.displayObjects,b=Math.min(a.length,4),c=0,d=0;d<b;d++)c=Math.max(c,a[d].displayRecords.length);return 2*(12*a.length+a.length*c*40)};a.prototype.serialize=function(){var a=this.tileBufferData.serialize(),b=this.tileBufferData.getBuffers(),c=this.tileDisplayData.serialize(new v.default(Int32Array,this._guessSize())).buffer();b.push(c);return{result:{displayData:c,
bufferData:a},transferList:b}};a.decode=function(b){var c=p.MaterialStore.deserialize(new q.default(b.materialStore)),n=t.deserializeList(new q.default(b.displayObjects),f,{store:c}),c={},r;for(r in b.vertexBuffersMap)c[r]=l.VertexBuffers.decode(b.vertexBuffersMap[r]);b=new a;r=new e;var k=new d;r.displayObjects=n;for(var m in c)n=c[m],k.geometries[m].indexBuffer=n.indexBuffer,k.geometries[m].vertexBuffer=n.namedBuffers;b.tileDisplayData=r;b.tileBufferData=k;return b};a.bind=function(b,c){var g=new a;
g.tileDisplayData=b;g.tileBufferData=c;return g};a.create=function(b,c){var g=new a;g.tileDisplayData=new e;g.tileDisplayData.displayObjects=b;for(var r=[0,0,0,0,0],f=[0,0,0,0,0],l=[[],[],[],[],[]],p=0;p<b.length;p++)for(var m=0,h=b[p].displayRecords;m<h.length;m++){var q=h[m];l[q.geometryType].push(q);r[q.geometryType]+=q.meshData.vertexCount;f[q.geometryType]+=q.meshData.indexData.length}b=new d;c=[c.fill||{},c.line||{},c.icon||{},c.text||{},c.label||{}];for(p=0;5>p;p++){var m=new Uint32Array(f[p]),
h=c[p],q=r[p],t={},v=void 0;for(v in h){var z={data:new Uint32Array(q*h[v]/4),stride:h[v]};t[v]=z}h=t;k.writeAllMeshDataToBuffers(l[p],h,m);b.geometries[p]={indexBuffer:m,vertexBuffer:h}}g.tileBufferData=b;return g};a._align=function(a,b){var c=a%b;return 0===c?a:a+(b-c)};a._computeVertexAlignment=function(a){for(var b=!1,c=!1,d=0;d<a.length;d++){var f=a[d];2===f%4?b=!0:0!==f%4&&(c=!0)}return c?4:b?2:1};a.prototype._collectDisplayRecords=function(){for(var a=[[],[],[],[],[]],b=0,c=this.tileDisplayData.displayObjects;b<
c.length;b++)for(var d=0,f=c[b].displayRecords;d<f.length;d++){var e=f[d];a[e.geometryType].push(e)}return a};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MemoryRequirements":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this._byGeometryType=null}Object.defineProperty(a.prototype,"satisfied",{get:function(){return!this._byGeometryType},enumerable:!0,configurable:!0});a.prototype.reset=function(){this._byGeometryType=
null};a.prototype.verticesFor=function(a){return this._byGeometryType?this._byGeometryType[a].vertices:0};a.prototype.indicesFor=function(a){return this._byGeometryType?this._byGeometryType[a].indices:0};a.prototype.needMore=function(a,b,c){if(b||c)this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]),a=this._byGeometryType[a],a.vertices+=b,a.indices+=c};return a}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileBufferData":function(){define(["require",
"exports"],function(c,a){return function(){function a(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}a.deserialize=function(b){for(var c=new a,d=0;5>d;++d){c.geometries[d].indexBuffer=new Uint32Array(b.geometries[d].indexBuffer);c.geometries[d].vertexBuffer={};for(var m in b.geometries[d].vertexBuffer)c.geometries[d].vertexBuffer[m]={data:new Uint32Array(b.geometries[d].vertexBuffer[m].data),
stride:b.geometries[d].vertexBuffer[m].stride}}return c};a.prototype.serialize=function(){for(var a={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]},b=0;5>b;++b)for(var c in this.geometries[b].vertexBuffer)a.geometries[b].vertexBuffer[c]=
{data:this.geometries[b].vertexBuffer[c].data.buffer,stride:this.geometries[b].vertexBuffer[c].stride};return a};a.prototype.getBuffers=function(){for(var a=[],b=0;5>b;++b){a.push(this.geometries[b].indexBuffer.buffer);for(var c in this.geometries[b].vertexBuffer)a.push(this.geometries[b].vertexBuffer[c].data.buffer)}return a};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileDisplayData":function(){define("require exports ./WGLDisplayList ./WGLDisplayObject ./mesh/factories/WGLMeshFactory ./util/serializationUtils".split(" "),
function(c,a,b,d,e,h){return function(){function a(){}Object.defineProperty(a.prototype,"displayObjectRegistry",{get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(var a=0,b=this.displayObjects;a<b.length;a++){var c=b[a];this._displayObjectRegistry.set(c.id,c)}}return this._displayObjectRegistry},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"displayList",{get:function(){if(!this._displayList){this._displayList=new b;for(var a=0,c=this.displayObjects;a<
c.length;a++)for(var d=0,e=c[a].displayRecords;d<e.length;d++)this._displayList.addToList(e[d])}return this._displayList},set:function(a){this._displayList=a},enumerable:!0,configurable:!0});a.prototype.serialize=function(a){this.materialStore.serialize(a);h.serializeList(a,this.displayObjects);return a};a.prototype._deserializeObjects=function(a){for(var c=a.readInt32(),c=Array(c),f=new b,e=new Map,m={store:this.materialStore},h=0;h<c.length;++h){var v=d.deserialize(a,m);c[h]=v;e.set(v.id,v);for(var y=
0,v=v.displayRecords;y<v.length;y++)f.addToList(v[y])}this.displayObjects=c;this._displayList=f;this._displayObjectRegistry=e};a.deserialize=function(b){var c=new a;c.materialStore=e.MaterialStore.deserialize(b);c._deserializeObjects(b);return c};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayList":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/Logger ./enums ./MaterialInfo ./Utils ./util/serializationUtils".split(" "),function(c,
a,b,d,e,h,m,f){var k=d.getLogger("esri.views.2d.engine.webgl.WGLDisplayList");c=function(){function a(){this.symbolLevels=[]}Object.defineProperty(a.prototype,"empty",{get:function(){return!this.symbolLevels||0===this.symbolLevels.length},enumerable:!0,configurable:!0});a.prototype.addToList=function(a){var b=this;Array.isArray(a)?a.forEach(function(a){b._addToList(a)}):this._addToList(a)};a.prototype.removeFromList=function(a){var b=this;Array.isArray(a)||(a=[a]);a.forEach(function(a){b._removeFromList(a)})};
a.prototype.ofType=function(a){var c,d,f,g,n,r,e,l,p,k,m;return b(this,function(b){switch(b.label){case 0:c=0,d=this.symbolLevels,b.label=1;case 1:if(!(c<d.length))return[3,8];f=d[c];g=0;n=f.zLevels;b.label=2;case 2:if(!(g<n.length))return[3,7];r=n[g];e=r.geometryDPInfo;l=this._getDPInfoType(a);if(!e[l])return[3,6];p=0;k=e[l];b.label=3;case 3:if(!(p<k.length))return[3,6];m=k[p];return[4,m];case 4:b.sent(),b.label=5;case 5:return p++,[3,3];case 6:return g++,[3,2];case 7:return c++,[3,1];case 8:return[2]}})};
a.prototype._addToList=function(a){var b=this._getDisplayList(a.symbolLevel,a.zOrder,a.geometryType),c=0<b.length?b[b.length-1]:null;null!==c&&m.isSameMaterialInfo(c.materialInfo,a.materialInfo)&&c.indexFrom+c.indexCount===a.indexFrom?c.indexCount+=a.indexCount:(c=new l,c.indexFrom=a.indexFrom,c.indexCount=a.indexCount,c.materialInfo=a.materialInfo,c.geometryType=a.geometryType,b.push(c))};a.prototype._removeFromList=function(a){for(var b=this._getDisplayList(a.symbolLevel,a.zOrder,a.geometryType),
c=b.length,d=void 0,g=0;g<c;++g){var n=b[g];a.indexFrom+a.indexCount>n.indexFrom&&a.indexFrom<n.indexFrom+n.indexCount&&(d=g)}if(void 0!==d)if(n=b[d],a.indexFrom===n.indexFrom)n.indexCount-=a.indexCount,n.indexFrom+=a.indexCount;else if(a.indexFrom+a.indexCount===n.indexFrom+n.indexCount)n.indexCount-=a.indexCount;else{var c=n.indexFrom,g=a.indexFrom-n.indexFrom,r=a.indexCount;a=n.indexFrom+n.indexCount-(a.indexFrom+a.indexCount);n.indexCount=g;var f=new l;f.geometryType=n.geometryType;f.materialInfo=
new h.default;f.materialInfo.copy(n.materialInfo);f.indexFrom=c+g+r;f.indexCount=a;b.splice(d+1,0,f)}};a.prototype._getDisplayList=function(a,b,c){for(var d,g=this.symbolLevels.length,n=0;n<g;n++)if(this.symbolLevels[n].symbolLevel===a){d=this.symbolLevels[n];break}d||(d=new t,d.symbolLevel=a,this.symbolLevels.push(d));var r;a=d.zLevels.length;for(g=0;g<a;g++)if(d.zLevels[g].zLevel===b){r=d.zLevels[g];break}r||(r=new q,r.geometryDPInfo=new p,r.zLevel=b,d.zLevels.push(r));var f;switch(c){case e.WGLGeometryType.FILL:r.geometryDPInfo.fill||
(r.geometryDPInfo.fill=[]);f=r.geometryDPInfo.fill;break;case e.WGLGeometryType.LINE:r.geometryDPInfo.line||(r.geometryDPInfo.line=[]);f=r.geometryDPInfo.line;break;case e.WGLGeometryType.MARKER:r.geometryDPInfo.marker||(r.geometryDPInfo.marker=[]);f=r.geometryDPInfo.marker;break;case e.WGLGeometryType.TEXT:r.geometryDPInfo.text||(r.geometryDPInfo.text=[]);f=r.geometryDPInfo.text;break;case e.WGLGeometryType.LABEL:r.geometryDPInfo.label||(r.geometryDPInfo.label=[]);f=r.geometryDPInfo.label;break;
default:console.error("Trying to add a record with geometry type '"+c+"'.")}return f};a.prototype.serialize=function(a){f.serializeList(a,this.symbolLevels);return a};a.deserialize=function(b){var c=new a;c.symbolLevels=f.deserializeList(b,t);return c};a.prototype._getDPInfoType=function(a){switch(a){case e.WGLGeometryType.FILL:return"fill";case e.WGLGeometryType.LINE:return"line";case e.WGLGeometryType.MARKER:return"marker";case e.WGLGeometryType.TEXT:return"text";case e.WGLGeometryType.LABEL:return"label";
default:k.error("DisplayList: Tried to convert unknown geometryType: "+a)}};return a}();var l=function(){function a(){this.materialInfo=null;this.indexCount=this.indexFrom=0}a.prototype.serialize=function(a){this.materialInfo.serialize(a);a.writeInt32(this.indexFrom);a.writeInt32(this.indexCount);return a};a.deserialize=function(b,c){var d=new a;d.geometryType=c.geometryType;d.materialInfo=h.default.deserialize(b);d.indexFrom=b.readInt32();d.indexCount=b.readInt32();return d};return a}(),p=function(){function a(){this.label=
this.text=this.marker=this.line=this.fill=null}a.prototype.serialize=function(a){f.serializeList(a,this.fill);f.serializeList(a,this.line);f.serializeList(a,this.marker);f.serializeList(a,this.text);f.serializeList(a,this.label);return a};a.deserialize=function(b){var c=new a,d={geometryType:e.WGLGeometryType.FILL},p=f.deserializeList(b,l,d);p.length&&(c.fill=p);d.geometryType=e.WGLGeometryType.LINE;p=f.deserializeList(b,l,d);p.length&&(c.line=p);d.geometryType=e.WGLGeometryType.MARKER;p=f.deserializeList(b,
l,d);p.length&&(c.marker=p);d.geometryType=e.WGLGeometryType.TEXT;p=f.deserializeList(b,l,d);p.length&&(c.text=p);d.geometryType=e.WGLGeometryType.LABEL;b=f.deserializeList(b,l,d);b.length&&(c.label=b);return c};return a}(),q=function(){function a(){this.geometryDPInfo=new p}a.prototype.serialize=function(a){a.writeInt32(this.zLevel);this.geometryDPInfo.serialize(a);return a};a.deserialize=function(b){var c=new a;c.zLevel=b.readInt32();c.geometryDPInfo=p.deserialize(b);return c};return a}(),t=function(){function a(){this.zLevels=
[]}a.prototype.serialize=function(a){a.writeInt32(this.symbolLevel);f.serializeList(a,this.zLevels);return a};a.deserialize=function(b){var c=new a;c.symbolLevel=b.readInt32();c.zLevels=f.deserializeList(b,q);return c};return a}();return c})},"esri/layers/vectorTiles/core/tsSupport/generatorHelper":function(){define([],function(){return function(c,a){function b(a){return function(b){return d([a,b])}}function d(b){if(h)throw new TypeError("Generator is already executing.");for(;e;)try{if(h=1,m&&(f=
b[0]&2?m["return"]:b[0]?m["throw"]||((f=m["return"])&&f.call(m),0):m.next)&&!(f=f.call(m,b[1])).done)return f;if(m=0,f)b=[b[0]&2,f.value];switch(b[0]){case 0:case 1:f=b;break;case 4:return e.label++,{value:b[1],done:!1};case 5:e.label++;m=b[1];b=[0];continue;case 7:b=e.ops.pop();e.trys.pop();continue;default:if(!(f=e.trys,f=0<f.length&&f[f.length-1])&&(6===b[0]||2===b[0])){e=0;continue}if(3===b[0]&&(!f||b[1]>f[0]&&b[1]<f[3]))e.label=b[1];else if(6===b[0]&&e.label<f[1])e.label=f[1],f=b;else if(f&&
e.label<f[2])e.label=f[2],e.ops.push(b);else{f[2]&&e.ops.pop();e.trys.pop();continue}}b=a.call(c,e)}catch(p){b=[6,p],m=0}finally{h=f=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,m,f,k;return k={next:b(0),"throw":b(1),"return":b(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayObject":function(){define("require exports ../../../../core/libs/gl-matrix/vec2 ./WGLDisplayRecord ./collisions/Metric ./util/serializationUtils".split(" "),
function(c,a,b,d,e,h){return function(){function a(a){this.yOverflow=this.xOverflow=this.yBucket=this.xBucket=-1;this.id=a;this.displayRecords=[];this.metrics=[];this.anchor=null}a.prototype.addMetric=function(a,b,c,d){this.metrics.push(new e.default(a,{from:b,count:c},d))};a.prototype.serialize=function(a){a.writeInt32(this.id);h.serializeList(a,this.metrics);h.serializeList(a,this.displayRecords);this.anchor?(a.writeF32(this.anchor[0]),a.writeF32(this.anchor[1]),a.writeInt32(this.xBucket),a.writeInt32(this.yBucket),
a.writeInt32(this.xOverflow),a.writeInt32(this.yOverflow)):(a.writeF32(0),a.writeF32(0));return a};a.deserialize=function(c,k){var f=k.store,p=c.readInt32();k=new a(p);f={id:p,store:f};p=h.deserializeList(c,e.default);p.length&&(k.metrics=p);k.displayRecords=h.deserializeList(c,d,f);f=c.readF32();p=c.readF32();if(f||p)k.anchor=b.fromValues(f,p),k.xBucket=c.readInt32(),k.yBucket=c.readInt32(),k.xOverflow=c.readInt32(),k.yOverflow=c.readInt32();return k};return a}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],
function(c){var a={create:function(){var a=new c.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new c.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,d){var b=new c.ARRAY_TYPE(2);b[0]=a;b[1]=d;return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];return a},set:function(a,c,e){a[0]=c;a[1]=e;return a},add:function(a,c,e){a[0]=c[0]+e[0];a[1]=c[1]+e[1];return a},subtract:function(a,c,e){a[0]=c[0]-e[0];a[1]=c[1]-e[1];return a}};a.sub=a.subtract;a.multiply=function(a,c,e){a[0]=
c[0]*e[0];a[1]=c[1]*e[1];return a};a.mul=a.multiply;a.divide=function(a,c,e){a[0]=c[0]/e[0];a[1]=c[1]/e[1];return a};a.div=a.divide;a.ceil=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);return a};a.floor=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);return a};a.min=function(a,c,e){a[0]=Math.min(c[0],e[0]);a[1]=Math.min(c[1],e[1]);return a};a.max=function(a,c,e){a[0]=Math.max(c[0],e[0]);a[1]=Math.max(c[1],e[1]);return a};a.round=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);
return a};a.scale=function(a,c,e){a[0]=c[0]*e;a[1]=c[1]*e;return a};a.scaleAndAdd=function(a,c,e,h){a[0]=c[0]+e[0]*h;a[1]=c[1]+e[1]*h;return a};a.distance=function(a,c){var b=c[0]-a[0];a=c[1]-a[1];return Math.sqrt(b*b+a*a)};a.dist=a.distance;a.squaredDistance=function(a,c){var b=c[0]-a[0];a=c[1]-a[1];return b*b+a*a};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};a.sqrLen=a.squaredLength;
a.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];return a};a.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];return a};a.normalize=function(a,c){var b=c[0],d=c[1],b=b*b+d*d;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b);return a};a.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]};a.cross=function(a,c,e){c=c[0]*e[1]-c[1]*e[0];a[0]=a[1]=0;a[2]=c;return a};a.lerp=function(a,c,e,h){var b=c[0];c=c[1];a[0]=b+h*(e[0]-b);a[1]=c+h*(e[1]-c);return a};a.random=function(a,d){d=d||1;var b=2*c.RANDOM()*Math.PI;a[0]=Math.cos(b)*
d;a[1]=Math.sin(b)*d;return a};a.transformMat2=function(a,c,e){var b=c[0];c=c[1];a[0]=e[0]*b+e[2]*c;a[1]=e[1]*b+e[3]*c;return a};a.transformMat2d=function(a,c,e){var b=c[0];c=c[1];a[0]=e[0]*b+e[2]*c+e[4];a[1]=e[1]*b+e[3]*c+e[5];return a};a.transformMat3=function(a,c,e){var b=c[0];c=c[1];a[0]=e[0]*b+e[3]*c+e[6];a[1]=e[1]*b+e[4]*c+e[7];return a};a.transformMat4=function(a,c,e){var b=c[0];c=c[1];a[0]=e[0]*b+e[4]*c+e[12];a[1]=e[1]*b+e[5]*c+e[13];return a};a.forEach=function(){var b=a.create();return function(a,
c,h,m,f,k){c||(c=2);h||(h=0);for(m=m?Math.min(m*c+h,a.length):a.length;h<m;h+=c)b[0]=a[h],b[1]=a[h+1],f(b,b,k),a[h]=b[0],a[h+1]=b[1];return a}}();a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]};a.equals=function(a,d){var b=a[0];a=a[1];var h=d[0];d=d[1];return Math.abs(b-h)<=c.EPSILON*Math.max(1,Math.abs(b),Math.abs(h))&&Math.abs(a-d)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))};return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require",
"exports","../../../../core/Logger","./MeshData"],function(c,a,b,d){var e=b.getLogger("esri/views/2d/engine/webgl/WGLDisplayRecord");return function(){function a(a,b,c){this.id=a;this.geometryType=b;this._materialInfo=c;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(a.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"materialInfo",{get:function(){return"number"===typeof this._materialInfo?(e.warn("Tried to read materialInfo, but found an index! Was materialInfo deserialized correctly?"),null):this._materialInfo},set:function(a){this._materialInfo=a},enumerable:!0,configurable:!0});a.prototype.copy=function(){var b=new a(this.id,this.geometryType,this._materialInfo);b.vertexFrom=this.vertexFrom;b.vertexCount=this.vertexCount;b.indexFrom=this.indexFrom;b.indexCount=this.indexCount;b.zOrder=this.zOrder;b.symbolLevel=
this.symbolLevel;b.meshData=this.meshData;return b};a.prototype.setMeshDataFromBuffers=function(a,b,c){var f=new d,e;for(e in b){for(var k=b[e].stride,m=b[e].data,h=[],y=0;y<k*a.vertexCount/4;++y)h[y]=m[y+k*a.vertexFrom/4];f.vertexData.set(e,h)}for(y=f.indexData.length=0;y<a.indexCount;++y)f.indexData[y]=c[y+a.indexFrom]-a.vertexFrom;f.vertexCount=a.vertexCount;this.meshData=f};a.prototype.readMeshDataFromBuffers=function(a,b){this.meshData?this.meshData.clear():this.meshData=new d;for(var c in a){for(var f=
a[c].stride,e=a[c].data,m=[],h=0;h<f*this.vertexCount/4;++h)m[h]=e[h+f*this.vertexFrom/4];this.meshData.vertexData.set(c,m)}for(h=this.meshData.indexData.length=0;h<this.indexCount;++h)this.meshData.indexData[h]=b[h+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};a.prototype.writeMeshDataToBuffers=function(a,b,c,d){for(var f in b)for(var e=b[f].stride,l=this.meshData.vertexData.get(f),k=b[f].data,m=0;m<e*this.meshData.vertexCount/4;++m)k[m+e*a/4]=l[m];for(m=0;m<this.meshData.indexData.length;++m)d[m+
c]=this.meshData.indexData[m]+a;this.vertexFrom=a;this.vertexCount=this.meshData.vertexCount;this.indexFrom=c;this.indexCount=this.meshData.indexData.length};a.writeAllMeshDataToBuffers=function(a,b,c){for(var d=0,f=0,e=0;e<a.length;e++){var k=a[e];k.writeMeshDataToBuffers(d,b,f,c);d+=k.vertexCount;f+=k.indexCount}};a.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};a.prototype.serialize=function(a){a.writeInt32(this.geometryType);
a.writeInt32(this._materialInfo);a.writeInt32(this.symbolLevel);a.writeInt32(this.zOrder);a.writeInt32(this.vertexFrom);a.writeInt32(this.vertexCount);a.writeInt32(this.indexFrom);a.writeInt32(this.indexCount);return a};a.deserialize=function(b,c){var d=b.readInt32(),f=c.store&&c.store.get(b.readInt32())||b.readInt32();c=new a(c.id,d,f);c.symbolLevel=b.readInt32();c.zOrder=b.readInt32();c.vertexFrom=b.readInt32();c.vertexCount=b.readInt32();c.indexFrom=b.readInt32();c.indexCount=b.readInt32();return c};
return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(c,a){return function(){function a(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(a,b,c){for(var d in a)this.vertexData.set(d,a[d]);for(d in this.vertexData)null===a[d]&&this.vertexData.delete(d);this.vertexCount=b;this.indexData=c};return a}()})},
"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/Metric":function(){define(["require","exports","./BoundingBox"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,b,c,d,k){void 0===d&&(d=255);void 0===k&&(k=0);this.bounds=a;this.range=b;this.index=c;this.minZoom=d;this.maxZoom=k}a.prototype.serialize=function(a){this.bounds.serialize(a);a.writeInt32(this.range.from);a.writeInt32(this.range.count);a.writeInt32(this.index);return a};a.deserialize=function(c){var d=
b.default.deserialize(c),e=c.readInt32(),f=c.readInt32(),e={from:e,count:f};c=c.readInt32();return new a(d,e,c)};return a}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require","exports","../../../../../core/libs/gl-matrix/vec2"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,c,d,f){this.width=d;this.height=f;this.center=b.fromValues(a,c)}Object.defineProperty(a.prototype,"x",{get:function(){return this.center[0]},
set:function(a){this.center[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"y",{get:function(){return this.center[1]},set:function(a){this.center[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0});a.prototype.serialize=function(a){a.writeF32(this.center[0]);
a.writeF32(this.center[1]);a.writeInt32(this.width);a.writeInt32(this.height);return a};a.deserialize=function(b){var c=b.readF32(),d=b.readF32(),f=b.readInt32();b=b.readInt32();return new a(c,d,f,b)};return a}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../MaterialInfo ../../Utils ../../visualVariablesUtils ../../WGLDisplayObject ../VertexVector ../templates/meshTemplateUtils ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../../util/Matcher ../../util/serializationUtils ../../util/vvFlagUtils ../../util/Writer".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z,g,n,r){Object.defineProperty(a,"__esModule",{value:!0});var B=e.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),C={esriGeometryPoint:"above-center above-left above-right center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:null,esriGeometryMultipoint:null,esriGeometryEnvelope:null},D=function(){function a(){this._materials=[];this._materialsIndex=new Map}
a.prototype.insert=function(a){var b=this._materials.length;this._materials.push(a);return b};a.prototype._hashGlyph=function(a,b,c){return"G-"+b+"-"+c+"-"+a.page};a.prototype._hashSprite=function(a,b,c){return"S-"+b+"-"+c+"-"+(a?a.page:-1)};a.prototype.createSpriteMaterial=function(a,b,c){var g=this._hashSprite(a,b,c);if(this._materialsIndex.has(g))return this._materialsIndex.get(g);var n=this._materials.length;a=k.default.fromSprite(a,b,c);this._materials.push(a);this._materialsIndex.set(g,n);return n};
a.prototype.createGlyphMaterial=function(a,b,c){var g=this._hashGlyph(a,b,c);if(this._materialsIndex.has(g))return this._materialsIndex.get(g);var n=this._materials.length;a=k.default.fromGlyph(a,b,c);this._materials.push(a);this._materialsIndex.set(g,n);return n};a.prototype.get=function(a){return this._materials[a]};a.prototype.serialize=function(a){g.serializeList(a,this._materials);return a};a.deserialize=function(b){var c=new a;c._materials=g.deserializeList(b,k.default);return c};return a}();
a.MaterialStore=D;var F=function(){function a(a){this._bucketSize=a;this._rowsLength=m.TILE_SIZE/a;this._colsLength=m.TILE_SIZE/a;this._grid=this._initGrid()}a.prototype.checkOverlap=function(a,b){a=Math.floor(a/this._bucketSize);b=Math.floor(b/this._bucketSize);if(0>a||a>=this._rowsLength||0>b||b>=this._colsLength||this._grid[b][a])return!0;this._grid[b][a]=!0;return!1};a.prototype.reset=function(){this._grid=this._initGrid()};a.prototype._initGrid=function(){for(var a=[],b=0;b<this._rowsLength;b++)a.push(Array(this._colsLength));
return a};return a}(),H=function(){function a(a,b,c){this.displayObjects=a;this.vertexVectorsMap=b;this._materials=c;this.grid=new F(m.COLLISION_EARLY_REJECT_BUCKET_SIZE)}a.prototype.get=function(a){return this.vertexVectorsMap[a]};a.prototype.pushDisplayObject=function(a){this.displayObjects.push(a)};a.prototype.encode=function(a,b){var c=g.serializeList(new r.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),n=this._materials.serialize(new r.default(Uint32Array)).buffer(),d={};
b.push(c);b.push(n);for(var f=0;f<this.vertexVectorsMap.length;f++){var e=this.vertexVectorsMap[f];d[f]={};e.transfer(d[f],b)}a.displayObjects=c;a.materialStore=n;a.vertexBuffersMap=d;this.destroy()};a.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};a.prototype._guessSize=function(){for(var a=this.displayObjects,b=Math.min(a.length,4),c=0,g=0;g<b;g++)c=Math.max(c,a[g].displayRecords.length);return 2*(12*a.length+a.length*c*40)};return a}(),J=function(){function a(){this._vvMap=
new Map}a.prototype.set=function(a,b){this._vvMap.set(a,b)};a.prototype.getValue=function(a,b,c){return this._vvMap.has(a)?this._vvMap.get(a)(b,c):0};return a}();c=function(){function a(a,b,c,g,n,r,f,e,l,p){var k=this;this._labelsDebugTemplate=null;this._matcher=a;this._materials=c;this._geometryType=g;this._idField=n;this._pixelRatio=l;this._vvMap=null;this._vvFlags=f;this._vvBuf=new ArrayBuffer(16);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._createVVFunctionMap(r,
b,e);p&&(this._validateLabelingInfo(p)?this._labelTemplates=p.map(function(a){return y.default.fromText(k._materials,0,a.symbol,l,a.labelPlacement)}):B.error(new d("mapview-labeling:unsupported-geometry","LabelingInfo failed validation - unable to create labels for layer.")))}a.from=function(b,c,g,n,r,f,e,l){switch(b.type){case "simple":return a._fromSimpleRenderer(b,c,g,n,r,f,e,l);case "unique-value":case "uniqueValue":return a._fromUniqueValueRenderer(b,c,g,n,r,f,e,l);case "class-breaks":case "classBreaks":return a._fromClassBreaksRenderer(b,
c,g,n,r,f,e,l);default:return B.error(new d("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}};Object.defineProperty(a.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});a.prototype.createMeshData=function(a){var b=Array(5),c=this._matcher.getDefault(),g=!!n.getMarkerVVFlags(this._vvFlags),d=!!n.getFillVVFlags(this._vvFlags),r=!!n.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),e=!!n.getTextVVFlags(this._vvFlags);
!this._labelTemplates&&c&&1===c.length&&c[0]instanceof A.default?(b[f.WGLGeometryType.MARKER]=new t.VertexVectors(f.WGLGeometryType.MARKER,g,a),b[f.WGLGeometryType.FILL]=new t.VertexVectors(f.WGLGeometryType.FILL,d,0),b[f.WGLGeometryType.LINE]=new t.VertexVectors(f.WGLGeometryType.LINE,r,0),b[f.WGLGeometryType.TEXT]=new t.VertexVectors(f.WGLGeometryType.TEXT,e,0),b[f.WGLGeometryType.LABEL]=new t.VertexVectors(f.WGLGeometryType.LABEL,!1,0)):(b[f.WGLGeometryType.MARKER]=new t.VertexVectors(f.WGLGeometryType.MARKER,
g,a),b[f.WGLGeometryType.FILL]=new t.VertexVectors(f.WGLGeometryType.FILL,d,a),b[f.WGLGeometryType.LINE]=new t.VertexVectors(f.WGLGeometryType.LINE,r,a),b[f.WGLGeometryType.TEXT]=new t.VertexVectors(f.WGLGeometryType.TEXT,e,a),b[f.WGLGeometryType.LABEL]=new t.VertexVectors(f.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?a:0));return new H([],b,this._materials)};a.prototype.write=function(a,b,c,g,n){var d=1===this._matcher.size()&&this._matcher.getDefault()||this._matcher.match(b,
c),r=b.attributes[this._idField],f=new q(r),e=!!g&&!!this._labelTemplates;this._computeVV(b,c);if(d&&(b.geometry||b.centroid)){c=f.displayRecords;for(var l=0;l<d.length;l++){var p=d[l],k=a.get(p.geometryType);p.writeMesh(c,k,this._geometryType,r,b,this._pixelRatio,this._vvBufU32)}e&&(d=this._getLabelReference(d),this._writeLabelMesh(f,a,r,b,n,g.get(r),d));a.pushDisplayObject(f)}};a.prototype._hasBadLabelClass=function(a,b){var c=a.labelPlacement,g=C[b];if(!g)return B.error(new d("mapview-labeling:unsupported-geometry-type",
"Unable to create labels for WebGL Feature Layer, "+b+" is not supported")),!0;g.some(function(a){return a===c})||(g=g[0],B.warn("Found invalid label placement type "+c+" for "+b+". Defaulting to "+g),a.labelPlacement=g);return!1};a.prototype._validateLabelingInfo=function(a){var b=this;return!a.some(function(a){return b._hasBadLabelClass(a,b._geometryType)})};a.prototype._getLabelReference=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c instanceof A.default)return c}return null};a.prototype._writeLabelMesh=
function(a,b,c,g,n,d,r){for(var f=a.displayRecords,e=0,l=0,p=-1,k=-1,B=0;B<d.labelingInfo.length;B++){var h=d.labelingInfo[B],C=d.text[B],q=this._labelTemplates[h],t=b.get(q.geometryType),D=n.get(q.symbolId).glyphMosaicItems,v=f.length;q.bindReferenceTemplate(r);if(!q.computeGlyphs(D,C)){D=q.computeAnchor(this._geometryType,g);C=q.bounds;if(-1===p&&(p=Math.floor(D[0]/m.COLLISION_BUCKET_SIZE),k=Math.floor(D[1]/m.COLLISION_BUCKET_SIZE),b.grid.checkOverlap(D[0],D[1])))return;q.writeMesh(f,t,this._geometryType,
c,g,this._pixelRatio,this._vvBufU32);a.anchor=D;a.addMetric(C,v,f.length-v,h);h=C.center;e=Math.max(C.halfWidth+Math.abs(h[0]),e);l=Math.max(C.halfHeight+Math.abs(h[1]),l)}}-1!==p&&(c=2.5*Math.max(e,l),b=Math.ceil(Math.abs((c-a.anchor[0]%m.COLLISION_BUCKET_SIZE)/m.COLLISION_BUCKET_SIZE)),c=Math.ceil(Math.abs((c-a.anchor[1]%m.COLLISION_BUCKET_SIZE)/m.COLLISION_BUCKET_SIZE)),a.xBucket=p,a.yBucket=k,a.xOverflow=b,a.yOverflow=c)};a.prototype._debugLabels=function(a,b,c,g,n){g={geometry:{paths:[[[g[0]+
n.center[0]-n.width/2,g[1]+n.center[1]+n.height/2],[0,-n.height],[n.width,0],[0,n.height],[-n.width,0]]]},attributes:{}};n=this._getLabelDebugTemplate();b=b.get(n.geometryType);n.writeMesh(a,b,"esriGeometryPolyline",c,g,this._pixelRatio,this._vvBufU32)};a.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||(this._labelsDebugTemplate=this._createLabelsDebugTemplate());return this._labelsDebugTemplate};a.prototype._createLabelsDebugTemplate=function(){var a=new h({style:"solid",width:1,
color:[255,0,0,1]});return u.default.fromSimpleLine(this._materials,0,a,null,this._pixelRatio)};a.prototype._isErrorVV=function(a){return null===a||isNaN(a)||Infinity===a};a.prototype._computeVV=function(a,b){if(!this._vvMap)return 0;var c=this._vvMap.getValue(f.VVType.SIZE,a,b),g=this._vvMap.getValue(f.VVType.COLOR,a,b),n=this._vvMap.getValue(f.VVType.OPACITY,a,b);a=this._vvMap.getValue(f.VVType.ROTATION,a,b);this._vvBufF32[f.VVType.SIZE]=this._isErrorVV(c)?NaN:c;this._vvBufF32[f.VVType.COLOR]=this._isErrorVV(g)?
NaN:g;this._vvBufF32[f.VVType.OPACITY]=this._isErrorVV(n)?NaN:n;this._vvBufF32[f.VVType.ROTATION]=this._isErrorVV(a)?NaN:a;return 0};a.prototype._createVVFunctionMap=function(a,b,c){if(a&&a.length)for(var g=0;g<a.length;g++){var n=a[g],d=l.getVVType(n.type);if(n=this._createGetValueFunction(n,b,c))this._vvMap||(this._vvMap=new J),this._vvMap.set(d,n)}};a.prototype._createGetValueFunction=function(a,b,c){if(l.getVVType(a.type)===f.VVType.SIZE){var g=p.getTypeOfSizeVisualVariable(a);return g===f.WGLVVFlag.SIZE_SCALE_STOPS?
null:this._createNormalizedFunction(a,b,c,g===f.WGLVVFlag.SIZE_UNIT_VALUE&&function(b){return p.getVisualVariableSizeValueRepresentationRatio(b,a.valueRepresentation)})}return this._createNormalizedFunction(a,b,c)};a.prototype._createNormalizedFunction=function(a,b,c,g){var n=a.field;if(n){if("string"===typeof n){var r=a.normalizationField;return r?function(a){if(a.attributes[n]&&a.attributes[r])return a=a.attributes[n]/a.attributes[r],g?g(a):a}:g?function(a){return g(a.attributes[n])}:function(a){return a.attributes[n]}}if("function"===
typeof n)return B.error(new d("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),function(a){};B.error(new d("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof n));return function(a){}}if(a.valueExpression&&"$view.scale"!==a.valueExpression)return l.createArcadeFunction({valueExpression:a.valueExpression,spatialReference:c,layer:b},g);B.error("Unable to create a normalized function for visual variable: "+
a);return function(a){}};a._fromSimpleRenderer=function(b,c,g,d,r,f,e,l){var p=b.getSymbols();b=b.visualVariables;var k=n.getVVFlags(b),B=new z.default,m=new D;p.length&&B.setDefault(v.createMeshTemplates([],m,p[0],g,k,e));return new a(B,c,m,d,r,b,k,f,e,l)};a._fromUniqueValueRenderer=function(b,c,g,d,r,f,e,l){var p=b.uniqueValueInfos,k=b.visualVariables,B=n.getVVFlags(k),m=[b.field];b.field2&&m.push(b.field2);b.field3&&m.push(b.field3);for(var h=b.valueExpression,m=new z.MapMatcher(m,b.fieldDelimiter,
h?{valueExpression:h,spatialReference:f,layer:c}:null),h=new D,C=b.backgroundFillSymbol,C=C&&v.createMeshTemplates([],h,C,g,B,e),q=0;q<p.length;q++){var t=p[q],F=v.createMeshTemplates([],h,t.symbol,g,B,e);m.add(t.value,C?C.concat(F):F)}if(b=b.defaultSymbol)g=v.createMeshTemplates([],h,b,g,B,e),m.setDefault(C?C.concat(g):g);return new a(m,c,h,d,r,k,B,f,e,l)};a._fromClassBreaksRenderer=function(b,c,g,d,r,f,e,l){for(var p=b.isMaxInclusive,k=b.visualVariables,B=b.valueExpression,m=b.normalizationField,
h=b.normalizationTotal,C=b.normalizationType,q=n.getVVFlags(k),p=new z.IntervalMatcher(b.field,p,B?{valueExpression:B,spatialReference:f,layer:c}:null,{normalizationField:m,normalizationTotal:h,normalizationType:C}),B=new D,m=(m=b.backgroundFillSymbol)&&v.createMeshTemplates([],B,m,g,q,e,!0),h=0,C=b.classBreakInfos;h<C.length;h++){var t=C[h],F=v.createMeshTemplates([],B,t.symbol,g,q,e);p.add({min:t.minValue,max:t.maxValue},m?m.concat(F):F)}if(b=b.defaultSymbol)g=v.createMeshTemplates([],B,b,g,q,e),
p.setDefault(m?m.concat(g):g);return new a(p,c,B,d,r,k,q,f,e,l)};return a}();a.default=c})},"esri/layers/vectorTiles/symbols/SimpleLineSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./LineSymbol"],function(c,a,b,d){var e={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",
STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},h={color:[0,0,0,1],style:e.STYLE_SOLID,width:.75,cap:e.CAP_BUTT,join:e.JOIN_MITER,miterLimit:7.5},m=c(d,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:e.STYLE_SOLID,json:{read:function(b,c){return a.valueOf(this._jsonStyles,b)||void 0},write:function(a,b){b.style=this._jsonStyles[a]}}},
cap:{value:e.CAP_BUTT,json:{read:!1,write:!1}},join:{value:e.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:b.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash",
"long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return a.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,c,d,e,m,h){if(a&&"string"!==typeof a)return a;var f={};null!=a&&(f.style=a);null!=c&&(f.color=c);null!=d&&(f.width=b.toPt(d));null!=e&&(f.cap=e);null!=m&&(f.join=m);null!=h&&(f.miterLimit=b.toPt(h));return f},clone:function(){return new m({color:a.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});a.mixin(m,
e);m.defaultProps=h;return m})},"esri/layers/vectorTiles/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(c,a,b){return c(b,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:a.toPt,json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(c,a,b,d){var e=a({esriSMS:"simple-marker",esriPMS:"picture-marker",
esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),h=0;return b.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+h++},properties:{type:{type:String,value:null,json:{read:e.fromJSON,write:{ignoreOrigin:!0,writer:function(a,b){b.type=e.toJSON(this.type)}}}},color:{type:d,value:new d([0,
0,0,1]),json:{read:function(a){return a&&c.isDefined(a[0])?[a[0],a[1],a[2],a[3]/255]:a},write:{allowNull:!0}}}}})})},"esri/layers/vectorTiles/core/kebabDictionary":function(){define(["require","exports"],function(c,a){return function(a,c){void 0===c&&(c={});var b=c.ignoreUnknown||!1,d={},m;for(m in a)d[a[m]]=m;var f=function(a){return d.hasOwnProperty(a)?d[a]:b?void 0:a},k=function(c){return a.hasOwnProperty(c)?a[c]:b?void 0:c};return{toJSON:f,fromJSON:k,read:function(a){return k(a)},write:function(a,
b,c){a=f(a);void 0!==a&&(b[c]=a)}}}})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(c,a,b){function d(b){return Math.max(0,Math.min(a.ensureInteger(b),255))}var e=c([b],{declaredClass:"esri.Color",toJSON:function(){return[d(this.r),d(this.g),d(this.b),1<this.a?this.a:d(255*this.a)]},clone:function(){return new e(this.toRgba())}});e.toJSON=function(a){return a&&[d(a.r),d(a.g),d(a.b),1<a.a?a.a:d(255*a.a)]};e.fromJSON=
function(a){return a&&new e([a[0],a[1],a[2],a[3]/255])};e.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};e.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var h="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(c=0;c<h.length;c++)e[h[c]]=b[h[c]];e.named.rebeccapurple=[102,51,153];return e})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(c,a,b,d){var e={};a.setObject("dojo.colors",e);
var h=function(a,b,c){0>c&&++c;1<c&&--c;var d=6*c;return 1>d?a+(b-a)*d:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a};c.colorFromRgb=b.fromRgb=function(a,c){var f=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(f){a=f[2].split(/\s*,\s*/);var e=a.length,f=f[1];if("rgb"==f&&3==e||"rgba"==f&&4==e)return f=a[0],"%"==f.charAt(f.length-1)?(f=d.map(a,function(a){return 2.56*parseFloat(a)}),4==e&&(f[3]=a[3]),b.fromArray(f,c)):b.fromArray(a,c);if("hsl"==f&&3==e||"hsla"==f&&4==e){var f=(parseFloat(a[0])%
360+360)%360/360,k=parseFloat(a[1])/100,m=parseFloat(a[2])/100,k=.5>=m?m*(k+1):m+k-m*k,m=2*m-k,f=[256*h(m,k,f+1/3),256*h(m,k,f),256*h(m,k,f-1/3),1];4==e&&(f[3]=a[3]);return b.fromArray(f,c)}}return null};var m=function(a,b,c){a=Number(a);return isNaN(a)?c:a<b?b:a>c?c:a};b.prototype.sanitize=function(){this.r=Math.round(m(this.r,0,255));this.g=Math.round(m(this.g,0,255));this.b=Math.round(m(this.b,0,255));this.a=m(this.a,0,1);return this};e.makeGrey=b.makeGrey=function(a,c){return b.fromArray([a,a,
a,c])};a.mixin(b.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,
169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,
34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,
250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,
104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,
192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,
222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.EXTRUDE_SCALE=64;a.PICTURE_FILL_COLOR=4294967295;a.TILE_SIZE=512;a.ANGLE_FACTOR_256=256/360;a.COLLISION_BUCKET_SIZE=128;a.COLLISION_MAX_ZOOM_DELTA=4;a.COLLISION_EARLY_REJECT_BUCKET_SIZE=32})},"esri/layers/vectorTiles/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),
function(c,a,b,d,e,h,m){function f(a){return h.isNumber(a.minDataValue)&&h.isNumber(a.maxDataValue)&&null!=a.minSize&&null!=a.maxSize?e.WGLVVFlag.SIZE_MINMAX_VALUE:(a.expression&&"view.scale"===a.expression||a.valueExpression&&"$view.scale"===a.valueExpression)&&Array.isArray(a.stops)?e.WGLVVFlag.SIZE_SCALE_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&Array.isArray(a.stops)?e.WGLVVFlag.SIZE_FIELD_STOPS:(null!=a.field||a.expression&&
"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&null!=a.valueUnit?e.WGLVVFlag.SIZE_UNIT_VALUE:e.WGLVVFlag.NONE}function k(a){return{value:a.value,size:b.toPt(a.size)}}function l(a){return a.map(function(a){return k(a)})}function p(a){return"string"===typeof a||"number"===typeof a?b.toPt(a):{type:"size",expression:a.expression,stops:l(a.stops)}}function q(a){var b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(h.isString(a.field))if(a.stops){if(8<a.stops.length)return null;
a=a.stops;for(var c=0;8>c;++c){var d=a[Math.min(c,a.length-1)];b.values[c]=d.value;b.opacities[c]=d.opacity}}else if(a.opacityValues){if(!h.isDefined(a.minDataValue)||!h.isDefined(a.maxDataValue)||2!==a.opacityValues.length)return null;b.values[0]=a.minDataValue;b.opacities[0]=a.opacityValues[0];b.values[1]=a.maxDataValue;b.opacities[1]=a.opacityValues[1];for(c=2;8>c;++c)b.values[c]=a.maxDataValue,b.opacities[c]=a.opacityValues[1]}else return null;else if(a.stops&&0<=a.stops.length||a.opacityValues&&
0<=a.opacityValues.length)for(a=a.stops&&0<=a.stops.length?a.stops[0].opacity:a.opacityValues[0],c=0;8>c;c++)b.values[c]=Infinity,b.opacities[c]=a;else return null;return b}Object.defineProperty(a,"__esModule",{value:!0});a.getTypeOfSizeVisualVariable=f;a.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};a.stopToSizeStop=k;a.normalizeSizeStops=l;a.normalizeSizeElement=p;a.getVisualVariablesFields=
function(a){var b=a&&0<a.length?{}:null;b&&a.forEach(function(a){var c=a.type;a.field&&(b[c]=a.field)});return b};a.convertVisualVariables=function(a){var c=a&&0<a.length?{}:null,k=c?{}:null;if(!c)return{vvFields:c,vvRanges:k};for(var h=0;h<a.length;h++){var t=a[h],z=t.type;t.field&&(c[z]=t.field);if("size"===z){k.size||(k.size={});var g=t;switch(f(g)){case e.WGLVVFlag.SIZE_MINMAX_VALUE:k.size.minMaxValue={minDataValue:g.minDataValue,maxDataValue:g.maxDataValue,minSize:p(g.minSize),maxSize:p(g.maxSize)};
break;case e.WGLVVFlag.SIZE_SCALE_STOPS:k.size.scaleStops={stops:l(g.stops)};break;case e.WGLVVFlag.SIZE_FIELD_STOPS:for(var t=[],z=[],g=l(g.stops),n=g.length,r=0;6>r;r++){var B=g[Math.min(r,n-1)];t.push(B.value);z.push(b.pt2px(B.size))}k.size.fieldStops={values:t,sizes:z};break;case e.WGLVVFlag.SIZE_UNIT_VALUE:k.size.unitValue={unit:g.valueUnit,valueRepresentation:g.valueRepresentation}}}else if("color"===z)for(t=m.convertVisualVariables([t],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),
k.color=t.color,r=0;32>r;r+=4)d.premultiplyAlpha(k.color.colors,r,!0);else"opacity"===z?k.opacity=q(t):"rotation"===z&&(k.rotation={type:t.rotationType})}return{vvFields:c,vvRanges:k}}})},"esri/layers/vectorTiles/views/3d/layers/support/FastSymbolUpdates":function(){define(["require","exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/glMatrix"],function(c,a,b,d,e){function h(a){return null!==a&&void 0!==a}function m(a){return"number"===typeof a}function f(a,b){a&&
a.push(b)}function k(a,c,g,n,d){var r=a.minSize,e=a.maxSize;if(a.expression)return f(d,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=n.symbolSize[g],c.minSize[g]=a,c.maxSize[g]=a,c.offset[g]=c.minSize[g],c.factor[g]=0,c.type[g]=1,!0;if(h(a.field)){if(h(a.stops)){if(2===a.stops.length&&m(a.stops[0].size)&&m(a.stops[1].size))return l(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,c,g),c.type[g]=1,!0;f(d,"Could not convert size info: stops only supported with 2 elements");
return!1}if(m(r)&&m(e)&&h(a.minDataValue)&&h(a.maxDataValue))return l(r,e,a.minDataValue,a.maxDataValue,c,g),c.type[g]=1,!0;if(null!=b.meterIn[a.valueUnit])return c.minSize[g]=-Infinity,c.maxSize[g]=Infinity,c.offset[g]=0,c.factor[g]=1/b.meterIn[a.valueUnit],c.type[g]=1,!0;"unknown"===a.valueUnit?f(d,"Could not convert size info: proportional size not supported"):f(d,"Could not convert size info: scale-dependent size not supported");return!1}if(!h(a.field)){if(a.stops&&a.stops[0]&&m(a.stops[0].size))return c.minSize[g]=
a.stops[0].size,c.maxSize[g]=a.stops[0].size,c.offset[g]=c.minSize[g],c.factor[g]=0,c.type[g]=1,!0;if(m(r))return c.minSize[g]=r,c.maxSize[g]=r,c.offset[g]=r,c.factor[g]=0,c.type[g]=1,!0}f(d,"Could not convert size info: unsupported variant of sizeInfo");return!1}function l(a,b,c,g,n,d){g=0<Math.abs(g-c)?(b-a)/(g-c):0;n.minSize[d]=0<g?a:b;n.maxSize[d]=0<g?b:a;n.offset[d]=a-c*g;n.factor[d]=g}function p(a,b,c,g){if(a.normalizationField||a.valueRepresentation)return f(g,"Could not convert size info: unsupported property"),
null;var n=a.field;if(null!=n&&"string"!==typeof n)return f(g,"Could not convert size info: field is not a string"),null;if(!b.size)b.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=a.field;else if(a.field!==b.size.field)return f(g,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(n=k(a,b.size,0,c,g))?b:null;case "height":return(n=k(a,b.size,2,c,g))?b:null;case "depth":return(n=
k(a,b.size,1,c,g))?b:null;case "width-and-depth":return(n=k(a,b.size,0,c,g))&&k(a,b.size,1,c,g),n?b:null;case null:case void 0:case "all":return(n=(n=(n=k(a,b.size,0,c,g))&&k(a,b.size,1,c,g))&&k(a,b.size,2,c,g))?b:null;default:return f(g,'Could not convert size info: unknown axis "'+a.axis+'""'),null}}function q(a,b,c){for(var g=0;3>g;++g){var n=b.unitInMeters;1===a.type[g]&&(n*=b.modelSize[g],a.type[g]=2);a.minSize[g]/=n;a.maxSize[g]/=n;a.offset[g]/=n;a.factor[g]/=n}if(0!==a.type[0])b=0;else if(0!==
a.type[1])b=1;else if(0!==a.type[2])b=2;else return f(c,"No size axis contains a valid size or scale"),!1;for(g=0;3>g;++g)0===a.type[g]&&(a.minSize[g]=a.minSize[b],a.maxSize[g]=a.maxSize[b],a.offset[g]=a.offset[b],a.factor[g]=a.factor[b],a.type[g]=a.type[b]);return!0}function t(a,b,c){a[4*b+0]=c.r/255;a[4*b+1]=c.g/255;a[4*b+2]=c.b/255;a[4*b+3]=c.a}function v(a,b,c){if(a.normalizationField)return f(c,"Could not convert color info: unsupported property"),null;if("string"===typeof a.field)if(a.stops){if(8<
a.stops.length)return f(c,"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};a=a.stops;for(c=0;8>c;++c){var g=a[Math.min(c,a.length-1)];b.color.values[c]=g.value;t(b.color.colors,c,g.color)}}else if(a.colors){if(!h(a.minDataValue)||!h(a.maxDataValue))return f(c,"Could not convert color info: missing data values"),null;if(2!==a.colors.length)return f(c,"Could not convert color info: invalid colors array"),
null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};b.color.values[0]=a.minDataValue;t(b.color.colors,0,a.colors[0]);b.color.values[1]=a.maxDataValue;t(b.color.colors,1,a.colors[1]);for(c=2;8>c;++c)b.color.values[c]=a.maxDataValue,t(b.color.colors,c,a.colors[1])}else return f(c,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length||a.colors&&0<=a.colors.length)for(a=a.stops&&0<=a.stops.length?
a.stops[0].color:a.colors[0],b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},c=0;8>c;c++)b.color.values[c]=Infinity,t(b.color.colors,c,a);else return f(c,"Could not convert color info: no field and no colors/stops"),null;return b}function y(a,b,c,g){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function u(a,b,c){if("string"!==typeof a.field)return f(c,"Could not convert rotation info: field is not a string"),
null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return f(c,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return y(a,b.rotation,0,c),b;case "roll":return y(a,b.rotation,1,c),b;case null:case void 0:case "heading":return y(a,b.rotation,2,c),b;default:return f(c,'Could not convert rotation info: unknown axis "'+a.axis+
'""'),null}}function A(a,b,c){if(!a)return null;var g=!b.supportedTypes||!!b.supportedTypes.size,n=!b.supportedTypes||!!b.supportedTypes.color,d=!b.supportedTypes||!!b.supportedTypes.rotation;return(a=a.reduce(function(a,r){if(!a)return a;if(r.valueExpression)return f(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(r.type){case "size":return g?p(r,a,b,c):a;case "color":return n?v(r,a,c):a;case "rotation":return d?u(r,a,c):a;default:return f(c,"Could not convert visual variables: unsupported type "+
r.type),null}},{size:null,color:null,rotation:null}))&&a.size&&!q(a.size,b,c)?null:a}function z(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function g(a,b){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},
g=a&&null!=a.size;a&&a.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=a.size.minSize,c.vvSizeMaxSize=a.size.maxSize,c.vvSizeOffset=a.size.offset,c.vvSizeFactor=a.size.factor):a&&g&&(c.vvSizeValue=b.transformation.scale);a&&g&&(c.vvSymbolAnchor=b.transformation.anchor,c.vvSymbolRotation=b.transformation.rotation);a&&a.color&&(c.vvColorEnabled=!0,c.vvColorValues=a.color.values,c.vvColorColors=a.color.colors);return c}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=A;a.initFastSymbolUpdatesState=
function(a,b,c){return b&&a&&!a.disableFastUpdates?(a=A(a.visualVariables,c))?{enabled:!0,visualVariables:a,materialParameters:g(a,c),customTransformation:a&&null!=a.size}:{enabled:!1}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var n=a.visualVariables;b=A(b.visualVariables,c);if(!(b&&z(n.size,b.size,"size")&&z(n.color,b.color,"color")&&z(n.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=g(b,c);a.customTransformation=b&&
null!=b.size;return!0};a.getMaterialParams=g;var n;(function(a){var b=e.mat4d,c=e.vec3,g=b.create(),n=c.create();a.evaluateModelTransform=function(a,c,r){if(!a.vvSizeEnabled)return r;b.set(r,g);d.computeObjectRotation(a.vvSymbolRotation[2],a.vvSymbolRotation[0],a.vvSymbolRotation[1],g);if(a.vvSizeEnabled){for(r=0;3>r;++r){var f=a.vvSizeOffset[r]+c[0]*a.vvSizeFactor[r],e=r;var l=a.vvSizeMinSize[r],p=a.vvSizeMaxSize[r],f=f<l?l:f>p?p:f;n[e]=f}b.scale(g,n,g)}else b.scale(g,a.vvSizeValue,g);b.translate(g,
a.vvSymbolAnchor,g);return g}})(n||(n={}));a.evaluateModelTransform=n.evaluateModelTransform})},"esri/layers/vectorTiles/renderers/support/utils":function(){define(["dojo/date/locale","../../Color","../../core/lang","../../core/numberUtils","dojo/i18n!dojo/cldr/nls/gregorian"],function(c,a,b,d,e){function h(b){return b&&b.map(function(b){return new a(b)})}function m(a,b,c){var d="";0===b?d=k.lt+" ":b===c&&(d=k.gt+" ");return d+a}var f={},k={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",
ld:"\u2013"},l={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},p={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},
year:{selector:"date",dateOptions:{selector:"year"}}},q={formatLength:"short",fullYear:!0},t={formatLength:"short"};b.mixin(f,{meterIn:{inches:1/.0254,feet:1/.3048,"us-feet":3.28084,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,d){var f=[];null==a||a instanceof Date||(a=new Date(a));
d=d||{};d=b.mixin({},d);var l=d.selector?d.selector.toLowerCase():null,p=!l||-1<l.indexOf("time"),l=!l||-1<l.indexOf("date");p&&(d.timeOptions=d.timeOptions||t,d.timeOptions&&(d.timeOptions=b.mixin({},d.timeOptions),d.timeOptions.selector=d.timeOptions.selector||"time",f.push(d.timeOptions)));l&&(d.dateOptions=d.dateOptions||q,d.dateOptions&&(d.dateOptions=b.mixin({},d.dateOptions),d.dateOptions.selector=d.dateOptions.selector||"date",f.push(d.dateOptions)));f&&f.length?(f=f.map(function(b){return c.format(a,
b)}),d=1==f.length?f[0]:e["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return f[b]})):d=c.format(a);return d},createColorStops:function(a){var b=a.values,c=a.colors,e=a.labelIndexes,l=a.isDate,g=a.dateFormatOptions;a=[];return a=b.map(function(a,r){var n=null;if(!e||-1<e.indexOf(r)){var p;(p=l?f.formatDate(a,g):d.format(a))&&(n=m(p,r,b.length-1))}return{value:a,color:c[r],label:n}})},updateColorStops:function(a){var b=a.stops,c=a.changes,e=a.isDate,l=a.dateFormatOptions,
g=[],n,r=b.map(function(a){return a.value});c.forEach(function(a){g.push(a.index);r[a.index]=a.value});n=d.round(r,{indexes:g});b.forEach(function(a,c){a.value=r[c];if(null!=a.label){var g,p=null;(g=e?f.formatDate(n[c],l):d.format(n[c]))&&(p=m(g,c,b.length-1));a.label=p}})},createClassBreakLabel:function(a){var b=a.minValue,c=a.maxValue,f=a.isFirstBreak?"":k.gt+" ";a="percent-of-total"===a.normalizationType?k.pct:"";b=null==b?"":d.format(b);c=null==c?"":d.format(c);return f+b+a+" "+k.ld+" "+c+a},
setLabelsForClassBreaks:function(a){var b=a.classBreakInfos,c=a.classificationMethod,e=a.normalizationType,l=[];b&&b.length&&("standard-deviation"===c?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(l.push(b[0].minValue),b.forEach(function(a){l.push(a.maxValue)}),l=d.round(l),b.forEach(function(a,b){a.label=f.createClassBreakLabel({minValue:0===b?l[0]:l[b],maxValue:l[b+1],isFirstBreak:0===b,normalizationType:e})})):b.forEach(function(a,
b){a.label=f.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:e})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,d=a.change,e=d.index,d=d.value,g=-1,n=-1,r=b.length;"standard-deviation"===a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===e?g=e:e===r?n=e-1:(n=e-1,g=e),-1<g&&g<r&&(a=b[g],a.minValue=d,a.label=f.createClassBreakLabel({minValue:a.minValue,
maxValue:a.maxValue,isFirstBreak:0===g,normalizationType:c})),-1<n&&n<r&&(a=b[n],a.maxValue=d,a.label=f.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===n,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,c,d=a.length,f,g,n,r,e,p,k=Infinity,m;a=a.map(function(a){return new Date(a)});for(b=0;b<d-1;b++){f=a[b];n=[];e=Infinity;p="";for(c=b+1;c<d;c++)g=a[c],g=f.getFullYear()!==g.getFullYear()&&"year"||f.getMonth()!==g.getMonth()&&"month"||f.getDate()!==
g.getDate()&&"day"||f.getHours()!==g.getHours()&&"hour"||f.getMinutes()!==g.getMinutes()&&"minute"||f.getSeconds()!==g.getSeconds()&&"second"||"millisecond",r=l[g],r<e&&(e=r,p=g),n.push(g);e<k&&(k=e,m=p)}return m},createUniqueValueLabel:function(a){var b=a.value,c=a.fieldInfo,e=a.domain;a=a.dateFormatInterval;var l=String(b);(e=e&&e.codedValues?e.getName(b):null)?l=e:"number"===typeof b&&(l=c&&"date"===c.type?f.formatDate(b,a&&p[a]):d.format(b));return l},cloneColorVariable:function(c){var d;c&&(d=
b.mixin({},c),d.colors=h(d.colors),d.stops=d.stops&&d.stops.map(function(c){c=b.mixin({},c);c.color&&(c.color=new a(c.color));return c}),d.legendOptions&&(d.legendOptions=b.mixin({},d.legendOptions)));return d},cloneOpacityVariable:function(a){var c;if(a){c=b.mixin({},a);if(a=c.opacityValues)c.opacityValues=a.slice(0);if(a=c.stops)c.stops=a.map(function(a){return b.mixin({},a)});if(a=c.legendOptions)c.legendOptions=b.mixin({},a)}return c},cloneSizeVariable:function(a){var c;a&&(c=b.mixin({},a),c.stops&&
(c.stops=c.stops.map(function(a){return b.mixin({},a)})),(a=c.minSize)&&"object"===typeof a&&(c.minSize=f.cloneSizeVariable(a)),(a=c.maxSize)&&"object"===typeof a&&(c.maxSize=f.cloneSizeVariable(a)),a=c.legendOptions)&&(c.legendOptions=b.mixin({},a),a=a.customValues)&&(c.legendOptions.customValues=a.slice(0));return c}});return f})},"esri/layers/vectorTiles/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(c,a){function b(a,b){return a-b}var d=/^-?(\d+)(\.(\d+))?$/i,
e=new RegExp("\\"+a.decimal+"0+$","g"),h=/(\d)0*$/g,m={numDigits:function(a){var b=String(a),c=b.match(d);a={integer:0,fractional:0};c&&c[1]?(a.integer=c[1].split("").length,a.fractional=c[3]?c[3].split("").length:0):-1<b.toLowerCase().indexOf("e")&&(c=b.split("e"),b=c[0],c=c[1],b&&c&&(b=Number(b),c=Number(c),(a=0<c)||(c=Math.abs(c)),b=m.numDigits(b),a?(b.integer+=c,b.fractional=c>b.fractional?0:b.fractional-c):(b.fractional+=c,b.integer=c>b.integer?1:b.integer-c),a=b));return a},percentChange:function(a,
b,c,d){var f={previous:null,next:null},e;null!=c&&(e=a-c,f.previous=Math.floor(Math.abs(100*(b-c-e)/e)));null!=d&&(e=d-a,f.next=Math.floor(Math.abs(100*(d-b-e)/e)));return f},round:function(a,c){a=a.slice(0);var d,e,f,k,h,y,u,A,z=c&&null!=c.tolerance?c.tolerance:2,g=c&&c.indexes,n=c&&null!=c.strictBounds?c.strictBounds:!1;if(g)g.sort(b);else for(g=[],h=0;h<a.length;h++)g.push(h);for(h=0;h<g.length;h++)if(A=g[h],c=a[A],d=0===A?null:a[A-1],e=A===a.length-1?null:a[A+1],f=m.numDigits(c),f=f.fractional){y=
0;for(u=!1;y<=f&&!u;){k=c;u=y;var r=void 0,B=void 0,r=Number(k.toFixed(u));r<k?B=r+1/Math.pow(10,u):(B=r,r-=1/Math.pow(10,u));r=Number(r.toFixed(u));B=Number(B.toFixed(u));k=[r,B];k=n&&0===h?k[1]:k[0];u=z;var r=m.percentChange(c,k,d,e),C=B=void 0,B=void 0,B=null==r.previous||r.previous<=u,C=null==r.next||r.next<=u;u=B=B&&C||r.previous+r.next<=2*u;y++}u&&(a[A]=k)}return a},format:function(a,b){b=b||{places:20,round:-1};(a=c.format(a,b))&&(a=a.replace(h,"$1").replace(e,""));return a}};return m})},"esri/layers/vectorTiles/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../geometry ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ../../lib/glMatrix ../../support/mathUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p){function q(a){var b=a.paths[0];if(!b||0===b.length)return null;b=m.getPointOnPath(b,m.getPathLength(b)/2);return k.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)}function t(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(!t(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(a,"__esModule",{value:!0});var v=[1,1,1];a.computeCentroid=function(a){if("point"===a.type)return a;if(k.isHydratedGeometry(a))switch(a.type){case "extent":return a.center;
case "polygon":return a.centroid;case "polyline":return q(a);case "mesh":return a.extent.center}else switch(a.type){case "extent":var b=p.isFinite(a.zmin);return k.makeDehydratedPoint(.5*(a.xmax+a.xmin),.5*(a.ymax+a.ymin),b?.5*(a.zmax+a.zmin):void 0,a.spatialReference);case "polygon":return b=h.ringsCentroid(a.rings,k.hasZ(a)),k.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference);case "polyline":return q(a)}};a.convertPointSR=function(a,c){var d=a.spatialReference;d.isWebMercator&&c.isWGS84?(f.xyToLngLat(a.x,
a.y,y),a.x=y[0],a.y=y[1],a.spatialReference=b.SpatialReference.WGS84):c.isWebMercator&&d.isWGS84&&(f.lngLatToXY(a.x,a.y,y),a.x=y[0],a.y=y[1],a.spatialReference=b.SpatialReference.WebMercator)};a.enlargeExtent=function(a,b,c){if(a){b||(b=e.create());var g=.5*a.width*(c-1);c=.5*a.height*(c-1);a.width<1E-7*a.height?g+=c/20:a.height<1E-7*a.width&&(c+=g/20);l.vec4d.set4(a.xmin-g,a.ymin-c,a.xmax+g,a.ymax+c,b);return b}return null};a.updateVertexAttributeAuxpos1w=function(a,b){for(var c=0;c<a.geometries.length;++c){var g=
a.geometries[c].data.vertexAttributes.auxpos1;g&&g.data[3]!==b&&(g.data[3]=b,a.geometryVertexAttrsUpdated(c))}};a.mixinColorAndOpacity=function(a,b){var c=[1,1,1,1];null!=a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);null!==b&&void 0!==b?c[3]=b:null!=a&&3<a.length&&(c[3]=a[3]);return c};a.overrideColor=function(a,b,c,g,n,d){void 0===d&&(d=[0,0,0,0]);for(var e=0;3>e;++e)d[e]=a&&null!=a[e]?a[e]:c&&null!=c[e]?c[e]:n[e];d[3]=null!=b?b:null!=g?g:n[3];return d};a.computeObjectScale=function(a,b,c,g){void 0===a&&(a=
v);void 0===g&&(g=1);var n=Array(3);if(null==b||null==c)n[0]=1,n[1]=1,n[2]=1;else{for(var d=void 0,e=0,f=2;0<=f;f--){var l=a[f],p=void 0,k=null!=l,m=0===f&&!d&&!k,h=c[f];"symbolValue"===l||m?p=0!==h?b[f]/h:1:k&&"proportional"!==l&&isFinite(l)&&(p=0!==h?l/h:1);null!=p&&(d=n[f]=p,e=Math.max(e,Math.abs(p)))}for(f=2;0<=f;f--)null==n[f]?n[f]=d:0===n[f]&&(n[f]=.001*e)}for(f=2;0<=f;f--)n[f]/=g;return n};a.computeSizeWithResourceSize=function(a,b){var c=b.width,g=b.depth,n=b.height;b=b.isPrimitive?10:1;if(null==
c&&null==n&&null==g)return[b*a[0],b*a[1],b*a[2]];for(var c=[c,g,n],d,g=0;3>g;g++)if(n=c[g],null!=n){d=n/a[g];break}for(g=0;3>g;g++)null==c[g]&&(c[g]=a[g]*d);return c};a.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return t(a)?null:"Symbol sizes may not be negative values"};a.computeObjectRotation=function(a,b,c,g){void 0===g&&(g=l.mat4d.identity());a=a||0;b=b||0;c=c||0;0!==a&&l.mat4d.rotateZ(g,-a/180*Math.PI,g);0!==b&&l.mat4d.rotateX(g,b/180*Math.PI,g);0!==
c&&l.mat4d.rotateY(g,c/180*Math.PI,g);return g};a.demResolutionForBoundingBox=function(a,b){return null!=b.minDemResolution?b.minDemResolution:d.isPoint(a)?b.minDemResolutionForPoints:.01*d.maximumDimension(a)};var y=[0,0]})},"esri/layers/vectorTiles/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q){Object.defineProperty(a,"__esModule",{value:!0});a.Extent=b;a.BaseGeometry=d;a.Mesh=e;a.Multipoint=h;a.Point=m;a.Polygon=f;a.Polyline=k;a.ScreenPoint=l;a.SpatialReference=p;a.isGeometry=function(b){return b instanceof a.BaseGeometry};a.fromJSON=q.fromJSON})},"esri/layers/vectorTiles/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t){function v(a,b,c){return null==b?c:null==c?b:a(b,c)}c=function(a){function c(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.type="extent";b.xmin=0;b.ymin=0;b.mmin=void 0;b.zmin=void 0;b.xmax=0;b.ymax=0;b.mmax=void 0;b.zmax=void 0;return b}b(c,a);m=c;c.prototype.normalizeCtorArgs=function(a,b,c,d,e){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null!=a.spatialReference?a.spatialReference:
k.WGS84,a):{xmin:a,ymin:b,xmax:c,ymax:d,spatialReference:null!=e?e:k.WGS84}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(c.prototype,"center",{get:function(){var a=new f({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});c.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};c.prototype.clone=function(){var a=new m;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};c.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,
c=a.spatialReference;b&&c&&!b.equals(c)&&t.canProject(b,c)&&(a=b.isWebMercator?t.geographicToWebMercator(a):t.webMercatorToGeographic(a,!0));return"point"===a.type?l.extentContainsPoint(this,a):"extent"===a.type?l.extentContainsExtent(this,a):!1};c.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&t.canProject(b,c)&&(a=b.isWebMercator?t.geographicToWebMercator(a):t.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===
a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};c.prototype.expand=function(a){a=.5*(1-a);var b=this.width*a,c=this.height*a;this.xmin+=b;this.ymin+=c;this.xmax-=b;this.ymax-=c;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};c.prototype.intersects=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&
!b.equals(c)&&t.canProject(b,c)&&(a=b.isWebMercator?t.geographicToWebMercator(a):t.webMercatorToGeographic(a,!0));b=p.getExtentIntersector(a.type);return"mesh"!==a.type?b(this,a):b(this,a.extent)};c.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};c.prototype.offset=function(a,b,c){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=c&&(this.zmin+=c,this.zmax+=c);return this};c.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};c.prototype.union=
function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=v(Math.min,this.zmin,a.zmin),this.zmax=v(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=v(Math.min,this.mmin,a.mmin),this.mmax=v(Math.max,this.mmax,a.mmax);return this};c.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,
a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=v(Math.max,this.zmin,a.zmin),this.zmax=v(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=v(Math.max,this.mmin,a.mmin),this.mmax=v(Math.min,this.mmax,a.mmax);return this};c.prototype.toJSON=function(a){return this.write(null,a)};c.prototype._shiftCM=function(a){void 0===a&&(a=q.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var b=this.spatialReference,
c=this._getCM(a);if(c){var d=b.isWebMercator?t.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;b.isWebMercator||(d.x=this._normalizeX(d.x,a).x);this.spatialReference=new k(e.substitute({Central_Meridian:d.x},b.isWGS84?a.altTemplate:a.wkTemplate))}return this};c.prototype._getCM=function(a){var b=null,c=a.valid;a=c[0];var c=c[1],d=this.xmin,e=this.xmax;d>=a&&d<=c&&e>=a&&e<=c||(b=this.center);return b};c.prototype._normalize=function(a,b,c){var g=this.spatialReference;if(!g)return this;c=
c||q.getInfo(g);if(!c)return this;var n=this._getParts(c).map(function(a){return a.extent});if(2>n.length)return n[0]||this;if(2<n.length)return a?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(a)return this._shiftCM(c);if(b)return n;var d=!0,e=!0;n.forEach(function(a){a.hasZ||(d=!1);a.hasM||(e=!1)});return{rings:n.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d)for(var c=(a.zmax-a.zmin)/2,g=0;g<b.length;g++)b[g].push(c);
if(e)for(a=(a.mmax-a.mmin)/2,g=0;g<b.length;g++)b[g].push(a);return b}),hasZ:d,hasM:e,spatialReference:g}};c.prototype._getParts=function(a){var b=this.cache._parts;if(!b){var b=[],c=this.ymin,d=this.ymax,e=this.spatialReference,f=this.width,l=this.xmin,p=this.xmax,k=void 0;a=a||q.getInfo(e);var h=a.valid,t=h[0],v=h[1],k=this._normalizeX(this.xmin,a),z=k.x,h=k.frameId,k=this._normalizeX(this.xmax,a),y=k.x;a=k.frameId;k=z===y&&0<f;if(f>2*v){f=new m(l<p?z:y,c,v,d,e);l=new m(t,c,l<p?y:z,d,e);p=new m(0,
c,v,d,e);c=new m(t,c,0,d,e);d=[];e=[];f.contains(p)&&d.push(h);f.contains(c)&&e.push(h);l.contains(p)&&d.push(a);l.contains(c)&&e.push(a);for(t=h+1;t<a;t++)d.push(t),e.push(t);b.push({extent:f,frameIds:[h]},{extent:l,frameIds:[a]},{extent:p,frameIds:d},{extent:c,frameIds:e})}else z>y||k?b.push({extent:new m(z,c,v,d,e),frameIds:[h]},{extent:new m(t,c,y,d,e),frameIds:[a]}):b.push({extent:new m(z,c,y,d,e),frameIds:[h]});this.cache._parts=b}a=this.hasZ;c=this.hasM;if(a||c)for(h={},a&&(h.zmin=this.zmin,
h.zmax=this.zmax),c&&(h.mmin=this.mmin,h.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(h);return b};c.prototype._normalizeX=function(a,b){var c=b.valid;b=c[0];var g=c[1],c=2*g,d=0;a>g?(b=Math.ceil(Math.abs(a-g)/c),a-=b*c,d=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,d=-b);return{x:a,frameId:d}};d([h.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],c.prototype,"cache",void 0);d([h.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"center",null);
d([h.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"extent",null);d([h.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasM",null);d([h.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasZ",null);d([h.property({readOnly:!0,dependsOn:["ymin","ymax"]})],c.prototype,"height",null);d([h.property({readOnly:!0,dependsOn:["xmin","xmax"]})],c.prototype,"width",null);d([h.property({type:Number,
json:{write:!0}})],c.prototype,"xmin",void 0);d([h.property({type:Number,json:{write:!0}})],c.prototype,"ymin",void 0);d([h.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],c.prototype,"mmin",void 0);d([h.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],c.prototype,"zmin",void 0);d([h.property({type:Number,json:{write:!0}})],c.prototype,"xmax",void 0);
d([h.property({type:Number,json:{write:!0}})],c.prototype,"ymax",void 0);d([h.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],c.prototype,"mmax",void 0);d([h.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],c.prototype,"zmax",void 0);return c=m=d([h.subclass("esri.geometry.Extent")],c);var m}(h.declared(m));c.prototype.toJSON.isDefaultToJSON=!0;
return c})},"esri/layers/vectorTiles/geometry/support/contains":function(){define(["require","exports"],function(c,a){function b(a,b,c,d){return b>=a.xmin&&b<=a.xmax&&c>=a.ymin&&c<=a.ymax?null!=d&&a.hasZ?d>=a.zmin&&d<=a.zmax:!0:!1}function d(a,b){if(a=a.rings)if(Array.isArray(a[0][0])){for(var c=!1,d=0,l=a.length;d<l;d++)c=e(c,a[d],b);b=c}else b=e(!1,a,b);else b=!1;return b}function e(a,b,c){var d=c[0];c=c[1];for(var e=0,f=0,m=b.length;f<m;f++){e++;e===m&&(e=0);var h=b[f],v=h[0],h=h[1],y=b[e],u=y[0],
y=y[1];(h<c&&y>=c||y<c&&h>=c)&&v+(c-h)/(y-h)*(u-v)<d&&(a=!a)}return a}Object.defineProperty(a,"__esModule",{value:!0});a.extentContainsPoint=function(a,c){return b(a,c.x,c.y,c.z)};a.extentContainsExtent=function(a,c){var d=c.xmin,e=c.ymin,l=c.zmin,p=c.xmax,m=c.ymax,h=c.zmax;return a.hasZ&&c.hasZ?b(a,d,e,l)&&b(a,d,m,l)&&b(a,p,m,l)&&b(a,p,e,l)&&b(a,d,e,h)&&b(a,d,m,h)&&b(a,p,m,h)&&b(a,p,e,h):b(a,d,e)&&b(a,d,m)&&b(a,p,m)&&b(a,p,e)};a.extentContainsCoords2D=function(a,c){return b(a,c[0],c[1])};a.extentContainsCoords3D=
function(a,c){return b(a,c[0],c[1],c[2])};a.polygonContainsPoint=function(a,b){return d(a,[b.x,b.y])};a.polygonContainsCoords=d})},"esri/layers/vectorTiles/geometry/support/intersects":function(){define(["require","exports","./contains"],function(c,a,b){function d(a,c){return b.extentContainsPoint(a,c)}function e(a,b){var c=a.hasZ&&b.hasZ,g;if(a.xmin<=b.xmin){if(g=b.xmin,a.xmax<g)return!1}else if(g=a.xmin,b.xmax<g)return!1;if(a.ymin<=b.ymin){if(g=b.ymin,a.ymax<g)return!1}else if(g=a.ymin,b.ymax<g)return!1;
if(c&&b.hasZ)if(a.zmin<=b.zmin){if(c=b.zmin,a.zmax<c)return!1}else if(c=a.zmin,b.zmax<c)return!1;return!0}function h(a,c){var g=c.hasZ?b.extentContainsCoords3D:b.extentContainsCoords2D,d=0;for(c=c.points;d<c.length;d++)if(g(a,c[d]))return!0;return!1}function m(a,c){p[0]=a.xmin;p[1]=a.ymax;q[0]=a.xmax;q[1]=a.ymax;t[0]=a.xmin;t[1]=a.ymin;v[0]=a.xmax;v[1]=a.ymin;for(var g=0,d=y;g<d.length;g++)if(b.polygonContainsCoords(c,d[g]))return!0;g=0;for(c=c.rings;g<c.length;g++)if(d=c[g],d.length){var e=d[0];
if(b.extentContainsCoords2D(a,e))return!0;for(var f=1;f<d.length;f++){var l=d[f];if(b.extentContainsCoords2D(a,l)||k(e,l,u))return!0;e=l}}return!1}function f(a,c){p[0]=a.xmin;p[1]=a.ymax;q[0]=a.xmax;q[1]=a.ymax;t[0]=a.xmin;t[1]=a.ymin;v[0]=a.xmax;v[1]=a.ymin;c=c.paths;for(var g=0;g<c.length;g++){var d=c[g];if(c.length){var e=d[0];if(b.extentContainsCoords2D(a,e))return!0;for(var f=1;f<d.length;f++){var l=d[f];if(b.extentContainsCoords2D(a,l)||k(e,l,u))return!0;e=l}}}return!1}function k(a,b,c){for(var g=
0;g<c.length;g++)if(l(a,b,c[g][0],c[g][1]))return!0;return!1}function l(a,b,c,d,e){var g=a[0];a=a[1];var n=b[0];b=b[1];var f=c[0],r=c[1];c=d[0]-f;var f=g-f,l=n-g;d=d[1]-r;var r=a-r,p=b-a,k=d*l-c*p;if(0===k)return!1;c=(c*r-d*f)/k;f=(l*r-p*f)/k;return 0<=c&&1>=c&&0<=f&&1>=f?(e&&(e[0]=g+c*(n-g),e[1]=a+c*(b-a)),!0):!1}Object.defineProperty(a,"__esModule",{value:!0});a.extentIntersectsPoint=d;a.extentIntersectsExtent=e;a.extentIntersectsMultipoint=h;var p=[0,0],q=[0,0],t=[0,0],v=[0,0],y=[p,q,t,v],u=[[t,
p],[p,q],[q,v],[v,t]];a.extentIntersectsPolygon=m;a.extentIntersectsPolyline=f;var A=[0,0];a.isSelfIntersecting=function(a){for(var b=0;b<a.length;b++){for(var c=a[b],d=0;d<c.length-1;d++)for(var e=c[d],f=c[d+1],p=b+1;p<a.length;p++)for(var k=0;k<a[p].length-1;k++){var m=a[p][k],h=a[p][k+1],q=l(e,f,m,h,A);if(q&&!(A[0]===e[0]&&A[1]===e[1]||A[0]===m[0]&&A[1]===m[1]||A[0]===f[0]&&A[1]===f[1]||A[0]===h[0]&&A[1]===h[1]))return!0}k=c.length;if(!(4>=k))for(d=0;d<k-3;d++){var t=k-1;0===d&&(t=k-2);e=c[d];
f=c[d+1];for(p=d+2;p<t;p++)if(m=c[p],h=c[p+1],(q=l(e,f,m,h,A))&&!(A[0]===e[0]&&A[1]===e[1]||A[0]===m[0]&&A[1]===m[1]||A[0]===f[0]&&A[1]===f[1]||A[0]===h[0]&&A[1]===h[1]))return!0}}return!1};a.segmentIntersects=l;a.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return e;case "esriGeometryMultipoint":case "multipoint":return h;case "esriGeometryPoint":case "point":return d;case "esriGeometryPolygon":case "polygon":return m;case "esriGeometryPolyline":case "polyline":return f;
case "mesh":return e}}})},"esri/layers/vectorTiles/geometry/Mesh":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Geometry"],function(c,a,b,d){return function(a){function c(b){return a.call(this)||this}b(c,a);c.prototype.clone=function(){return new c};return c}(d)})},"esri/layers/vectorTiles/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l){function p(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}c=function(a){function c(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.points=[];b.type="multipoint";return b}b(c,a);f=c;c.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=
a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var b=new m,c=this.hasZ,d=this.hasM,g=c?3:2,n=a[0],e=p(Math.min),f=p(Math.max),l=n[0],k=n[1],h=n[0],n=n[1],q,t,v,G,O=0,X=a.length;O<X;O++){var K=
a[O],aa=K[0],ba=K[1],l=e(l,aa),k=e(k,ba),h=f(h,aa),n=f(n,ba);c&&2<K.length&&(aa=K[2],q=e(q,aa),v=f(v,aa));d&&K.length>g&&(K=K[g],t=e(t,K),G=f(G,K))}b.xmin=l;b.ymin=k;b.xmax=h;b.ymax=n;b.spatialReference=this.spatialReference;c?(b.zmin=q,b.zmax=v):(b.zmin=null,b.zmax=null);d?(b.mmin=t,b.mmax=G):(b.mmin=null,b.mmax=null);return b},enumerable:!0,configurable:!0});c.prototype.writePoints=function(a,b,c,d){b.points=e.clone(this.points)};c.prototype.addPoint=function(a){this.clearCache();l.updateSupportFromPoint(this,
a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};c.prototype.clone=function(){var a={points:e.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new f(a)};c.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new k(b)};c.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;
this.clearCache();return new k(this.points.splice(a,1)[0],this.spatialReference)};c.prototype.setPoint=function(a,b){if(!this._validateInputs(a))return this;this.clearCache();l.updateSupportFromPoint(b);this.points[a]=b.toArray();return this};c.prototype.toJSON=function(a){return this.write(null,a)};c.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};d([h.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],c.prototype,"cache",void 0);d([h.property({dependsOn:["cache"]})],
c.prototype,"extent",null);d([h.property({type:[[Number]],json:{write:{isRequired:!0}}})],c.prototype,"points",void 0);d([h.writer("points")],c.prototype,"writePoints",null);return c=f=d([h.subclass("esri.geometry.Multipoint")],c);var f}(h.declared(f));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/layers/vectorTiles/geometry/support/zmUtils":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.updateSupportFromPoint=function(a,c,e){void 0===
e&&(e=!1);var b=a.hasM,d=a.hasZ;Array.isArray(c)?4!==c.length||b||d?3===c.length&&e&&!b?(d=!0,b=!1):3===c.length&&b&&d&&(d=b=!1):d=b=!0:(d=!d&&c.hasZ&&(!b||c.hasM),b=!b&&c.hasM&&(!d||c.hasZ));a.hasZ=d;a.hasM=b}})},"esri/layers/vectorTiles/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u){function A(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var z=A(Math.min),g=A(Math.max);c=function(a){function c(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.rings=[];b.type="polygon";return b}b(c,a);n=c;c.createEllipse=function(a){var b=a.center.x,c=a.center.y,g=a.center.z,d=a.center.m,e=a.center.hasZ,f=a.center.hasM,r=a.longAxis,l=a.shortAxis,p=a.numberOfPoints;a=a.view;for(var k=[],B=2*Math.PI/p,m=e?3:2,h=0;h<p;h++){var q=
a.toMap(r*Math.cos(h*B)+b,l*Math.sin(h*B)+c),q=[q.x,q.y];e&&(q[2]=g);f&&(q[m]=d);k.push(q)}k.push(k[0]);return new n({rings:[k],spatialReference:a.spatialReference})};c.createCircle=function(a){return n.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};c.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,g=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(g=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,
a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var d=a.zmin+.5*(a.zmax-a.zmin),n=0;n<b.length;n++)b[n].push(d);if(g&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),n=0;n<b.length;n++)b[n].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);g&&(b.hasM=!0);return new n(b)};c.prototype.normalizeCtorArgs=function(a,b){var c=null,g,d,n=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),g=a.hasZ,d=a.hasM):c=a;c=c||[];b=b||l.WGS84;
c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(n=c[0]&&c[0][0])void 0===g&&void 0===d?(g=2<n.length,d=!1):void 0===g?g=!d&&3<n.length:void 0===d&&(d=!g&&3<n.length);return{rings:c,spatialReference:b,hasZ:g,hasM:d}};Object.defineProperty(c.prototype,"centroid",{get:function(){var a=p.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new k;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.rings,n=a?3:2;if(!d.length||!d[0].length)return null;for(var e=d[0][0],f=e[0],e=e[1],r=d[0][0],l=r[0],r=r[1],p=void 0,k=void 0,B=void 0,h=void 0,q=[],t=0;t<d.length;t++){for(var v=d[t],y=v[0],u=y[0],y=y[1],A=v[0],M=A[0],A=A[1],N=void 0,Q=void 0,R=void 0,Y=void 0,W=0;W<v.length;W++){var L=v[W],da=L[0],fa=L[1],f=z(f,da),e=z(e,fa),l=g(l,da),r=g(r,fa),u=z(u,da),y=z(y,
fa),M=g(M,da),A=g(A,fa);a&&2<L.length&&(da=L[2],p=z(p,da),k=g(k,da),N=z(N,da),Q=g(Q,da));b&&L.length>n&&(Y=L[n],B=z(p,Y),h=g(k,Y),R=z(N,Y),Y=g(Q,Y))}q.push(new m({xmin:u,ymin:y,zmin:N,mmin:R,xmax:M,ymax:A,zmax:Q,mmax:Y,spatialReference:c}))}d=new m;d.xmin=f;d.ymin=e;d.xmax=l;d.ymax=r;d.spatialReference=c;a&&(d.zmin=p,d.zmax=k);b&&(d.mmin=B,d.mmax=h);d.cache._partwise=1<q.length?q:null;return d},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isSelfIntersecting",{get:function(){return v.isSelfIntersecting(this.rings)},
enumerable:!0,configurable:!0});c.prototype.writePaths=function(a,b,c,g){b.rings=e.clone(this.rings)};c.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var g=[],d=0,n=a.length;d<n;d++)g[d]=a[d].toArray();b[c]=g}return this}};c.prototype.clone=function(){var a=new n;a.spatialReference=this.spatialReference;a.rings=e.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};c.prototype.contains=function(a){if(!a)return!1;
y.canProject(a,this.spatialReference)&&(a=y.project(a,this.spatialReference));return q.polygonContainsPoint(this,a)};c.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return t.isClockwise(a,this.hasM,this.hasZ)};c.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new k(a[0],a[1],a[2],void 0,this.spatialReference):
c&&!b?new k(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new k(a[0],a[1],a[2],a[3],this.spatialReference):new k(a[0],a[1],this.spatialReference)};c.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();u.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};c.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new k(this.rings[a].splice(b,1)[0],
this.spatialReference)};c.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new k(a,b)})};c.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();u.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};c.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>
a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};c.prototype.toJSON=function(a){return this.write(null,a)};d([h.property({dependsOn:["hasM","hasZ","rings"]})],c.prototype,"cache",void 0);d([h.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"centroid",null);d([h.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"extent",null);d([h.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"isSelfIntersecting",null);d([h.property({type:[[[Number]]],
json:{write:{isRequired:!0}}})],c.prototype,"rings",void 0);d([h.writer("rings")],c.prototype,"writePaths",null);return c=n=d([h.subclass("esri.geometry.Polygon")],c);var n}(h.declared(f));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/layers/vectorTiles/geometry/support/centroid":function(){define(["require","exports","../support/coordsUtils"],function(c,a,b){function d(a,b){if(!a||!a.length)return null;for(var c=[],d=[],f=b?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,
-Infinity,Infinity,-Infinity],m=0,t=a.length;m<t;m++){var v=e(a[m],b,f);v&&d.push(v)}d.sort(function(a,c){var d=a[2]-c[2];0===d&&b&&(d=a[4]-c[4]);return d});d.length&&(m=6*d[0][2],c[0]=d[0][0]/m,c[1]=d[0][1]/m,b&&(m=6*d[0][4],c[2]=0!==m?d[0][3]/m:0),c[0]<f[0]||c[0]>f[1]||c[1]<f[2]||c[1]>f[3]||b&&(c[2]<f[4]||c[2]>f[5]))&&(c.length=0);if(!c.length)if(a=a[0]&&a[0].length?h(a[0],b):null)c[0]=a[0],c[1]=a[1],b&&2<a.length&&(c[2]=a[2]);else return null;return c}function e(a,b,c){for(var d=0,e=0,f=0,k=0,
m=0,h=0,u=a.length-1;h<u;h++){var A=a[h],z=A[0],g=A[1],n=A[2],r=a[h+1],B=r[0],C=r[1],D=r[2],F=z*C-B*g,k=k+F,d=d+(z+B)*F,e=e+(g+C)*F;b&&2<A.length&&2<r.length&&(F=z*D-B*n,f+=(n+D)*F,m+=F);z<c[0]&&(c[0]=z);z>c[1]&&(c[1]=z);g<c[2]&&(c[2]=g);g>c[3]&&(c[3]=g);b&&(n<c[4]&&(c[4]=n),n>c[5]&&(c[5]=n))}0<k&&(k*=-1);0<m&&(m*=-1);if(!k)return null;a=[d,e,.5*k];b&&(a[3]=f,a[4]=.5*m);return a}function h(a,c){for(var d=c?[0,0,0]:[0,0],e=c?[0,0,0]:[0,0],f=0,m=0,h=0,v=0,y=0,u=a.length;y<u-1;y++){var A=a[y],z=a[y+
1];if(A&&z){d[0]=A[0];d[1]=A[1];e[0]=z[0];e[1]=z[1];c&&2<A.length&&2<z.length&&(d[2]=A[2],e[2]=z[2]);var g=b.getLength(d,e);g&&(f+=g,A=b.getMidpoint(A,z),m+=g*A[0],h+=g*A[1],c&&2<A.length&&(v+=g*A[2]))}}return 0<f?c?[m/f,h/f,v/f]:[m/f,h/f]:a.length?a[0]:null}Object.defineProperty(a,"__esModule",{value:!0});a.extentCentroid=function(a){return a?a.hasZ?[a.xmax-a.xmin/2,a.ymax-a.ymin/2,a.zmax-a.zmin/2]:[a.xmax-a.xmin/2,a.ymax-a.ymin/2]:null};a.polygonCentroid=function(a){return a?d(a.rings,a.hasZ):null};
a.ringsCentroid=d;a.lineCentroid=h})},"esri/layers/vectorTiles/geometry/support/coordsUtils":function(){define(["require","exports"],function(c,a){function b(a,b){var c=b[0]-a[0],d=b[1]-a[1];return 2<a.length&&2<b.length?(a=a[2]-b[2],Math.sqrt(c*c+d*d+a*a)):Math.sqrt(c*c+d*d)}function d(a,b,c){var d=a[0]+c*(b[0]-a[0]),e=a[1]+c*(b[1]-a[1]);return 2<a.length&&2<b.length?[d,e,a[2]+c*(b[2]-a[2])]:[d,e]}Object.defineProperty(a,"__esModule",{value:!0});a.geometryToCoordinates=function(a){if(!a)return null;
if(Array.isArray(a))return a;var b=a.hasZ,c=a.hasM;if("point"===a.type)return c&&b?[a.x,a.y,a.z,a.m]:b?[a.x,a.y,a.z]:c?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var d=!1,e=!1;a.forEach(function(a){a.hasZ&&(d=!0);a.hasM&&(e=!0)});return a.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,
a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var c=.5*(a.zmax-a.zmin),f=0;f<b.length;f++)b[f].push(c);if(e&&a.hasM)for(a=.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b})}return null};a.getLength=b;a.getMidpoint=function(a,b){return d(a,b,.5)};a.getPathLength=function(a){for(var c=a.length,d=0,e=0;e<c-1;++e)d+=b(a[e],a[e+1]);return d};a.getPointOnPath=function(a,c){if(0>=c)return a[0];for(var e=a.length,f=0,k=0;k<e-1;++k){var l=b(a[k],a[k+1]);if(c-f<l)return d(a[k],a[k+1],(c-f)/l);f+=l}return a[e-
1]};a.isClockwise=function(a,b,c){for(var d=a.length,e=0,l=0,p=0,h=0;h<d;h++){var m=a[h],v=a[(h+1)%d],y=2,e=e+(m[0]*v[1]-v[0]*m[1]);2<m.length&&2<v.length&&c&&(l+=m[0]*v[2]-v[0]*m[2],y=3);m.length>y&&v.length>y&&b&&(p+=m[0]*v[y]-v[0]*m[y])}return 0>=e&&0>=l&&0>=p}})},"esri/layers/vectorTiles/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p){function q(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var t=q(Math.min),v=q(Math.max);c=function(a){function c(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.paths=[];b.type="polyline";return b}b(c,a);f=c;c.prototype.normalizeCtorArgs=function(a,b){var c=null,g,d,e=null;a&&!Array.isArray(a)?(c=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),g=a.hasZ,d=a.hasM):c=a;c=c||[];b=b||l.WGS84;c.length&&c[0]&&null!=
c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(e=c[0]&&c[0][0])void 0===g&&void 0===d?(g=2<e.length,d=!1):void 0===g?g=!d&&3<e.length:void 0===d&&(d=!g&&3<e.length);return{paths:c,spatialReference:b,hasZ:g,hasM:d}};Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.paths,e=a?3:2;if(!d.length||!d[0].length)return null;for(var f=d[0][0],l=f[0],f=f[1],p=d[0][0],k=p[0],p=p[1],h=void 0,q=void 0,y=void 0,A=void 0,u=[],K=0;K<d.length;K++){for(var aa=
d[K],ba=aa[0],ca=ba[0],ba=ba[1],ea=aa[0],ha=ea[0],ea=ea[1],U=void 0,Z=void 0,V=void 0,P=void 0,M=0;M<aa.length;M++){var N=aa[M],Q=N[0],R=N[1],l=t(l,Q),f=t(f,R),k=v(k,Q),p=v(p,R),ca=t(ca,Q),ba=t(ba,R),ha=v(ha,Q),ea=v(ea,R);a&&2<N.length&&(Q=N[2],h=t(h,Q),q=v(q,Q),U=t(U,Q),Z=v(Z,Q));b&&N.length>e&&(P=N[e],y=t(h,P),A=v(q,P),V=t(U,P),P=v(Z,P))}u.push(new m({xmin:ca,ymin:ba,zmin:U,mmin:V,xmax:ha,ymax:ea,zmax:Z,mmax:P,spatialReference:c}))}d=new m;d.xmin=l;d.ymin=f;d.xmax=k;d.ymax=p;d.spatialReference=
c;a&&(d.zmin=h,d.zmax=q);b&&(d.mmin=y,d.mmax=A);d.cache._partwise=1<u.length?u:null;return d},enumerable:!0,configurable:!0});c.prototype.writePaths=function(a,b,c,d){b.paths=e.clone(this.paths)};c.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,f=a.length;e<f;e++)d[e]=a[e].toArray();b[c]=d}return this}};c.prototype.clone=function(){var a=new f;a.spatialReference=this.spatialReference;a.paths=e.clone(this.paths);
a.hasZ=this.hasZ;a.hasM=this.hasM;return a};c.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new k(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new k(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new k(a[0],a[1],a[2],a[3],this.spatialReference):new k(a[0],a[1],this.spatialReference)};c.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();p.updateSupportFromPoint(this,
c);Array.isArray(c)||(c=c.toArray());this.paths[a].splice(b,0,c);return this};c.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new k(a,b)})};c.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new k(this.paths[a].splice(b,1)[0],this.spatialReference)};c.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,
b))return this;this.clearCache();p.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a][b]=c;return this};c.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};c.prototype.toJSON=function(a){return this.write(null,a)};d([h.property({dependsOn:["hasM","hasZ","paths"]})],c.prototype,"cache",void 0);d([h.property({dependsOn:["cache"],readOnly:!0})],
c.prototype,"extent",null);d([h.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],c.prototype,"paths",void 0);d([h.writer("paths")],c.prototype,"writePaths",null);return c=f=d([h.subclass("esri.geometry.Polyline")],c);var f}(h.declared(f));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/layers/vectorTiles/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),
function(c,a,b,d,e,h){return function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.x=0;b.y=0;b.z=void 0;return b}b(c,a);e=c;c.prototype.normalizeCtorArgs=function(a,b){return"number"===typeof a?{x:a,y:b}:Array.isArray(a)?{x:a[0],y:a[1]}:a};c.prototype.clone=function(){return new e({x:this.x,y:this.y,z:this.z})};c.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};d([h.property({type:Number})],c.prototype,
"x",void 0);d([h.property({type:Number})],c.prototype,"y",void 0);d([h.property({type:Number})],c.prototype,"z",void 0);return c=e=d([h.subclass("esri.geometry.ScreenPoint")],c);var e}(h.declared(e))})},"esri/layers/vectorTiles/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(c,a,b,d,e,h,m){function f(a){return void 0!==a.points}function k(a){return void 0!==a.x&&void 0!==a.y}function l(a){return void 0!==a.paths}
function p(a){return void 0!==a.rings}function q(a){if(a){if(k(a))return e.fromJSON(a);if(l(a))return m.fromJSON(a);if(p(a))return h.fromJSON(a);if(f(a))return d.fromJSON(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return b.fromJSON(a)}return null}Object.defineProperty(a,"__esModule",{value:!0});a.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(y){console.warn(y.stack)}return q(a)};a.isMultipoint=f;a.isPoint=k;a.isPolyline=l;
a.isPolygon=p;a.fromJSON=q;a.getJsonType=function(a){return a instanceof e?"esriGeometryPoint":a instanceof m?"esriGeometryPolyline":a instanceof h?"esriGeometryPolygon":a instanceof b?"esriGeometryEnvelope":a instanceof d?"esriGeometryMultipoint":null};var t={esriGeometryPoint:e,esriGeometryPolyline:m,esriGeometryPolygon:h,esriGeometryEnvelope:b,esriGeometryMultipoint:d};a.getGeometryType=function(a){return a&&t[a]||null}})},"esri/layers/vectorTiles/geometry/support/aaBoundingBox":function(){define(["require",
"exports","../Extent","./aaBoundingRect"],function(c,a,b,d){function e(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3],b[4],b[5]]}function h(a){return a[0]>=a[3]?0:a[3]-a[0]}function m(a){return a[1]>=a[4]?0:a[4]-a[1]}function f(a){return a[2]>=a[5]?0:a[5]-a[2]}function k(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function l(a){return 6===a.length}Object.defineProperty(a,"__esModule",{value:!0});a.create=e;a.fromValues=function(a,b,c,d,e,f){return[a,b,c,d,e,f]};
a.fromExtent=function(a,b){void 0===b&&(b=e());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.zmin;b[3]=a.xmax;b[4]=a.ymax;b[5]=a.zmax;return b};a.toExtent=function(a,c){return isFinite(a[2])||isFinite(a[5])?new b({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:c}):new b({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:c})};a.fromMinMax=function(a,b,c){void 0===c&&(c=e());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=b[0];c[4]=b[1];c[5]=b[2];return c};a.expandPointInPlace=function(a,b){b[0]<
a[0]&&(a[0]=b[0]);b[0]>a[3]&&(a[3]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[4]&&(a[4]=b[1]);b[2]<a[2]&&(a[2]=b[2]);b[2]>a[5]&&(a[5]=b[2])};a.expand=function(a,b,c){void 0===c&&(c=a);l(b)?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.max(a[3],b[3]),c[4]=Math.max(a[4],b[4]),c[5]=Math.max(a[5],b[5])):d.is(b)?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[3]=Math.max(a[3],b[2]),c[4]=Math.max(a[4],b[3])):2===b.length?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],
b[1]),c[3]=Math.max(a[3],b[0]),c[4]=Math.max(a[4],b[1])):3===b.length&&(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.max(a[3],b[0]),c[4]=Math.max(a[4],b[1]),c[5]=Math.max(a[5],b[2]));return c};a.expandWithBuffer=function(a,b,c,d,e){void 0===e&&(e=a);var f=a[0],l=a[1],k=a[2],g=a[3],n=a[4];a=a[5];for(var r=0;r<d;r++)f=Math.min(f,b[c+3*r]),l=Math.min(l,b[c+3*r+1]),k=Math.min(k,b[c+3*r+2]),g=Math.max(g,b[c+3*r]),n=Math.max(n,b[c+3*r+1]),a=Math.max(a,b[c+3*r+2]);
e[0]=f;e[1]=l;e[2]=k;e[3]=g;e[4]=n;e[5]=a;return e};a.expandWithNestedArray=function(a,b,c,d){void 0===d&&(d=a);var e=b.length,f=a[0],l=a[1],k=a[2],g=a[3],n=a[4];a=a[5];if(c)for(c=0;c<e;c++){var r=b[c],f=Math.min(f,r[0]),l=Math.min(l,r[1]),k=Math.min(k,r[2]),g=Math.max(g,r[0]),n=Math.max(n,r[1]);a=Math.max(a,r[2])}else for(c=0;c<e;c++)r=b[c],f=Math.min(f,r[0]),l=Math.min(l,r[1]),g=Math.max(g,r[0]),n=Math.max(n,r[1]);d[0]=f;d[1]=l;d[2]=k;d[3]=g;d[4]=n;d[5]=a;return d};a.allFinite=function(a){for(var b=
0;6>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=h;a.depth=m;a.height=f;a.diameter=function(a){var b=h(a),c=f(a);a=m(a);return Math.sqrt(b*b+c*c+a*a)};a.center=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=a[0]+h(a)/2;b[1]=a[1]+m(a)/2;b[2]=a[2]+f(a)/2;return b};a.size=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=h(a);b[1]=m(a);b[2]=f(a);return b};a.maximumDimension=function(a){return Math.max(h(a),f(a),m(a))};a.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=
a[4]&&b[2]<=a[5]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[2]>=a[2]-c&&b[0]<=a[3]+c&&b[1]<=a[4]+c&&b[2]<=a[5]+c};a.contains=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])};a.offset=function(a,b,c,d,e){void 0===e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+c;e[2]=a[2]+d;e[3]=
a[3]+b;e[4]=a[4]+c;e[5]=a[5]+d;return e};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c[2]=b[2];c!==a&&(c[3]=a[3],c[4]=a[4],c[5]=a[5]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[3]=b[0];c[4]=b[1];c[5]=b[2];c!==a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);return a};a.set=k;a.empty=function(b){return b?k(b,a.NEGATIVE_INFINITY):e(a.NEGATIVE_INFINITY)};a.toRect=function(a,b){b||(b=d.create());b[0]=a[0];b[1]=a[1];b[2]=a[3];b[3]=a[4];return b};a.fromRect=function(a,b){a[0]=b[0];a[1]=
b[1];a[3]=b[2];a[4]=b[3];return a};a.is=l;a.isPoint=function(a){return 0===h(a)&&0===m(a)&&0===f(a)};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!l(a)||!l(b))return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0,0,0]})},"esri/layers/vectorTiles/geometry/support/aaBoundingRect":function(){define(["require",
"exports","../../geometry"],function(c,a,b){function d(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3]]}function e(a){return a[0]>=a[2]?0:a[2]-a[0]}function h(a){return a[1]>=a[3]?0:a[3]-a[1]}function m(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function f(a){return 4===a.length}function k(a,b,c){return a<b?b:a>c?c:a}Object.defineProperty(a,"__esModule",{value:!0});a.create=d;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,b,c,e,f){void 0===f&&(f=d());f[0]=
a;f[1]=b;f[2]=c;f[3]=e;return f};a.fromExtent=function(a,b){void 0===b&&(b=d());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};a.toExtent=function(a,c){return new b.Extent({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:c})};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};a.expand=function(a,b,c){void 0===c&&(c=a);if("length"in b)if(f(b))c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],
b[2]),c[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[0]),c[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":c[0]=Math.min(a[0],b.xmin);c[1]=Math.min(a[1],b.ymin);c[2]=Math.max(a[2],b.xmax);c[3]=Math.max(a[3],b.ymax);break;case "point":c[0]=Math.min(a[0],b.x),c[1]=Math.min(a[1],b.y),c[2]=Math.max(a[2],b.x),c[3]=Math.max(a[3],b.y)}return c};a.expandWithNestedArray=function(a,b,c){void 0===c&&(c=a);var d=b.length,
e=a[0],f=a[1],l=a[2];a=a[3];for(var k=0;k<d;k++){var p=b[k],e=Math.min(e,p[0]),f=Math.min(f,p[1]),l=Math.max(l,p[0]);a=Math.max(a,p[1])}c[0]=e;c[1]=f;c[2]=l;c[3]=a;return c};a.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=e;a.height=h;a.diameter=function(a){var b=e(a);a=h(a);return Math.sqrt(b*b+a*a)};a.area=function(a){return e(a)*h(a)};a.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=a[0]+e(a)/2;b[1]=a[1]+h(a)/2;return b};a.containsPoint=function(a,b){return b[0]>=
a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};a.intersection=function(a,b,c){void 0===c&&(c=a);var d=b[0],e=b[1],f=b[2];b=b[3];c[0]=k(a[0],d,f);c[1]=k(a[1],e,b);c[2]=k(a[2],d,f);c[3]=k(a[3],e,b);return c};
a.offset=function(a,b,c,d){void 0===d&&(d=a);d[0]=a[0]+b;d[1]=a[1]+c;d[2]=a[2]+b;d[3]=a[3]+c;return d};a.pad=function(a,b,c){void 0===c&&(c=a);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],c[3]=a[3]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};a.set=m;a.empty=function(b){return b?m(b,a.NEGATIVE_INFINITY):d(a.NEGATIVE_INFINITY)};a.is=f;a.isPoint=
function(a){return(0===e(a)||!isFinite(a[0]))&&(0===h(a)||!isFinite(a[1]))};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!f(a)||!f(b))return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0]})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ./dehydratedFeatureComparison".split(" "),
function(c,a,b,d,e,h,m){function f(a){switch(a){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function k(a,c,g,d){return{uid:b.generateUID(),objectId:d&&a.attributes?a.attributes[d]:null,attributes:a.attributes,geometry:l(a.geometry,c,g),visible:!0}}function l(a,b,c){if(!a)return null;switch(b){case "point":return{x:a.x,y:a.y,
z:a.z,type:b,spatialReference:c};case "polyline":var g=a;return{paths:g.paths,hasZ:g.hasZ,hasM:g.hasM,type:b,spatialReference:c};case "polygon":return{rings:a.rings,hasZ:g.hasZ,hasM:g.hasM,type:b,spatialReference:c};case "multipoint":return{points:a.points,hasZ:g.hasZ,hasM:g.hasM,type:b,spatialReference:c};case "extent":return{xmin:a.xmin,ymin:a.ymin,zmin:a.zmin,mmin:a.mmin,xmax:a.xmax,ymax:a.ymax,zmax:a.zmax,mmax:a.mmax,hasZ:a.hasZ,hasM:a.hasM,type:b,spatialReference:c}}}function p(a){return"point"===
a.type?null!=a.z:"extent"===a.type?null!=a.zmin:a.hasZ}function q(a){return"declaredClass"in a}function t(a,b){e.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[3]=a.x;b[1]=b[4]=a.y;p(a)&&(b[2]=b[5]=a.z);break;case "polyline":for(var c=0;c<a.paths.length;c++)e.expandWithNestedArray(b,a.paths[c],p(a));break;case "polygon":for(c=0;c<a.rings.length;c++)e.expandWithNestedArray(b,a.rings[c],p(a));break;case "multipoint":e.expandWithNestedArray(b,a.points,p(a));break;case "extent":b[0]=
a.xmin,b[1]=a.ymin,b[3]=a.xmax,b[4]=a.ymax,null!=a.zmin&&(b[2]=a.zmin),null!=a.zmax&&(b[5]=a.zmax)}}function v(a,b){h.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[2]=a.x;b[1]=b[3]=a.y;break;case "polyline":for(var c=0;c<a.paths.length;c++)h.expandWithNestedArray(b,a.paths[c]);break;case "polygon":for(c=0;c<a.rings.length;c++)h.expandWithNestedArray(b,a.rings[c]);break;case "multipoint":h.expandWithNestedArray(b,a.points);break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[2]=
a.xmax,b[3]=a.ymax}}Object.defineProperty(a,"__esModule",{value:!0});a.equals=m.equals;a.isPoint=function(a){return"point"===a.type};a.mapJSONGeometryType=f;a.fromFeatureSetJSON=function(a){var b=f(a.geometryType),c=d.fromJSON(a.spatialReference);return a.features.map(function(g){return k(g,b,c,a.objectIdFieldName)})};a.fromJSON=k;a.fromJSONGeometry=l;a.makeDehydratedPoint=function(a,b,c,d){return{x:a,y:b,z:c,spatialReference:d,type:"point"}};a.hasZ=p;a.isHydratedGeometry=function(a){return"declaredClass"in
a};a.isHydratedGraphic=q;a.hydrateGraphic=function(a,c){if(!a||q(a))return a;c=new b({layer:c,sourceLayer:c});c.read(a);return c};a.computeAABB=t;a.expandAABB=function(a,b){t(a,y);e.expand(b,y)};a.computeAABR=v;a.expandAABR=function(a,b){v(a,u);h.expand(b,u)};var y=e.create(),u=h.create()})},"esri/layers/vectorTiles/Graphic":function(){define(["require","exports","esri/graphic","./core/tsSupport/declareExtendsHelper","./core/JSONSupport"],function(c,a,b,d,e){c=function(a){function c(b){return a.call(this)||
this}d(c,a);c.fromJSON=function(a){return new b(a)};return c}(e);var h=0;(function(a){a.generateUID=function(){return h++}})(c||(c={}));return c})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports"],function(c,a){function b(a,b){if(a===b)return!0;if(null==a||null==b||a.length!==b.length)return!1;for(var c=0;c<a.length;c++){var d=a[c],e=b[c];if(d.length!==e.length)return!1;for(var f=0;f<d.length;f++)if(d[f]!==e[f])return!1}return!0}function d(a,
c){if(a===c)return!0;if(null==a||null==c||a.length!==c.length)return!1;for(var d=0;d<a.length;d++)if(!b(a[d],c[d]))return!1;return!0}function e(a,b){return a===b||a&&b&&a.equals(b)}function h(a,c){if(a===c)return!0;if(!a||!c||a.type!==c.type)return!1;switch(a.type){case "point":return e(a.spatialReference,c.spatialReference)?a.x===c.x&&a.y===c.y&&a.z===c.z&&a.m===c.m:!1;case "extent":return a.hasZ===c.hasZ&&a.hasM===c.hasM&&e(a.spatialReference,c.spatialReference)?a.xmin===c.xmin&&a.ymin===c.ymin&&
a.zmin===c.zmin&&a.xmax===c.xmax&&a.ymax===c.ymax&&a.zmax===c.zmax:!1;case "polyline":return a.hasZ===c.hasZ&&a.hasM===c.hasM&&e(a.spatialReference,c.spatialReference)?d(a.paths,c.paths):!1;case "polygon":return a.hasZ===c.hasZ&&a.hasM===c.hasM&&e(a.spatialReference,c.spatialReference)?d(a.rings,c.rings):!1;case "multipoint":return a.hasZ===c.hasZ&&a.hasM===c.hasM&&e(a.spatialReference,c.spatialReference)?b(a.points,c.points):!1;case "mesh":return!1}}function m(a,b){if(a===b)return!0;if(!a||!b)return!1;
for(var c in a)if(!(c in b)||a[c]!==b[c])return!1;for(c in b)if(!(c in a))return!1;return!0}Object.defineProperty(a,"__esModule",{value:!0});a.equals=function(a,b){return a===b?!0:null!=a&&null!=b&&a.objectId===b.objectId&&h(a.geometry,b.geometry)&&m(a.attributes,b.attributes)?!0:!1}})},"esri/layers/vectorTiles/views/3d/lib/glMatrix":function(){define([],function(){var c={};(function(a,b){b(a,!0);b(a,!1)})(c,function(a,b){var c={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),
b=new Int32Array(a.buffer);c.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var g=a[0];return g*(1.5-.5*c*g*g)}}else c.invsqrt=function(a){return 1/Math.sqrt(a)}})();var e=Array;"undefined"!=typeof Float32Array&&(e=b?Float32Array:Array);var h={create:function(a){var b=new e(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var g=new e(3);g[0]=a;g[1]=b;g[2]=c;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=
a;d[1]=b;d[2]=c;return d},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=
Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],g=a[1];a=a[2];var d=Math.sqrt(c*c+g*g+a*a);if(!d)return b[0]=0,b[1]=0,b[2]=0,b;if(1===d)return b[0]=c,b[1]=g,b[2]=a,b;d=1/d;b[0]=c*d;b[1]=
g*d;b[2]=a*d;return b},cross:function(a,b,c){c||(c=a);var g=a[0],d=a[1];a=a[2];var n=b[0],e=b[1];b=b[2];c[0]=d*b-a*e;c[1]=a*n-g*b;c[2]=g*e-d*n;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var g=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(g*g+d*d+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=g*b;c[1]=
d*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],g=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+g*g+a*a)},dist2:function(a,b){var c=b[0]-a[0],g=b[1]-a[1];a=b[2]-a[2];return c*c+g*g+a*a}},m=null,f=new e(4);h.unproject=function(a,b,c,d,e){e||(e=a);m||(m=y.create());var g=m;f[0]=2*(a[0]-d[0])/d[2]-1;f[1]=2*(a[1]-d[1])/d[3]-1;f[2]=2*a[2]-1;f[3]=1;y.multiply(c,b,g);if(!y.inverse(g))return null;
y.multiplyVec4(g,f);if(0===f[3])return null;e[0]=f[0]/f[3];e[1]=f[1]/f[3];e[2]=f[2]/f[3];return e};var k=h.createFrom(1,0,0),l=h.createFrom(0,1,0),p=h.createFrom(0,0,1);h.rotationTo=function(a,b,c){c||(c=u.create());var g=h.dot(a,b),d=h.create();if(1<=g)u.set(A,c);else if(-.999999>g)h.cross(k,a,d),1E-6>d.length&&h.cross(l,a,d),1E-6>d.length&&h.cross(p,a,d),h.normalize(d),u.fromAxisAngle(d,Math.PI,c);else{var g=Math.sqrt(2*(1+g)),n=1/g;h.cross(a,b,d);c[0]=d[0]*n;c[1]=d[1]*n;c[2]=d[2]*n;c[3]=.5*g;u.normalize(c)}1<
c[3]?c[3]=1:-1>c[3]&&(c[3]=-1);return c};var q=h.create(),t=h.create();h.project=function(a,b,c,d){d||(d=a);h.direction(b,c,q);h.subtract(a,b,t);a=h.dot(q,t);h.scale(q,a,d);h.add(d,b,d)};h.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var b=new e(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,d,f,k,l,p,h){var g=new e(9);g[0]=a;g[1]=
b;g[2]=c;g[3]=d;g[4]=f;g[5]=k;g[6]=l;g[7]=p;g[8]=h;return g},determinant:function(a){var b=a[3],c=a[4],g=a[5],d=a[6],e=a[7],f=a[8];return a[0]*(f*c-g*e)+a[1]*(-f*b+g*d)+a[2]*(e*b-c*d)},inverse:function(a,b){var c=a[0],g=a[1],d=a[2],n=a[3],e=a[4],f=a[5],k=a[6],l=a[7];a=a[8];var p=a*e-f*l,h=-a*n+f*k,m=l*n-e*k,q=c*p+g*h+d*m;if(!q)return null;q=1/q;b||(b=v.create());b[0]=p*q;b[1]=(-a*g+d*l)*q;b[2]=(f*g-d*e)*q;b[3]=h*q;b[4]=(a*c-d*k)*q;b[5]=(-f*c+d*n)*q;b[6]=m*q;b[7]=(-l*c+g*k)*q;b[8]=(e*c-g*n)*q;return b},
multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],n=a[2],e=a[3],f=a[4],r=a[5],k=a[6],l=a[7];a=a[8];var p=b[0],h=b[1],m=b[2],q=b[3],t=b[4],v=b[5],y=b[6],z=b[7];b=b[8];c[0]=p*g+h*e+m*k;c[1]=p*d+h*f+m*l;c[2]=p*n+h*r+m*a;c[3]=q*g+t*e+v*k;c[4]=q*d+t*f+v*l;c[5]=q*n+t*r+v*a;c[6]=y*g+z*e+b*k;c[7]=y*d+z*f+b*l;c[8]=y*n+z*r+b*a;return c},add:function(a,b,c){c||(c=a);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c},
subtract:function(a,b,c){c||(c=a);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c},multiplyVec2:function(a,b,c){c||(c=b);var g=b[0];b=b[1];c[0]=g*a[0]+b*a[3]+a[6];c[1]=g*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],d=b[1];b=b[2];c[0]=g*a[0]+d*a[3]+b*a[6];c[1]=g*a[1]+d*a[4]+b*a[7];c[2]=g*a[2]+d*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];
b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],g=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=g;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=y.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];
b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},y={create:function(a){var b=new e(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],
b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,d,f,k,l,p,h,m,q,t,v,y,z,u){var g=new e(16);g[0]=a;g[1]=b;g[2]=c;g[3]=d;g[4]=f;g[5]=k;g[6]=l;g[7]=p;g[8]=h;g[9]=m;g[10]=q;g[11]=t;g[12]=v;g[13]=y;g[14]=z;g[15]=u;return g},createFromMatrixRowMajor:function(a){var b=new e(16);b[0]=
a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new e(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];
b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=y.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||
a===b){b=a[1];var c=a[2],g=a[3],d=a[6],n=a[7],e=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=d;a[11]=a[14];a[12]=g;a[13]=n;a[14]=e;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],g=a[2],d=a[3],e=a[4],f=a[5],k=a[6],l=a[7],p=a[8],h=a[9],m=a[10],q=a[11],t=a[12],v=a[13],y=a[14];a=a[15];return t*
h*k*d-p*v*k*d-t*f*m*d+e*v*m*d+p*f*y*d-e*h*y*d-t*h*g*l+p*v*g*l+t*c*m*l-b*v*m*l-p*c*y*l+b*h*y*l+t*f*g*q-e*v*g*q-t*c*k*q+b*v*k*q+e*c*y*q-b*f*y*q-p*f*g*a+e*h*g*a+p*c*k*a-b*h*k*a-e*c*m*a+b*f*m*a},inverse:function(a,b){b||(b=a);var c=a[0],g=a[1],d=a[2],n=a[3],e=a[4],f=a[5],k=a[6],l=a[7],p=a[8],h=a[9],m=a[10],q=a[11],t=a[12],v=a[13],y=a[14];a=a[15];var z=c*f-g*e,u=c*k-d*e,A=c*l-n*e,Z=g*k-d*f,V=g*l-n*f,P=d*l-n*k,M=p*v-h*t,N=p*y-m*t,Q=p*a-q*t,R=h*y-m*v,Y=h*a-q*v,W=m*a-q*y,L=z*W-u*Y+A*R+Z*Q-V*N+P*M;if(!L)return null;
L=1/L;b[0]=(f*W-k*Y+l*R)*L;b[1]=(-g*W+d*Y-n*R)*L;b[2]=(v*P-y*V+a*Z)*L;b[3]=(-h*P+m*V-q*Z)*L;b[4]=(-e*W+k*Q-l*N)*L;b[5]=(c*W-d*Q+n*N)*L;b[6]=(-t*P+y*A-a*u)*L;b[7]=(p*P-m*A+q*u)*L;b[8]=(e*Y-f*Q+l*M)*L;b[9]=(-c*Y+g*Q-n*M)*L;b[10]=(t*V-v*A+a*z)*L;b[11]=(-p*V+h*A-q*z)*L;b[12]=(-e*R+f*N-k*M)*L;b[13]=(c*R-g*N+d*M)*L;b[14]=(-t*Z+v*u-y*z)*L;b[15]=(p*Z-h*u+m*z)*L;return b},toRotationMat:function(a,b){b||(b=y.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];
b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],g=a[1],d=a[2],n=a[4],e=a[5],f=a[6],k=a[8],l=a[9];a=a[10];var p=a*e-f*l,h=-a*n+f*k,m=l*n-e*k,q=c*p+g*h+d*m;if(!q)return null;q=1/q;b||(b=v.create());b[0]=p*q;b[1]=(-a*g+d*l)*q;b[2]=(f*g-d*e)*q;b[3]=h*q;b[4]=(a*c-d*k)*q;b[5]=(-f*c+d*n)*q;b[6]=m*q;b[7]=
(-l*c+g*k)*q;b[8]=(e*c-g*n)*q;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],n=a[2],e=a[3],f=a[4],r=a[5],k=a[6],l=a[7],p=a[8],h=a[9],m=a[10],q=a[11],t=a[12],v=a[13],y=a[14];a=a[15];var z=b[0],u=b[1],A=b[2],V=b[3],P=b[4],M=b[5],N=b[6],Q=b[7],R=b[8],Y=b[9],W=b[10],L=b[11],da=b[12],fa=b[13],ja=b[14];b=b[15];c[0]=z*g+u*f+A*p+V*t;c[1]=z*d+u*r+A*h+V*v;c[2]=z*n+u*k+A*m+V*y;c[3]=z*e+u*l+A*q+V*a;c[4]=P*g+M*f+N*p+Q*t;c[5]=P*d+M*r+N*h+Q*v;c[6]=P*n+M*k+N*m+Q*y;c[7]=P*e+M*l+N*q+Q*a;c[8]=R*g+Y*f+
W*p+L*t;c[9]=R*d+Y*r+W*h+L*v;c[10]=R*n+Y*k+W*m+L*y;c[11]=R*e+Y*l+W*q+L*a;c[12]=da*g+fa*f+ja*p+b*t;c[13]=da*d+fa*r+ja*h+b*v;c[14]=da*n+fa*k+ja*m+b*y;c[15]=da*e+fa*l+ja*q+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],d=b[1];b=b[2];c[0]=a[0]*g+a[4]*d+a[8]*b+a[12];c[1]=a[1]*g+a[5]*d+a[9]*b+a[13];c[2]=a[2]*g+a[6]*d+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var g=b[0],d=b[1],n=b[2];b=b[3];c[0]=a[0]*g+a[4]*d+a[8]*n+a[12]*b;c[1]=a[1]*g+a[5]*d+a[9]*n+a[13]*b;c[2]=a[2]*
g+a[6]*d+a[10]*n+a[14]*b;c[3]=a[3]*g+a[7]*d+a[11]*n+a[15]*b;return c},translate:function(a,b,c){var g=b[0],d=b[1];b=b[2];var n,e,f,r,k,l,p,h,m,q,t,v;if(!c||a===c)return a[12]=a[0]*g+a[4]*d+a[8]*b+a[12],a[13]=a[1]*g+a[5]*d+a[9]*b+a[13],a[14]=a[2]*g+a[6]*d+a[10]*b+a[14],a[15]=a[3]*g+a[7]*d+a[11]*b+a[15],a;n=a[0];e=a[1];f=a[2];r=a[3];k=a[4];l=a[5];p=a[6];h=a[7];m=a[8];q=a[9];t=a[10];v=a[11];c[0]=n;c[1]=e;c[2]=f;c[3]=r;c[4]=k;c[5]=l;c[6]=p;c[7]=h;c[8]=m;c[9]=q;c[10]=t;c[11]=v;c[12]=n*g+k*d+m*b+a[12];
c[13]=e*g+l*d+q*b+a[13];c[14]=f*g+p*d+t*b+a[14];c[15]=r*g+h*d+v*b+a[15];return c},scale:function(a,b,c){var g=b[0],d=b[1];b=b[2];if(!c||a===c)return a[0]*=g,a[1]*=g,a[2]*=g,a[3]*=g,a[4]*=d,a[5]*=d,a[6]*=d,a[7]*=d,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*g;c[1]=a[1]*g;c[2]=a[2]*g;c[3]=a[3]*g;c[4]=a[4]*d;c[5]=a[5]*d;c[6]=a[6]*d;c[7]=a[7]*d;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*
a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var g=c[0],n=c[1];c=c[2];var e=Math.sqrt(g*g+n*n+c*c),f,r,k,l,p,h,m,B,q,t,v,y,z,u,A,P,M,N,Q,R;if(!e)return null;1!==e&&(e=1/e,g*=e,n*=e,c*=e);f=Math.sin(b);r=Math.cos(b);k=1-r;b=a[0];e=a[1];l=a[2];p=a[3];h=a[4];m=a[5];B=a[6];q=a[7];t=a[8];v=a[9];y=a[10];z=a[11];u=g*g*k+r;A=n*g*k+c*f;P=c*g*k-n*f;M=g*n*k-c*f;N=n*n*k+r;Q=c*n*k+g*f;R=g*c*k+n*f;g=n*c*k-g*f;n=c*c*k+r;
d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*u+h*A+t*P;d[1]=e*u+m*A+v*P;d[2]=l*u+B*A+y*P;d[3]=p*u+q*A+z*P;d[4]=b*M+h*N+t*Q;d[5]=e*M+m*N+v*Q;d[6]=l*M+B*N+y*Q;d[7]=p*M+q*N+z*Q;d[8]=b*R+h*g+t*n;d[9]=e*R+m*g+v*n;d[10]=l*R+B*g+y*n;d[11]=p*R+q*g+z*n;return d},rotateX:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var d=a[4],n=a[5],e=a[6],f=a[7],r=a[8],k=a[9],l=a[10],p=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=
d*b+r*g;c[5]=n*b+k*g;c[6]=e*b+l*g;c[7]=f*b+p*g;c[8]=d*-g+r*b;c[9]=n*-g+k*b;c[10]=e*-g+l*b;c[11]=f*-g+p*b;return c},rotateY:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var d=a[0],n=a[1],e=a[2],f=a[3],r=a[8],k=a[9],l=a[10],p=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=d*b+r*-g;c[1]=n*b+k*-g;c[2]=e*b+l*-g;c[3]=f*b+p*-g;c[8]=d*g+r*b;c[9]=n*g+k*b;c[10]=e*g+l*b;c[11]=f*g+p*b;return c},rotateZ:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);
var d=a[0],n=a[1],e=a[2],f=a[3],r=a[4],k=a[5],l=a[6],p=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=d*b+r*g;c[1]=n*b+k*g;c[2]=e*b+l*g;c[3]=f*b+p*g;c[4]=d*-g+r*b;c[5]=n*-g+k*b;c[6]=e*-g+l*b;c[7]=f*-g+p*b;return c},frustum:function(a,b,c,d,e,f,k){k||(k=y.create());var g=b-a,n=d-c,r=f-e;k[0]=2*e/g;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2*e/n;k[6]=0;k[7]=0;k[8]=(b+a)/g;k[9]=(d+c)/n;k[10]=-(f+e)/r;k[11]=-1;k[12]=0;k[13]=0;k[14]=-(f*e*2)/
r;k[15]=0;return k},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return y.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,f,k){k||(k=y.create());var g=b-a,n=d-c,r=f-e;k[0]=2/g;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2/n;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=-2/r;k[11]=0;k[12]=-(a+b)/g;k[13]=-(d+c)/n;k[14]=-(f+e)/r;k[15]=1;return k},lookAt:function(a,b,c,d){d||(d=y.create());var g,n,e,f,r,k,l,p,h=a[0],m=a[1];a=a[2];e=c[0];f=c[1];n=c[2];l=b[0];c=b[1];g=b[2];if(h===l&&m===c&&a===g)return y.identity(d);
b=h-l;c=m-c;l=a-g;p=1/Math.sqrt(b*b+c*c+l*l);b*=p;c*=p;l*=p;g=f*l-n*c;n=n*b-e*l;e=e*c-f*b;(p=Math.sqrt(g*g+n*n+e*e))?(p=1/p,g*=p,n*=p,e*=p):e=n=g=0;f=c*e-l*n;r=l*g-b*e;k=b*n-c*g;(p=Math.sqrt(f*f+r*r+k*k))?(p=1/p,f*=p,r*=p,k*=p):k=r=f=0;d[0]=g;d[1]=f;d[2]=b;d[3]=0;d[4]=n;d[5]=r;d[6]=c;d[7]=0;d[8]=e;d[9]=k;d[10]=l;d[11]=0;d[12]=-(g*h+n*m+e*a);d[13]=-(f*h+r*m+k*a);d[14]=-(b*h+c*m+l*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=y.create());var d=a[0],g=a[1],n=a[2],e=a[3],f=d+d,r=
g+g,k=n+n;a=d*f;var l=d*r,d=d*k,p=g*r,g=g*k,n=n*k,f=e*f,r=e*r,e=e*k;c[0]=1-(p+n);c[1]=l+e;c[2]=d-r;c[3]=0;c[4]=l-e;c[5]=1-(a+n);c[6]=g+f;c[7]=0;c[8]=d+r;c[9]=g-f;c[10]=1-(a+p);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},u={create:function(a){var b=new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=u.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},A=u.identity();u.calculateW=function(a,b){var c=a[0],d=a[1],g=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-g*g)),a;b[0]=c;b[1]=d;b[2]=g;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-g*g));return b};u.dot=function(a,b){return a[0]*b[0]+
a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};u.inverse=function(a,b){var c=a[0],d=a[1],g=a[2],n=a[3],c=(c=c*c+d*d+g*g+n*n)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};u.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};u.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};u.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],
g=a[2];a=a[3];var n=Math.sqrt(c*c+d*d+g*g+a*a);if(0===n)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;n=1/n;b[0]=c*n;b[1]=d*n;b[2]=g*n;b[3]=a*n;return b};u.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};u.multiply=function(a,b,c){c||(c=a);var d=a[0],g=a[1],n=a[2];a=a[3];var e=b[0],f=b[1],r=b[2];b=b[3];c[0]=d*b+a*e+g*r-n*f;c[1]=g*b+a*f+n*e-d*r;c[2]=n*b+a*r+d*f-g*e;c[3]=a*b-d*e-g*f-n*r;return c};u.multiplyVec3=
function(a,b,c){c||(c=b);var d=b[0],g=b[1],n=b[2];b=a[0];var e=a[1],f=a[2];a=a[3];var r=a*d+e*n-f*g,k=a*g+f*d-b*n,l=a*n+b*g-e*d,d=-b*d-e*g-f*n;c[0]=r*a+d*-b+k*-f-l*-e;c[1]=k*a+d*-e+l*-b-r*-f;c[2]=l*a+d*-f+r*-e-k*-b;return c};u.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};u.toMat3=function(a,b){b||(b=v.create());var c=a[0],d=a[1],g=a[2],n=a[3],e=c+c,f=d+d,k=g+g;a=c*e;var l=c*f,c=c*k,p=d*f,d=d*k,g=g*k,e=n*e,f=n*
f,n=n*k;b[0]=1-(p+g);b[1]=l+n;b[2]=c-f;b[3]=l-n;b[4]=1-(a+g);b[5]=d+e;b[6]=c+f;b[7]=d-e;b[8]=1-(a+p);return b};u.toMat4=function(a,b){b||(b=y.create());var c=a[0],d=a[1],g=a[2],e=a[3],n=c+c,f=d+d,k=g+g;a=c*n;var l=c*f,c=c*k,p=d*f,d=d*k,g=g*k,n=e*n,f=e*f,e=e*k;b[0]=1-(p+g);b[1]=l+e;b[2]=c-f;b[3]=0;b[4]=l-e;b[5]=1-(a+g);b[6]=d+n;b[7]=0;b[8]=c+f;b[9]=d-n;b[10]=1-(a+p);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};u.slerp=function(a,b,c,d){d||(d=a);var g=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],e,
n;if(1<=Math.abs(g))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;e=Math.acos(g);n=Math.sqrt(1-g*g);if(.001>Math.abs(n))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;g=Math.sin((1-c)*e)/n;c=Math.sin(c*e)/n;d[0]=a[0]*g+b[0]*c;d[1]=a[1]*g+b[1]*c;d[2]=a[2]*g+b[2]*c;d[3]=a[3]*g+b[3]*c;return d};u.fromRotationMatrix=function(a,b){b||(b=u.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=.5*d,d=.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*
d,b[2]=(a[3]-a[1])*d;else{d=u.fromRotationMatrix.s_iNext=u.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var g=d[c],e=d[g];d=Math.sqrt(a[3*c+c]-a[3*g+g]-a[3*e+e]+1);b[c]=.5*d;d=.5/d;b[3]=(a[3*e+g]-a[3*g+e])*d;b[g]=(a[3*g+c]+a[3*c+g])*d;b[e]=(a[3*e+c]+a[3*c+e])*d}return b};v.toQuat4=u.fromRotationMatrix;(function(){var a=v.create();u.fromAxes=function(b,c,d,g){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return u.fromRotationMatrix(a,
g)}})();u.identity=function(a){a||(a=u.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};u.fromAngleAxis=function(a,b,c){c||(c=u.create());a*=.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];return c};u.toAngleAxis=function(a,b){b||(b=a);var d=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<d?(b[3]=2*Math.acos(a[3]),d=c.invsqrt(d),b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};u.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var z={create:function(a){var b=
new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=z.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,
b){b||(b=a);var c=a[0],d=a[1],g=a[2];a=a[3];var e=c*a-g*d;if(!e)return null;e=1/e;b[0]=a*e;b[1]=-d*e;b[2]=-g*e;b[3]=c*e;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],g=a[1],e=a[2];a=a[3];c[0]=d*b[0]+g*b[2];c[1]=d*b[1]+g*b[3];c[2]=e*b[0]+a*b[2];c[3]=e*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var d=a[0],g=a[1],e=a[2];a=a[3];var n=Math.sin(b);b=Math.cos(b);c[0]=d*b+g*n;c[1]=d*-n+g*b;c[2]=e*b+a*n;c[3]=e*-n+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=
d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],g=a[2],e=a[3],f=b[0];b=b[1];c[0]=a[0]*f;c[1]=d*b;c[2]=g*f;c[3]=e*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};b=b?"":"d";a["glMath"+b]=c;a["vec2"+b]={create:function(a){var b=new e(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new e(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,
b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*
b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+b]=h;a["vec4"+b]={create:function(a){var b=new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];
return b},set4:function(a,b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+b]=z;a["mat3"+b]=v;a["mat4"+b]=y;a["quat4"+b]=u});return c})},"esri/layers/vectorTiles/views/3d/support/mathUtils":function(){define(["require",
"exports","../lib/glMatrix"],function(c,a,b){function d(a){return Math.asin(1<a?1:-1>a?-1:a)}function e(a){return Math.acos(1<a?1:-1>a?-1:a)}function h(a,b,c){return a<b?b:a>c?c:a}function m(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(a,"__esModule",{value:!0});a.deg2rad=function(a){return a*Math.PI/180};a.rad2deg=function(a){return 180*a/Math.PI};a.asin=d;a.acos=e;a.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/
Math.LN2};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};a.makeOrthonormal=function(a,c,d){d=d||a;var e=b.vec3d.dot(a,c);b.vec3d.set3(a[0]-e*c[0],a[1]-e*c[1],a[2]-e*c[2],d);b.vec3d.normalize(d)};a.tangentFrame=function(a,c,d){Math.abs(a[0])>Math.abs(a[1])?b.vec3d.set3(0,1,0,c):b.vec3d.set3(1,0,0,c);b.vec3d.cross(a,c,d);b.vec3d.normalize(c);b.vec3d.cross(d,a,c);b.vec3d.normalize(d)};a.cartesianToSpherical=function(a,
c){var e=b.vec3d.length(a),f=d(a[2]/e);b.vec3d.set3(e,f,Math.atan2(a[1]/e,a[0]/e),c)};a.sphericalToCartesian=function(a,c){var d=a[0],e=a[1];a=a[2];var f=Math.cos(e);b.vec3d.set3(d*f*Math.cos(a),d*f*Math.sin(a),d*Math.sin(e),c)};a.lerp=function(a,b,c){return a+(b-a)*c};a.bilerp=function(a,b,c,d,e,f){a+=(b-a)*e;return a+(c+(d-c)*e-a)*f};a.slerp=function(a,c,d,e){void 0===e&&(e=a);var f=b.vec3d.length(a),p=b.vec3d.length(c),h=b.vec3d.dot(a,c)/(f*p);if(.9999999999999999>h){var h=Math.acos(h),m=((1-d)*
f+d*p)/Math.sin(h),p=m/p*Math.sin(d*h);b.vec3d.scale(a,m/f*Math.sin((1-d)*h),k);b.vec3d.scale(c,p,l);return b.vec3d.add(k,l,e)}return b.vec3d.lerp(a,c,d,e)};a.angle=function(a,c,d){a=b.vec3d.normalize(a,k);c=b.vec3d.normalize(c,l);var p=e(b.vec3d.dot(a,c));return d&&(a=b.vec3d.cross(a,c,f),0>b.vec3d.dot(a,d))?-p:p};a.clamp=h;a.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};a.isNaN=Number.isNaN||function(a){return a!==a};a.makePiecewiseLinearFunction=function(a){var b=
a.length;return function(c){var d=0;if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(;c>a[d][0];)d++;var e=a[d][0];c=(e-c)/(e-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};a.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};a.floatEqualRelative=function(b,c,d){void 0===d&&(d=1E-6);if(a.isNaN(b)||a.isNaN(c))return!1;if(b===c)return!0;var e=Math.abs(b-c),f=Math.abs(b),k=Math.abs(c);
if(0===b||0===c||1E-12>f&&1E-12>k){if(e>.01*d)return!1}else if(e/(f+k)>d)return!1;return!0};a.floatEqualAbsolute=function(b,c,d){void 0===d&&(d=1E-6);return a.isNaN(b)||a.isNaN(c)?!1:(b>c?b-c:c-b)<=d};c=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,d){void 0===d&&(d=0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+d};a.prototype.normalize=
function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return h(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.contains=function(a,b,c){b=
this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();a.Cyclical=c;a.cyclical2PI=m(new c(0,2*Math.PI));a.cyclicalPI=m(new c(-Math.PI,Math.PI));a.cyclicalDeg=m(new c(0,360));var f=b.vec3d.create(),k=b.vec3d.create(),l=b.vec3d.create()})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require","exports","../Utils","../util/Writer"],function(c,a,b,d){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(a,b){this.data=
a;this.stride=b;this.vertexCount=0}a.prototype.transfer=function(a,b){var c=this.data.buffer();a.vertexCount=this.vertexCount;a.data=c;a.stride=this.stride;b.push(c)};return a}();a.default=e;c=function(){function a(a,c,k){this.geometryType=a;this.indexVector=new d.default(Uint32Array,k);this.namedVectors={};a=b.getStrides(a,c);for(var f in a){c=a[f];var h=new d.default(Uint32Array,c/4*k);this.namedVectors[f]=new e(h,c)}}a.prototype.get=function(a){return this.namedVectors[a].data};a.prototype.transfer=
function(a,b){var c=this.indexVector.buffer(),d={};b.push(c);for(var e in this.namedVectors){var f=this.namedVectors[e];d[e]={};f.transfer(d[e],b)}a.geometryType=this.geometryType;a.indexBuffer=c;a.namedBuffers=d;this.destroy()};a.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return a}();a.VertexVectors=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,
b){this._pos=0;b=b?this._roundToNearest4(b):40;this._array=new ArrayBuffer(b);this._buffer=new a(this._array);this._ctor=a}Object.defineProperty(a.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});a.prototype._roundToNearest4=function(a){a=Math.round(a);return a+(4-a%4)};a.prototype._ensureSize=function(a){if(this._pos+a>=this._buffer.length){a=this._roundToNearest4(1.5*(this._array.byteLength+4*a));a=new ArrayBuffer(a);var b=new this._ctor(a);b.set(this._buffer,
0);this._array=a;this._buffer=b}};a.prototype.writeInt32=function(a){this._ensureSize(1);var b=this._pos;this._buffer[this._pos++]=a;return b};a.prototype.writeF32=function(a){this._ensureSize(1);var b=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=a;this._pos++;return b};a.prototype.writeUint32=function(a){this._ensureSize(1);var b=this._pos;this._buffer[this._pos++]=a;return b};a.prototype.push=function(a){this._ensureSize(1);var b=this._pos;this._buffer[this._pos++]=a;return b};a.prototype.writeRegion=
function(a){this._ensureSize(a.length);var b=this._pos;this._buffer.set(a,this._pos);this._pos+=a.length;return b};a.prototype.buffer=function(){var a=this._array.slice(0,4*this._pos);this.destroy();return a};a.prototype.destroy=function(){this._buffer=this._array=null};return a}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/meshTemplateUtils":function(){define("require exports ../../../../../../core/Logger ../../enums ../templates/WGLFillTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../templates/WGLTextTemplate ../../util/vvFlagUtils".split(" "),
function(c,a,b,d,e,h,m,f,k){Object.defineProperty(a,"__esModule",{value:!0});var l=b.getLogger("esri.views.2d.engine.webgl.mesh.templates.meshTemplateUtils");a.createMeshTemplates=function(a,b,c,v,y,u,A){void 0===A&&(A=!1);if(-1!==c.type.indexOf("3d"))return l.error("3D symbols are not supported with MapView"),a;var p=v.get(c.id);p||l.error("Couldn't find texture resources for symbol: "+c.id+"!");switch(c.type){case d.EsriSymbolTypeKebab.SIMPLE_MARKER:return a.push(m.default.fromSimpleMarker(b,k.getMarkerVVFlags(y),
c,p.spriteMosaicItem,u)),a;case d.EsriSymbolTypeKebab.PICTURE_MARKER:return a.push(m.default.fromPictureMarker(b,k.getMarkerVVFlags(y),c,p.spriteMosaicItem,u)),a;case d.EsriSymbolTypeKebab.SIMPLE_FILL:return a.push(e.default.fromSimpleFill(b,k.getFillVVFlags(y),c,p.spriteMosaicItem,u,A)),c.outline&&(v=v.get(c.outline.id),a.push(h.default.fromSimpleLine(b,k.getLineVVFlags(y,!0),c.outline,v&&v.spriteMosaicItem,u))),a;case d.EsriSymbolTypeKebab.PICTURE_FILL:return a.push(e.default.fromPictureFill(b,
k.getFillVVFlags(y),c,p.spriteMosaicItem,u,A)),c.outline&&(v=v.get(c.outline.id),a.push(h.default.fromSimpleLine(b,k.getLineVVFlags(y,!0),c.outline,v&&v.spriteMosaicItem,u))),a;case d.EsriSymbolTypeKebab.SIMPLE_LINE:return a.push(h.default.fromSimpleLine(b,k.getLineVVFlags(y,!1),c,p.spriteMosaicItem,u)),a;case d.EsriSymbolTypeKebab.TEXT:return a.push(f.default.fromText(b,k.getTextVVFlags(y),c,u,p.glyphMosaicItems)),a;default:return l.error("Unable to create mesh template for unknown symbol type: "+
c.type),a}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper dojo/has ../../../../../../core/Logger ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../Tesselator ./WGLMeshTemplate".split(" "),function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y){Object.defineProperty(a,"__esModule",{value:!0});var u=
e.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),A=[],z=[];c=function(a){function c(b,c,g,e,f,n,l,h){var r=a.call(this)||this;r.fillColor=e;r.tl=f;r.br=n;r.aux=l;r.isBFS=h;r.geometryType=k.WGLGeometryType.FILL;r.useLibtess=!1;e=d("esri-featurelayer-webgl");r.useLibtess="libtess"===((e||{}).tesselator||"libtess");r.useLibtess&&(r._tesselator=new v.default);r.vvFlags=c;r._materialStore=b;r.materialId=r._materialStore.createSpriteMaterial(g,r.geometryType,c);r._tileClipper=new q.TileClipper(0,
0,0,1,8);r._tileClipper.setExtent(512);return r}b(c,a);c.fromSimpleFill=function(a,b,d,g,e,f){void 0===f&&(f=!1);d=(e=d.color)&&"none"!==d.style&&m.premultiplyAlphaRGBA(e)||0;if(!g)return new c(a,b,null,d,0,0,0,f);var n=g.rect;e=n.x+1;var k=n.y+1,l=n.x+1+g.width,r=n.y+1+g.height,n=p.i1616to32(e,k),h=p.i1616to32(l,r);e=p.i8888to32(p.nextHighestPowerOfTwo(l-e),p.nextHighestPowerOfTwo(r-k),0,0);return new c(a,b,g,d,n,h,e,f)};c.fromPictureFill=function(a,b,d,g,e,n){void 0===n&&(n=!1);e=f.PICTURE_FILL_COLOR;
var k=g.rect,l=k.x+1+g.width,r=k.y+1+g.height,k=p.i1616to32(k.x+1,k.y+1),l=p.i1616to32(l,r);d=p.i8888to32(p.nextHighestPowerOfTwo(d.width),p.nextHighestPowerOfTwo(d.height),0,0);return new c(a,b,g,e,k,l,d,n)};c.prototype.writeMesh=function(a,b,c,d,g,e,f){A.length=0;if(this.vvFlags&l.WGLVVFlag.COLOR||0!==this.fillColor)if("esriGeometryPolygon"!==c)u.error("Unable to handle geometryType: "+c);else{var n=g.geometry,n=(g=this._isClippingRequired(n))?this._clip(n,!this.useLibtess):n.rings;return this.useLibtess?
this._writeMeshLibtess(a,b,c,d,n,g,e,f):this._writeMeshEarcut(a,b,c,d,n,g,e,f)}};c.prototype._isClippingRequired=function(a){var b=0;for(a=a.rings;b<a.length;b++){var c=a[b],d=c.length;if(!(3>d)){var g=c[0][0],e=c[0][1];if(-8>g||520<g||-8>e||520<e)return!0;for(var f=1;f<d;++f)if(g+=c[f][0],e+=c[f][1],-8>g||520<g||-8>e||520<e)return!0}}return!1};c.prototype._clip=function(a,b){var c;this._tileClipper.reset(3);for(var d=0,g=a.rings;d<g.length;d++){var e=g[d],f=e.length;if(!(3>f)){a=e[0][0];c=e[0][1];
this._tileClipper.moveTo(a,c);for(var n=1;n<f;++n)a+=e[n][0],c+=e[n][1],this._tileClipper.lineTo(a,c);this._tileClipper.close()}}return this._tileClipper.result(b)};c.prototype._writeMeshLibtess=function(a,b,c,d,g,e,f,n){if(g&&g.length){c=this._materialStore.get(this.materialId);f=[];var k=b.indexVector;b=b.get("geometry");var l=new t(d,this.geometryType,this.materialId),r=this._getOffset(b,c);l.vertexFrom=r;l.indexFrom=k.length;a.push(l);this._tesselator.beginPolygon(A,f);for(a=0;a<g.length;a++){var h=
g[a];if(!(3>h.length)){this._tesselator.beginContour();var p=void 0,m=void 0;e?(p=h[0].x,m=h[0].y):(p=h[0][0],m=h[0][1]);var B=[p,m,0];this._tesselator.addVertex(B,B);for(B=1;B<h.length-1;B++){var q=void 0,C=void 0;e?(p=h[B].x,m=h[B].y):(q=h[B][0],C=h[B][1],p+=q,m+=C);q=[p,m,0];this._tesselator.addVertex(q,q)}this._tesselator.endContour()}}this._tesselator.endPolygon();this._writeVerticesLibTess(l,b,d,A,c,n);this._writeIndicesLibTess(l,k,r,f)}};c.prototype._writeMeshEarcut=function(a,b,c,d,g,e,f,
n){if(g&&g.length){c=this._materialStore.get(this.materialId);f=b.indexVector;b=b.get("geometry");var k=new t(d,this.geometryType,this.materialId),l=this._getOffset(b,c);k.vertexFrom=l;k.indexFrom=f.length;a.push(k);for(var r=a=0,h=0;h<g.length;h++){var p=g[h],m=r,B=void 0,q=void 0;e?(B=p[0].x,q=p[0].y):(B=p[0][0],q=p[0][1]);A[r++]=B;A[r++]=q;for(var C=0,v=1;v<p.length;++v){var D=void 0,y=void 0;e?(D=B,y=q,B=p[v].x,q=p[v].y,D=B-D,y=q-y):(D=p[v][0],y=p[v][1],B+=D,q+=y);C-=D*(q+q+y);A[r++]=B;A[r++]=
q}0<C?(0<m-a&&(this._write(k,f,b,l,d,A,z,a,m,c,n),a=m),z.length=0):0>C?0<m-a?z.push(.5*(m-a)):r=m:r=m}0<r-a&&this._write(k,f,b,l,d,A,z,a,r,c,n);A.length=z.length=0}};c.prototype._write=function(a,b,c,d,g,e,f,n,k,l,p){d=h(e.slice(n,k),f,2);d.length&&(n=this._getOffset(c,l),this._writeVertices(a,c,g,e,f,l,p),this._writeIndices(a,b,n,d))};c.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?8:6;return a.length/b};c.prototype._writeVertices=function(a,b,c,d,g,e,f){for(g=0;g<d.length;g+=2){var n=
p.i1616to32(d[g],d[g+1]);b.push(n);b.push(c);b.push(this.fillColor);b.push(this.tl);b.push(this.br);b.push(this.aux);this._writeVV(b,f,e);a.vertexCount++}};c.prototype._writeIndices=function(a,b,c,d){for(var g=0;g<d.length;g+=3)b.push(c+d[g]),b.push(c+d[g+1]),b.push(c+d[g+2]),a.indexCount+=3};c.prototype._writeVerticesLibTess=function(a,b,c,d,g,e){for(var f=0;f<d.length;f+=2){var n=p.i1616to32(d[f],d[f+1]);b.push(n);b.push(c);b.push(this.fillColor);b.push(this.tl);b.push(this.br);b.push(this.aux);
this._writeVV(b,e,g);a.vertexCount++}};c.prototype._writeIndicesLibTess=function(a,b,c,d){for(var g=0;g<d.length;g++)b.push(c+d[g]),a.indexCount++};c.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(this.isBFS?(a.push(4294967295),a.push(4294967295)):(a.push(b[k.VVType.COLOR]),a.push(b[k.VVType.OPACITY])))};return c}(y.default);a.default=c})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function c(c,g,e){e=e||2;n=c.length/e+(g?2*g.length:0);r=!1;var f=
g&&g.length,l=f?g[0]*e:c.length,p=a(c,0,l,e,!0),B=[];if(!p)return B;var q,t,v,C;if(f)a:{var D=e,f=[],z,u,A;C=0;for(z=g.length;C<z;C++)u=g[C]*D,A=C<z-1?g[C+1]*D:c.length,u=a(c,u,A,D,!1),u===u.next&&(u.steiner=!0),f.push(k(u));f.sort(h);for(C=0;C<f.length;C++){if(!p){p=null;break a}g=f[C];D=p;if(D=m(g,D))g=y(D,g),b(g,g.next);p=b(p,p.next)}}if(r)return B;if(c.length>80*e){q=v=c[0];t=f=c[1];for(D=e;D<l;D+=e)C=c[D],g=c[D+1],C<q&&(q=C),g<t&&(t=g),C>v&&(v=C),g>f&&(f=g);v=Math.max(v-q,f-t)}d(p,B,e,q,t,v);
return B}function a(a,b,c,d,e){var f;if(e===0<g(a,b,c,d))for(e=b;e<c;e+=d)f=u(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=u(e,a[e],a[e+1],f);f&&q(f,f.next)&&(A(f),f=f.next);return f}function b(a,b){if(!a)return a;b||(b=a);var c,d=0,g=n*n/2;do{c=!1;if(a.steiner||!q(a,a.next)&&0!==p(a.prev,a,a.next))a=a.next;else{A(a);a=b=a.prev;if(a===a.next)return null;c=!0}if(d++>g)return r=!0,null}while(c||a!==b);return b}function d(a,c,g,n,k,h,m){if(a){if(!m&&h){var B=a,C=B;do null===C.z&&(C.z=f(C.x,C.y,n,k,h)),
C.prevZ=C.prev,C=C.nextZ=C.next;while(C!==B);C.prevZ.nextZ=null;C.prevZ=null;var B=C,D,z,u,F,H,J,I=1;do{C=B;u=B=null;for(F=0;C;){F++;z=C;for(D=H=0;D<I&&(H++,z=z.nextZ,z);D++);for(J=I;0<H||0<J&&z;)0===H?(D=z,z=z.nextZ,J--):0!==J&&z?C.z<=z.z?(D=C,C=C.nextZ,H--):(D=z,z=z.nextZ,J--):(D=C,C=C.nextZ,H--),u?u.nextZ=D:B=D,D.prevZ=u,u=D;C=z}u.nextZ=null;I*=2}while(1<F)}for(B=a;a.prev!==a.next;){C=a.prev;z=a.next;if(h)a:{u=a;J=n;var U=k,Z=h;F=u.prev;H=u;I=u.next;if(0<=p(F,H,I))u=!1;else{var V=F.x>H.x?F.x>I.x?
F.x:I.x:H.x>I.x?H.x:I.x,P=F.y>H.y?F.y>I.y?F.y:I.y:H.y>I.y?H.y:I.y;D=f(F.x<H.x?F.x<I.x?F.x:I.x:H.x<I.x?H.x:I.x,F.y<H.y?F.y<I.y?F.y:I.y:H.y<I.y?H.y:I.y,J,U,Z);J=f(V,P,J,U,Z);for(U=u.nextZ;U&&U.z<=J;){if(U!==u.prev&&U!==u.next&&l(F.x,F.y,H.x,H.y,I.x,I.y,U.x,U.y)&&0<=p(U.prev,U,U.next)){u=!1;break a}U=U.nextZ}for(U=u.prevZ;U&&U.z>=D;){if(U!==u.prev&&U!==u.next&&l(F.x,F.y,H.x,H.y,I.x,I.y,U.x,U.y)&&0<=p(U.prev,U,U.next)){u=!1;break a}U=U.prevZ}u=!0}}else u=e(a);if(u)c.push(C.i/g),c.push(a.i/g),c.push(z.i/
g),A(a),B=a=z.next;else{if(r)break;a=z;if(a===B){if(!m)d(b(a),c,g,n,k,h,1);else if(1===m){m=c;B=g;C=a;do z=C.prev,u=C.next.next,!q(z,u)&&t(z,C,C.next,u)&&v(z,u)&&v(u,z)&&(m.push(z.i/B),m.push(C.i/B),m.push(u.i/B),A(C),A(C.next),C=a=u),C=C.next;while(C!==a);a=C;d(a,c,g,n,k,h,2)}else if(2===m)a:{m=a;do{for(B=m.next.next;B!==m.prev;){if(C=m.i!==B.i){C=m;z=B;u=void 0;if(u=C.next.i!==z.i&&C.prev.i!==z.i){u=void 0;b:{u=C;do{if(u.i!==C.i&&u.next.i!==C.i&&u.i!==z.i&&u.next.i!==z.i&&t(u,u.next,C,z)){u=!0;
break b}u=u.next}while(u!==C);u=!1}u=!u}F=void 0;if(F=u&&v(C,z)&&v(z,C)){u=C;F=!1;H=(C.x+z.x)/2;z=(C.y+z.y)/2;do u.y>z!==u.next.y>z&&H<(u.next.x-u.x)*(z-u.y)/(u.next.y-u.y)+u.x&&(F=!F),u=u.next;while(u!==C)}C=F}if(C){a=y(m,B);m=b(m,m.next);a=b(a,a.next);d(m,c,g,n,k,h);d(a,c,g,n,k,h);break a}B=B.next}m=m.next}while(m!==a)}break}}}}}function e(a){var b=a.prev,c=a.next;if(0<=p(b,a,c))return!1;for(var d=a.next.next,g=0;d!==a.prev;){if(l(b.x,b.y,a.x,a.y,c.x,c.y,d.x,d.y)&&0<=p(d.prev,d,d.next))return!1;
d=d.next;if(g++>n)return r=!0,!1}return!0}function h(a,b){return a.x-b.x}function m(a,b){var c=b,d=a.x,g=a.y,e=-Infinity,f;do{if(!c)return null;if(g<=c.y&&g>=c.next.y){var n=c.x+(g-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(n<=d&&n>e){e=n;if(n===d){if(g===c.y)return c;if(g===c.next.y)return c.next}f=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!f)return null;if(d===e)return f.prev;b=f;for(var n=f.x,k=f.y,r=Infinity,h,c=f.next;c!==b;)d>=c.x&&c.x>=n&&l(g<k?d:e,g,n,k,g<k?e:d,g,c.x,c.y)&&(h=Math.abs(g-
c.y)/(d-c.x),(h<r||h===r&&c.x>f.x)&&v(c,a)&&(f=c,r=h)),c=c.next;return f}function f(a,b,c,d,g){a=32767*(a-c)/g;b=32767*(b-d)/g;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function k(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function l(a,b,c,d,g,e,f,n){return 0<=(g-f)*(b-n)-(a-f)*(e-n)&&0<=(a-f)*(d-n)-(c-f)*(b-n)&&0<=(c-f)*(e-n)-(g-f)*(d-n)}function p(a,
b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function q(a,b){return a.x===b.x&&a.y===b.y}function t(a,b,c,d){return q(a,b)&&q(c,d)||q(a,d)&&q(c,b)?!0:0<p(a,b,c)!==0<p(a,b,d)&&0<p(c,d,a)!==0<p(c,d,b)}function v(a,b){return 0>p(a.prev,a,a.next)?0<=p(a,b,a.next)&&0<=p(a,a.prev,b):0>p(a,b,a.prev)||0>p(a,a.next,b)}function y(a,b){var c=new z(a.i,a.x,a.y),d=new z(b.i,b.x,b.y),g=a.next,e=b.prev;a.next=b;b.prev=a;c.next=g;g.prev=c;d.next=c;c.prev=d;e.next=d;d.prev=e;return d}function u(a,b,c,d){a=new z(a,
b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function A(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function z(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function g(a,b,c,d){for(var g=0,e=c-d;b<c;b+=d)g+=(a[e]-a[b])*(a[b+1]+a[e+1]),e=b;return g}var n,r;c.deviation=function(a,b,c,d){var e=b&&b.length,f=Math.abs(g(a,0,e?b[0]*c:a.length,c));
if(e)for(var e=0,n=b.length;e<n;e++)f-=Math.abs(g(a,b[e]*c,e<n-1?b[e+1]*c:a.length,c));for(e=b=0;e<d.length;e+=3){var n=d[e]*c,k=d[e+1]*c,l=d[e+2]*c;b+=Math.abs((a[n]-a[l])*(a[k+1]-a[n+1])-(a[n]-a[k])*(a[l+1]-a[n+1]))}return 0===f&&0===b?0:Math.abs((b-f)/f)};c.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,g=0;g<a.length;g++){for(var e=0;e<a[g].length;e++)for(var f=0;f<b;f++)c.vertices.push(a[g][e][f]);0<g&&(d+=a[g-1].length,c.holes.push(d))}return c};return c})},
"esri/layers/vectorTiles/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(c,a,b,d){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){return function(a,b,c){this.ratio=a;this.x=b;this.y=c}}();c=function(){function a(a,b,c,d,e){void 0===d&&(d=8);void 0===e&&(e=8);this.lines=[];this.starts=[];this.pixelRatio=d;this.pixelMargin=e;this.tileSize=512*d;this.dz=a;this.yPos=b;this.xPos=c}a.prototype.setExtent=function(a){this.finalRatio=
this.tileSize/a*(1<<this.dz);var b=this.pixelRatio*this.pixelMargin,b=b/this.finalRatio;a>>=this.dz;b>a&&(b=a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0};a.prototype.moveTo=function(a,c){this._pushLine();this._prevIsIn=this._isIn(a,c);this._moveTo(a,c,this._prevIsIn);this._prevPt=new b.Point(a,c);this._firstPt=new b.Point(a,c);
this._dist=0};a.prototype.lineTo=function(a,c){var d=this._isIn(a,c),f=new b.Point(a,c),k=b.Point.distance(this._prevPt,f),h,m,y;if(d)this._prevIsIn?this._lineTo(a,c,!0):(h=this._prevPt,m=f,a=this._intersect(m,h),this.start=this._dist+k*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(m.x,m.y,!0));else if(this._prevIsIn)m=this._prevPt,h=f,a=this._intersect(m,h),this._lineTo(a.x,a.y,!0),this._lineTo(h.x,h.y,!1);else{var u=this._prevPt;if(!(u.x<=this.xmin&&f.x<=this.xmin||u.x>=this.xmax&&f.x>=this.xmax||
u.y<=this.ymin&&f.y<=this.ymin||u.y>=this.ymax&&f.y>=this.ymax)){a=[];if(u.x<this.xmin&&f.x>this.xmin||u.x>this.xmin&&f.x<this.xmin)c=(this.xmin-u.x)/(f.x-u.x),y=u.y+c*(f.y-u.y),y<=this.ymin?m=!1:y>=this.ymax?m=!0:a.push(new e(c,this.xmin,y));if(u.x<this.xmax&&f.x>this.xmax||u.x>this.xmax&&f.x<this.xmax)c=(this.xmax-u.x)/(f.x-u.x),y=u.y+c*(f.y-u.y),y<=this.ymin?m=!1:y>=this.ymax?m=!0:a.push(new e(c,this.xmax,y));if(u.y<this.ymin&&f.y>this.ymin||u.y>this.ymin&&f.y<this.ymin)c=(this.ymin-u.y)/(f.y-
u.y),y=u.x+c*(f.x-u.x),y<=this.xmin?h=!1:y>=this.xmax?h=!0:a.push(new e(c,y,this.ymin));if(u.y<this.ymax&&f.y>this.ymax||u.y>this.ymax&&f.y<this.ymax)c=(this.ymax-u.y)/(f.y-u.y),y=u.x+c*(f.x-u.x),y<=this.xmin?h=!1:y>=this.xmax?h=!0:a.push(new e(c,y,this.ymax));if(0===a.length)h?m?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):m?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<a.length&&a[0].ratio>a[1].ratio)this.start=this._dist+k*a[1].ratio,
this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this.start=this._dist+k*a[0].ratio,h=0;h<a.length;h++)this._lineTo(a[h].x,a[h].y,!0)}this._lineTo(f.x,f.y,!1)}this._dist+=k;this._prevIsIn=d;this._prevPt=f};a.prototype.close=function(){if(2<this.line.length){var a=this._firstPt,b=this._prevPt;a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y);a=this.line;for(b=a.length;4<=b;)if(a[0].x===a[1].x&&a[0].x===a[b-2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y,
--b;else break}};a.prototype.result=function(a){void 0===a&&(a=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&a&&h.simplify(this.tileSize,this.margin*this.finalRatio,this.lines);return this.lines};a.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,b=a.length;if(0===b)return null;for(var c=[],d=0;d<b;d++)c.push({line:a[d],start:this.starts[d]||0});return c};a.prototype._isIn=function(a,b){return a>=
this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax};a.prototype._intersect=function(a,c){var d,e,f;if(c.x>=this.xmin&&c.x<=this.xmax)e=c.y<=this.ymin?this.ymin:this.ymax,f=(e-a.y)/(c.y-a.y),d=a.x+f*(c.x-a.x);else if(c.y>=this.ymin&&c.y<=this.ymax)d=c.x<=this.xmin?this.xmin:this.xmax,f=(d-a.x)/(c.x-a.x),e=a.y+f*(c.y-a.y);else{e=c.y<=this.ymin?this.ymin:this.ymax;d=c.x<=this.xmin?this.xmin:this.xmax;var k=(d-a.x)/(c.x-a.x),h=(e-a.y)/(c.y-a.y);k<h?(f=k,e=a.y+k*(c.y-a.y)):(f=h,d=a.x+h*(c.x-a.x))}this._r=
f;return new b.Point(d,e)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};a.prototype._moveTo=function(a,c,d){3!==this.type?d&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-
(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,c))):(d||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,c)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,c,d){if(3!==this.type)if(d){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);c=Math.round((c-(this.ymin+
this.margin))*this.finalRatio);if(0<this.line.length&&(d=this.line[this.line.length-1],d.equals(a,c)))return;this.line.push(new b.Point(a,c))}else this.line&&0<this.line.length&&this._pushLine();else if(d||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){d=this.line[this.line.length-1];var e=
d.x===a,f=d.y===c;e&&f||(this._is_h&&e?(d.x=a,d.y=c,d=this.line[this.line.length-2],d.x===a&&d.y===c?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(d=this.line[this.line.length-2],this._is_h=d.x===a,this._is_v=d.y===c)):(this._is_h=d.x===a,this._is_v=d.y===c)):this._is_v&&f?(d.x=a,d.y=c,d=this.line[this.line.length-2],d.x===a&&d.y===c?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(d=this.line[this.line.length-2],this._is_h=d.x===a,this._is_v=d.y===c)):(this._is_h=d.x===
a,this._is_v=d.y===c)):(this.line.push(new b.Point(a,c)),this._is_h=e,this._is_v=f))}else this.line.push(new b.Point(a,c))};return a}();a.TileClipper=c;c=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=function(a,c){this.line&&this.lines.push(this.line);this.line=[];var d=this._ratio;this.line.push(new b.Point(Math.round(a*d),Math.round(c*d)))};a.prototype.lineTo=function(a,
c){var d=this._ratio;this.line.push(new b.Point(Math.round(a*d),Math.round(c*d)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&h.simplify(4096,64,this.lines);return this.lines};return a}();a.SimpleBuilder=c;var h=function(){function a(){}a.simplify=function(b,c,d){if(d){var e=-c,f=b+c,k=-c,l=b+c;b=[];c=[];for(var h=
d.length,m=0;m<h;++m){var A=d[m];if(A&&!(2>A.length))for(var z=A[0],g=void 0,n=A.length,r=1;r<n;++r)g=A[r],z.x===g.x&&(z.x<=e&&(z.y>g.y?(b.push(m),b.push(r),b.push(0),b.push(-1)):(c.push(m),c.push(r),c.push(0),c.push(-1))),z.x>=f&&(z.y<g.y?(b.push(m),b.push(r),b.push(1),b.push(-1)):(c.push(m),c.push(r),c.push(1),c.push(-1)))),z.y===g.y&&(z.y<=k&&(z.x<g.x?(b.push(m),b.push(r),b.push(2),b.push(-1)):(c.push(m),c.push(r),c.push(2),c.push(-1))),z.y>=l&&(z.x>g.x?(b.push(m),b.push(r),b.push(3),b.push(-1)):
(c.push(m),c.push(r),c.push(3),c.push(-1)))),z=g}0!==b.length&&0!==c.length&&(a.fillParent(d,c,b),a.fillParent(d,b,c),e=[],a.calcDeltas(e,c,b),a.calcDeltas(e,b,c),a.addDeltas(e,d))}};a.fillParent=function(a,b,c){for(var e=c.length,f=b.length,k=0;k<f;k+=4){for(var l=b[k],h=b[k+1],m=b[k+2],A=a[l][h-1],l=a[l][h],h=8092,z=-1,g=0;g<e;g+=4)if(c[g+2]===m){var n=c[g],r=c[g+1],B=a[n][r-1],n=a[n][r];switch(m){case 0:case 1:d.between(A.y,B.y,n.y)&&d.between(l.y,B.y,n.y)&&(B=Math.abs(n.y-B.y),B<h&&(h=B,z=g));
break;case 2:case 3:d.between(A.x,B.x,n.x)&&d.between(l.x,B.x,n.x)&&(B=Math.abs(n.x-B.x),B<h&&(h=B,z=g))}}b[k+3]=z}};a.calcDeltas=function(b,c,d){for(var e=c.length,f=0;f<e;f+=4){var k=a.calcDelta(f,c,d,[]);b.push(c[f]);b.push(c[f+1]);b.push(c[f+2]);b.push(k)}};a.calcDelta=function(b,c,d,e){b=c[b+3];if(-1===b)return 0;var f=e.length;if(1<f&&e[f-2]===b)return 0;e.push(b);return a.calcDelta(b,d,c,e)+1};a.addDeltas=function(a,b){for(var c=a.length,d=0,e=0;e<c;e+=4){var f=a[e+3];f>d&&(d=f)}for(e=0;e<
c;e+=4){var k=b[a[e]],h=a[e+1],f=d-a[e+3];switch(a[e+2]){case 0:k[h-1].x-=f;k[h].x-=f;1===h&&(k[k.length-1].x-=f);h===k.length-1&&(k[0].x-=f);break;case 1:k[h-1].x+=f;k[h].x+=f;1===h&&(k[k.length-1].x+=f);h===k.length-1&&(k[0].x+=f);break;case 2:k[h-1].y-=f;k[h].y-=f;1===h&&(k[k.length-1].y-=f);h===k.length-1&&(k[0].y-=f);break;case 3:k[h-1].y+=f,k[h].y+=f,1===h&&(k[k.length-1].y+=f),h===k.length-1&&(k[0].y+=f)}}};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Geometry":function(){define(["require",
"exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,b){this.x=a;this.y=b}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,b){return a===this.x&&b===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,b){this.x=a;this.y=b};a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=
this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,b){this.x+=a;this.y+=b};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y};a.prototype.assignSub=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y};a.prototype.rotate=function(a,b){var c=this.x,d=this.y;this.x=c*a-d*b;this.y=c*b+d*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};a.distance=function(a,
b){var c=b.x-a.x;a=b.y-a.y;return Math.sqrt(c*c+a*a)};a.add=function(b,c){return new a(b.x+c.x,b.y+c.y)};a.sub=function(b,c){return new a(b.x-c.x,b.y-c.y)};return a}();a.Point=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(c,a,b,d){Object.defineProperty(a,"__esModule",{value:!0});var e=b.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");c=function(){function a(){this._indexCounter=
this._currentVertexIndex=0;this._triangleIndices=[-1,-1,-1];this.glu=new d.GluTesselator;this.glu.gluTessCallback(d.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));
this.glu.gluTessCallback(d.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this));this.glu.gluTessProperty(d.gluEnum.GLU_TESS_WINDING_RULE,d.windingRule.GLU_TESS_WINDING_ODD)}a.prototype.beginPolygon=function(a,b){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(a);this._indices=b};a.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};a.prototype.beginContour=function(){this.glu.gluTessBeginContour()};
a.prototype.endContour=function(){this.glu.gluTessEndContour()};a.prototype.addVertex=function(a,b){this.glu.gluTessVertex(a,b)};a.prototype._vertexCallback=function(a,b){b[b.length]=a[0];b[b.length]=a[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(a=0;3>a;a++)-1===this._triangleIndices[a]&&(this._triangleIndices[a]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[a];this._currentVertexIndex=0}else this._currentVertexIndex++};
a.prototype._begincallback=function(a){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};a.prototype._endcallback=function(){this._currentVertexIndex=0};a.prototype._errorcallback=function(a){e.error("Encountered error during tesselation: "+a)};a.prototype._combinecallback=function(a,b,c){return[a[0],a[1],a[2]]};a.prototype._edgeCallback=function(a){};return a}();a.default=c})},"esri/layers/vectorTiles/core/libs/libtess/libtess":function(){define([],
function(){var c={DEBUG:!1,assert:function(a,b){if(c.DEBUG&&!a)throw Error("Assertion failed"+(b?": "+b:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,
GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,
GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};c.geom.vertEq=function(a,b){return a.s===b.s&&a.t===b.t};c.geom.vertLeq=function(a,b){return a.s<b.s||a.s===b.s&&a.t<=b.t};c.geom.edgeEval=function(a,b,d){c.assert(c.geom.vertLeq(a,b)&&c.geom.vertLeq(b,d));var e=b.s-a.s,h=d.s-b.s;return 0<e+h?e<h?b.t-a.t+e/(e+h)*(a.t-d.t):b.t-d.t+h/(e+h)*(d.t-a.t):0};c.geom.edgeSign=function(a,b,d){c.assert(c.geom.vertLeq(a,b)&&c.geom.vertLeq(b,d));
var e=b.s-a.s,h=d.s-b.s;return 0<e+h?(b.t-d.t)*e+(b.t-a.t)*h:0};c.geom.transLeq=function(a,b){return a.t<b.t||a.t===b.t&&a.s<=b.s};c.geom.transEval=function(a,b,d){c.assert(c.geom.transLeq(a,b)&&c.geom.transLeq(b,d));var e=b.t-a.t,h=d.t-b.t;return 0<e+h?e<h?b.s-a.s+e/(e+h)*(a.s-d.s):b.s-d.s+h/(e+h)*(d.s-a.s):0};c.geom.transSign=function(a,b,d){c.assert(c.geom.transLeq(a,b)&&c.geom.transLeq(b,d));var e=b.t-a.t,h=d.t-b.t;return 0<e+h?(b.s-d.s)*e+(b.s-a.s)*h:0};c.geom.edgeGoesLeft=function(a){return c.geom.vertLeq(a.dst(),
a.org)};c.geom.edgeGoesRight=function(a){return c.geom.vertLeq(a.org,a.dst())};c.geom.vertL1dist=function(a,b){return Math.abs(a.s-b.s)+Math.abs(a.t-b.t)};c.geom.vertCCW=function(a,b,c){return 0<=a.s*(b.t-c.t)+b.s*(c.t-a.t)+c.s*(a.t-b.t)};c.geom.interpolate_=function(a,b,c,e){a=0>a?0:a;c=0>c?0:c;return a<=c?0===c?(b+e)/2:b+a/(a+c)*(e-b):e+c/(a+c)*(b-e)};c.geom.edgeIntersect=function(a,b,d,e,h){var m,f;c.geom.vertLeq(a,b)||(m=a,a=b,b=m);c.geom.vertLeq(d,e)||(m=d,d=e,e=m);c.geom.vertLeq(a,d)||(m=a,
a=d,d=m,m=b,b=e,e=m);c.geom.vertLeq(d,b)?c.geom.vertLeq(b,e)?(m=c.geom.edgeEval(a,d,b),f=c.geom.edgeEval(d,b,e),0>m+f&&(m=-m,f=-f),h.s=c.geom.interpolate_(m,d.s,f,b.s)):(m=c.geom.edgeSign(a,d,b),f=-c.geom.edgeSign(a,e,b),0>m+f&&(m=-m,f=-f),h.s=c.geom.interpolate_(m,d.s,f,e.s)):h.s=(d.s+b.s)/2;c.geom.transLeq(a,b)||(m=a,a=b,b=m);c.geom.transLeq(d,e)||(m=d,d=e,e=m);c.geom.transLeq(a,d)||(m=a,a=d,d=m,m=b,b=e,e=m);c.geom.transLeq(d,b)?c.geom.transLeq(b,e)?(m=c.geom.transEval(a,d,b),f=c.geom.transEval(d,
b,e),0>m+f&&(m=-m,f=-f),h.t=c.geom.interpolate_(m,d.t,f,b.t)):(m=c.geom.transSign(a,d,b),f=-c.geom.transSign(a,e,b),0>m+f&&(m=-m,f=-f),h.t=c.geom.interpolate_(m,d.t,f,e.t)):h.t=(d.t+b.t)/2};c.mesh={};c.mesh.makeEdge=function(a){var b=c.mesh.makeEdgePair_(a.eHead);c.mesh.makeVertex_(b,a.vHead);c.mesh.makeVertex_(b.sym,a.vHead);c.mesh.makeFace_(b,a.fHead);return b};c.mesh.meshSplice=function(a,b){var d=!1,e=!1;a!==b&&(b.org!==a.org&&(e=!0,c.mesh.killVertex_(b.org,a.org)),b.lFace!==a.lFace&&(d=!0,c.mesh.killFace_(b.lFace,
a.lFace)),c.mesh.splice_(b,a),e||(c.mesh.makeVertex_(b,a.org),a.org.anEdge=a),d||(c.mesh.makeFace_(b,a.lFace),a.lFace.anEdge=a))};c.mesh.deleteEdge=function(a){var b=a.sym,d=!1;a.lFace!==a.rFace()&&(d=!0,c.mesh.killFace_(a.lFace,a.rFace()));a.oNext===a?c.mesh.killVertex_(a.org,null):(a.rFace().anEdge=a.oPrev(),a.org.anEdge=a.oNext,c.mesh.splice_(a,a.oPrev()),d||c.mesh.makeFace_(a,a.lFace));b.oNext===b?(c.mesh.killVertex_(b.org,null),c.mesh.killFace_(b.lFace,null)):(a.lFace.anEdge=b.oPrev(),b.org.anEdge=
b.oNext,c.mesh.splice_(b,b.oPrev()));c.mesh.killEdge_(a)};c.mesh.addEdgeVertex=function(a){var b=c.mesh.makeEdgePair_(a),d=b.sym;c.mesh.splice_(b,a.lNext);b.org=a.dst();c.mesh.makeVertex_(d,b.org);b.lFace=d.lFace=a.lFace;return b};c.mesh.splitEdge=function(a){var b=c.mesh.addEdgeVertex(a).sym;c.mesh.splice_(a.sym,a.sym.oPrev());c.mesh.splice_(a.sym,b);a.sym.org=b.org;b.dst().anEdge=b.sym;b.sym.lFace=a.rFace();b.winding=a.winding;b.sym.winding=a.sym.winding;return b};c.mesh.connect=function(a,b){var d=
!1,e=c.mesh.makeEdgePair_(a),h=e.sym;b.lFace!==a.lFace&&(d=!0,c.mesh.killFace_(b.lFace,a.lFace));c.mesh.splice_(e,a.lNext);c.mesh.splice_(h,b);e.org=a.dst();h.org=b.org;e.lFace=h.lFace=a.lFace;a.lFace.anEdge=h;d||c.mesh.makeFace_(e,a.lFace);return e};c.mesh.zapFace=function(a){var b=a.anEdge,d=b.lNext,e;do if(e=d,d=e.lNext,e.lFace=null,null===e.rFace()){e.oNext===e?c.mesh.killVertex_(e.org,null):(e.org.anEdge=e.oNext,c.mesh.splice_(e,e.oPrev()));var h=e.sym;h.oNext===h?c.mesh.killVertex_(h.org,null):
(h.org.anEdge=h.oNext,c.mesh.splice_(h,h.oPrev()));c.mesh.killEdge_(e)}while(e!==b);b=a.prev;a=a.next;a.prev=b;b.next=a};c.mesh.meshUnion=function(a,b){var c=a.fHead,e=a.vHead,h=a.eHead,m=b.fHead,f=b.vHead;b=b.eHead;m.next!==m&&(c.prev.next=m.next,m.next.prev=c.prev,m.prev.next=c,c.prev=m.prev);f.next!==f&&(e.prev.next=f.next,f.next.prev=e.prev,f.prev.next=e,e.prev=f.prev);b.next!==b&&(h.sym.next.sym.next=b.next,b.next.sym.next=h.sym.next,b.sym.next.sym.next=h,h.sym.next=b.sym.next);return a};c.mesh.deleteMesh=
function(a){};c.mesh.makeEdgePair_=function(a){var b=new c.GluHalfEdge,d=new c.GluHalfEdge,e=a.sym.next;d.next=e;e.sym.next=b;b.next=a;a.sym.next=d;b.sym=d;b.oNext=b;b.lNext=d;d.sym=b;d.oNext=d;return d.lNext=b};c.mesh.splice_=function(a,b){var c=a.oNext,e=b.oNext;c.sym.lNext=b;e.sym.lNext=a;a.oNext=e;b.oNext=c};c.mesh.makeVertex_=function(a,b){var d=b.prev,e=new c.GluVertex(b,d);d.next=e;b.prev=e;b=e.anEdge=a;do b.org=e,b=b.oNext;while(b!==a)};c.mesh.makeFace_=function(a,b){var d=b.prev,e=new c.GluFace(b,
d);d.next=e;b.prev=e;e.anEdge=a;e.inside=b.inside;b=a;do b.lFace=e,b=b.lNext;while(b!==a)};c.mesh.killEdge_=function(a){var b=a.next;a=a.sym.next;b.sym.next=a;a.sym.next=b};c.mesh.killVertex_=function(a,b){var c=a.anEdge,e=c;do e.org=b,e=e.oNext;while(e!==c);b=a.prev;a=a.next;a.prev=b;b.next=a};c.mesh.killFace_=function(a,b){var c=a.anEdge,e=c;do e.lFace=b,e=e.lNext;while(e!==c);b=a.prev;a=a.next;a.prev=b;b.next=a};c.normal={};c.normal.S_UNIT_X_=1;c.normal.S_UNIT_Y_=0;c.normal.projectPolygon=function(a,
b,d,e){var h=!1,m=[b,d,e];0===b&&0===d&&0===e&&(c.normal.computeNormal_(a,m),h=!0);d=c.normal.longAxis_(m);b=a.mesh.vHead;if(c.TRUE_PROJECT){c.normal.normalize_(m);e=[0,0,0];var f=[0,0,0];e[d]=0;e[(d+1)%3]=c.normal.S_UNIT_X_;e[(d+2)%3]=c.normal.S_UNIT_Y_;d=c.normal.dot_(e,m);e[0]-=d*m[0];e[1]-=d*m[1];e[2]-=d*m[2];c.normal.normalize_(e);f[0]=m[1]*e[2]-m[2]*e[1];f[1]=m[2]*e[0]-m[0]*e[2];f[2]=m[0]*e[1]-m[1]*e[0];c.normal.normalize_(f);for(m=b.next;m!==b;m=m.next)m.s=c.normal.dot_(m.coords,e),m.t=c.normal.dot_(m.coords,
f)}else for(e=(d+1)%3,f=(d+2)%3,d=0<m[d]?1:-1,m=b.next;m!==b;m=m.next)m.s=m.coords[e],m.t=d*m.coords[f];h&&c.normal.checkOrientation_(a)};c.normal.dot_=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};c.normal.normalize_=function(a){var b=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];c.assert(0<b);b=Math.sqrt(b);a[0]/=b;a[1]/=b;a[2]/=b};c.normal.longAxis_=function(a){var b=0;Math.abs(a[1])>Math.abs(a[0])&&(b=1);Math.abs(a[2])>Math.abs(a[b])&&(b=2);return b};c.normal.computeNormal_=function(a,b){var d=[-2*c.GLU_TESS_MAX_COORD,
-2*c.GLU_TESS_MAX_COORD,-2*c.GLU_TESS_MAX_COORD],e=[2*c.GLU_TESS_MAX_COORD,2*c.GLU_TESS_MAX_COORD,2*c.GLU_TESS_MAX_COORD],h=[],m=[],f;a=a.mesh.vHead;for(f=a.next;f!==a;f=f.next)for(var k=0;3>k;++k){var l=f.coords[k];l<e[k]&&(e[k]=l,m[k]=f);l>d[k]&&(d[k]=l,h[k]=f)}f=0;d[1]-e[1]>d[0]-e[0]&&(f=1);d[2]-e[2]>d[f]-e[f]&&(f=2);if(e[f]>=d[f])b[0]=0,b[1]=0,b[2]=1;else{d=0;e=m[f];h=h[f];m=[0,0,0];e=[e.coords[0]-h.coords[0],e.coords[1]-h.coords[1],e.coords[2]-h.coords[2]];k=[0,0,0];for(f=a.next;f!==a;f=f.next)k[0]=
f.coords[0]-h.coords[0],k[1]=f.coords[1]-h.coords[1],k[2]=f.coords[2]-h.coords[2],m[0]=e[1]*k[2]-e[2]*k[1],m[1]=e[2]*k[0]-e[0]*k[2],m[2]=e[0]*k[1]-e[1]*k[0],l=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],l>d&&(d=l,b[0]=m[0],b[1]=m[1],b[2]=m[2]);0>=d&&(b[0]=b[1]=b[2]=0,b[c.normal.longAxis_(e)]=1)}};c.normal.checkOrientation_=function(a){for(var b=0,c=a.mesh.fHead,e=c.next;e!==c;e=e.next){var h=e.anEdge;if(!(0>=h.winding)){do b+=(h.org.s-h.dst().s)*(h.org.t+h.dst().t),h=h.lNext;while(h!==e.anEdge)}}if(0>b)for(a=a.mesh.vHead,
b=a.next;b!==a;b=b.next)b.t=-b.t};c.render={};c.render.renderMesh=function(a,b,d){for(var e=!1,h=-1,m=b.fHead.prev;m!==b.fHead;m=m.prev)if(m.inside){e||(a.callBeginCallback(c.primitiveType.GL_TRIANGLES),e=!0);var f=m.anEdge;c.assert(f.lNext.lNext.lNext===f,"renderMesh called with non-triangulated mesh");do{if(d){var k=f.rFace().inside?0:1;h!==k&&(h=k,a.callEdgeFlagCallback(!!h))}a.callVertexCallback(f.org.data);f=f.lNext}while(f!==m.anEdge)}e&&a.callEndCallback()};c.render.renderBoundary=function(a,
b){for(var d=b.fHead.next;d!==b.fHead;d=d.next)if(d.inside){a.callBeginCallback(c.primitiveType.GL_LINE_LOOP);var e=d.anEdge;do a.callVertexCallback(e.org.data),e=e.lNext;while(e!==d.anEdge);a.callEndCallback()}};c.sweep={};c.sweep.SENTINEL_COORD_=4*c.GLU_TESS_MAX_COORD;c.sweep.TOLERANCE_NONZERO_=!1;c.sweep.computeInterior=function(a){a.fatalError=!1;c.sweep.removeDegenerateEdges_(a);c.sweep.initPriorityQ_(a);c.sweep.initEdgeDict_(a);for(var b;null!==(b=a.pq.extractMin());){for(;;){var d=a.pq.minimum();
if(null===d||!c.geom.vertEq(d,b))break;d=a.pq.extractMin();c.sweep.spliceMergeVertices_(a,b.anEdge,d.anEdge)}c.sweep.sweepEvent_(a,b)}b=a.dict.getMin().getKey();a.event=b.eUp.org;c.sweep.doneEdgeDict_(a);c.sweep.donePriorityQ_(a);c.sweep.removeDegenerateFaces_(a.mesh);a.mesh.checkMesh()};c.sweep.addWinding_=function(a,b){a.winding+=b.winding;a.sym.winding+=b.sym.winding};c.sweep.edgeLeq_=function(a,b,d){a=a.event;b=b.eUp;d=d.eUp;if(b.dst()===a)return d.dst()===a?c.geom.vertLeq(b.org,d.org)?0>=c.geom.edgeSign(d.dst(),
b.org,d.org):0<=c.geom.edgeSign(b.dst(),d.org,b.org):0>=c.geom.edgeSign(d.dst(),a,d.org);if(d.dst()===a)return 0<=c.geom.edgeSign(b.dst(),a,b.org);b=c.geom.edgeEval(b.dst(),a,b.org);a=c.geom.edgeEval(d.dst(),a,d.org);return b>=a};c.sweep.deleteRegion_=function(a,b){b.fixUpperEdge&&c.assert(0===b.eUp.winding);b.eUp.activeRegion=null;a.dict.deleteNode(b.nodeUp);b.nodeUp=null};c.sweep.fixUpperEdge_=function(a,b){c.assert(a.fixUpperEdge);c.mesh.deleteEdge(a.eUp);a.fixUpperEdge=!1;a.eUp=b;b.activeRegion=
a};c.sweep.topLeftRegion_=function(a){var b=a.eUp.org;do a=a.regionAbove();while(a.eUp.org===b);a.fixUpperEdge&&(b=c.mesh.connect(a.regionBelow().eUp.sym,a.eUp.lNext),c.sweep.fixUpperEdge_(a,b),a=a.regionAbove());return a};c.sweep.topRightRegion_=function(a){var b=a.eUp.dst();do a=a.regionAbove();while(a.eUp.dst()===b);return a};c.sweep.addRegionBelow_=function(a,b,d){var e=new c.ActiveRegion;e.eUp=d;e.nodeUp=a.dict.insertBefore(b.nodeUp,e);return d.activeRegion=e};c.sweep.isWindingInside_=function(a,
b){switch(a.windingRule){case c.windingRule.GLU_TESS_WINDING_ODD:return 0!==(b&1);case c.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==b;case c.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<b;case c.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>b;case c.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=b||-2>=b}c.assert(!1);return!1};c.sweep.computeWinding_=function(a,b){b.windingNumber=b.regionAbove().windingNumber+b.eUp.winding;b.inside=c.sweep.isWindingInside_(a,b.windingNumber)};c.sweep.finishRegion_=
function(a,b){var d=b.eUp,e=d.lFace;e.inside=b.inside;e.anEdge=d;c.sweep.deleteRegion_(a,b)};c.sweep.finishLeftRegions_=function(a,b,d){var e=b;for(b=b.eUp;e!==d;){e.fixUpperEdge=!1;var h=e.regionBelow(),m=h.eUp;if(m.org!==b.org){if(!h.fixUpperEdge){c.sweep.finishRegion_(a,e);break}m=c.mesh.connect(b.lPrev(),m.sym);c.sweep.fixUpperEdge_(h,m)}b.oNext!==m&&(c.mesh.meshSplice(m.oPrev(),m),c.mesh.meshSplice(b,m));c.sweep.finishRegion_(a,e);b=h.eUp;e=h}return b};c.sweep.addRightEdges_=function(a,b,d,e,
h,m){var f=!0;do c.assert(c.geom.vertLeq(d.org,d.dst())),c.sweep.addRegionBelow_(a,b,d.sym),d=d.oNext;while(d!==e);for(null===h&&(h=b.regionBelow().eUp.rPrev());;){e=b.regionBelow();d=e.eUp.sym;if(d.org!==h.org)break;d.oNext!==h&&(c.mesh.meshSplice(d.oPrev(),d),c.mesh.meshSplice(h.oPrev(),d));e.windingNumber=b.windingNumber-d.winding;e.inside=c.sweep.isWindingInside_(a,e.windingNumber);b.dirty=!0;!f&&c.sweep.checkForRightSplice_(a,b)&&(c.sweep.addWinding_(d,h),c.sweep.deleteRegion_(a,b),c.mesh.deleteEdge(h));
f=!1;b=e;h=d}b.dirty=!0;c.assert(b.windingNumber-d.winding===e.windingNumber);m&&c.sweep.walkDirtyRegions_(a,b)};c.sweep.callCombine_=function(a,b,d,e,h){var m=[b.coords[0],b.coords[1],b.coords[2]];b.data=null;b.data=a.callCombineCallback(m,d,e);null===b.data&&(h?a.fatalError||(a.callErrorCallback(c.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),a.fatalError=!0):b.data=d[0])};c.sweep.spliceMergeVertices_=function(a,b,d){var e=[null,null,null,null];e[0]=b.org.data;e[1]=d.org.data;c.sweep.callCombine_(a,
b.org,e,[.5,.5,0,0],!1);c.mesh.meshSplice(b,d)};c.sweep.vertexWeights_=function(a,b,d,e,h){var m=c.geom.vertL1dist(b,a),f=c.geom.vertL1dist(d,a),k=h+1;e[h]=.5*f/(m+f);e[k]=.5*m/(m+f);a.coords[0]+=e[h]*b.coords[0]+e[k]*d.coords[0];a.coords[1]+=e[h]*b.coords[1]+e[k]*d.coords[1];a.coords[2]+=e[h]*b.coords[2]+e[k]*d.coords[2]};c.sweep.getIntersectData_=function(a,b,d,e,h,m){var f=[0,0,0,0],k=[d.data,e.data,h.data,m.data];b.coords[0]=b.coords[1]=b.coords[2]=0;c.sweep.vertexWeights_(b,d,e,f,0);c.sweep.vertexWeights_(b,
h,m,f,2);c.sweep.callCombine_(a,b,k,f,!0)};c.sweep.checkForRightSplice_=function(a,b){var d=b.regionBelow(),e=b.eUp,h=d.eUp;if(c.geom.vertLeq(e.org,h.org)){if(0<c.geom.edgeSign(h.dst(),e.org,h.org))return!1;c.geom.vertEq(e.org,h.org)?e.org!==h.org&&(a.pq.remove(e.org.pqHandle),c.sweep.spliceMergeVertices_(a,h.oPrev(),e)):(c.mesh.splitEdge(h.sym),c.mesh.meshSplice(e,h.oPrev()),b.dirty=d.dirty=!0)}else{if(0>c.geom.edgeSign(e.dst(),h.org,e.org))return!1;b.regionAbove().dirty=b.dirty=!0;c.mesh.splitEdge(e.sym);
c.mesh.meshSplice(h.oPrev(),e)}return!0};c.sweep.checkForLeftSplice_=function(a,b){var d=b.regionBelow();a=b.eUp;var e=d.eUp;c.assert(!c.geom.vertEq(a.dst(),e.dst()));if(c.geom.vertLeq(a.dst(),e.dst())){if(0>c.geom.edgeSign(a.dst(),e.dst(),a.org))return!1;b.regionAbove().dirty=b.dirty=!0;d=c.mesh.splitEdge(a);c.mesh.meshSplice(e.sym,d);d.lFace.inside=b.inside}else{if(0<c.geom.edgeSign(e.dst(),a.dst(),e.org))return!1;b.dirty=d.dirty=!0;d=c.mesh.splitEdge(e);c.mesh.meshSplice(a.lNext,e.sym);d.rFace().inside=
b.inside}return!0};c.sweep.checkForIntersect_=function(a,b){var d=b.regionBelow(),e=b.eUp,h=d.eUp,m=e.org,f=h.org,k=e.dst(),l=h.dst(),p=new c.GluVertex;c.assert(!c.geom.vertEq(l,k));c.assert(0>=c.geom.edgeSign(k,a.event,m));c.assert(0<=c.geom.edgeSign(l,a.event,f));c.assert(m!==a.event&&f!==a.event);c.assert(!b.fixUpperEdge&&!d.fixUpperEdge);if(m===f||Math.min(m.t,k.t)>Math.max(f.t,l.t))return!1;if(c.geom.vertLeq(m,f)){if(0<c.geom.edgeSign(l,m,f))return!1}else if(0>c.geom.edgeSign(k,f,m))return!1;
c.geom.edgeIntersect(k,m,l,f,p);c.assert(Math.min(m.t,k.t)<=p.t);c.assert(p.t<=Math.max(f.t,l.t));c.assert(Math.min(l.s,k.s)<=p.s);c.assert(p.s<=Math.max(f.s,m.s));c.geom.vertLeq(p,a.event)&&(p.s=a.event.s,p.t=a.event.t);var q=c.geom.vertLeq(m,f)?m:f;c.geom.vertLeq(q,p)&&(p.s=q.s,p.t=q.t);if(c.geom.vertEq(p,m)||c.geom.vertEq(p,f))return c.sweep.checkForRightSplice_(a,b),!1;if(!c.geom.vertEq(k,a.event)&&0<=c.geom.edgeSign(k,a.event,p)||!c.geom.vertEq(l,a.event)&&0>=c.geom.edgeSign(l,a.event,p)){if(l===
a.event)return c.mesh.splitEdge(e.sym),c.mesh.meshSplice(h.sym,e),b=c.sweep.topLeftRegion_(b),e=b.regionBelow().eUp,c.sweep.finishLeftRegions_(a,b.regionBelow(),d),c.sweep.addRightEdges_(a,b,e.oPrev(),e,e,!0),!0;if(k===a.event)return c.mesh.splitEdge(h.sym),c.mesh.meshSplice(e.lNext,h.oPrev()),d=b,b=c.sweep.topRightRegion_(b),m=b.regionBelow().eUp.rPrev(),d.eUp=h.oPrev(),h=c.sweep.finishLeftRegions_(a,d,null),c.sweep.addRightEdges_(a,b,h.oNext,e.rPrev(),m,!0),!0;0<=c.geom.edgeSign(k,a.event,p)&&(b.regionAbove().dirty=
b.dirty=!0,c.mesh.splitEdge(e.sym),e.org.s=a.event.s,e.org.t=a.event.t);0>=c.geom.edgeSign(l,a.event,p)&&(b.dirty=d.dirty=!0,c.mesh.splitEdge(h.sym),h.org.s=a.event.s,h.org.t=a.event.t);return!1}c.mesh.splitEdge(e.sym);c.mesh.splitEdge(h.sym);c.mesh.meshSplice(h.oPrev(),e);e.org.s=p.s;e.org.t=p.t;e.org.pqHandle=a.pq.insert(e.org);c.sweep.getIntersectData_(a,e.org,m,k,f,l);b.regionAbove().dirty=b.dirty=d.dirty=!0;return!1};c.sweep.walkDirtyRegions_=function(a,b){for(var d=b.regionBelow();;){for(;d.dirty;)b=
d,d=d.regionBelow();if(!b.dirty&&(d=b,b=b.regionAbove(),null===b||!b.dirty))break;b.dirty=!1;var e=b.eUp,h=d.eUp;e.dst()!==h.dst()&&c.sweep.checkForLeftSplice_(a,b)&&(d.fixUpperEdge?(c.sweep.deleteRegion_(a,d),c.mesh.deleteEdge(h),d=b.regionBelow(),h=d.eUp):b.fixUpperEdge&&(c.sweep.deleteRegion_(a,b),c.mesh.deleteEdge(e),b=d.regionAbove(),e=b.eUp));if(e.org!==h.org)if(e.dst()===h.dst()||b.fixUpperEdge||d.fixUpperEdge||e.dst()!==a.event&&h.dst()!==a.event)c.sweep.checkForRightSplice_(a,b);else if(c.sweep.checkForIntersect_(a,
b))break;e.org===h.org&&e.dst()===h.dst()&&(c.sweep.addWinding_(h,e),c.sweep.deleteRegion_(a,b),c.mesh.deleteEdge(e),b=d.regionAbove())}};c.sweep.connectRightVertex_=function(a,b,d){var e=d.oNext,h=b.regionBelow(),m=b.eUp,f=h.eUp,k=!1;m.dst()!==f.dst()&&c.sweep.checkForIntersect_(a,b);c.geom.vertEq(m.org,a.event)&&(c.mesh.meshSplice(e.oPrev(),m),b=c.sweep.topLeftRegion_(b),e=b.regionBelow().eUp,c.sweep.finishLeftRegions_(a,b.regionBelow(),h),k=!0);c.geom.vertEq(f.org,a.event)&&(c.mesh.meshSplice(d,
f.oPrev()),d=c.sweep.finishLeftRegions_(a,h,null),k=!0);k?c.sweep.addRightEdges_(a,b,d.oNext,e,e,!0):(e=c.geom.vertLeq(f.org,m.org)?f.oPrev():m,e=c.mesh.connect(d.lPrev(),e),c.sweep.addRightEdges_(a,b,e,e.oNext,e.oNext,!1),e.sym.activeRegion.fixUpperEdge=!0,c.sweep.walkDirtyRegions_(a,b))};c.sweep.connectLeftDegenerate_=function(a,b,d){var e=b.eUp;if(c.geom.vertEq(e.org,d))c.assert(c.sweep.TOLERANCE_NONZERO_),c.sweep.TOLERANCE_NONZERO_&&c.sweep.spliceMergeVertices_(a,e,d.anEdge);else if(c.geom.vertEq(e.dst(),
d)){if(c.assert(c.sweep.TOLERANCE_NONZERO_),c.sweep.TOLERANCE_NONZERO_){b=c.sweep.topRightRegion_(b);var e=b.regionBelow(),h=e.eUp.sym,m=h.oNext,f=m;e.fixUpperEdge&&(c.assert(m!==h),c.sweep.deleteRegion_(a,e),c.mesh.deleteEdge(h),h=m.oPrev());c.mesh.meshSplice(d.anEdge,h);c.geom.edgeGoesLeft(m)||(m=null);c.sweep.addRightEdges_(a,b,h.oNext,f,m,!0)}}else c.mesh.splitEdge(e.sym),b.fixUpperEdge&&(c.mesh.deleteEdge(e.oNext),b.fixUpperEdge=!1),c.mesh.meshSplice(d.anEdge,e),c.sweep.sweepEvent_(a,d)};c.sweep.connectLeftVertex_=
function(a,b){var d=new c.ActiveRegion;d.eUp=b.anEdge.sym;var d=a.dict.search(d).getKey(),e=d.regionBelow(),h=d.eUp,m=e.eUp;0===c.geom.edgeSign(h.dst(),b,h.org)?c.sweep.connectLeftDegenerate_(a,d,b):(e=c.geom.vertLeq(m.dst(),h.dst())?d:e,d.inside||e.fixUpperEdge?(h=e===d?c.mesh.connect(b.anEdge.sym,h.lNext):c.mesh.connect(m.dNext(),b.anEdge).sym,e.fixUpperEdge?c.sweep.fixUpperEdge_(e,h):c.sweep.computeWinding_(a,c.sweep.addRegionBelow_(a,d,h)),c.sweep.sweepEvent_(a,b)):c.sweep.addRightEdges_(a,d,
b.anEdge,b.anEdge,null,!0))};c.sweep.sweepEvent_=function(a,b){a.event=b;for(var d=b.anEdge;null===d.activeRegion;)if(d=d.oNext,d===b.anEdge){c.sweep.connectLeftVertex_(a,b);return}b=c.sweep.topLeftRegion_(d.activeRegion);var e=b.regionBelow(),d=e.eUp,e=c.sweep.finishLeftRegions_(a,e,null);e.oNext===d?c.sweep.connectRightVertex_(a,b,e):c.sweep.addRightEdges_(a,b,e.oNext,d,d,!0)};c.sweep.addSentinel_=function(a,b){var d=new c.ActiveRegion,e=c.mesh.makeEdge(a.mesh);e.org.s=c.sweep.SENTINEL_COORD_;e.org.t=
b;e.dst().s=-c.sweep.SENTINEL_COORD_;e.dst().t=b;a.event=e.dst();d.eUp=e;d.windingNumber=0;d.inside=!1;d.fixUpperEdge=!1;d.sentinel=!0;d.dirty=!1;d.nodeUp=a.dict.insert(d)};c.sweep.initEdgeDict_=function(a){a.dict=new c.Dict(a,c.sweep.edgeLeq_);c.sweep.addSentinel_(a,-c.sweep.SENTINEL_COORD_);c.sweep.addSentinel_(a,c.sweep.SENTINEL_COORD_)};c.sweep.doneEdgeDict_=function(a){for(var b=0,d;null!==(d=a.dict.getMin().getKey());)d.sentinel||(c.assert(d.fixUpperEdge),c.assert(1===++b)),c.assert(0===d.windingNumber),
c.sweep.deleteRegion_(a,d);a.dict=null};c.sweep.removeDegenerateEdges_=function(a){for(var b=a.mesh.eHead,d,e=b.next;e!==b;e=d){d=e.next;var h=e.lNext;c.geom.vertEq(e.org,e.dst())&&e.lNext.lNext!==e&&(c.sweep.spliceMergeVertices_(a,h,e),c.mesh.deleteEdge(e),e=h,h=e.lNext);if(h.lNext===e){if(h!==e){if(h===d||h===d.sym)d=d.next;c.mesh.deleteEdge(h)}if(e===d||e===d.sym)d=d.next;c.mesh.deleteEdge(e)}}};c.sweep.initPriorityQ_=function(a){var b=new c.PriorityQ;a.pq=b;a=a.mesh.vHead;var d;for(d=a.next;d!==
a;d=d.next)d.pqHandle=b.insert(d);b.init()};c.sweep.donePriorityQ_=function(a){a.pq.deleteQ();a.pq=null};c.sweep.removeDegenerateFaces_=function(a){for(var b,d=a.fHead.next;d!==a.fHead;d=b)b=d.next,d=d.anEdge,c.assert(d.lNext!==d),d.lNext.lNext===d&&(c.sweep.addWinding_(d.oNext,d),c.mesh.deleteEdge(d))};c.tessmono={};c.tessmono.tessellateMonoRegion_=function(a){a=a.anEdge;for(c.assert(a.lNext!==a&&a.lNext.lNext!==a);c.geom.vertLeq(a.dst(),a.org);a=a.lPrev());for(;c.geom.vertLeq(a.org,a.dst());a=a.lNext);
for(var b=a.lPrev(),d;a.lNext!==b;)if(c.geom.vertLeq(a.dst(),b.org)){for(;b.lNext!==a&&(c.geom.edgeGoesLeft(b.lNext)||0>=c.geom.edgeSign(b.org,b.dst(),b.lNext.dst()));)d=c.mesh.connect(b.lNext,b),b=d.sym;b=b.lPrev()}else{for(;b.lNext!==a&&(c.geom.edgeGoesRight(a.lPrev())||0<=c.geom.edgeSign(a.dst(),a.org,a.lPrev().org));)d=c.mesh.connect(a,a.lPrev()),a=d.sym;a=a.lNext}for(c.assert(b.lNext!==a);b.lNext.lNext!==a;)d=c.mesh.connect(b.lNext,b),b=d.sym};c.tessmono.tessellateInterior=function(a){for(var b,
d=a.fHead.next;d!==a.fHead;d=b)b=d.next,d.inside&&c.tessmono.tessellateMonoRegion_(d)};c.tessmono.discardExterior=function(a){for(var b,d=a.fHead.next;d!==a.fHead;d=b)b=d.next,d.inside||c.mesh.zapFace(d)};c.tessmono.setWindingNumber=function(a,b,d){for(var e,h=a.eHead.next;h!==a.eHead;h=e)e=h.next,h.rFace().inside!==h.lFace.inside?h.winding=h.lFace.inside?b:-b:d?c.mesh.deleteEdge(h):h.winding=0};c.Dict=function(a,b){this.head_=new c.DictNode;this.frame_=a;this.leq_=b};c.Dict.prototype.deleteDict_=
function(){};c.Dict.prototype.insertBefore=function(a,b){do a=a.prev;while(null!==a.key&&!this.leq_(this.frame_,a.key,b));b=new c.DictNode(b,a.next,a);a.next.prev=b;return a.next=b};c.Dict.prototype.insert=function(a){return this.insertBefore(this.head_,a)};c.Dict.prototype.deleteNode=function(a){a.next.prev=a.prev;a.prev.next=a.next};c.Dict.prototype.search=function(a){var b=this.head_;do b=b.next;while(null!==b.key&&!this.leq_(this.frame_,a,b.key));return b};c.Dict.prototype.getMin=function(){return this.head_.next};
c.Dict.prototype.getMax=function(){return this.head_.prev};c.DictNode=function(a,b,c){this.key=a||null;this.next=b||this;this.prev=c||this};c.DictNode.prototype.getKey=function(){return this.key};c.DictNode.prototype.getSuccessor=function(){return this.next};c.DictNode.prototype.getPredecessor=function(){return this.prev};c.GluTesselator=function(){this.state_=c.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=c.windingRule.GLU_TESS_WINDING_ODD;
this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};c.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};c.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(c.GluTesselator.tessState_.T_DORMANT)};c.GluTesselator.prototype.gluTessProperty=function(a,b){switch(a){case c.gluEnum.GLU_TESS_TOLERANCE:return;
case c.gluEnum.GLU_TESS_WINDING_RULE:switch(b){case c.windingRule.GLU_TESS_WINDING_ODD:case c.windingRule.GLU_TESS_WINDING_NONZERO:case c.windingRule.GLU_TESS_WINDING_POSITIVE:case c.windingRule.GLU_TESS_WINDING_NEGATIVE:case c.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=b;return}break;case c.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!b;return;default:this.callErrorCallback(c.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(c.gluEnum.GLU_INVALID_VALUE)};c.GluTesselator.prototype.gluGetTessProperty=
function(a){switch(a){case c.gluEnum.GLU_TESS_TOLERANCE:return 0;case c.gluEnum.GLU_TESS_WINDING_RULE:return a=this.windingRule,c.assert(a===c.windingRule.GLU_TESS_WINDING_ODD||a===c.windingRule.GLU_TESS_WINDING_NONZERO||a===c.windingRule.GLU_TESS_WINDING_POSITIVE||a===c.windingRule.GLU_TESS_WINDING_NEGATIVE||a===c.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),a;case c.gluEnum.GLU_TESS_BOUNDARY_ONLY:return c.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(c.gluEnum.GLU_INVALID_ENUM)}return!1};
c.GluTesselator.prototype.gluTessNormal=function(a,b,c){this.normal_[0]=a;this.normal_[1]=b;this.normal_[2]=c};c.GluTesselator.prototype.gluTessCallback=function(a,b){b=b?b:null;switch(a){case c.gluEnum.GLU_TESS_BEGIN:case c.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=b;break;case c.gluEnum.GLU_TESS_EDGE_FLAG:case c.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=b;break;case c.gluEnum.GLU_TESS_VERTEX:case c.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=b;break;case c.gluEnum.GLU_TESS_END:case c.gluEnum.GLU_TESS_END_DATA:this.endCallback_=
b;break;case c.gluEnum.GLU_TESS_ERROR:case c.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=b;break;case c.gluEnum.GLU_TESS_COMBINE:case c.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=b;break;case c.gluEnum.GLU_TESS_MESH:this.meshCallback_=b;break;default:this.callErrorCallback(c.gluEnum.GLU_INVALID_ENUM)}};c.GluTesselator.prototype.gluTessVertex=function(a,b){var d=!1,e=[0,0,0];this.requireState_(c.GluTesselator.tessState_.T_IN_CONTOUR);for(var h=0;3>h;++h){var m=a[h];m<-c.GLU_TESS_MAX_COORD&&
(m=-c.GLU_TESS_MAX_COORD,d=!0);m>c.GLU_TESS_MAX_COORD&&(m=c.GLU_TESS_MAX_COORD,d=!0);e[h]=m}d&&this.callErrorCallback(c.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(e,b)};c.GluTesselator.prototype.gluTessBeginPolygon=function(a){this.requireState_(c.GluTesselator.tessState_.T_DORMANT);this.state_=c.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new c.GluMesh;this.polygonData_=a};c.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(c.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=c.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};c.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(c.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=c.GluTesselator.tessState_.T_IN_POLYGON};c.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(c.GluTesselator.tessState_.T_IN_POLYGON);this.state_=c.GluTesselator.tessState_.T_DORMANT;c.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);c.sweep.computeInterior(this);
if(!this.fatalError){var a=this.mesh;this.boundaryOnly_?c.tessmono.setWindingNumber(a,1,!0):c.tessmono.tessellateInterior(a);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?c.render.renderBoundary(this,this.mesh):c.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);if(this.meshCallback_){c.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}c.mesh.deleteMesh(this.mesh);
this.mesh=this.polygonData_=null};c.GluTesselator.prototype.requireState_=function(a){this.state_!==a&&this.gotoState_(a)};c.GluTesselator.prototype.gotoState_=function(a){for(;this.state_!==a;)if(this.state_<a)switch(this.state_){case c.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(c.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);this.gluTessBeginPolygon(null);break;case c.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(c.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case c.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(c.errorType.GLU_TESS_MISSING_END_CONTOUR);
this.gluTessEndContour();break;case c.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(c.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};c.GluTesselator.prototype.addVertex_=function(a,b){var d=this.lastEdge_;null===d?(d=c.mesh.makeEdge(this.mesh),c.mesh.meshSplice(d,d.sym)):(c.mesh.splitEdge(d),d=d.lNext);d.org.data=b;d.org.coords[0]=a[0];d.org.coords[1]=a[1];d.org.coords[2]=a[2];d.winding=1;d.sym.winding=-1;this.lastEdge_=d};c.GluTesselator.prototype.callBeginCallback=
function(a){this.beginCallback_&&this.beginCallback_(a,this.polygonData_)};c.GluTesselator.prototype.callVertexCallback=function(a){this.vertexCallback_&&this.vertexCallback_(a,this.polygonData_)};c.GluTesselator.prototype.callEdgeFlagCallback=function(a){this.edgeFlagCallback_&&this.edgeFlagCallback_(a,this.polygonData_)};c.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};c.GluTesselator.prototype.callCombineCallback=function(a,b,c){return this.combineCallback_?
this.combineCallback_(a,b,c,this.polygonData_)||null:null};c.GluTesselator.prototype.callErrorCallback=function(a){this.errorCallback_&&this.errorCallback_(a,this.polygonData_)};c.GluFace=function(a,b){this.next=a||this;this.prev=b||this;this.anEdge=null;this.inside=!1};c.GluHalfEdge=function(a){this.next=a||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};c.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};c.GluHalfEdge.prototype.dst=function(){return this.sym.org};
c.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};c.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};c.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};c.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};c.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};c.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};c.GluMesh=function(){this.vHead=new c.GluVertex;this.fHead=new c.GluFace;this.eHead=new c.GluHalfEdge;this.eHeadSym=
new c.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};c.GluMesh.prototype.checkMesh=function(){if(c.DEBUG){var a=this.fHead,b=this.vHead,d=this.eHead,e,h;for(e=e=a;(h=e.next)!==a;e=h){c.assert(h.prev===e);e=h.anEdge;do c.assert(e.sym!==e),c.assert(e.sym.sym===e),c.assert(e.lNext.oNext.sym===e),c.assert(e.oNext.sym.lNext===e),c.assert(e.lFace===h),e=e.lNext;while(e!==h.anEdge)}c.assert(h.prev===e&&null===h.anEdge);for(e=e=b;(a=e.next)!==b;e=a){c.assert(a.prev===e);e=a.anEdge;
do c.assert(e.sym!==e),c.assert(e.sym.sym===e),c.assert(e.lNext.oNext.sym===e),c.assert(e.oNext.sym.lNext===e),c.assert(e.org===a),e=e.oNext;while(e!==a.anEdge)}c.assert(a.prev===e&&null===a.anEdge&&null===a.data);for(b=b=d;(e=b.next)!==d;b=e)c.assert(e.sym.next===b.sym),c.assert(e.sym!==e),c.assert(e.sym.sym===e),c.assert(null!==e.org),c.assert(null!==e.dst()),c.assert(e.lNext.oNext.sym===e),c.assert(e.oNext.sym.lNext===e);c.assert(e.sym.next===b.sym&&e.sym===this.eHeadSym&&e.sym.sym===e&&null===
e.org&&null===e.dst()&&null===e.lFace&&null===e.rFace())}};c.GluVertex=function(a,b){this.next=a||this;this.prev=b||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=this.s=0};c.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new c.PriorityQHeap};c.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};c.PriorityQ.prototype.init=function(){this.order_=[];for(var a=0;a<this.size_;a++)this.order_[a]=a;
a=function(a){return function(b,d){return c.geom.vertLeq(a[b],a[d])?1:-1}}(this.verts_);this.order_.sort(a);this.initialized_=!0;this.heap_.init();if(c.DEBUG)for(var b=0+this.size_-1,a=0;a<b;++a)c.assert(c.geom.vertLeq(this.verts_[this.order_[a+1]],this.verts_[this.order_[a]]))};c.PriorityQ.prototype.insert=function(a){if(this.initialized_)return this.heap_.insert(a);var b=this.size_++;this.verts_[b]=a;return-(b+1)};c.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();
var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var b=this.heap_.minimum();if(c.geom.vertLeq(b,a))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&null===this.verts_[this.order_[this.size_-1]]);return a};c.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var b=this.heap_.minimum();if(c.geom.vertLeq(b,a))return b}return a};c.PriorityQ.prototype.remove=function(a){if(0<=
a)this.heap_.remove(a);else for(a=-(a+1),c.assert(a<this.verts_.length&&null!==this.verts_[a]),this.verts_[a]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_};c.PriorityQHeap=function(){this.heap_=c.PriorityQHeap.reallocNumeric_([0],c.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=c.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};c.PriorityQHeap.INIT_SIZE_=32;c.PriorityQHeap.reallocNumeric_=
function(a,b){for(var c=Array(b),e=0;e<a.length;e++)c[e]=a[e];for(;e<b;e++)c[e]=0;return c};c.PriorityQHeap.prototype.init=function(){for(var a=this.size_;1<=a;--a)this.floatDown_(a);this.initialized_=!0};c.PriorityQHeap.prototype.insert=function(a){var b=++this.size_;2*b>this.max_&&(this.max_*=2,this.handles_=c.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));var d;0===this.freeList_?d=b:(d=this.freeList_,this.freeList_=this.handles_[this.freeList_]);this.verts_[d]=a;this.handles_[d]=b;
this.heap_[b]=d;this.initialized_&&this.floatUp_(b);return d};c.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};c.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};c.PriorityQHeap.prototype.extractMin=function(){var a=this.heap_,b=this.verts_,c=this.handles_,e=a[1],h=b[e];0<this.size_&&(a[1]=a[this.size_],c[a[1]]=1,b[e]=null,c[e]=this.freeList_,this.freeList_=e,0<--this.size_&&this.floatDown_(1));return h};c.PriorityQHeap.prototype.remove=function(a){var b=
this.heap_,d=this.verts_,e=this.handles_;c.assert(1<=a&&a<=this.max_&&null!==d[a]);var h=e[a];b[h]=b[this.size_];e[b[h]]=h;h<=--this.size_&&(1>=h?this.floatDown_(h):c.geom.vertLeq(d[b[h>>1]],d[b[h]])?this.floatDown_(h):this.floatUp_(h));d[a]=null;e[a]=this.freeList_;this.freeList_=a};c.PriorityQHeap.prototype.floatDown_=function(a){for(var b=this.heap_,d=this.verts_,e=this.handles_,h=b[a];;){var m=a<<1;m<this.size_&&c.geom.vertLeq(d[b[m+1]],d[b[m]])&&(m+=1);c.assert(m<=this.max_);var f=b[m];if(m>
this.size_||c.geom.vertLeq(d[h],d[f])){b[a]=h;e[h]=a;break}b[a]=f;e[f]=a;a=m}};c.PriorityQHeap.prototype.floatUp_=function(a){for(var b=this.heap_,d=this.verts_,e=this.handles_,h=b[a];;){var m=a>>1,f=b[m];if(0===m||c.geom.vertLeq(d[f],d[h])){b[a]=h;e[h]=a;break}b[a]=f;e[f]=a;a=m}};c.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};c.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};
c.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(){}}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../color ../../definitions ../../enums ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v){Object.defineProperty(a,"__esModule",{value:!0});var y=d.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),u=k.allocTriangles(20),A=k.allocTriangles(20),z=[k.allocExtrudeVectors(),k.allocExtrudeVectors()],g=k.allocExtrudeVectors(),n=h.TILE_SIZE+8,r=new k.Tessellator({distanceAlongCorrection:!0}),B=new p.TileClipper(0,0,0,1,8);B.setExtent(512);c=function(a){function c(b,c,d,g,e,f,n,k,l,r,h){var p=a.call(this)||this;p.capType=f;p.joinType=n;p.fillColor=k;
p.tl=l;p.br=r;p.hasPattern=h;p.geometryType=m.WGLGeometryType.LINE;p.halfWidth=0<g?.5*(g+1/e):0;p._materialStore=b;p.vvFlags=c;p.materialId=p._materialStore.createSpriteMaterial(d,p.geometryType,c);return p}b(c,a);c.fromSimpleLine=function(a,b,d,g,f){var n=d.color,k=q.getCapType("round"),r=q.getJoinType("round"),n=n&&"none"!==d.style&&e.premultiplyAlphaRGBA(n)||0;"none"===d.style&&(n=0);if(!g)return new c(a,b,g,d.width,f,k,r,n,0,0,!1);var h=g.rect,m=h.x+1+g.width,p=h.y+1+g.height,h=l.i1616to32(h.x+
1,h.y+1),m=l.i1616to32(m,p);return new c(a,b,g,d.width,f,k,r,n,h,m,!0)};c.fromPictureLineSymbol=function(a,b,c,d){y.error("PictureLineSymbol support does not exist!");return null};c.prototype.writeMesh=function(a,b,c,d,g,e,n){if(this.vvFlags&f.WGLVVFlag.COLOR||0!==this.fillColor){e=this._materialStore.get(this.materialId);var k=b.indexVector;b=b.get("geometry");var l=this.halfWidth,r=new t(d,this.geometryType,this.materialId),h=this._getOffset(b,e);r.vertexFrom=h;r.indexFrom=k.length;a.push(r);switch(c){case "esriGeometryPolyline":a=
this._clipLines(g.geometry.paths);this._write(r,k,b,h,d,l,a,e,n);break;case "esriGeometryPolygon":a=this._clipLines(g.geometry.rings);this._write(r,k,b,h,d,l,a,e,n);break;default:y.error("Unable to handle geometryType: "+c)}}};c.prototype._clipLines=function(a){for(var b=[],c=!1,d=0;d<a.length;){var g=[],e=a[d];B.reset(2);var f=e[0],k=f[0],f=f[1];if(c)B.moveTo(k,f);else{if(-8>k||k>n||-8>f||f>n){c=!0;continue}g.push({x:k,y:f})}for(var l=!1,r=e.length,h=1;h<r;++h)if(k+=e[h][0],f+=e[h][1],c)B.lineTo(k,
f);else{if(-8>k||k>n||-8>f||f>n){l=!0;break}g.push({x:k,y:f})}if(l)c=!0;else{if(c){if(g=B.resultWithStarts())for(c=0;c<g.length;c++)b.push(g[c])}else b.push({line:g,start:0});d++;c=!1}}return b};c.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?11:8;return a.length/b};c.prototype._write=function(a,b,c,d,e,f,n,l,h){for(var m=0,p=0;p<n.length;p++){var q=n[p],B=q.line;if(!(2>B.length))for(var t=B[0],C=B[B.length-1],v=C.x-t.x,t=C.y-t.y,v=1E-6>v*v+t*t,D=q.start%65535,q=z[1],t=0;t<B.length;t++){var y=
B[t],C=q===z[t%2]?z[(t+1)%2]:z[t%2],F=0===t,A=t===B.length-1;A&&v&&!this.hasPattern?k.copyExtrudeVectors(C,g):(this._computeExtrudeVectors(C,t,B,v),m+=this._writeVertices(c,e,f,y.x,y.y,C,D,m,l,h),!C.capCenter||v&&A||this._writePieIndices(a,b,d,C),v&&F&&!this.hasPattern&&k.copyExtrudeVectors(g,C));F||this._writeBridgeIndices(a,b,d,q,C);if(!A){var A=B[t+1],F=[A.x-y.x,A.y-y.y],G=k.length(F),F=[F[0]/G,F[1]/G],G=D+G;if(65535<G){var H=(65535-D)/(G-D),D=y.x+(A.x-y.x)*H,y=y.y+(A.y-y.y)*H,A=q;r.buttCap(A,
F,F);m+=this._writeVertices(c,e,f,D,y,A,65535,m,l,h);r.bridge(u,C,A);this._writeBridgeIndices(a,b,d,C,A);r.buttCap(A,F,F);D=G-65535}else D=G,q=C}}}a.vertexCount=m};c.prototype._writeVertices=function(a,b,c,d,g,e,f,n,k,r){var h=0,m=l.i1616to32(d,g),p=e.vectors;e=p.items;for(p=p.count;h<p;++h){var q=e[h].vector,B=q[0],q=q[1],t=e[h].texCoords,C=t[0],v=t[1],D=e[h].direction,t=D[0],y=D[1],D=l.i1616to32(f,31*c),B=l.i8888to32(Math.round(31*B),Math.round(31*q),Math.round(31*C),Math.round(31*v)),q=l.i8888to32(Math.round(31*
t),Math.round(31*y),0,0);a.push(m);a.push(b);a.push(this.fillColor);a.push(B);a.push(D);a.push(this.tl);a.push(this.br);a.push(q);this._writeVV(a,r,k);e[h].base={index:n+h,point:[d,g]}}return h};c.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[m.VVType.SIZE]),a.push(b[m.VVType.COLOR]),a.push(b[m.VVType.OPACITY]))};c.prototype._writeBridgeIndices=function(a,b,c,d,g){r.bridge(u,d,g);for(d=0;d<u.count;++d)g=u.items[d],b.push(c+g.v1.base.index),b.push(c+g.v2.base.index),b.push(c+
g.v3.base.index),a.indexCount+=3};c.prototype._writePieIndices=function(a,b,c,d){r.pie(A,d);for(d=0;d<A.count;++d){var g=A.items[d];b.push(c+g.v1.base.index);b.push(c+g.v2.base.index);b.push(c+g.v3.base.index);a.indexCount+=3}};c.prototype._computeExtrudeVectors=function(a,b,c,d){var g=c[b],e=[void 0,void 0],f=[void 0,void 0];if(0<b&&b<c.length-1){var n=c[(b+c.length-1)%c.length],l=c[(b+1)%c.length];k.normalize(e,[g.x-n.x,g.y-n.y]);k.normalize(f,[l.x-g.x,l.y-g.y])}else if(0===b)l=c[(b+1)%c.length],
k.normalize(f,[l.x-g.x,l.y-g.y]),d?(n=c[c.length-2],k.normalize(e,[g.x-n.x,g.y-n.y])):e=f;else if(b===c.length-1)n=c[(b+c.length-1)%c.length],k.normalize(e,[g.x-n.x,g.y-n.y]),d?(n=c[1],k.normalize(f,[n.x-g.x,n.y-g.y])):f=e;else{console.error("Vertex index 'i' out of range.");return}d||0!==b?d||b!==c.length-1?this._computeJoinExtrudeVectors(a,e,f):this._computeCapExtrudeVectors(a,e,f,k.CapPosition.END):this._computeCapExtrudeVectors(a,e,f,k.CapPosition.START)};c.prototype._computeCapExtrudeVectors=
function(a,b,c,d){switch(this.capType){case m.CapType.BUTT:r.buttCap(a,b,c);break;case m.CapType.ROUND:var g=k.getNumberOfSlices(Math.PI);r.roundCap(a,b,c,d,g,d===k.CapPosition.START?-1:1);break;case m.CapType.SQUARE:r.squareCap(a,b,c,d);break;default:y.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),r.buttCap(a,b,c)}};c.prototype._computeJoinExtrudeVectors=function(a,b,c){var d=k.getRads(b,c);if(d>Math.PI-.05)r.rectJoin(a,b,c);else if(this.joinType===m.JoinType.MITER||
.1>d).05>d?r.fastMiterJoin(a,b,c):d<k.MITER_SAFE_RADS?r.miterJoin(a,b,c):r.bevelJoin(a,b,c,k.SYSTEM_MAG_LIMIT);else if(this.joinType===m.JoinType.BEVEL)r.bevelJoin(a,b,c,1);else if(this.joinType===m.JoinType.ROUND){var g=k.getNumberOfSlices(d);2.3>d?2>g||.5>d?r.bevelJoin(a,b,c,1):r.roundJoin(a,b,c,g):r.unitRoundJoin(a,b,c,g)}};return c}(v.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(c,a){function b(a){var b={items:[],
count:0},c;for(c=0;c<a;++c)b.items.push(void 0);return b}function d(a,b){n.vector[0]=a.vector[0];n.vector[1]=a.vector[1];n.texCoords[0]=a.texCoords[0];n.texCoords[1]=a.texCoords[1];n.direction[0]=a.direction[0];n.direction[1]=a.direction[1];n.base=a.base;a.vector[0]=b.vector[0];a.vector[1]=b.vector[1];a.texCoords[0]=b.texCoords[0];a.texCoords[1]=b.texCoords[1];a.direction[0]=b.direction[0];a.direction[1]=b.direction[1];a.base=b.base;b.vector[0]=n.vector[0];b.vector[1]=n.vector[1];b.texCoords[0]=n.texCoords[0];
b.texCoords[1]=n.texCoords[1];b.direction[0]=n.direction[0];b.direction[1]=n.direction[1];b.base=n.base}function e(a,b){return a[0]*b[0]+a[1]*b[1]}function h(a){return Math.sqrt(e(a,a))}function m(a,b){var c=h(b);a[0]=b[0]/c;a[1]=b[1]/c;return a}function f(a,b){a[0]=-b[1];a[1]=b[0];return a}function k(a,b){return a[0]*b[1]-a[1]*b[0]}function l(a,b){a[0]=-b[0];a[1]=-b[1];return a}function p(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a}function q(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function t(a,
b){a=e(a,b);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function v(a,b,c,d,g){if(0===d)a.count=0;else{var e=h(b),f=p(r[0],b,1/e);c=p(r[1],c,1/e);f=t(f,c);f=(g?-1:1)*f/d;g=Math.cos(f);f=Math.sin(f);c=b[0];var n=b[1];for(b=0;b<d-1;++b)e=c,c=g*e-f*n,n=f*e+g*n,a.items[b][0]=c,a.items[b][1]=n;a.count=d-1}}function y(a){var b=a.count,c=Math.floor(b/2),d;for(d=0;d<c;++d){var g=a.items[d];a.items[d]=a.items[b-d-1];a.items[b-d-1]=g}}Object.defineProperty(a,"__esModule",{value:!0});var u;(function(a){a[a.ENTRY=
1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(u=a.VectorRole||(a.VectorRole={}));var A;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(A=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var z=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,g=16/(2*Math.PI);a.allocTriangles=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,
void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return b};a.allocExtrudeVectors=function(){var a={items:[],count:0},c;for(c=0;30>c;++c)a.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});c={};c[u.ENTRY]=b(20);c[u.EXIT]=b(20);c[u.CAP]=b(20);return{vectors:a,lists:c}};a.copyExtrudeVectors=function(a,b){var c;for(c=0;c<b.vectors.count;++c)a.vectors.items[c].vector[0]=
b.vectors.items[c].vector[0],a.vectors.items[c].vector[1]=b.vectors.items[c].vector[1],a.vectors.items[c].texCoords[0]=b.vectors.items[c].texCoords[0],a.vectors.items[c].texCoords[1]=b.vectors.items[c].texCoords[1],a.vectors.items[c].direction[0]=b.vectors.items[c].direction[0],a.vectors.items[c].direction[1]=b.vectors.items[c].direction[1],a.vectors.items[c].base=b.vectors.items[c].base;a.vectors.count=b.vectors.count;var d=b.lists[u.ENTRY],g=a.lists[u.ENTRY],e=b.lists[u.EXIT],f=a.lists[u.EXIT],
n=b.lists[u.CAP],k=a.lists[u.CAP];for(c=0;c<d.count;++c)g.items[c]=d.items[c];g.count=d.count;for(c=0;c<e.count;++c)f.items[c]=e.items[c];f.count=e.count;for(c=0;c<n.count;++c)k.items[c]=n.items[c];k.count=n.count;a.capCenter=b.capCenter};var n={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};a.swapExtrudeVectors=d;var r=[];for(c=0;32>c;++c)r.push([void 0,void 0]);var B=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push([void 0,void 0]);return b}(16);
a.length=h;a.normalize=m;a.getNumberOfSlices=function(a){return Math.max(Math.round(a*g),1)};a.getRads=t;a.reverse=y;var C=[void 0,void 0],D=[void 0,void 0],F=[0,0],H=[0,0],J=[0,0],I=[0,0],G=Math.cos(Math.PI/4),O=Math.sin(Math.PI/4),X=Math.sqrt(2);c=function(){function a(a){this._distanceAlongCorrection=a.distanceAlongCorrection}a.prototype.bridge=function(a,b,c){var g=b.vectors;b=b.lists[u.EXIT];var e=c.vectors,f=c.lists[u.ENTRY],n,k;if(b.count===f.count+1)c=b.items,n=g.items,k=f.items,e=e.items;
else if(f.count===b.count+1)c=f.items,n=e.items,k=b.items,e=g.items;else if(b.count===f.count)c=f.items,n=e.items,k=b.items,e=g.items;else{console.error("Cannot bridge "+b.count+" to "+f.count+".");a.count=0;return}g=b.count+f.count-2;a.count=g;C[0]=c;C[1]=k;D[0]=n;D[1]=e;for(b=0;b<g;++b)c=a.items[b],n=(b+0)%2,n=D[n][C[n][Math.floor((b+0)/2)]],c.v1.vector[0]=n.vector[0],c.v1.vector[1]=n.vector[1],c.v1.texCoords[0]=n.texCoords[0],c.v1.texCoords[1]=n.texCoords[1],c.v1.direction[0]=n.direction[0],c.v1.direction[1]=
n.direction[1],c.v1.base=n.base,n=(b+1)%2,n=D[n][C[n][Math.floor((b+1)/2)]],c.v2.vector[0]=n.vector[0],c.v2.vector[1]=n.vector[1],c.v2.texCoords[0]=n.texCoords[0],c.v2.texCoords[1]=n.texCoords[1],c.v2.direction[0]=n.direction[0],c.v2.direction[1]=n.direction[1],c.v2.base=n.base,n=(b+2)%2,n=D[n][C[n][Math.floor((b+2)/2)]],c.v3.vector[0]=n.vector[0],c.v3.vector[1]=n.vector[1],c.v3.texCoords[0]=n.texCoords[0],c.v3.texCoords[1]=n.texCoords[1],c.v3.direction[0]=n.direction[0],c.v3.direction[1]=n.direction[1],
c.v3.base=n.base,n=c.v1.base&&c.v1.base.point||F,k=c.v2.base&&c.v2.base.point||F,e=c.v3.base&&c.v3.base.point||F,H[0]=n[0]+c.v1.vector[0],H[1]=n[1]+c.v1.vector[1],J[0]=k[0]+c.v2.vector[0],J[1]=k[1]+c.v2.vector[1],I[0]=e[0]+c.v3.vector[0],I[1]=e[1]+c.v3.vector[1],0>(J[0]-H[0])*(I[1]-H[1])-(I[0]-H[0])*(J[1]-H[1])||d(c.v2,c.v3)};a.prototype.pie=function(a,b){if(0===b.lists[u.CAP].count)a.count=0;else if(1===b.lists[u.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=
0;else{a.count=b.lists[u.CAP].count-1;var c;for(c=0;c<a.count;++c){var g=a.items[c],e=b.vectors.items[b.lists[u.CAP].items[c]];g.v1.vector[0]=e.vector[0];g.v1.vector[1]=e.vector[1];g.v1.texCoords[0]=e.texCoords[0];g.v1.texCoords[1]=e.texCoords[1];g.v1.direction[0]=e.direction[0];g.v1.direction[1]=e.direction[1];g.v1.base=e.base;e=b.vectors.items[b.lists[u.CAP].items[c+1]];g.v2.vector[0]=e.vector[0];g.v2.vector[1]=e.vector[1];g.v2.texCoords[0]=e.texCoords[0];g.v2.texCoords[1]=e.texCoords[1];g.v2.direction[0]=
e.direction[0];g.v2.direction[1]=e.direction[1];g.v2.base=e.base;e=b.vectors.items[b.capCenter];g.v3.vector[0]=e.vector[0];g.v3.vector[1]=e.vector[1];g.v3.texCoords[0]=e.texCoords[0];g.v3.texCoords[1]=e.texCoords[1];g.v3.direction[0]=e.direction[0];g.v3.direction[1]=e.direction[1];g.v3.base=e.base;var e=g.v1.base&&g.v1.base.point||F,f=g.v2.base&&g.v2.base.point||F,n=g.v3.base&&g.v3.base.point||F;H[0]=e[0]+g.v1.vector[0];H[1]=e[1]+g.v1.vector[1];J[0]=f[0]+g.v2.vector[0];J[1]=f[1]+g.v2.vector[1];I[0]=
n[0]+g.v3.vector[0];I[1]=n[1]+g.v3.vector[1];0>(J[0]-H[0])*(I[1]-H[1])-(I[0]-H[0])*(J[1]-H[1])||d(g.v2,g.v3)}}};a.prototype.buttCap=function(a,b,c){this.fastMiterJoin(a,b,c)};a.prototype.roundCap=function(a,b,c,d,g,e){void 0===e&&(e=0);this.fastMiterJoin(a,b,c);c=d===A.START?0:1;d=d===A.START?1:0;a.capCenter=a.vectors.count;b=a.vectors.items[a.capCenter];b.vector[0]=0;b.vector[1]=0;b.texCoords[0]=0;b.texCoords[1]=0;b.direction[0]=0;b.direction[1]=0;++a.vectors.count;v(B,a.vectors.items[c].vector,
a.vectors.items[d].vector,g,!1);g=a.vectors.count;b=a.lists[u.CAP];b.items[0]=c;c=a.vectors.items[c].texCoords[1];var f=a.vectors.items[d].texCoords[1],n;for(n=0;n<B.count;++n){var k=e*(1-Math.abs(B.count/2-n)/(B.count/2)),l=c+n/(B.count-1)*(f-c),r=B.items[n],h=a.vectors.items[g+n];h.vector[0]=r[0];h.vector[1]=r[1];h.texCoords[0]=k;h.texCoords[1]=l;h.direction[0]=0;h.direction[1]=0;b.items[n+1]=g+n}b.items[B.count+1]=d;b.count=B.count+2;a.vectors.count=g+B.count};a.prototype.squareCap=function(a,
b,c,d){this.fastMiterJoin(a,b,c);b=d===A.START?0:1;c=d===A.START?1:0;var g=r[0],e=r[1],f=r[2],n=r[3];d=r[4];var k=a.vectors.items[b].vector;g[0]=G*k[0]-O*k[1];g[1]=O*k[0]+G*k[1];p(n,g,X);e[0]=G*g[0]-O*g[1];e[1]=O*g[0]+G*g[1];f[0]=G*e[0]-O*e[1];f[1]=O*e[0]+G*e[1];p(d,f,X);b=a.vectors.items[b];b.vector[0]=n[0];b.vector[1]=n[1];a=a.vectors.items[c];a.vector[0]=d[0];a.vector[1]=d[1]};a.prototype.fastMiterJoin=function(a,b,c){c=f(r[0],c);b=l(r[1],c);var d=a.vectors.items[0];d.vector[0]=c[0];d.vector[1]=
c[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;c=a.vectors.items[1];c.vector[0]=b[0];c.vector[1]=b[1];c.texCoords[0]=0;c.texCoords[1]=1;c.direction[0]=0;c.direction[1]=0;a.vectors.count=2;b=a.lists[u.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[u.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[u.CAP].count=0;a.capCenter=void 0};a.prototype.miterJoin=function(a,b,c){var d=f(r[0],b),g=f(r[1],c),n=r[2];n[0]=d[0]+g[0];n[1]=d[1]+g[1];g=m(r[3],n);d=e(g,d);g=p(r[4],g,
1/d);d=l(r[5],g);this._distanceAlongCorrection?(n=a.vectors.items[0],n.vector[0]=g[0],n.vector[1]=g[1],n.texCoords[0]=0,n.texCoords[1]=-1,n.direction[0]=b[0],n.direction[1]=b[1],n=a.vectors.items[1],n.vector[0]=d[0],n.vector[1]=d[1],n.texCoords[0]=0,n.texCoords[1]=1,n.direction[0]=b[0],n.direction[1]=b[1],b=a.vectors.items[2],b.vector[0]=g[0],b.vector[1]=g[1],b.texCoords[0]=0,b.texCoords[1]=-1,b.direction[0]=c[0],b.direction[1]=c[1],b=a.vectors.items[3],b.vector[0]=d[0],b.vector[1]=d[1],b.texCoords[0]=
0,b.texCoords[1]=1,b.direction[0]=c[0],b.direction[1]=c[1],a.vectors.count=4,c=a.lists[u.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[u.EXIT],c.items[0]=2,c.items[1]=3):(n=a.vectors.items[0],n.vector[0]=g[0],n.vector[1]=g[1],n.texCoords[0]=0,n.texCoords[1]=-1,n.direction[0]=0,n.direction[1]=0,n=a.vectors.items[1],n.vector[0]=d[0],n.vector[1]=d[1],n.texCoords[0]=0,n.texCoords[1]=1,n.direction[0]=0,n.direction[1]=0,a.vectors.count=2,c=a.lists[u.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[u.EXIT],
c.items[0]=0,c.items[1]=1);c.count=2;a.lists[u.CAP].count=0;a.capCenter=void 0};a.prototype.bevelJoin=function(a,b,c,d){var g=d*d;d=k(b,c);var n=0<d?[-1,1]:[1,-1],h=n[0],n=n[1],B=0<d?l(r[0],f(r[1],b)):f(r[2],b),t=0<d?l(r[3],f(r[4],c)):f(r[5],c),C=r[6];C[0]=B[0]+t[0];C[1]=B[1]+t[1];var v=m(r[7],C),D=l(r[8],v),A=e(v,B),C=k(v,B),F=Math.abs(C/A),C=1+F*F,G=C<z?[F,this._distanceAlongCorrection]:[Math.sqrt(z-1),!0],H=G[0],G=G[1],I=C<g?[F,this._distanceAlongCorrection]:[Math.sqrt(g-1),!0],F=I[0];(I=I[1])&&
G?(G=a.vectors.items[0],q(G.vector,l(r[9],B),p(r[10],l(r[11],b),H)),G.texCoords[0]=0,G.texCoords[1]=h,G.direction[0]=this._distanceAlongCorrection?b[0]:0,G.direction[1]=this._distanceAlongCorrection?b[1]:0,D=a.vectors.items[1],q(D.vector,l(r[12],t),p(r[13],c,H)),D.texCoords[0]=0,D.texCoords[1]=h,D.direction[0]=this._distanceAlongCorrection?c[0]:0,D.direction[1]=this._distanceAlongCorrection?c[1]:0,h=a.vectors.items[2],h.vector[0]=0,h.vector[1]=0,h.texCoords[0]=0,h.texCoords[1]=0,h.direction[0]=0,
h.direction[1]=0,h=a.vectors.items[3],q(h.vector,B,p(r[14],b,F)),h.texCoords[0]=0,h.texCoords[1]=n,h.direction[0]=this._distanceAlongCorrection?b[0]:0,h.direction[1]=this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[4],q(b.vector,t,p(r[15],l(r[16],c),F)),b.texCoords[0]=0,b.texCoords[1]=n,b.direction[0]=this._distanceAlongCorrection?c[0]:0,b.direction[1]=this._distanceAlongCorrection?c[1]:0,a.vectors.count=5,c=a.lists[u.ENTRY],c.items[0]=0,c.items[1]=2,c.items[2]=3,c.count=3,c=a.lists[u.EXIT],
c.items[0]=1,c.items[1]=2,c.items[2]=4,c.count=3,C<g?(g=a.lists[u.CAP],g.count=0,a.capCenter=void 0):(g=a.lists[u.CAP],g.items[0]=3,g.items[1]=4,g.count=2,a.capCenter=2)):!I&&G?(G=a.vectors.items[0],q(G.vector,l(r[9],B),p(r[10],l(r[11],b),H)),G.texCoords[0]=0,G.texCoords[1]=h,G.direction[0]=this._distanceAlongCorrection?b[0]:0,G.direction[1]=this._distanceAlongCorrection?b[1]:0,D=a.vectors.items[1],q(D.vector,l(r[12],t),p(r[13],c,H)),D.texCoords[0]=0,D.texCoords[1]=h,D.direction[0]=this._distanceAlongCorrection?
c[0]:0,D.direction[1]=this._distanceAlongCorrection?c[1]:0,h=a.vectors.items[2],h.vector[0]=0,h.vector[1]=0,h.texCoords[0]=0,h.texCoords[1]=0,h.direction[0]=0,h.direction[1]=0,h=a.vectors.items[3],p(h.vector,v,1/A),h.texCoords[0]=0,h.texCoords[1]=n,h.direction[0]=0,h.direction[1]=0,a.vectors.count=4,c=a.lists[u.ENTRY],c.items[0]=0,c.items[1]=2,c.items[2]=3,c.count=3,c=a.lists[u.EXIT],c.items[0]=1,c.items[1]=2,c.items[2]=3,c.count=3,a.lists[u.CAP].count=0,a.capCenter=void 0):I&&!G?(G=a.vectors.items[0],
p(G.vector,D,1/A),G.texCoords[0]=0,G.texCoords[1]=h,G.direction[0]=0,G.direction[1]=0,D=a.vectors.items[1],D.vector[0]=0,D.vector[1]=0,D.texCoords[0]=0,D.texCoords[1]=0,D.direction[0]=0,D.direction[1]=0,h=a.vectors.items[2],q(h.vector,B,p(r[9],b,F)),h.texCoords[0]=0,h.texCoords[1]=n,h.direction[0]=this._distanceAlongCorrection?b[0]:0,h.direction[1]=this._distanceAlongCorrection?b[1]:0,h=a.vectors.items[3],q(h.vector,t,p(r[10],l(r[11],c),F)),h.texCoords[0]=0,h.texCoords[1]=n,h.direction[0]=this._distanceAlongCorrection?
c[0]:0,h.direction[1]=this._distanceAlongCorrection?c[1]:0,a.vectors.count=4,c=a.lists[u.ENTRY],c.items[0]=0,c.items[1]=1,c.items[2]=2,c.count=3,c=a.lists[u.EXIT],c.items[0]=0,c.items[1]=1,c.items[2]=3,c.count=3,C<g?(g=a.lists[u.CAP],g.count=0,a.capCenter=void 0):(g=a.lists[u.CAP],g.items[0]=2,g.items[1]=3,g.count=2,a.capCenter=1)):I||G||(G=a.vectors.items[0],p(G.vector,D,1/A),G.texCoords[0]=0,G.texCoords[1]=h,G.direction[0]=0,G.direction[1]=0,D=a.vectors.items[1],p(D.vector,v,1/A),D.texCoords[0]=
0,D.texCoords[1]=n,D.direction[0]=0,D.direction[1]=0,a.vectors.count=2,c=a.lists[u.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[u.EXIT],c.items[0]=0,c.items[1]=1,c.count=2,a.lists[u.CAP].count=0,a.capCenter=void 0);0>d&&(y(a.lists[u.ENTRY]),y(a.lists[u.EXIT]))};a.prototype.roundJoin=function(a,b,c,d){var g=k(b,c),n=0<g?[-1,1]:[1,-1],h=n[0],n=n[1],t=0<g?l(r[0],f(r[1],b)):f(r[2],b),C=0<g?l(r[3],f(r[4],c)):f(r[5],c),D=r[6];D[0]=t[0]+C[0];D[1]=t[1]+C[1];var A=m(r[7],D),D=l(r[8],A),F=e(A,t),A=
k(A,t),A=Math.abs(A/F),G=1+A*A<z?[A,this._distanceAlongCorrection]:[Math.sqrt(z-1),!0],A=G[0];G[1]?(G=a.vectors.items[0],G.vector[0]=t[0],G.vector[1]=t[1],G.texCoords[0]=0,G.texCoords[1]=n,G.direction[0]=0,G.direction[1]=0,G=a.vectors.items[1],G.vector[0]=C[0],G.vector[1]=C[1],G.texCoords[0]=0,G.texCoords[1]=n,G.direction[0]=0,G.direction[1]=0,G=a.vectors.items[2],q(G.vector,l(r[9],t),p(r[10],l(r[11],b),A)),G.texCoords[0]=0,G.texCoords[1]=h,G.direction[0]=this._distanceAlongCorrection?b[0]:0,G.direction[1]=
this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[3],q(b.vector,l(r[12],C),p(r[13],c,A)),b.texCoords[0]=0,b.texCoords[1]=h,b.direction[0]=this._distanceAlongCorrection?c[0]:0,b.direction[1]=this._distanceAlongCorrection?c[1]:0,c=a.vectors.items[4],c.vector[0]=0,c.vector[1]=0,c.texCoords[0]=0,c.texCoords[1]=0,c.direction[0]=0,c.direction[1]=0,a.vectors.count=5,c=a.lists[u.ENTRY],c.items[0]=2,c.items[1]=4,c.items[2]=0,c.count=3,c=a.lists[u.EXIT],c.items[0]=3,c.items[1]=4,c.items[2]=1,c.count=3,
a.capCenter=4):(G=a.vectors.items[0],G.vector[0]=t[0],G.vector[1]=t[1],G.texCoords[0]=0,G.texCoords[1]=n,G.direction[0]=0,G.direction[1]=0,G=a.vectors.items[1],G.vector[0]=C[0],G.vector[1]=C[1],G.texCoords[0]=0,G.texCoords[1]=n,G.direction[0]=0,G.direction[1]=0,G=a.vectors.items[2],p(G.vector,D,1/F),G.texCoords[0]=0,G.texCoords[1]=h,G.direction[0]=0,G.direction[1]=0,b=a.vectors.items[3],b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=0,b.texCoords[1]=0,b.direction[0]=0,b.direction[1]=0,a.vectors.count=
4,c=a.lists[u.ENTRY],c.items[0]=2,c.items[1]=3,c.items[2]=0,c.count=3,c=a.lists[u.EXIT],c.items[0]=2,c.items[1]=3,c.items[2]=1,c.count=3,a.capCenter=3);v(B,t,C,d,0>g);d=a.vectors.count;t=a.lists[u.CAP];for(C=t.items[0]=0;C<B.count;++C)c=B.items[C],h=a.vectors.items[d+C],h.vector[0]=c[0],h.vector[1]=c[1],h.texCoords[0]=0,h.texCoords[1]=n,h.direction[0]=0,h.direction[1]=0,t.items[C+1]=d+C;t.items[B.count+1]=1;t.count=B.count+2;a.vectors.count=d+B.count;0>g&&(y(a.lists[u.ENTRY]),y(a.lists[u.EXIT]))};
a.prototype.unitRoundJoin=function(a,b,c,d){var g=k(b,c),e=0<g?[-1,1]:[1,-1],n=e[0],e=e[1];b=0<g?l(r[0],f(r[1],b)):f(r[2],b);c=0<g?l(r[3],f(r[4],c)):f(r[5],c);var h=a.vectors.items[0];h.vector[0]=b[0];h.vector[1]=b[1];h.texCoords[0]=0;h.texCoords[1]=e;h.direction[0]=0;h.direction[1]=0;h=a.vectors.items[1];h.vector[0]=c[0];h.vector[1]=c[1];h.texCoords[0]=0;h.texCoords[1]=e;h.direction[0]=0;h.direction[1]=0;h=a.vectors.items[2];l(h.vector,b);h.texCoords[0]=0;h.texCoords[1]=n;h.direction[0]=0;h.direction[1]=
0;h=a.vectors.items[3];l(h.vector,c);h.texCoords[0]=0;h.texCoords[1]=n;h.direction[0]=0;h.direction[1]=0;n=a.vectors.items[4];n.vector[0]=0;n.vector[1]=0;n.texCoords[0]=0;n.texCoords[1]=0;n.direction[0]=0;n.direction[1]=0;a.vectors.count=5;n=a.lists[u.ENTRY];n.items[0]=2;n.items[1]=0;n.count=2;n=a.lists[u.EXIT];n.items[0]=3;n.items[1]=1;n.count=2;a.capCenter=4;v(B,b,c,d,0>g);d=a.vectors.count;b=a.lists[u.CAP];for(n=b.items[0]=0;n<B.count;++n)c=B.items[n],h=a.vectors.items[d+n],h.vector[0]=c[0],h.vector[1]=
c[1],h.texCoords[0]=0,h.texCoords[1]=e,h.direction[0]=0,h.direction[1]=0,b.items[n+1]=d+n;b.items[B.count+1]=1;b.count=B.count+2;a.vectors.count=d+B.count;0>g&&(y(a.lists[u.ENTRY]),y(a.lists[u.EXIT]))};a.prototype.rectJoin=function(a,b,c){b=f(r[0],b);c=f(r[1],c);var d=a.vectors.items[0];d.vector[0]=b[0];d.vector[1]=b[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;d=a.vectors.items[1];d.vector[0]=c[0];d.vector[1]=c[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=
0;d=a.vectors.items[2];l(d.vector,b);d.texCoords[0]=0;d.texCoords[1]=1;d.direction[0]=0;d.direction[1]=0;b=a.vectors.items[3];l(b.vector,c);b.texCoords[0]=0;b.texCoords[1]=1;b.direction[0]=0;b.direction[1]=0;a.vectors.count=4;b=a.lists[u.ENTRY];b.items[0]=0;b.items[1]=2;b.count=2;b=a.lists[u.EXIT];b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0};return a}();a.Tessellator=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../color ../../definitions ../../enums ../../number ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t){Object.defineProperty(a,"__esModule",{value:!0});var v=d.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");c=function(a){function c(b,c,d,e,f,k,q,t,v,y,u){var g=a.call(this)||this;g.geometryType=l.WGLGeometryType.MARKER;var n=m.create(),r=h.create(),B=u.sdf?.5:1;h.translate(r,r,new Float32Array([B*d,B*-e]));f&&h.rotate(r,r,3.14159265359/180*f);g._materialStore=b;g.vvFlags=c;g._materialId=b.createSpriteMaterial(u,g.geometryType,c);g._fillColor=k;g._outlineColor=
v;g._sizeOutlineWidth=p.i8888to32(q,t,y,0);b=Math.round(u.rect.x/4);c=Math.round(u.rect.y/4);f=b+Math.round(u.rect.width/4);u=c+Math.round(u.rect.height/4);n.set([-.5*q,-.5*t]);m.transformMat2d(n,n,r);g._offsetAndTexUpperLeft=p.i8888to32(n[0],n[1],b,c);n.set([.5*q,-.5*t]);m.transformMat2d(n,n,r);g._offsetAndTexUpperRight=p.i8888to32(n[0],n[1],f,c);n.set([-.5*q,.5*t]);m.transformMat2d(n,n,r);g._offsetAndTexBottomLeft=p.i8888to32(n[0],n[1],b,u);n.set([.5*q,.5*t]);m.transformMat2d(n,n,r);g._offsetAndTexBottomRight=
p.i8888to32(n[0],n[1],f,u);g.height=t;g.width=q;g.xOffset=d;g.yOffset=e;return g}b(c,a);c.fromPictureMarker=function(a,b,d,n,f){f=Math.round(e.pt2px(d.width));var g=Math.round(e.pt2px(d.height)),l=k.PICTURE_FILL_COLOR,h=Math.round(e.pt2px(d.xoffset||0)),r=Math.round(e.pt2px(d.yoffset||0));return new c(a,b,h,r,d.angle,l,f,g,0,0,n)};c.fromSimpleMarker=function(a,b,d,n,k){k=f.premultiplyAlphaRGBA(d.color);var g=Math.round(e.pt2px(d.size)),l=Math.round(e.pt2px(d.xoffset||0)),h=Math.round(e.pt2px(d.yoffset||
0)),r=d.outline,m=(r&&r.color&&f.premultiplyAlphaRGBA(r.color))|0,r=(r&&r.width&&Math.round(e.pt2px(r.width)))|0;return new c(a,b,l,h,d.angle,k,g,g,m,r,n)};c.prototype.writeMesh=function(a,b,c,d,e,f,k){f=this._materialStore.get(this._materialId);var g=b.indexVector;b=b.get("geometry");var n=new q(d,this.geometryType,this._materialId),l=this._getOffset(b,f);a.push(n);n.vertexFrom=l;n.indexFrom=g.length;switch(c){case "esriGeometryPoint":c=e.geometry;a=c.x;c=c.y;this._writeVertices(n,b,d,this._getPos(a,
c),f,k);this._writeIndices(n,g,l);break;case "esriGeometryPolyline":this._writeMany(n,g,b,l,d,e.geometry.paths[0],f,k);break;case "esriGeometryPolygon":(c=e.centroid)?(a=c.x,c=c.y,this._writeVertices(n,b,d,this._getPos(a,c),f,k),this._writeIndices(n,g,l)):v.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(n,g,b,l,d,e.geometry.points,f,k);break;default:v.error("Unable to handle geometryType: "+c)}};c.prototype._getPos=
function(a,b){return p.i1616to32(a,b)};c.prototype._writeMany=function(a,b,c,d,e,f,k,l){for(var g=0,n=0,h=0,r=0;r<f.length;r++){var m=f[r],p=m[0],m=m[1];this._writeVertices(a,c,e,this._getPos(p+g,m+n),k,l);this._writeIndices(a,b,d+h);g+=p;n+=m;h+=4}};c.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?10:6;return a.length/b};c.prototype._writeVertices=function(a,b,c,d,e,f){b.push(d);b.push(this._offsetAndTexUpperLeft);b.push(c);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);
this._writeVV(b,f,e);b.push(d);b.push(this._offsetAndTexUpperRight);b.push(c);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,f,e);b.push(d);b.push(this._offsetAndTexBottomLeft);b.push(c);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,f,e);b.push(d);b.push(this._offsetAndTexBottomRight);b.push(c);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,f,e);
a.vertexCount+=4};c.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[l.VVType.SIZE]),a.push(b[l.VVType.COLOR]),a.push(b[l.VVType.OPACITY]),a.push(b[l.VVType.ROTATION]))};c.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return c}(t.default);a.default=c})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat2d":function(){define(["./common"],function(c){var a={create:function(){var a=new c.ARRAY_TYPE(6);
a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new c.ARRAY_TYPE(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},fromValues:function(a,d,e,h,m,f){var b=new c.ARRAY_TYPE(6);b[0]=a;b[1]=d;b[2]=e;b[3]=h;b[4]=m;b[5]=f;return b},set:function(a,c,e,h,m,f,k){a[0]=c;a[1]=e;a[2]=h;a[3]=m;a[4]=f;
a[5]=k;return a},invert:function(a,c){var b=c[0],d=c[1],m=c[2],f=c[3],k=c[4];c=c[5];var l=b*f-d*m;if(!l)return null;l=1/l;a[0]=f*l;a[1]=-d*l;a[2]=-m*l;a[3]=b*l;a[4]=(m*c-f*k)*l;a[5]=(d*k-b*c)*l;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,c,e){var b=c[0],d=c[1],f=c[2],k=c[3],l=c[4];c=c[5];var p=e[0],q=e[1],t=e[2],v=e[3],y=e[4];e=e[5];a[0]=b*p+f*q;a[1]=d*p+k*q;a[2]=b*t+f*v;a[3]=d*t+k*v;a[4]=b*y+f*e+l;a[5]=d*y+k*e+c;return a}};a.mul=a.multiply;a.rotate=function(a,
c,e){var b=c[0],d=c[1],f=c[2],k=c[3],l=c[4];c=c[5];var p=Math.sin(e);e=Math.cos(e);a[0]=b*e+f*p;a[1]=d*e+k*p;a[2]=b*-p+f*e;a[3]=d*-p+k*e;a[4]=l;a[5]=c;return a};a.scale=function(a,c,e){var b=c[1],d=c[2],f=c[3],k=c[4],l=c[5],p=e[0];e=e[1];a[0]=c[0]*p;a[1]=b*p;a[2]=d*e;a[3]=f*e;a[4]=k;a[5]=l;return a};a.translate=function(a,c,e){var b=c[0],d=c[1],f=c[2],k=c[3],l=c[4];c=c[5];var p=e[0];e=e[1];a[0]=b;a[1]=d;a[2]=f;a[3]=k;a[4]=b*p+f*e+l;a[5]=d*p+k*e+c;return a};a.fromRotation=function(a,c){var b=Math.sin(c);
c=Math.cos(c);a[0]=c;a[1]=b;a[2]=-b;a[3]=c;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=c[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=c[0];a[5]=c[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,c,e){a[0]=
c[0]+e[0];a[1]=c[1]+e[1];a[2]=c[2]+e[2];a[3]=c[3]+e[3];a[4]=c[4]+e[4];a[5]=c[5]+e[5];return a};a.subtract=function(a,c,e){a[0]=c[0]-e[0];a[1]=c[1]-e[1];a[2]=c[2]-e[2];a[3]=c[3]-e[3];a[4]=c[4]-e[4];a[5]=c[5]-e[5];return a};a.sub=a.subtract;a.multiplyScalar=function(a,c,e){a[0]=c[0]*e;a[1]=c[1]*e;a[2]=c[2]*e;a[3]=c[3]*e;a[4]=c[4]*e;a[5]=c[5]*e;return a};a.multiplyScalarAndAdd=function(a,c,e,h){a[0]=c[0]+e[0]*h;a[1]=c[1]+e[1]*h;a[2]=c[2]+e[2]*h;a[3]=c[3]+e[3]*h;a[4]=c[4]+e[4]*h;a[5]=c[5]+e[5]*h;return a};
a.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]};a.equals=function(a,d){var b=a[0],h=a[1],m=a[2],f=a[3],k=a[4];a=a[5];var l=d[0],p=d[1],q=d[2],t=d[3],v=d[4];d=d[5];return Math.abs(b-l)<=c.EPSILON*Math.max(1,Math.abs(b),Math.abs(l))&&Math.abs(h-p)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(m-q)<=c.EPSILON*Math.max(1,Math.abs(m),Math.abs(q))&&Math.abs(f-t)<=c.EPSILON*Math.max(1,Math.abs(f),Math.abs(t))&&Math.abs(k-v)<=c.EPSILON*
Math.max(1,Math.abs(k),Math.abs(v))&&Math.abs(a-d)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))};return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../Geometry ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ../../util/BidiText".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y){Object.defineProperty(a,"__esModule",{value:!0});var u=d.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),A=24*1.2,z=function(){function a(a,b,c,d,g,e,f,k,l){this.materialId=a;this.vertexOffsetUpperLeft=b;this.vertexOffsetUpperRight=c;this.vertexOffsetLowerLeft=d;this.vertexOffsetLowerRight=g;this.texFontSizeUpperLeft=e;this.texFontSizeUpperRight=f;this.texFontSizeLowerLeft=k;this.texFontSizeLowerRight=l}a.from=function(b,c,d,g,e){var n=b.glyphMosaicItem,
f=n.rect,h=n.metrics,r=Math.round(f.x/4),m=Math.round(f.y/4),n=r+Math.round(f.width/4),p=m+Math.round(f.height/4);if(b.codePoint){var q=b.x+0+h.left;b=b.y+-17-h.top;b=new k.Point(q-4,b-4);f=new k.Point(b.x+f.width,b.y+f.height)}else q=b.x,b=b.y,b=new k.Point(q,b),f=new k.Point(b.x+h.width,b.y+h.height);h=new k.Point(b.x,f.y);q=new k.Point(f.x,b.y);if(d){var B=Math.cos(d);d=Math.sin(d);b.rotate(B,d);f.rotate(B,d);h.rotate(B,d);q.rotate(B,d)}d=l.i1616to32(8*b.x,8*b.y);b=l.i1616to32(8*q.x,8*q.y);h=l.i1616to32(8*
h.x,8*h.y);f=l.i1616to32(8*f.x,8*f.y);q=l.i8888to32(r,m,g,e);m=l.i8888to32(n,m,g,e);r=l.i8888to32(r,p,g,e);g=l.i8888to32(n,p,g,e);return new a(c,d,b,h,f,q,m,r,g)};return a}();a.ComputedGlyph=z;c=function(a){function c(b,c,d){var g=a.call(this)||this;g.geometryType=f.WGLGeometryType.TEXT;var n=d.haloColor;g.color=(d.color&&h.premultiplyAlphaRGBA(d.color))|0;g.textSize=e.pt2px(d.font.size);var k=d.yoffset/d.font.size;g.shapingXOffset=d.xoffset/d.font.size*24;g.shapingYOffset=24*k;g.haloColor=(n&&h.premultiplyAlphaRGBA(n))|
0;g.haloSize=10*e.pt2px(e.toPt(d.haloSize||0));g.textPropColor=g.color||m.PICTURE_FILL_COLOR;g.textPropSize=e.pt2px(d.font.size);g.textPropAngle=d.angle*Math.PI/180;g.xOffset=e.pt2px(d.xoffset);g.yOffset=e.pt2px(d.yoffset);g.textPropHAnchor="left"===d.horizontalAlignment?0:"right"===d.horizontalAlignment?1:.5;g.textPropVAnchor="top"===d.verticalAlignment?0:"bottom"===d.verticalAlignment?1:.5;g.textPropHaloColor=g.haloColor||4294967295;g.textPropHaloSize=e.pt2px(e.toPt(d.haloSize||0));g._materialStore=
b;g.vvFlags=c;return g}b(c,a);c.fromText=function(a,b,d,g,e){a=new c(a,b,d);a.computeGlyphs(e,d.text,!1);return a};c.prototype.writeMesh=function(a,b,c,d,g,e,f){e=b.indexVector;var n=b.get("geometry");b=b.get("visibility");var k=this._getOffset(n);switch(c){case "esriGeometryPoint":g=g.geometry;c=g.x;g=g.y;this._writeVertices(a,e,n,b,k,d,c,g,f);break;case "esriGeometryPolygon":if(g.centroid){g=g.centroid;c=g.x;g=g.y;this._writeVertices(a,e,n,b,k,d,c,g,f);break}default:u.error("Unable to handle geometryType: "+
c)}};c.prototype.computeGlyphs=function(a,b,c){if(!b||!b.length)return this._computedGlyphs=[],null;a=this._computeShaping(a,240,A,0,this.shapingXOffset,this.shapingYOffset,this.textPropHAnchor,this.textPropVAnchor,.5);b=y.bidiText(b);b=a.getShaping(b[0],b[1]);a=Array(b.length);for(var d=0;d<b.length;d++){var g=this.textPropAngle,e=this.textSize,n=this.haloSize,k=this._materialStore.createGlyphMaterial(b[d].glyphMosaicItem,f.WGLGeometryType.TEXT,this.vvFlags);a[d]=z.from(b[d],k,g,e,n)}this._computedGlyphs=
a;if(!c)return null;c=p.getBox(b);c.width*=this.textSize/24;c.height*=this.textSize/24;return new t.default(c.x,c.y,c.width,c.height)};c.prototype._computeShaping=function(a,b,c,d,g,e,f,n,k){return this._shaping=new p([a],240,A,0,[g,e],f,n,.5)};c.prototype._getOffset=function(a){return a.length/(this.vvFlags?9:5)};c.prototype._writeVertices=function(a,b,c,d,g,e,f,n,k){var h=this._computedGlyphs,r=l.i1616to32(2*f,2*n);f=l.i1616to32(2*f+1,2*n);n=0;if(this.haloSize)for(var m=0;m<h.length;m++,n+=4){var p=
h[m].materialId,B=this._materialStore.get(p),p=new q(e,this.geometryType,p);p.vertexFrom=g;p.indexFrom=b.length;this._writeVertex(p,c,d,e,f,this.haloColor,h[m],B,k);this._writeIndices(p,b,g+n);a.push(p)}for(m=0;m<h.length;m++,n+=4)p=h[m].materialId,B=this._materialStore.get(p),p=new q(e,this.geometryType,p),p.vertexFrom=g,p.indexFrom=b.length,this._writeVertex(p,c,d,e,r,this.color,h[m],B,k),this._writeIndices(p,b,g+n),a.push(p)};c.prototype._writeVertex=function(a,b,c,d,g,e,f,n,k){b.push(g);b.push(d);
b.push(e);b.push(f.vertexOffsetUpperLeft);b.push(f.texFontSizeUpperLeft);this._writeVV(b,k,n);b.push(g);b.push(d);b.push(e);b.push(f.vertexOffsetUpperRight);b.push(f.texFontSizeUpperRight);this._writeVV(b,k,n);b.push(g);b.push(d);b.push(e);b.push(f.vertexOffsetLowerLeft);b.push(f.texFontSizeLowerLeft);this._writeVV(b,k,n);b.push(g);b.push(d);b.push(e);b.push(f.vertexOffsetLowerRight);b.push(f.texFontSizeLowerRight);this._writeVV(b,k,n);c.push(4294967295);a.vertexCount+=4};c.prototype._writeVV=function(a,
b,c){c.materialKeyInfo.hasVV()&&(a.push(b[f.VVType.SIZE]),a.push(b[f.VVType.COLOR]),a.push(b[f.VVType.OPACITY]),a.push(b[f.VVType.ROTATION]))};c.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return c}(v.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","./Rect"],function(c,a,b){return function(){function a(a,b,c,d,k,l,p,q){this._glyphItems=a;this._maxWidth=
b;this._lineHeight=c;this._letterSpacing=d;this._offset=k;this._hAnchor=l;this._vAnchor=p;this._justify=q}a.prototype.getShaping=function(a,b){for(var c=this._letterSpacing,d=this._lineHeight,e=this._justify,l=this._maxWidth,h=[],q=0,t=0,v=0,y=0,u=-1,A=0,z=-1,g=a.length,n=0;n<g;n++){var r=a.charCodeAt(n);if(10===r){if(n!==g-1){if(u>=y){var q=h[u],B=q.x+q.glyphMosaicItem.metrics.advance,A=Math.max(B,A);e&&this._applyJustification(h,y,u);y=h.length}t=b?t-d:t+d;q=0;++v}}else{for(var B=void 0,C=0,D=this._glyphItems;C<
D.length&&!(B=D[C][r]);C++);if(B){h.push({codePoint:r,x:q,y:t,glyphMosaicItem:B});q+=B.metrics.advance+c;if(0<l&&q>l&&0<=z){C=z+1;B=h[C].x;A=Math.max(B,A);for(D=C;D<h.length;D++)h[D].y=b?h[D].y-d:h[D].y+d,h[D].x-=B;e&&this._applyJustification(h,y,z);t=b?t-d:t+d;q-=B;++v;y=C;z=-1}++u;32===r&&(z=h.length-1)}}}u>=y&&(q=h[u],A=Math.max(A,q.x+q.glyphMosaicItem.metrics.advance),e&&this._applyJustification(h,y,u));if(0<h.length)for(a=(e-this._hAnchor)*A,c=(-this._vAnchor*(v+1)+.5)*d,b&&v&&(c+=v*d),a+=this._offset[0],
c+=this._offset[1],b=0;b<h.length;b++)d=h[b],d.x+=a,d.y+=c;return h};a.getBox=function(a){var b=a.length;if(0!==b){for(var c=a[0].x+a[0].glyphMosaicItem.metrics.left,d=c,e=a[0].y,l=e,p=e,q=1;q<b;q++){var t=a[q],v=t.x+t.glyphMosaicItem.metrics.left;v<c&&(c=v);v>d&&(d=v);t=t.y;t<e&&(e=t);t>l&&(l=t);t!==p&&(d=Math.max(d,a[q-1].x+a[q-1].glyphMosaicItem.metrics.left+a[q-1].glyphMosaicItem.metrics.width),p=t)}d=Math.max(d,a[b-1].x+a[b-1].glyphMosaicItem.metrics.left+a[b-1].glyphMosaicItem.metrics.width);
l+=12;return{x:c,y:l,width:d-c,height:l-(e-12)}}};a.addDecoration=function(a,c){var d=a.length;if(0!==d){for(var e=a[0].x+a[0].glyphMosaicItem.metrics.left,k=a[0].y,l=1;l<d;l++){var h=a[l];if(h.y!==k){var q=a[l-1].x+a[l-1].glyphMosaicItem.metrics.left+a[l-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:e,y:k+c-3,glyphMosaicItem:{rect:new b(4,0,4,8),metrics:{width:q-e,height:8,left:0,top:0,advance:0},page:0}});k=h.y;e=h.x+h.glyphMosaicItem.metrics.left}}d=a[d-1].x+a[d-1].glyphMosaicItem.metrics.left+
a[d-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:e,y:k+c-3,glyphMosaicItem:{rect:new b(4,0,4,8),metrics:{width:d-e,height:8,left:0,top:0,advance:0},page:0}})}};a.prototype._applyJustification=function(a,b,c){for(var d=a[c],d=(d.x+d.glyphMosaicItem.metrics.advance)*this._justify;b<=c;b++)a[b].x-=d};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(c,a){return function(){function a(a,b,c,m){void 0===a&&(a=0);void 0===b&&(b=
0);void 0===c&&(c=0);void 0===m&&(m=0);this.x=a;this.y=b;this.width=c;this.height=m}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});var d=new b;a.bidiText=function(a){if(!d.hasBidiChar(a))return[a,!1];var b;b="rtl"===
d.checkContextual(a)?"IDNNN":"ICNNN";return[d.bidiTransform(a,b,"VLYSN"),!0]}})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(c,a,b){function d(a,b,c,g,n){var k=a;void 0===b&&(b=n.defInFormat);void 0===c&&(c=n.defOutFormat);void 0===g&&(g=n.defSwap);if(b!==c){var l,r=b.substring(0,1);l=b.substring(1,4);var m=c.substring(0,1),p=c.substring(1,4);"C"===l.charAt(0)&&(l=e(k),l="ltr"===l||"rtl"===l?l.toUpperCase():"L"===b.charAt(2)?"LTR":
"RTL",b=r+l);"C"===p.charAt(0)&&(l=e(k),"rtl"===l?p="RTL":"ltr"===l?(k=k.split(""),k.reverse(),l=e(k.join("")),p=l.toUpperCase()):p="L"===c.charAt(2)?"LTR":"RTL",c=m+p)}if(b===c)return a;m=b.substring(0,1);k=b.substring(1,4);r=c.substring(0,1);p=c.substring(1,4);n.inFormat=b;n.outFormat=c;n.swap=g;if("L"===m&&"VLTR"===c){if("LTR"===k)return n.dir=D,h(a,n);if("RTL"===k)return n.dir=F,h(a,n)}if("V"===m&&"V"===r)return n.dir="RTL"===k?F:D,f(a,n);if("L"===m&&"VRTL"===c)return n.dir="LTR"===k?D:F,a=h(a,
n),f(a);if("VLTR"===b&&"LLTR"===c)return n.dir=D,h(a,n);if("V"===m&&"L"===r&&k!==p)return a=f(a),"RTL"===k?d(a,"LLTR","VLTR",g,n):d(a,"LRTL","VRTL",g,n);if("VRTL"===b&&"LRTL"===c)return d(a,"LRTL","VRTL",g,n);if("L"===m&&"L"===r)return b=n.swap,n.swap=b.substr(0,1)+"N","RTL"===k?(n.dir=F,a=h(a,n),n.swap="N"+b.substr(1,2),n.dir=D,a=h(a,n)):(n.dir=D,a=h(a,n),n.swap="N"+b.substr(1,2),a=d(a,"VLTR","LRTL",n.swap,n)),a}function e(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?
"z">=a[0]?"ltr":"rtl":""}function h(a,b){a=a.split("");var c=[];m(a,c,b);if(0!==b.hiLevel&&b.swap.substr(0,1)!==b.swap.substr(1,2))for(var d=0;d<a.length;d++)if(1===c[d]){var g=d,e;b:{e=a[d];for(var f=void 0,k=0,l=I.length-1;k<=l;)if(f=Math.floor((k+l)/2),e<I[f][0])l=f-1;else if(e>I[f][0])k=f+1;else{e=I[f][1];break b}}a[g]=e}p(2,a,c,b);p(1,a,c,b);n=c;return a.join("")}function m(a,b,c){var d=a.length,g=c.dir?M:P,e=null,n=null,f=null,e=0,n=n=null,k=-1,l=n=null,h=[],r=[];c.hiLevel=c.dir;c.lastArabic=
!1;c.hasUbatAl=!1;c.hasUbatB=!1;c.hasUbatS=!1;for(n=0;n<d;n++){var l=n,f=a[n].charCodeAt(0),m=pa[f>>8];h[l]=m<ka?m:qa[m-ka][f&255]}for(l=0;l<d;l++){r[l]=n=q(a,h,r,l,c);e=g[e][n];n=e&240;e&=15;b[l]=f=g[e][B];if(0<n){if(16===n)for(n=k;n<l;n++)b[n]=1;k=-1}if(n=g[e][C])-1===k&&(k=l);else if(-1<k){for(n=k;n<l;n++)b[n]=f;k=-1}h[l]===L&&(b[l]=0);c.hiLevel|=f}if(c.hasUbatS)for(a=0;a<d;a++)if(h[a]===da)for(b[a]=c.dir,g=a-1;0<=g;g--)if(h[g]===ja)b[g]=c.dir;else break}function f(a,b){a=a.split("");if(b){var c=
[];m(a,c,b);n=c}a.reverse();z.reverse();return a.join("")}function k(a){for(var b=0;b<Z.length;b++)if(a>=Z[b]&&a<=V[b])return!0;return!1}function l(a,b,c,d){for(;b*c<d&&v(a[b]);)b+=c;return b*c<d&&k(a[b])?!0:!1}function p(a,b,c,d){if(!(d.hiLevel<a))if(1!==a||d.dir!==F||d.hasUbatB){d=b.length;for(var g=0,e,n,f;g<d;){if(c[g]>=a){for(e=g+1;e<d&&c[e]>=a;)e++;for(n=e-1;g<n;g++,n--)f=b[g],b[g]=b[n],b[n]=f,f=z[g],z[g]=z[n],z[n]=f;g=e}g++}}else b.reverse(),z.reverse()}function q(a,b,c,d,g){return{UBAT_L:function(){g.lastArabic=
!1;return N},UBAT_R:function(){g.lastArabic=!1;return Q},UBAT_ON:function(){return W},UBAT_AN:function(){return Y},UBAT_EN:function(){return g.lastArabic?Y:R},UBAT_AL:function(){g.lastArabic=!0;g.hasUbatAl=!0;return Q},UBAT_WS:function(){return W},UBAT_CS:function(){var a,e;if(1>d||d+1>=b.length||(a=c[d-1])!==R&&a!==Y||(e=b[d+1])!==R&&e!==Y)return W;g.lastArabic&&(e=Y);return e===a?e:W},UBAT_ES:function(){return(0<d?c[d-1]:L)===R&&d+1<b.length&&b[d+1]===R?R:W},UBAT_ET:function(){if(0<d&&c[d-1]===
R)return R;if(g.lastArabic)return W;for(var a=d+1,e=b.length;a<e&&b[a]===na;)a++;return a<e&&b[a]===R?R:W},UBAT_NSM:function(){if("VLTR"===g.inFormat){for(var e=b.length,n=d+1;n<e&&b[n]===oa;)n++;if(n<e&&(e=a[d],n=b[n],(1425<=e&&2303>=e||64286===e)&&(n===Q||n===fa)))return Q}return 1>d||b[d-1]===L?W:c[d-1]},UBAT_B:function(){g.lastArabic=!0;g.hasUbatB=!0;return g.dir},UBAT_S:function(){g.hasUbatS=!0;return W},UBAT_LRE:function(){g.lastArabic=!1;return W},UBAT_RLE:function(){g.lastArabic=!1;return W},
UBAT_LRO:function(){g.lastArabic=!1;return W},UBAT_RLO:function(){g.lastArabic=!1;return W},UBAT_PDF:function(){g.lastArabic=!1;return W},UBAT_BN:function(){return W}}[ra[b[d]]]()}function t(a,b){for(var c=0;c<K.length;c++)if(a===K[c])return b[c];return a}function v(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function y(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function u(a,b){for(var c=0;c<G.length;c++)if(a===G[c])return b[c];return a}function A(a,
b,c,d){for(var g=0;g<a.length;g++)if(a[g]>b||!c&&a[g]===b)a[g]+=d}c.getObject("string",!0,dojox);c=a("dojox.string.BidiEngine",b,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,b,c){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var e=this.sourceToTarget,f=this.targetToSource,h=a.length;z=[];n=[];for(var m=0;m<h;m++)e[m]=m,f[m]=m,z[m]=m;if(!this.checkParameters(b,c))return a;b=this.inputFormat;c=this.outputFormat;var e=
a,e=r,m=y(b.charAt(1)),f=y(c.charAt(1)),p="I"===b.charAt(0)?"L":b.charAt(0),h="I"===c.charAt(0)?"L":c.charAt(0),m=p+m,f=h+f,h=b.charAt(2)+c.charAt(2);e.defInFormat=m;e.defOutFormat=f;e.defSwap=h;a=d(a,m,f,h,e);e=!1;if("R"===c.charAt(1))e=!0;else if("C"===c.charAt(1)||"D"===c.charAt(1))e=this.checkContextual(a);f=this.sourceToTarget=z;h=Array(f.length);for(m=0;m<f.length;m++)h[f[m]]=m;g=this.targetToSource=h;if(b.charAt(3)===c.charAt(3))e=a;else if("S"===c.charAt(3))if(b=e,c=!0,0===a.length)e=void 0;
else{void 0===b&&(b=!0);void 0===c&&(c=!0);a=String(a);a=a.split("");var q=0,f=1,e=a.length;b||(q=a.length-1,f=-1,e=1);for(var h=e,m=c,B=0,e=[],p=0;q*f<h;q+=f)if(k(a[q])||v(a[q])){var C;if(C="\u0644"===a[q])b:{for(var D=a,F=q+f,w=f,x=h;F*w<x&&v(D[F]);)F+=w;C=" ";if(F*w<x)for(C=D[F],D=0;D<G.length;D++)if(G[D]===C){C=!0;break b}C=!1}if(C){a[q]=0===B?u(a[q+f],O):u(a[q+f],X);q+=f;B=a;C=q;D=f;for(F=h;C*D<F&&v(B[C]);)C+=D;C*D<F&&(B[C]=" ");m&&(e[p]=q,p++);B=0}else{C=a[q];if(1===B){D=q;if(l(a,q+f,f,h))b:for(F=
a[q],w=0;w<K.length;w++){if(F===K[w]){F=ca[w];break b}}else F=t(a[q],ba);a[D]=F}else!0===l(a,q+f,f,h)?a[q]=t(a[q],ea):a[q]=t(a[q],aa);v(C)||(B=1);b:{for(D=0;D<ha.length;D++)if(ha[D]===C){C=!0;break b}C=!1}!0===C&&(B=0)}}else B=0;f="";for(h=0;h<a.length;h++){if(m=c){b:{for(m=0;m<e.length;m++)if(e[m]===h)break b;m=-1}m=-1<m}m?(A(g,h,!b,-1),z.splice(h,1)):f+=a[h]}e=f}else if(b=a,c=e,a=!0,0===b.length)e=void 0;else for(void 0===a&&(a=!0),void 0===c&&(c=!0),b=String(b),e="",f=[],f=b.split(""),h=0;h<b.length;h++)m=
!1,"\ufe70"<=f[h]&&"\ufeff">f[h]?(p=b.charCodeAt(h),"\ufef5"<=f[h]&&"\ufefc">=f[h]?(c?(0<h&&a&&" "===f[h-1]?e=e.substring(0,e.length-1)+"\u0644":(e+="\u0644",m=!0),e+=G[(p-65269)/2]):(e+=G[(p-65269)/2],e+="\u0644",h+1<b.length&&a&&" "===f[h+1]?h++:m=!0),m&&(A(g,h,!0,1),z.splice(h,0,z[h]))):e+=U[p-65136]):e+=f[h];this.sourceToTarget=z;this.targetToSource=g;this.levels=n;return e},_inputFormatSetter:function(a){if(!H.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=
a},_outputFormatSetter:function(a){if(!H.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,b){a?this.set("inputFormat",a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=e(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return J.test(a)}});var z=[],g=[],n=[],r={dir:0,
defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},B=5,C=6,D=0,F=1,H=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,J=/[\u0591-\u06ff\ufb1d-\ufefc]/,I=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],
["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],G=["\u0622","\u0623","\u0625","\u0627"],O=["\ufef5","\ufef7","\ufef9","\ufefb"],X=["\ufef6","\ufef8","\ufefa","\ufefc"],K="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
aa="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),ba="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
ca="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),ea="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
ha="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),U="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
Z=["\u0621","\u0641"],V=["\u063a","\u064a"],P=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],M=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N=0,Q=1,R=2,Y=3,W=4,L=5,da=6,fa=7,ja=8,na=11,oa=12,ra="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ka=100;a=N;b=Q;var T=R,ga=Y,w=W,la=L,ma=da,x=fa,ia=ja,S=na,E=oa,
pa=[ka+0,a,a,a,a,ka+1,ka+2,ka+3,b,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,ka+4,w,w,w,a,w,a,w,a,w,w,w,a,a,w,w,a,a,a,a,a,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,a,a,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,a,a,w,w,a,a,w,w,a,a,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,
w,w,w,w,w,w,w,a,a,a,ka+5,x,x,ka+6,ka+7],qa=[[18,18,18,18,18,18,18,18,18,ma,la,ma,ia,la,18,18,18,18,18,18,18,18,18,18,18,18,18,18,la,la,la,ma,ia,w,w,S,S,S,w,w,w,w,w,10,9,10,9,9,T,T,T,T,T,T,T,T,T,T,9,w,w,w,w,w,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,w,w,w,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,w,w,18,18,18,18,18,18,la,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,w,S,S,S,S,w,w,w,w,a,w,w,18,w,w,S,S,T,T,w,a,w,w,w,T,a,w,w,w,w,w,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,w,w,w,w,w,w,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,a,a,a,a,a,a,a,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,a,w,w,w,w,w,w,w,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,
E,E,b,E,b,E,E,b,E,E,b,E,w,w,w,w,w,w,w,w,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,w,w,w,w,w,b,b,b,b,b,w,w,w,w,w,w,w,w,w,w,w],[ga,ga,ga,ga,w,w,w,w,x,S,S,x,9,x,w,w,E,E,E,E,E,E,E,E,E,E,E,x,w,w,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,ga,ga,ga,ga,ga,ga,ga,ga,ga,ga,S,ga,ga,x,x,x,E,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,
x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,E,E,E,E,E,E,E,ga,w,E,E,E,E,E,E,x,x,E,E,w,E,E,E,E,x,x,T,T,T,T,T,T,T,T,T,T,x,x,x,x,x,x],[x,x,x,x,x,x,x,x,x,x,x,x,x,x,w,x,x,E,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,w,w,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,E,
E,E,E,E,E,E,E,E,E,E,x,w,w,w,w,w,w,w,w,w,w,w,w,w,w,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,E,E,E,E,E,E,E,E,E,b,b,w,w,w,w,b,w,w,w,w,w],[ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,18,18,18,a,b,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,ia,la,13,14,15,16,17,9,S,S,S,S,S,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,9,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,ia,18,18,18,18,18,w,w,w,w,w,18,18,18,18,18,18,T,a,w,w,T,T,T,T,T,T,10,10,w,w,w,a,T,T,T,T,T,T,T,T,T,T,10,10,w,w,
w,w,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,w,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[a,a,a,a,a,a,a,w,w,w,w,w,w,w,w,w,w,w,w,a,a,a,a,a,w,w,w,w,w,b,E,b,b,b,b,b,b,b,b,b,b,10,b,b,b,b,b,b,b,b,b,b,b,b,b,w,b,b,b,b,b,w,b,w,b,b,w,b,b,w,b,b,b,b,b,b,b,b,b,b,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,
x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,E,E,E,E,E,E,E,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,9,w,9,w,w,9,w,w,w,w,w,w,w,w,w,S,w,w,10,10,w,w,w,w,w,S,S,w,w,w,w,w,x,x,x,x,x,w,x,x,x,x,x,x,x,x,x,x,
x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,w,w,18],[w,w,w,S,S,S,w,w,w,w,w,10,9,10,9,9,T,T,T,T,T,T,T,T,T,T,9,w,w,w,w,w,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,w,w,w,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,w,w,w,w,w,w,w,w,w,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,w,w,w,a,a,a,a,a,a,w,w,a,a,a,a,a,a,w,w,a,a,a,a,a,a,w,w,a,a,a,w,w,w,S,S,w,w,w,S,S,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]];return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require","exports","../enums","../visualVariablesUtils"],function(c,a,b,d){function e(a,c){void 0===c&&(c=!1);var d=b.WGLVVFlag.SIZE_FIELD_STOPS|
b.WGLVVFlag.SIZE_MINMAX_VALUE|b.WGLVVFlag.SIZE_SCALE_STOPS|b.WGLVVFlag.SIZE_UNIT_VALUE;a=(a&(b.WGLVVTarget.FIELD_TARGETS_OUTLINE|b.WGLVVTarget.MINMAX_TARGETS_OUTLINE|b.WGLVVTarget.SCALE_TARGETS_OUTLINE|b.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return c?d&a:d&~a}function h(a){var c=e(a,!1);return a&(b.WGLVVFlag.COLOR|b.WGLVVFlag.OPACITY|b.WGLVVFlag.ROTATION|c)}Object.defineProperty(a,"__esModule",{value:!0});a.getVVFlags=function(a){if(!a)return b.WGLVVFlag.NONE;for(var c=0,e=0;e<a.length;e++){var l=
a[e];if("size"===l.type){var h=d.getTypeOfSizeVisualVariable(l),c=c|h;"outline"===l.target&&(c|=h<<4)}else"color"===l.type?c|=b.WGLVVFlag.COLOR:"opacity"===l.type?c|=b.WGLVVFlag.OPACITY:"rotation"===l.type&&(c|=b.WGLVVFlag.ROTATION)}return c};a.getSizeFlagsMask=e;a.getMarkerVVFlags=h;a.getFillVVFlags=function(a){return a&(b.WGLVVFlag.COLOR|b.WGLVVFlag.OPACITY)};a.getLineVVFlags=function(a,c){if(c)return c=e(a,!0),a&c;c=e(a,!1);return a&(b.WGLVVFlag.COLOR|b.WGLVVFlag.OPACITY|c)};a.getTextVVFlags=function(a){return h(a)}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../../../../../geometry/support/centroid ../../color ../../enums ../../fontUtils ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ./WGLTextTemplate".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A){Object.defineProperty(a,"__esModule",{value:!0});var z=d.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),g=24*1.2,n=q.i8888to32(255,255,255,255),r={xOffset:0,yOffset:0,width:0,height:0};c=function(a){function c(b,c,d){var g=a.call(this)||this;g.geometryType=l.WGLGeometryType.LABEL;g.vvFlags=0;g._textBoxVerticalOffset=0;g._textBoxHorizontalOffset=0;g._refTemplate=r;g._xOffset=c.xoffset;g._yOffset=-c.yoffset;g._decorationOffset=p.getFontDecorationOffset(c.font);
var n=c.haloColor;g._color=(c.color&&k.premultiplyAlphaRGBA(c.color))|0;var f=c.yoffset/c.font.size;g._shapingXOffset=c.xoffset/c.font.size*24;g._shapingYOffset=24*f;g._haloColor=(n&&k.premultiplyAlphaRGBA(n))|0;g._haloSize=10*e.pt2px(e.toPt(c.haloSize||0));g._textPropSize=e.pt2px(c.font.size);g._textPropAngle=c.angle*Math.PI/180;g._textPropHJustification="left"===c.horizontalAlignment?0:"right"===c.horizontalAlignment?1:.5;n=0;f=.5;switch(d){case "above-center":case "above-left":case "above-right":n=
-.5;f=0;break;case "below-center":case "below-left":case "below-right":n=.5,f=1}var h=0,q=.5;switch(d){case "above-left":case "center-left":case "below-left":h=-.5;q=1;break;case "above-right":case "center-right":case "below-right":h=.5,q=0}g._textPropHAnchorPlacement=q;g._textPropVAnchorPlacement=f;g._placementDirection=[h,n];g._materialStore=b;g.symbolId=c.id;g.anchor=m.create();return g}b(c,a);c.fromText=function(a,b,d,g,e,n){return new c(a,d,e)};Object.defineProperty(c.prototype,"bounds",{get:function(){return this._bounds},
enumerable:!0,configurable:!0});c.prototype.computeGlyphs=function(a,b){var c=b.text;if(!c||!c.length)return this._computedGlyphs=[],1;a=this._computeShaping(a,240,g,0,this._shapingXOffset,this._shapingYOffset,this._textPropHAnchorPlacement,this._textPropVAnchorPlacement,this._textPropHJustification).getShaping(c,b.rtl);isNaN(this._decorationOffset)||t.addDecoration(a,this._decorationOffset);b=Array(a.length);for(c=0;c<a.length;c++){var d=this._textPropAngle,e=this._textPropSize,n=this._haloSize,
f=this._materialStore.createGlyphMaterial(a[c].glyphMosaicItem,l.WGLGeometryType.LABEL,this.vvFlags);b[c]=A.ComputedGlyph.from(a[c],f,d,e,n)}this._computedGlyphs=b;if(!a||0===a.length)return 2;a=t.getBox(a);b=this._textPropSize/24;a.width*=b;a.height*=b;a.x*=b;a.y*=b;0>this._placementDirection[0]?this._textBoxHorizontalOffset=-a.x-a.width:0<this._placementDirection[0]&&(this._textBoxHorizontalOffset=-a.x);0>this._placementDirection[1]?this._textBoxVerticalOffset=-a.y:0<this._placementDirection[1]&&
(this._textBoxVerticalOffset=-a.y+a.height);c=a.width/2;d=a.height/2;this._textPropAngle&&(b=m.fromValues(-c,-d),c=m.fromValues(c,d),d=h.create(),h.rotate(d,d,this._textPropAngle),m.transformMat2d(b,b,d),m.transformMat2d(c,c,d),d=Math.abs(c[1]-b[1]),a.width=Math.abs(c[0]-b[0]),a.height=d);this._bounds=new y.default(a.x,a.y,a.width+10,a.height+10);a=this._placementDirection[1]*(this._refTemplate.height+this._bounds.height);this._bounds.center[0]=this._placementDirection[0]*(this._refTemplate.width+
this._bounds.width)+this._xOffset;this._bounds.center[1]=a+this._yOffset;return 0};c.prototype.bindReferenceTemplate=function(a){this._refTemplate=a?a:r};c.prototype.computeAnchor=function(a,b){var c=this._refTemplate.xOffset,d=this._refTemplate.yOffset;switch(a){case "esriGeometryPoint":b=b.geometry;a=b.x;b=b.y;this._setAnchor(a,b);break;case "esriGeometryMultipoint":a=b.geometry;b=this._computeAnchorMultipoint(a.points);a=b.x;b=b.y;this._setAnchor(a,b);break;case "esriGeometryPolygon":if(b.centroid){a=
b.centroid;this._setAnchor(a.x,a.y);break}a=b.geometry;b=this._computeAnchorRings(a.rings);if(!b)break;a=b.x;b=b.y;this._setAnchor(a,b);break;case "esriGeometryPolyline":a=b.geometry;b=this._computeAnchorRings(a.paths);if(!b)break;a=b.x;b=b.y;this._setAnchor(a,b);break;default:z.error("Unable to handle geometryType: "+a)}return m.fromValues(this.anchor[0]+c,this.anchor[1]+d)};c.prototype.writeMesh=function(a,b,c,d,g,e,n){c=b.indexVector;g=b.get("geometry");e=b.get("visibility");b=b.get("visibilityRange");
n=this._getOffset(g);var f=q.i8888to32(this._refTemplate.xOffset,-this._refTemplate.yOffset,this._placementDirection[0]*(this._refTemplate.width+10)+this._textBoxHorizontalOffset,this._placementDirection[1]*(this._refTemplate.height+10)+this._textBoxVerticalOffset);this._writeVertices(a,c,g,e,b,d,n,f,this.anchor[0],this.anchor[1])};c.prototype._setAnchor=function(a,b){this.anchor[0]=a;this.anchor[1]=b};c.prototype._computeAnchorMultipoint=function(a){return a.length&&a[0].length?{x:a[0][0],y:a[0][1]}:
null};c.prototype._computeAnchorRings=function(a){if(!a.length||!a[0].length||!a[0][0].length)return null;a=f.ringsCentroid(a,!1);return{x:a[0],y:a[1]}};c.prototype._computeShaping=function(a,b,c,d,e,n,f,k,l){return this._shaping=new t([a],240,g,0,[e,n],f,k,l)};c.prototype._getOffset=function(a){return a.length/5};c.prototype._writeVertices=function(a,b,c,d,g,e,n,f,k,l){var h=this._computedGlyphs,r=q.i1616to32(2*k,2*l);k=q.i1616to32(2*k+1,2*l);l=0;var m=q.i8888to32(0,(e&16711680)>>16,(e&65280)>>8,
e&255);if(this._haloSize)for(var p=0;p<h.length;p++,l+=4){var B=h[p].materialId,t=this._materialStore.get(B),B=new v(e,this.geometryType,B);B.vertexFrom=n+l;B.indexFrom=b.length;this._writeGlyph(B,c,d,g,m,k,this._haloColor,f,h[p],t);this._writeIndices(B,b,n+l);a.push(B)}for(p=0;p<h.length;p++,l+=4)B=h[p].materialId,t=this._materialStore.get(B),B=new v(e,this.geometryType,B),B.vertexFrom=n+l,B.indexFrom=b.length,this._writeGlyph(B,c,d,g,m,r,this._color,f,h[p],t),this._writeIndices(B,b,n+l),a.push(B)};
c.prototype._writeGlyph=function(a,b,c,d,g,e,f,k,l,h){b.push(e);b.push(f);b.push(l.vertexOffsetUpperLeft);b.push(l.texFontSizeUpperLeft);b.push(k);b.push(e);b.push(f);b.push(l.vertexOffsetUpperRight);b.push(l.texFontSizeUpperRight);b.push(k);b.push(e);b.push(f);b.push(l.vertexOffsetLowerLeft);b.push(l.texFontSizeLowerLeft);b.push(k);b.push(e);b.push(f);b.push(l.vertexOffsetLowerRight);b.push(l.texFontSizeLowerRight);b.push(k);c.push(4294967295);d.push(n);d.push(n);a.vertexCount+=4};c.prototype._writeIndices=
function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return c}(u.default);a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(c,a){function b(a){a=a.toLowerCase().split(" ").join("-");switch(a){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";default:return a}}
Object.defineProperty(a,"__esModule",{value:!0});a.getFullyQualifiedFontName=function(a){var c;a:{if(a.weight)switch(a.weight.toLowerCase()){case "bold":case "bolder":c="-bold";break a}c=""}var d;a:{if(a.style)switch(a.style.toLowerCase()){case "italic":case "oblic":d="-italic";break a}d=""}c+=d;return b(a.family)+(0<c.length?c:"-regular")};a.getFontDecorationOffset=function(a){switch(a.decoration.toLowerCase()){case "underline":return 8;case "line-through":return-3}return NaN}})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Matcher":function(){define(["require",
"exports","../../../../../core/tsSupport/extendsHelper","../../../../../core/Logger","../Utils"],function(c,a,b,d,e){Object.defineProperty(a,"__esModule",{value:!0});var h=d.getLogger("esri/views/2d/engine/webgl/util/Matcher");c=function(){function a(){this._defaultResult=null}a.prototype.size=function(){return 1};a.prototype.getDefault=function(){return this._defaultResult};a.prototype.setDefault=function(a){this._defaultResult=a};a.prototype.match=function(a,b){return this.getDefault()};return a}();
a.default=c;d=function(a){function c(b,c,d,f){var k=a.call(this)||this;k._intervals=[];k._isMaxInclusive=c;d?k._getValue=e.createArcadeFunction(d):b&&b.length?"function"===typeof b?(k._field=null,k._getValue=b):(k._field=b,k._normalizationInfo=f,k._getValue=k._getValueFromField.bind(k)):k._field=null;return k}b(c,a);c.prototype.add=function(a,b){this._intervals.push({interval:a,result:b});this._intervals.sort(function(a,b){return a.interval.min-b.interval.min})};c.prototype.size=function(){return a.prototype.size.call(this)+
this._intervals.length};c.prototype.match=function(a,b){if(!this._getValue)return this.getDefault();a=this._getValue(a,b);if(!a&&(null===a||void 0===a||isNaN(a)))return this.getDefault();for(b=0;b<this._intervals.length;b++){var c=this._intervals[b],d=c.interval,c=c.result,e=this._isMaxInclusive?a<=d.max:a<d.max;if(a>=d.min&&e)return c}return this.getDefault()};c.prototype._needsNormalization=function(){var a=this._normalizationInfo;return a&&(a.normalizationField||a.normalizationTotal||a.normalizationType)};
c.prototype._getValueFromField=function(a){var b=a.attributes[this._field];if(!this._needsNormalization())return b;var c=this._normalizationInfo,d=c.normalizationField,e=c.normalizationTotal,c=c.normalizationType;a=!!d&&a.attributes[d];if(c)switch(c){case "field":return(a||void 0)&&b/a;case "log":return Math.log(b)*Math.LOG10E;case "percent-of-total":return b/e*100;default:h.error("Found unknown normalization type: "+c)}else h.error("Normalization is required, but no type was set!")};return c}(c);
a.IntervalMatcher=d;c=function(a){function c(b,c,d){var f=a.call(this)||this;f._resultsMap=new Map;d?f._getValue=e.createArcadeFunction(d):b&&b.length?"function"===typeof b[0]?(f._fields=null,f._getValue=b[0]):(f._fields=b,f._seperator=c||"",f._getValue=f._getValueFromFields.bind(f)):f._fields=null;return f}b(c,a);c.prototype.add=function(a,b){this._resultsMap.set(a.toString(),b)};c.prototype.size=function(){return a.prototype.size.call(this)+this._resultsMap.size};c.prototype.match=function(a,b){if(!this._getValue)return this.getDefault();
a=this._getValue(a,b);if(!a&&(null===a||void 0===a))return this.getDefault();a=a.toString();return this._resultsMap.has(a)?this._resultsMap.get(a):this.getDefault()};c.prototype._getValueFromFields=function(a){for(var b=[],c=0,d=this._fields;c<d.length;c++)b.push(a.attributes[d[c]]);return b.join(this._seperator)};return c}(c);a.MapMatcher=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",
{value:!0});var b=function(){function a(a,b,c){this.data=a;this.stride=b;this.vertexCount=c}a.decode=function(b){var c=new Uint32Array(b.data);return new a(c,b.stride,b.vertexCount)};return a}();a.default=b;c=function(){function a(a,b,c){this.geometryType=a;this.indexBuffer=new Uint32Array(b);this.namedBuffers=c}a.decode=function(c){var d=c.geometryType,e=c.indexBuffer,f={},k;for(k in c.namedBuffers)f[k]=b.decode(c.namedBuffers[k]);return new a(d,e,f)};return a}();a.VertexBuffers=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Reader":function(){define(["require",
"exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a){this._pos=0;this._buffer=a;this._i32View=new Int32Array(this._buffer);this._f32View=new Float32Array(this._buffer)}a.prototype.readInt32=function(){return this._i32View[this._pos++]};a.prototype.readF32=function(){return this._f32View[this._pos++]};return a}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextureManager":function(){define("require exports ../../../../config ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ./CIMSymbolHelper ./fontUtils ./GlyphMosaic ./GlyphSource ./SDFHelper ./SpriteMosaic ./Utils ../../../3d/support/imageUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v){function y(a){if(a.type){switch(t.normalizeSymbolType(a.type)){case "simple-marker":return"simple-marker"+a.style;case "simple-line":return"simple-line"+a.style}if(t.isPictureSymbol(a))return a.url?a.url:a.imageData+(""+a.width+a.height)}return JSON.stringify(a)}var u=e.getLogger("esri.views.2d.engine.webgl.TextureManager");return function(){function a(){this._invalidFontsMap=new Map;this._spriteMosaic=new q(1024,1024,250);this._glyphSource=new l(b.fontsUrl+"/{fontstack}/{range}.pbf");
this._glyphMosaic=new k(1024,1024,this._glyphSource)}Object.defineProperty(a.prototype,"sprites",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glyphs",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._spriteMosaic.dispose();this._glyphMosaic.dispose();this._rasterizationCanvas=null};a.prototype.rasterizeItem=function(a,b){void 0===b&&(b=null);return a?a.type&&-1!==a.type.toLowerCase().indexOf("3d")?
(u.error(new d("mapview-invalid-type","Mapviewer does not support 3d symbol type: "+a.type,a)),h.resolve({glyphMosaicItems:[],spriteMosaicItem:null})):!a.type||"text"!==a.type&&"esriTS"!==a.type?this._rasterizeSpriteSymbol(a).then(function(a){return{spriteMosaicItem:a}}):this._rasterizeTextSymbol(a,b).then(function(a){return{glyphMosaicItems:a}}):(u.error(new d("mapview-null-resource","Unable to rasterize null resource")),h.resolve(null))};a.prototype.bindSpritePage=function(a,b,c,d){d||(d=9729);
this._spriteMosaic.bind(a,d,b,c)};a.prototype.bindGlyphsPage=function(a,b,c){this._glyphMosaic.bind(a,9729,b,c)};a.prototype._rasterizeTextSymbol=function(a,b){var c=this,g=f.getFullyQualifiedFontName(a.font);a=this._invalidFontsMap.has(g);return this._glyphMosaic.getGlyphItems(a?"arial-unicode-ms-regular":g,b).catch(function(a){u.error(new d("mapview-invalid-resource","Couldn't find font "+g+". Falling back to Arial Unicode MS Regular"));c._invalidFontsMap.set(g,!0);return c._glyphMosaic.getGlyphItems("arial-unicode-ms-regular",
b)})};a.prototype._rasterizeSpriteSymbol=function(a){var b=this;if(a&&(t.isFillSymbol(a)||t.isLineSymbol(a))&&"style"in a&&("solid"===a.style||"esriSFSSolid"===a.style||"esriSLSSolid"===a.style||"none"===a.style||"esriSFSNull"===a.style||"esriSLSNull"===a.style))return h.resolve(null);var c=y(a);if(this._spriteMosaic.has(c))return h.resolve(this._spriteMosaic.getSpriteItem(c));if(a.url||a.imageData)return v.requestImage(a.imageData?"data:"+a.contentType+";base64,"+a.imageData:a.url).then(function(d){d=
b._rasterizeResource(d);return b._addItemToMosaic(c,d.size,d.anchor,d.image,!t.isMarkerSymbol(a),d.sdf)});var d=this._rasterizeResource(a);return h.resolve(this._addItemToMosaic(c,d.size,d.anchor,d.image,!t.isMarkerSymbol(a),d.sdf))};a.prototype._rasterizeResource=function(a){if(a instanceof HTMLImageElement){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));this._rasterizationCanvas.width=a.width;this._rasterizationCanvas.height=a.height;var b=this._rasterizationCanvas.getContext("2d");
b.drawImage(a,0,0,a.width,a.height);for(var b=b.getImageData(0,0,a.width,a.height),b=new Uint8Array(b.data),c=void 0,d=0;d<b.length;d+=4)c=b[d+3]/255,b[d]*=c,b[d+1]*=c,b[d+2]*=c;return{size:[a.width,a.height],anchor:[0,0],image:new Uint32Array(b.buffer),sdf:!1}}return this._rasterizeJSON(a)};a.prototype._addItemToMosaic=function(a,b,c,d,e,f){return this._spriteMosaic.addSpriteItem(a,b,c,d,e,f)};a.prototype._rasterizeJSON=function(a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));
if("simple-fill"===a.type||"esriSFS"===a.type){var b=m.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,a.style);a=b[0];var c=b[1],b=b[2];return{size:[c,b],anchor:[0,0],image:new Uint32Array(a.buffer),sdf:!1}}if("simple-line"===a.type||"esriSLS"===a.type)return b=m.SymbolHelper.rasterizeSimpleLine(this._rasterizationCanvas,a.style),a=b[0],c=b[1],b=b[2],{size:[c,b],anchor:[0,0],image:new Uint32Array(a.buffer),sdf:!0};"simple-marker"===a.type||"esriSMS"===a.type?(a=m.CIMSymbolHelper.fromSimpleMarker(a),
c=!0):c=p.SDFHelper.checkSDF(a);if(c)return c=(new p.SDFHelper).buildSDF(a),a=c[0],{size:[c[1],c[2]],anchor:[0,0],image:new Uint32Array(a.buffer),sdf:!0};var d=m.CIMSymbolHelper.rasterize(this._rasterizationCanvas,a);a=d[0];c=d[1];b=d[2];return{size:[c,b],anchor:[d[3],d[4]],image:new Uint32Array(a.buffer),sdf:!1}};return a}()})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(c,a,b){Object.defineProperty(b,"workers",{get:function(){return b.defaults.workers},
set:function(a){return b.defaults.workers=a}});return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolHelper":function(){define("require exports ../../../../core/Logger ./CIMSymbolDrawHelper ./SDFHelper ../../../vectorTiles/GeometryUtils".split(" "),function(c,a,b,d,e,h){Object.defineProperty(a,"__esModule",{value:!0});var m=b.getLogger("esri/views/2d/engine/webgl/CIMSymbolHelper");c=function(){function a(){}a.getEnvelope=function(a){if("CIMPointSymbol"!==a.type)return null;var b=new d.EnvDrawHelper;
b.drawSymbol(a,{type:"point",x:0,y:0});return b.envelope()};a.rasterize=function(a,b){var c=this.getEnvelope(b);if(!c||0>=c.width||0>=c.height)return[null,0,0,0,0];var e=96/72,f=(c.x+.5*c.width)*e,k=-(c.y+.5*c.height)*e;a.width=c.width*e+2;a.height=c.height*e+2;c=a.getContext("2d");e=d.Transformation.createScale(e,-e);e.translate(.5*a.width-f,.5*a.height-k);(new d.CanvasDrawHelper(c,e)).drawSymbol(b,{type:"point",x:0,y:0});b=c.getImageData(0,0,a.width,a.height);b=new Uint8Array(b.data);for(c=0;c<
b.length;c+=4)e=b[c+3]/255,b[c]*=e,b[c+1]*=e,b[c+2]*=e;return[b,a.width,a.height,f/a.width,k/a.height]};a.fromSimpleMarker=function(a){var b,c,d=a.style;if("circle"===d||"esriSMSCircle"===d){b=Math.acos(.995);c=Math.ceil(h.C_PI/b/4);0===c&&(c=1);b=h.C_PI_BY_2/c;c*=4;d=[];d.push([50,0]);for(var e=1;e<c;e++)d.push([50*Math.cos(e*b),-50*Math.sin(e*b)]);d.push([50,0]);b={rings:[d]};c={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===d||"esriSMSCross"===d)b=0,b={rings:[[[b,50],[b,b],[50,b],[50,-b],
[b,-b],[b,-50],[-b,-50],[-b,-b],[-50,-b],[-50,b],[-b,b],[-b,50],[b,50]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===d||"esriSMSDiamond"===d)b={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("square"===d||"esriSMSSquare"===d)b={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===d||"esriSMSX"===d)b=0,b={rings:[[[0,b],[50-b,50],[50,50-b],[b,0],[50,b-50],[50-b,-50],[0,-b],[b-50,-50],
[-50,b-50],[-b,0],[-50,50-b],[b-50,50],[0,b]]]},c={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===d||"esriSMSTriangle"===d)c=2/3*100,d=c-100,b={rings:[[[-57.735026918962575,d],[0,c],[57.735026918962575,d],[-57.735026918962575,d]]]},c={xmin:-57.735026918962575,ymin:d,xmax:57.735026918962575,ymax:c};var f;b&&c&&(f=[{type:"CIMSolidFill",enable:!0,color:a.color}],a.outline&&f.push({type:"CIMSolidStroke",enable:!0,width:a.outline.width,color:a.outline.color}),f={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",
enable:!0,rotation:a.angle,size:a.size,offsetX:a.xoffset,offsetY:a.yoffset,frame:c,markerGraphics:[{type:"CIMMarkerGraphic",geometry:b,symbol:{type:"CIMPolygonSymbol",symbolLayers:f}}]}]});return f};return a}();a.CIMSymbolHelper=c;c=function(){function a(){}a.rasterizeSimpleFill=function(a,b){"solid"!==b&&"none"!==b&&"esriSFSSolid"!==b&&"esriSFSNull"!==b||console.error("Unexpected: style does not require rasterization");a.width=8;a.height=8;var c=a.getContext("2d");c.strokeStyle="#FFFFFF";c.beginPath();
if("vertical"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b)c.moveTo(0,0),c.lineTo(0,8);if("horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSHorizontal"===b)c.moveTo(0,0),c.lineTo(8,0);if("forward-diagonal"===b||"diagonal-cross"===b||"esriSFSDiagonalCross"===b||"esriSFSForwardDiagonal"===b)c.moveTo(0,0),c.lineTo(8,8);if("backward-diagonal"===b||"diagonal-cross"===b||"esriSFSBackwardDiagonal"===b||"esriSFSDiagonalCross"===b)c.moveTo(8,0),c.lineTo(0,8);c.stroke();b=c.getImageData(0,
0,a.width,a.height);b=new Uint8Array(b.data);for(var d=0;d<b.length;d+=4)c=b[d+3]/255,b[d]*=c,b[d+1]*=c,b[d+2]*=c;return[b,a.width,a.height]};a.rasterizeSimpleLine=function(a,b){var c;switch(b){case "dash":case "esriSLSDash":c=[3,2];break;case "dash-dot":case "esriSLSDashDot":c=[2,2,0,2];break;case "dot":case "esriSLSDot":c=[0,3];break;case "long-dash":case "esriSLSLongDash":c=[6,3];break;case "long-dash-dot":case "esriSLSLongDashDot":c=[6,3,0,3];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":c=
[2,2,0,2,0,2];break;case "short-dash":case "esriSLSShortDash":c=[2,2];break;case "short-dash-dot":case "esriSLSShortDashDot":c=[2,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":c=[2,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":c=[0,2];break;case "solid":case "esriSLSSolid":case "none":m.error("Unexpected: style does not require rasterization");c=[0,0];break;default:m.error("Tried to rasterize SLS, but found an unexpected style: "+b+"!"),c=[0,0]}b=a=0;for(var d=c;b<
d.length;b++){var f=d[b];a+=f}a*=16;d=31*a;b=new Float32Array(d);for(f=0;f<d;++f)b[f]=257;for(var k=d=.5,h=!0,l=0;l<c.length;l++){for(var f=c[l],d=k,k=k+16*f,A=d;A<k;){for(var z=.5;31>z;){var f=(31-z+1.5)*a+A-.5,g=(z-15.5)*(z-15.5);b[f]=h?g:Math.min((A-d)*(A-d)+g,(A-k)*(A-k)+g);z++}A++}h=!h}c=b.length;d=new Uint8Array(4*c);for(f=0;f<c;++f)e.packFloat(Math.sqrt(b[f])/15,d,4*f);return[d,a,31]};return a}();a.SymbolHelper=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolDrawHelper":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ./GeometryUtils ./Rect".split(" "),
function(c,a,b,d,e,h){Object.defineProperty(a,"__esModule",{value:!0});var m=function(){function a(a){this._t=a}a.createIdentity=function(){return new a([1,0,0,0,1,0])};a.prototype.clone=function(){return new a(this._t.slice())};a.prototype.transform=function(a){var b=this._t;return[b[0]*a[0]+b[1]*a[1]+b[2],b[3]*a[0]+b[4]*a[1]+b[5]]};a.createScale=function(b,c){return new a([b,0,0,0,c,0])};a.prototype.scale=function(a,b){var c=this._t;c[0]*=a;c[1]*=a;c[2]*=a;c[3]*=b;c[4]*=b;c[5]*=b;return this};a.prototype.scaleRatio=
function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};a.createTranslate=function(b,c){return new a([0,0,b,0,0,c])};a.prototype.translate=function(a,b){var c=this._t;c[2]+=a;c[5]+=b;return this};a.createRotate=function(b){var c=Math.cos(b);b=Math.sin(b);return new a([c,-b,0,b,c,0])};a.prototype.rotate=function(b){return this.multiply(a.createRotate(b))};a.prototype.multiply=function(a){var b=this._t;a=a._t;var c=b[1]*a[0]+b[4]*a[1],d=b[2]*a[0]+b[5]*a[1]+a[2],e=b[0]*a[3]+b[3]*a[4],
f=b[1]*a[3]+b[4]*a[4],k=b[2]*a[3]+b[5]*a[4]+a[5];b[0]=b[0]*a[0]+b[3]*a[1];b[1]=c;b[2]=d;b[3]=e;b[4]=f;b[5]=k;return this};return a}();a.Transformation=m;c=function(){function a(a){this._transfos=[];this._sizeTransfos=[];this._transfos.push(a||m.createIdentity());this._sizeTransfos.push(a?a.scaleRatio():1)}a.prototype.transformPt=function(a){return this._transfos[this._transfos.length-1].transform(a)};a.prototype.transformSize=function(a){return a*this._sizeTransfos[this._sizeTransfos.length-1]};a.prototype.back=
function(){return this._transfos[this._transfos.length-1]};a.prototype.push=function(a){var b=a.scaleRatio();a.multiply(this.back());this._transfos.push(a);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*b)};a.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};a.prototype.drawSolidFill=function(a,b){};a.prototype.drawSolidStroke=function(a,b,c){};a.prototype.drawSymbol=function(a,b){if(a)switch(a.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(a,
b)}};a.prototype.drawMultiLayerSymbol=function(a,b){if(a&&(a=a.symbolLayers))for(var c=a.length;c--;){var d=a[c];if(d&&d.enable)switch(d.type){case "CIMSolidFill":this.drawSolidFill(b,d.color);break;case "CIMSolidStroke":this.drawSolidStroke(b,d.color,d.width);break;case "CIMVectorMarker":this.drawVectorMarker(d,b)}}};a.prototype.drawVectorMarker=function(a,b){if(a){var c=a.markerGraphics;if(c){var d=a.size,f=a.frame,h=f?f.ymax-f.ymin:0,h=d&&h?d/h:1,k=m.createIdentity();f&&k.translate(.5*-(f.xmax+
f.xmin),.5*-(f.ymax+f.ymin));var l=a.anchorPt;if(l){var A=l.x,l=l.y;"relative"===a.anchorPtUnits&&f&&(A*=(f.xmax-f.xmin)*h,l*=d);k.translate(-A,-l)}1!==h&&k.scale(h,h);a.rotation&&k.rotate(a.rotation*e.C_DEG_TO_RAD);k.translate(a.offsetX||0,a.offsetY||0);k.translate(b.x,b.y);this.push(k);for(a=0;a<c.length;a++)(b=c[a])&&this.drawSymbol(b.symbol,b.geometry);this.pop()}}};return a}();a.CIMSymbolDrawHelper=c;d=function(a){function c(){var b=a.call(this)||this;b._xmin=b._ymin=Infinity;b._xmax=b._ymax=
-Infinity;return b}b(c,a);c.prototype.envelope=function(){return new h(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};c.prototype._merge=function(a,b){a[0]-b<this._xmin&&(this._xmin=a[0]-b);a[0]+b>this._xmax&&(this._xmax=a[0]+b);a[1]-b<this._ymin&&(this._ymin=a[1]-b);a[1]+b>this._ymax&&(this._ymax=a[1]+b)};c.prototype.drawSolidFill=function(a,b){b=0;for(a=a.rings;b<a.length;b++){var c=a[b],d=c?c.length:0;if(2<d){this._merge(this.transformPt(c[0]),0);for(var e=1;e<d;++e)this._merge(this.transformPt(c[e]),
0)}}};c.prototype.drawSolidStroke=function(a,b,c){b=.5*this.transformSize(c);c=0;for(a=a.rings||a.paths;c<a.length;c++){var d=a[c],e=d?d.length:0;if(1<e){this._merge(this.transformPt(d[0]),b);for(var f=1;f<e;++f)this._merge(this.transformPt(d[f]),b)}}};return c}(c);a.EnvDrawHelper=d;c=function(a){function c(b,c){c=a.call(this,c)||this;c._ctx=b;return c}b(c,a);c.prototype.drawSolidFill=function(a,b){var c=this._ctx;c.fillStyle="rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+
b[3]/255+")";c.beginPath();b=0;for(a=a.rings;b<a.length;b++){var d=a[b],e=d?d.length:0;if(2<e){var f=this.transformPt(d[0]);c.moveTo(f[0],f[1]);for(var h=1;h<e;++h)f=this.transformPt(d[h]),c.lineTo(f[0],f[1]);c.closePath()}}c.fill("evenodd")};c.prototype.drawSolidStroke=function(a,b,c){var d=this._ctx;d.strokeStyle="rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+","+b[3]/255+")";d.lineWidth=this.transformSize(c)+.5;d.beginPath();b=!!a.rings;c=0;for(a=a.rings||a.paths;c<a.length;c++){var e=
a[c],f=e?e.length:0;if(1<f){var h=this.transformPt(e[0]);d.moveTo(h[0],h[1]);for(var k=1;k<f;++k)h=this.transformPt(e[k]),d.lineTo(h[0],h[1]);b&&d.closePath()}}d.stroke()};return c}(c);a.CanvasDrawHelper=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFHelper":function(){define(["require","exports","./Geometry","./Rect","../../../3d/webgl-engine/lib/Util"],function(c,a,b,d,e){function h(a,b,c){e.packFloatRGBA(a,b,c)}Object.defineProperty(a,"__esModule",{value:!0});a.packFloat=h;c=function(){function a(){}
a.checkSDF=function(a){return!0};a.prototype._extractGeometry=function(a){if(!a)return null;a=a.symbolLayers;if(!a||1!==a.length)return null;a=a[0];if(!a)return null;a=a.markerGraphics;if(!a||1!==a.length)return null;a=a[0];if(!a)return null;var c=a.geometry;if(!c||!c.rings)return null;a=[];for(var d=0,c=c.rings;d<c.length;d++){for(var e=[],f=0,h=c[d];f<h.length;f++){var m=h[f];e.push(new b.Point(m[0],m[1]))}a.push(e)}return a};a.prototype._getEnvelope=function(a){for(var b=Infinity,c=-Infinity,e=
Infinity,f=-Infinity,h=0;h<a.length;h++)for(var m=0,y=a[h];m<y.length;m++){var u=y[m];u.x<b&&(b=u.x);u.x>c&&(c=u.x);u.y<e&&(e=u.y);u.y>f&&(f=u.y)}return new d(b,e,c-b,f-e)};a.prototype.buildSDF=function(a){a=this._extractGeometry(a);if(!a)return null;var b=this._getEnvelope(a);if(0>=b.width||0>=b.height)return null;for(var c=Math.floor(31.5),d=(128-2*(c+0+1))/Math.max(b.width,b.height),e=Math.round(b.width*d),f=Math.round(b.height*d),h=e+2*c,m=f+2*c,u=0;u<a.length;u++)for(var A=0,z=a[u];A<z.length;A++){var g=
z[A];g.x-=b.x;g.y-=b.y;g.x*=d;g.y*=d;g.x+=c-.5;g.y+=c-.5}b=this._dist_map(a,h,m,c);this._sign_dist_map(a,h,m,c,b);return[this._encodeDistMap(b,c),h,m,e,f,d]};a.prototype._dist_map=function(a,b,c,d){for(var e=b*c,f=new Float32Array(e),h=d*d+1,k=0;k<e;++k)f[k]=h;for(h=0;h<a.length;h++)for(var l=a[h],m=l.length,k=1;k<m;++k){var p=l[k-1],g=l[k],n=void 0,r=void 0;p.x<g.x?(n=p.x,r=g.x):(n=g.x,r=p.x);var B=void 0,C=void 0;p.y<g.y?(B=p.y,C=g.y):(B=g.y,C=p.y);var D=Math.floor(n)-d,r=Math.floor(r)+d,B=Math.floor(B)-
d,C=Math.floor(C)+d;0>D&&(D=0);r>b&&(r=b);0>B&&(B=0);C>c&&(C=c);for(var n=g.x-p.x,F=g.y-p.y,H=n*n+F*F;D<r;D++)for(var J=B;J<C;J++){var I=(D-p.x)*n+(J-p.y)*F,G=void 0,O=void 0;0>I?(G=p.x,O=p.y):I>H?(G=g.x,O=g.y):(I/=H,G=p.x+I*n,O=p.y+I*F);I=(D-G)*(D-G)+(J-O)*(J-O);G=(c-J-1)*b+D;I<f[G]&&(f[G]=I)}}for(k=0;k<e;++k)f[k]=Math.sqrt(f[k]);return f};a.prototype._sign_dist_map=function(a,b,c,d,e){for(var f=0;f<a.length;f++)for(var h=a[f],k=h.length,l=1;l<k;++l){var m=h[l-1],p=h[l],g=void 0,n=void 0;m.x<p.x?
(g=m.x,n=p.x):(g=p.x,n=m.x);var r=void 0,q=void 0;m.y<p.y?(r=m.y,q=p.y):(r=p.y,q=m.y);g=Math.floor(g);n=Math.floor(n)+1;r=Math.floor(r);q=Math.floor(q)+1;g<d&&(g=d);n>b-d&&(n=b-d);r<d&&(r=d);for(q>c-d&&(q=c-d);r<q;++r)if(m.y>r!==p.y>r){for(var C=(c-r-1)*b,D=g;D<n;++D)D<(p.x-m.x)*(r-m.y)/(p.y-m.y)+m.x&&(e[C+D]=-e[C+D]);for(D=d;D<g;++D)e[C+D]=-e[C+D]}}};a.prototype._encodeDistMap=function(a,b){b*=2;for(var c=a.length,d=new Uint8Array(4*c),e=0;e<c;++e)h(.5-a[e]/b,d,4*e);return d};return a}();a.SDFHelper=
c})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/Util":function(){define(["require","exports","../../support/geometryUtils","./gl-matrix"],function(c,a,b,d){function e(a,b){if(!a)throw a=Error("dummy"),a.stack&&console.log(a.stack),new ba(b);}function h(a,b,c){return a<b?b:a>c?c:a}function m(a){return a/180*Math.PI}function f(a){return 180*a/Math.PI}function k(a,b,c){d.mat4d.multiply(b,a,u);d.mat4d.inverse(u);for(a=0;8>a;++a)d.mat4d.multiplyVec4(u,A[a],z),d.vec3d.set3(z[0]/z[3],z[1]/z[3],z[2]/
z[3],c[a])}function l(a,c){b.plane.fromPoints(a[4],a[0],a[3],c[0]);b.plane.fromPoints(a[1],a[5],a[6],c[1]);b.plane.fromPoints(a[4],a[5],a[1],c[2]);b.plane.fromPoints(a[3],a[2],a[6],c[3]);b.plane.fromPoints(a[0],a[1],a[2],c[4]);b.plane.fromPoints(a[5],a[4],a[7],c[5])}function p(b,c,d,g){var e=6378137/Math.sqrt(1-a.ECCENTRICITY_SQUARED*Math.pow(Math.sin(b),2)),n=Math.cos(b);g[0]=(e+d)*Math.cos(c)*n;g[1]=(e*(1-a.ECCENTRICITY_SQUARED)+d)*Math.sin(b);g[2]=-(e+d)*Math.sin(c)*n}function q(a){for(var b in a)return b}
function t(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2]}function v(a,b){void 0===b&&(b=0);for(var c=0,d=0;4>d;d++)c+=a[b+d]*ha[d];return c}function y(a){return a-Math.floor(a)}Object.defineProperty(a,"__esModule",{value:!0});var u=d.mat4d.create(),A=[d.vec4d.createFrom(-1,-1,-1,1),d.vec4d.createFrom(1,-1,-1,1),d.vec4d.createFrom(1,1,-1,1),d.vec4d.createFrom(-1,1,-1,1),d.vec4d.createFrom(-1,-1,1,1),d.vec4d.createFrom(1,-1,1,1),d.vec4d.createFrom(1,1,1,1),d.vec4d.createFrom(-1,1,1,1)],z=d.vec4d.create(),g=
[d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create()],n=d.vec3d.create(),r=d.vec3d.create(),B=d.vec3d.create(),C=d.vec3d.create(),D=d.vec3d.create(),F=d.vec3d.create(),H=d.vec3d.create(),J=d.vec3d.create(),I=d.vec3d.create(),G=d.vec3d.create(),O=d.vec3d.create(),X=d.vec3d.create(),K=d.vec3d.create(),aa=d.vec3d.createFrom(0,0,0),ba=function(){function a(a){this.message=a}a.prototype.toString=function(){return"AssertException: "+
this.message};return a}();a.AssertException=ba;a.EARTH_RADIUS=6378137;a.METER2FEET=3.28084;a.ECCENTRICITY_SQUARED=.0066943799901414;a.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"};a.assert=e;a.verify=function(a,b){a||(console.log("Verify failed: "+b),console.log(Error("dummy").stack))};a.isPowerOfTwo=function(a){return 0===
(a&a-1)};a.lerp=function(a,b,c){return a+(b-a)*c};a.clamp=h;a.encodeInt16=function(a){return h(Math.round(32767*a),-32767,32767)};a.encodeNormal=function(a,b){var c=Math.abs(a[0]),d=Math.abs(a[1]),g=1/(c+d+Math.abs(a[2])),c=c*g,d=d*g,g=Math.min(a[2]*g,0);b[0]=ca(a[0])*(c-g);b[1]=ca(a[1])*(d-g)};var ca="function"===typeof Math.sign?Math.sign:function(a){return+(0<a)-+(0>a)||0};a.fallbackIfUndefined=function(a,b){return void 0===a?b:a};a.hex2rgb=function(a){a=Math.floor(a);return[(a>>16&255)/255,(a>>
8&255)/255,(a&255)/255]};a.rgb2hex=function(a){var b=h(Math.round(255*a[0]),0,255),c=h(Math.round(255*a[1]),0,255);a=h(Math.round(255*a[2]),0,255);return"0x"+((b<<16)+(c<<8)+a).toString(16)};a.dec2hex=function(a){a=a.toString(16);return"00000000".substr(0,8-a.length)+a};a.deg2rad=m;a.rad2deg=f;a.azimuthElevationAngle2Direction=function(a,b){a=1.5*Math.PI-a;b=.5*Math.PI-b;return[Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b)]};a.raySphere=function(a,b,c,g,e){c=c||aa;var f=d.vec3d.subtract(a,
c,n);c=d.vec3d.dot(b,b);var h=2*d.vec3d.dot(b,f);g=d.vec3d.dot(f,f)-g*g;g=h*h-4*c*g;if(0>g)return!1;f=Math.sqrt(g);g=(-h-f)/(2*c);c=(-h+f)/(2*c);if(0>g||c<g&&0<c)g=c;return 0<g?(e&&d.vec3d.add(a,d.vec3d.scale(b,g,K),e),!0):!1};a.rayTriangle3D=function(a,b,c,g,e,n,f,h,k){void 0===k&&(k=d.vec3d.create());var r=g[f]-c[n],l=g[f+1]-c[n+1],m=g[f+2]-c[n+2];g=e[h]-c[n];f=e[h+1]-c[n+1];e=e[h+2]-c[n+2];var p=b[1]*e-f*b[2],q=b[2]*g-e*b[0],B=b[0]*f-g*b[1];h=r*p+l*q+m*B;if(-1E-5<h&&1E-5>h)return!1;h=1/h;var t=
a[0]-c[n],C=a[1]-c[n+1];a=a[2]-c[n+2];k[1]=h*(t*p+C*q+a*B);if(0>k[1]||1<k[1])return!1;c=C*m-l*a;a=a*r-m*t;r=t*l-r*C;k[2]=h*(b[0]*c+b[1]*a+b[2]*r);if(0>k[2]||1<k[1]+k[2])return!1;k[0]=h*(g*c+f*a+e*r);return!0};a.rayBoxTest=function(a,b,c,d){var g,e=(c[0]-a[0])/b[0],n=(d[0]-a[0])/b[0];e>n&&(g=e,e=n,n=g);var f=(c[1]-a[1])/b[1],h=(d[1]-a[1])/b[1];f>h&&(g=f,f=h,h=g);if(e>h||f>n)return!1;f>e&&(e=f);h<n&&(n=h);c=(c[2]-a[2])/b[2];a=(d[2]-a[2])/b[2];c>a&&(g=c,c=a,a=g);if(e>a||c>n)return!1;a<n&&(n=a);return 0>
n?!1:!0};a.rayRay2D=function(a,b,c,g,e,n){void 0===n&&(n=d.vec2d.create());var f=(g[e]-c[e])*(b[0]-a[0])-(g[0]-c[0])*(b[e]-a[e]);if(0===f)return!1;c=((g[0]-c[0])*(a[e]-c[e])-(g[e]-c[e])*(a[0]-c[0]))/f;n[0]=a[0]+c*(b[0]-a[0]);n[1]=a[e]+c*(b[e]-a[e]);return!0};a.matrixToFrustumPoints=k;a.matrixToFrustumPlanes=function(a,b,c,d){void 0===d&&(d=c,c=g);k(a,b,c);l(c,d)};a.frustumPointsToPlanes=l;a.project=function(a,b,c,g,n){n||(n=a);z[0]=a[0];z[1]=a[1];z[2]=a[2];z[3]=1;d.mat4d.multiplyVec4(b,z);2<n.length&&
(n[2]=-z[2]);d.mat4d.multiplyVec4(c,z);e(0!==z[3]);n[0]=z[0]/z[3];n[1]=z[1]/z[3];n[2]=z[2]/z[3];n[0]=(.5*n[0]+.5)*g[2]+g[0];n[1]=(.5*n[1]+.5)*g[3]+g[1]};a.geodeticToGeocentricLatidude=function(b){return Math.atan((1-a.ECCENTRICITY_SQUARED)*Math.tan(b))};a.latLon2positionWGS84Ellipsoid=p;a.pos2latLon=function(a,b){var c=d.vec3d.length(a);b[0]=Math.asin(h(a[1]/c,-1,1));b[1]=(0>a[2]?1:-1)*Math.acos(h(a[0]/(Math.cos(b[0])*c),-1,1));b[0]=f(b[0]);b[1]=f(b[1]);b[2]=c};a.pos2latLonWGS84Ellipsoid=function(b,
c){var d=b[0],g=-b[2],e=b[1],n=Math.sqrt(Math.pow(6378137,2)*(1-a.ECCENTRICITY_SQUARED));b=Math.sqrt(Math.pow(d,2)+Math.pow(g,2));var f=Math.atan2(6378137*e,n*b),d=Math.atan2(g,d),g=Math.atan2(e+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(n,2))/Math.pow(n,2)),2)*n*Math.pow(Math.sin(f),3),b-6378137*a.ECCENTRICITY_SQUARED*Math.pow(Math.cos(f),3));b=b/Math.cos(g)-6378137/Math.sqrt(1-a.ECCENTRICITY_SQUARED*Math.pow(Math.sin(g),2))+a.EARTH_RADIUS;c[0]=g;c[1]=d;c[2]=b};a.computeGlobeTransformation=
function(a,b,c){var g=m(a[0]);a=m(a[1]);p(g,a,b,r);d.mat4d.translate(c,r);d.mat4d.rotateY(c,.5*Math.PI+a);d.mat4d.rotateX(c,.5*Math.PI-g);return c};a.readUInt16=function(a,b){return a[b]+(a[b+1]<<8)};a.readUInt32=function(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24)};a.setIfDefined=function(a,b,c){void 0!==b[a]&&(c[a]=b[a])};a.array2object=function(a,b){var c={};if(void 0!==b)for(var d=0;d<a.length;d++){var g=a[d];c[b(g)]=g}else for(b=0;b<a.length;b++)g=a[b],c[g]=g;return c};a.object2array=
function(a){var b=[],c;for(c in a)b.push(a[c]);return b};a.mergeObjects=function(a,b,c){void 0===c&&(c={});if(c!==a)for(var d in a)c[d]=a[d];if(c!==b)for(var g in b)c[g]=b[g];return c};a.subtractObjects=function(a,b){var c={},d;for(d in a)void 0===b[d]&&(c[d]=a[d]);return c};a.intersectObjects=function(a,b){var c={},d;for(d in a)void 0!==b[d]&&(c[d]=a[d]);return c};a.getFirstObjectKey=q;a.getFirstObjectValue=function(a){return a[q(a)]};a.objectEmpty=function(a){for(var b in a)return!1;return!0};a.byteBuffer2base64image=
function(a,b,c,d,g){var n=4*b;e(a.length===n*c,"buffer length must match image resolution");var f=document.createElement("canvas");f.width=b;f.height=c;var h=f.getContext("2d");b=h.getImageData(0,0,b,c);for(var k=b.data,r=0;r<c;++r)for(var l=r*n,m=(c-1-r)*n,p=0;p<n;++p)k[l++]=a[m++];h.putImageData(b,0,0);return f.toDataURL(d,g)};a.cround=function(a){return Math.round(100*a)/100};a.logWithBase=function(a,b){return Math.log(a)/Math.log(b)};a.setMatrixTranslation=t;a.setMatrixTranslation3=function(a,
b,c,d){a[12]=b;a[13]=c;a[14]=d};a.getMatrixTranslation=function(a,b){void 0===b&&(b=d.vec3d.create());b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};a.createTranslationMatrix=function(a,b){a=d.mat4d.identity(a);t(a,b);return a};a.isTranslationMatrix=function(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[3]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[7]&&0===a[8]&&0===a[9]&&1===a[10]&&0===a[11]&&1===a[15]};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*
Math.atan(b*Math.tan(.5*a)/c)};a.fovx2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/b)};a.fovy2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/c)};a.fovd2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};a.fovd2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};a.nextHighestPowerOfTwo=function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1};a.nextHighestPowerOfTen=function(a){return Math.pow(10,
Math.ceil(Math.LOG10E*Math.log(a)))};a.lineLineDistanceSquared3D=function(a,b,c,g,e){B[0]=a[0]-c[0];B[1]=a[1]-c[1];B[2]=a[2]-c[2];C[0]=g[0]-c[0];C[1]=g[1]-c[1];C[2]=g[2]-c[2];if(1E-4>Math.abs(C[0])&&1E-4>Math.abs(C[1])&&1E-4>Math.abs(C[2]))return e.success=!1,e;D[0]=b[0]-a[0];D[1]=b[1]-a[1];D[2]=b[2]-a[2];if(1E-4>Math.abs(D[0])&&1E-4>Math.abs(D[1])&&1E-4>Math.abs(D[2]))return e.success=!1,e;b=B[0]*C[0]+B[1]*C[1]+B[2]*C[2];g=C[0]*D[0]+C[1]*D[1]+C[2]*D[2];var n=B[0]*D[0]+B[1]*D[1]+B[2]*D[2],f=C[0]*
C[0]+C[1]*C[1]+C[2]*C[2],k=(D[0]*D[0]+D[1]*D[1]+D[2]*D[2])*f-g*g;if(1E-4>Math.abs(k))return e.success=!1,e;n=h((b*g-n*f)/k,0,1);b=h((b+g*n)/f,0,1);F[0]=a[0]+n*D[0];F[1]=a[1]+n*D[1];F[2]=a[2]+n*D[2];H[0]=c[0]+b*C[0];H[1]=c[1]+b*C[1];H[2]=c[2]+b*C[2];a=d.vec3d.dist2(F,H);e.success=!0;e.dist2=a;e.pa=F;e.pb=H;return e};a.pointLineSegmentDistanceSquared2D=function(a,b,c){O[0]=b[0]-a[0];O[1]=b[1]-a[1];O[2]=0;X[0]=c[0]-a[0];X[1]=c[1]-a[1];X[2]=0;K[0]=c[0];K[1]=c[1];K[2]=0;b=d.vec2d.dot(X,O);c=d.vec2d.dot(O,
O);b=h(b/c,0,1);G[0]=O[0]*b;G[1]=O[1]*b;J[0]=a[0]+G[0];J[1]=a[1]+G[1];d.vec2d.subtract(K,J,I);a=d.vec2d.dot(I,I);b=d.vec2d.dot(X,X);c=d.vec2d.dot(O,O);var g=d.vec2d.dot(G,G);if(g>b||g>c)a=Number.MAX_VALUE;return a};a.packFloatRGBA=function(a,b,c){void 0===c&&(c=0);a=h(a,0,U);for(var d=0;4>d;d++)b[c+d]=Math.floor(256*y(a*ea[d]))};a.unpackFloatRGBA=v;var ea=[1,256,65536,16777216],ha=[1/256,1/65536,1/16777216,1/4294967296],U=v(new Uint8ClampedArray([255,255,255,255]));a.inverseProjectionInfo=function(a,
b,c,g,e){0===a[11]?(g[0]=2/(b*a[0]),g[1]=2/(c*a[5]),g[2]=(1+a[12])/a[0],g[3]=(1+a[13])/a[5],d.vec2d.set2(0,1,e)):(g[0]=-2/(b*a[0]),g[1]=-2/(c*a[5]),g[2]=(1-a[8])/a[0],g[3]=(1-a[9])/a[5],d.vec2d.set2(1,0,e))}})},"esri/layers/vectorTiles/views/3d/support/geometryUtils":function(){define(["require","exports","./geometryUtils/lineSegment","./geometryUtils/plane","./geometryUtils/triangle"],function(c,a,b,d,e){Object.defineProperty(a,"__esModule",{value:!0});a.plane=d;a.triangle=e;a.lineSegment=b})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/lineSegment":function(){define(["require",
"exports","../../lib/glMatrix","../mathUtils"],function(c,a,b,d){function e(a,c){void 0===a&&(a=b.vec3d.create());void 0===c&&(c=b.vec3d.create());return{origin:a,vector:c}}Object.defineProperty(a,"__esModule",{value:!0});a.create=e;a.fromOriginAndVector=function(a,c,d){void 0===d&&(d=e());b.vec3d.set(a,d.origin);b.vec3d.set(c,d.vector);return d};a.distance2=function(a,c){c=b.vec3d.subtract(c,a.origin);var e=b.vec3d.dot(a.vector,c),f=b.vec3d.dot(a.vector,a.vector),e=d.clamp(e/f,0,1);a=b.vec3d.subtract(b.vec3d.scale(a.vector,
e,h),c,h);return b.vec3d.dot(a,a)};var h=b.vec3d.create()})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../lib/glMatrix"],function(c,a,b){function d(b){void 0===b&&(b=a.UP);return[b[0],b[1],b[2],b[3]]}function e(a,c,e){void 0===e&&(e=d());b.vec3d.set(c,e);e[3]=-b.vec3d.dot(c,a);return e}function h(a,c,f,h){void 0===h&&(h=d());b.vec3d.cross(c,a,k);return e(f,b.vec3d.normalize(k),h)}Object.defineProperty(a,"__esModule",{value:!0});a.create=
d;a.fromValues=function(a,b,c,e,f){void 0===f&&(f=d());f[0]=a;f[1]=b;f[2]=c;f[3]=e;return f};a.fromNormalAndOffset=function(a,c,e){void 0===e&&(e=d());b.vec3d.set(a,e);e[3]=c;return e};a.fromPositionAndNormal=e;a.projectVector=function(a,c,d){void 0===d&&(d=c);return b.vec3d.cross(a,b.vec3d.cross(c,a,f),d)};a.distance=function(a,c){return b.vec3d.dot(a,c)+a[3]};a.fromPoints=function(a,c,e,k){void 0===k&&(k=d());return h(b.vec3d.subtract(a,c,m),b.vec3d.subtract(e,c,f),a,k)};a.set=function(a,b){a[0]=
b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};a.negate=function(a,b){void 0===b&&(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};a.fromVectorsAndPoint=h;a.intersectRay=function(a,c,d,e){var f=b.vec3d.dot(a,d);if(0===f)return!1;a=-(b.vec3d.dot(a,c)+a[3])/f;b.vec3d.add(c,b.vec3d.scale(d,a,e),e);return!0};a.UP=[0,0,1,0];var m=b.vec3d.create(),f=b.vec3d.create(),k=b.vec3d.create()})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/triangle":function(){define(["require","exports","../../lib/glMatrix",
"./lineSegment"],function(c,a,b,d){function e(a,c,d){var e=b.vec2d.dist(a,c);c=b.vec2d.dist(c,d);a=b.vec2d.dist(d,a);d=(e+c+a)/2;return Math.sqrt(d*(d-e)*(d-c)*(d-a))}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,c,d){void 0===a&&(a=b.vec3d.create());void 0===c&&(c=b.vec3d.create());void 0===d&&(d=b.vec3d.create());return{p0:a,p1:c,p2:d}};a.distance2=function(a,c){var e=a.p0,v=a.p1;a=a.p2;var y=b.vec3d.subtract(v,e,h),g=b.vec3d.subtract(a,v,m),n=b.vec3d.subtract(e,a,f),r=b.vec3d.subtract(c,
e,k),B=b.vec3d.subtract(c,v,l),C=b.vec3d.subtract(c,a,p),D=b.vec3d.cross(y,n),F=b.vec3d.dot(b.vec3d.cross(y,D,q),r),B=b.vec3d.dot(b.vec3d.cross(g,D,q),B),C=b.vec3d.dot(b.vec3d.cross(n,D,q),C);if(0<F&&0<B&&0<C)return c=b.vec3d.dot(D,r),c*c/b.vec3d.dot(D,D);e=d.distance2(d.fromOriginAndVector(e,y,t),c);v=d.distance2(d.fromOriginAndVector(v,g,t),c);c=d.distance2(d.fromOriginAndVector(a,n,t),c);return Math.min(e,v,c)};a.areaPoints2d=e;a.area2d=function(a){return e(a.p0,a.p1,a.p2)};var h=b.vec3d.create(),
m=b.vec3d.create(),f=b.vec3d.create(),k=b.vec3d.create(),l=b.vec3d.create(),p=b.vec3d.create(),q=b.vec3d.create(),t=d.create()})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var c={};(function(a,b){b(a,!0);b(a,!1)})(c,function(a,b){var c={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);c.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var d=a[0];return d*(1.5-.5*c*d*d)}}else c.invsqrt=function(a){return 1/
Math.sqrt(a)}})();var e=Array;"undefined"!=typeof Float32Array&&(e=b?Float32Array:Array);var h={create:function(a){var b=new e(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var d=new e(3);d[0]=a;d[1]=b;d[2]=c;return d},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},
subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||
(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1];a=a[2];var g=Math.sqrt(c*c+d*d+a*a);if(!g)return b[0]=0,b[1]=0,b[2]=0,b;if(1===g)return b[0]=c,b[1]=d,b[2]=a,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=a*g;return b},cross:function(a,b,c){c||(c=a);var d=a[0],g=a[1];a=a[2];var e=b[0],f=b[1];b=b[2];c[0]=g*b-a*f;c[1]=a*e-d*b;c[2]=d*f-g*e;return c},length:function(a){var b=
a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],g=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+g*g+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=g*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],d=
b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}},m=null,f=new e(4);h.unproject=function(a,b,c,d,e){e||(e=a);m||(m=y.create());var g=m;f[0]=2*(a[0]-d[0])/d[2]-1;f[1]=2*(a[1]-d[1])/d[3]-1;f[2]=2*a[2]-1;f[3]=1;y.multiply(c,b,g);if(!y.inverse(g))return null;y.multiplyVec4(g,f);if(0===f[3])return null;e[0]=f[0]/f[3];e[1]=f[1]/f[3];e[2]=f[2]/f[3];return e};var k=h.createFrom(1,0,0),l=h.createFrom(0,1,0),p=h.createFrom(0,
0,1);h.rotationTo=function(a,b,c){c||(c=u.create());var d=h.dot(a,b),g=h.create();if(1<=d)u.set(A,c);else if(-.999999>d)h.cross(k,a,g),1E-6>g.length&&h.cross(l,a,g),1E-6>g.length&&h.cross(p,a,g),h.normalize(g),u.fromAxisAngle(g,Math.PI,c);else{var d=Math.sqrt(2*(1+d)),e=1/d;h.cross(a,b,g);c[0]=g[0]*e;c[1]=g[1]*e;c[2]=g[2]*e;c[3]=.5*d;u.normalize(c)}1<c[3]?c[3]=1:-1>c[3]&&(c[3]=-1);return c};var q=h.create(),t=h.create();h.project=function(a,b,c,d){d||(d=a);h.direction(b,c,q);h.subtract(a,b,t);a=h.dot(q,
t);h.scale(q,a,d);h.add(d,b,d)};h.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var b=new e(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,d,f,h,k,l,m){var g=new e(9);g[0]=a;g[1]=b;g[2]=c;g[3]=d;g[4]=f;g[5]=h;g[6]=k;g[7]=l;g[8]=m;return g},determinant:function(a){var b=a[3],c=a[4],d=a[5],g=a[6],e=a[7],f=a[8];return a[0]*(f*c-d*e)+
a[1]*(-f*b+d*g)+a[2]*(e*b-c*g)},inverse:function(a,b){var c=a[0],d=a[1],g=a[2],e=a[3],f=a[4],n=a[5],h=a[6],k=a[7];a=a[8];var l=a*f-n*k,m=-a*e+n*h,p=k*e-f*h,q=c*l+d*m+g*p;if(!q)return null;q=1/q;b||(b=v.create());b[0]=l*q;b[1]=(-a*d+g*k)*q;b[2]=(n*d-g*f)*q;b[3]=m*q;b[4]=(a*c-g*h)*q;b[5]=(-n*c+g*e)*q;b[6]=p*q;b[7]=(-k*c+d*h)*q;b[8]=(f*c-d*e)*q;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],g=a[1],e=a[2],f=a[3],n=a[4],h=a[5],k=a[6],l=a[7];a=a[8];var m=b[0],r=b[1],p=b[2],q=b[3],t=b[4],v=b[5],
u=b[6],y=b[7];b=b[8];c[0]=m*d+r*f+p*k;c[1]=m*g+r*n+p*l;c[2]=m*e+r*h+p*a;c[3]=q*d+t*f+v*k;c[4]=q*g+t*n+v*l;c[5]=q*e+t*h+v*a;c[6]=u*d+y*f+b*k;c[7]=u*g+y*n+b*l;c[8]=u*e+y*h+b*a;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[3]+a[6];c[1]=d*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],g=b[1];b=b[2];c[0]=d*a[0]+g*a[3]+b*a[6];c[1]=d*a[1]+g*a[4]+b*a[7];c[2]=d*a[2]+g*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=
a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=d;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=y.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=
a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},y={create:function(a){var b=new e(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],
b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,d,f,h,k,l,m,p,q,t,v,u,y,z){var g=new e(16);g[0]=a;g[1]=b;g[2]=c;g[3]=d;g[4]=f;g[5]=h;g[6]=k;g[7]=l;g[8]=m;g[9]=p;g[10]=q;g[11]=t;g[12]=v;g[13]=u;g[14]=y;g[15]=z;return g},createFromMatrixRowMajor:function(a){var b=new e(16);b[0]=
a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new e(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];
b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=y.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||
a===b){b=a[1];var c=a[2],d=a[3],g=a[6],e=a[7],f=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=g;a[11]=a[14];a[12]=d;a[13]=e;a[14]=f;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],d=a[2],g=a[3],e=a[4],f=a[5],h=a[6],k=a[7],l=a[8],m=a[9],p=a[10],q=a[11],t=a[12],v=a[13],u=a[14];a=a[15];return t*
m*h*g-l*v*h*g-t*f*p*g+e*v*p*g+l*f*u*g-e*m*u*g-t*m*d*k+l*v*d*k+t*c*p*k-b*v*p*k-l*c*u*k+b*m*u*k+t*f*d*q-e*v*d*q-t*c*h*q+b*v*h*q+e*c*u*q-b*f*u*q-l*f*d*a+e*m*d*a+l*c*h*a-b*m*h*a-e*c*p*a+b*f*p*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],g=a[2],e=a[3],f=a[4],n=a[5],h=a[6],k=a[7],l=a[8],m=a[9],p=a[10],q=a[11],t=a[12],v=a[13],u=a[14];a=a[15];var y=c*n-d*f,z=c*h-g*f,A=c*k-e*f,Z=d*h-g*n,V=d*k-e*n,P=g*k-e*h,M=l*v-m*t,N=l*u-p*t,Q=l*a-q*t,R=m*u-p*v,Y=m*a-q*v,W=p*a-q*u,L=y*W-z*Y+A*R+Z*Q-V*N+P*M;if(!L)return null;
L=1/L;b[0]=(n*W-h*Y+k*R)*L;b[1]=(-d*W+g*Y-e*R)*L;b[2]=(v*P-u*V+a*Z)*L;b[3]=(-m*P+p*V-q*Z)*L;b[4]=(-f*W+h*Q-k*N)*L;b[5]=(c*W-g*Q+e*N)*L;b[6]=(-t*P+u*A-a*z)*L;b[7]=(l*P-p*A+q*z)*L;b[8]=(f*Y-n*Q+k*M)*L;b[9]=(-c*Y+d*Q-e*M)*L;b[10]=(t*V-v*A+a*y)*L;b[11]=(-l*V+m*A-q*y)*L;b[12]=(-f*R+n*N-h*M)*L;b[13]=(c*R-d*N+g*M)*L;b[14]=(-t*Z+v*z-u*y)*L;b[15]=(l*Z-m*z+p*y)*L;return b},toRotationMat:function(a,b){b||(b=y.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];
b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],g=a[2],e=a[4],f=a[5],n=a[6],h=a[8],k=a[9];a=a[10];var l=a*f-n*k,m=-a*e+n*h,p=k*e-f*h,q=c*l+d*m+g*p;if(!q)return null;q=1/q;b||(b=v.create());b[0]=l*q;b[1]=(-a*d+g*k)*q;b[2]=(n*d-g*f)*q;b[3]=m*q;b[4]=(a*c-g*h)*q;b[5]=(-n*c+g*e)*q;b[6]=p*q;b[7]=
(-k*c+d*h)*q;b[8]=(f*c-d*e)*q;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],g=a[1],e=a[2],f=a[3],n=a[4],h=a[5],k=a[6],l=a[7],m=a[8],r=a[9],p=a[10],q=a[11],t=a[12],v=a[13],u=a[14];a=a[15];var y=b[0],z=b[1],A=b[2],V=b[3],P=b[4],M=b[5],N=b[6],Q=b[7],R=b[8],Y=b[9],W=b[10],L=b[11],da=b[12],fa=b[13],ja=b[14];b=b[15];c[0]=y*d+z*n+A*m+V*t;c[1]=y*g+z*h+A*r+V*v;c[2]=y*e+z*k+A*p+V*u;c[3]=y*f+z*l+A*q+V*a;c[4]=P*d+M*n+N*m+Q*t;c[5]=P*g+M*h+N*r+Q*v;c[6]=P*e+M*k+N*p+Q*u;c[7]=P*f+M*l+N*q+Q*a;c[8]=R*d+Y*n+
W*m+L*t;c[9]=R*g+Y*h+W*r+L*v;c[10]=R*e+Y*k+W*p+L*u;c[11]=R*f+Y*l+W*q+L*a;c[12]=da*d+fa*n+ja*m+b*t;c[13]=da*g+fa*h+ja*r+b*v;c[14]=da*e+fa*k+ja*p+b*u;c[15]=da*f+fa*l+ja*q+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],g=b[1];b=b[2];c[0]=a[0]*d+a[4]*g+a[8]*b+a[12];c[1]=a[1]*d+a[5]*g+a[9]*b+a[13];c[2]=a[2]*d+a[6]*g+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],g=b[1],e=b[2];b=b[3];c[0]=a[0]*d+a[4]*g+a[8]*e+a[12]*b;c[1]=a[1]*d+a[5]*g+a[9]*e+a[13]*b;c[2]=a[2]*
d+a[6]*g+a[10]*e+a[14]*b;c[3]=a[3]*d+a[7]*g+a[11]*e+a[15]*b;return c},translate:function(a,b,c){var d=b[0],g=b[1];b=b[2];var e,f,n,h,k,l,m,r,p,q,t,v;if(!c||a===c)return a[12]=a[0]*d+a[4]*g+a[8]*b+a[12],a[13]=a[1]*d+a[5]*g+a[9]*b+a[13],a[14]=a[2]*d+a[6]*g+a[10]*b+a[14],a[15]=a[3]*d+a[7]*g+a[11]*b+a[15],a;e=a[0];f=a[1];n=a[2];h=a[3];k=a[4];l=a[5];m=a[6];r=a[7];p=a[8];q=a[9];t=a[10];v=a[11];c[0]=e;c[1]=f;c[2]=n;c[3]=h;c[4]=k;c[5]=l;c[6]=m;c[7]=r;c[8]=p;c[9]=q;c[10]=t;c[11]=v;c[12]=e*d+k*g+p*b+a[12];
c[13]=f*d+l*g+q*b+a[13];c[14]=n*d+m*g+t*b+a[14];c[15]=h*d+r*g+v*b+a[15];return c},scale:function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a===c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*
a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var e=c[0],g=c[1];c=c[2];var f=Math.sqrt(e*e+g*g+c*c),n,h,k,l,m,r,p,q,B,t,v,u,y,z,A,P,M,N,Q,R;if(!f)return null;1!==f&&(f=1/f,e*=f,g*=f,c*=f);n=Math.sin(b);h=Math.cos(b);k=1-h;b=a[0];f=a[1];l=a[2];m=a[3];r=a[4];p=a[5];q=a[6];B=a[7];t=a[8];v=a[9];u=a[10];y=a[11];z=e*e*k+h;A=g*e*k+c*n;P=c*e*k-g*n;M=e*g*k-c*n;N=g*g*k+h;Q=c*g*k+e*n;R=e*c*k+g*n;e=g*c*k-e*n;g=c*c*k+h;
d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*z+r*A+t*P;d[1]=f*z+p*A+v*P;d[2]=l*z+q*A+u*P;d[3]=m*z+B*A+y*P;d[4]=b*M+r*N+t*Q;d[5]=f*M+p*N+v*Q;d[6]=l*M+q*N+u*Q;d[7]=m*M+B*N+y*Q;d[8]=b*R+r*e+t*g;d[9]=f*R+p*e+v*g;d[10]=l*R+q*e+u*g;d[11]=m*R+B*e+y*g;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],g=a[5],f=a[6],n=a[7],h=a[8],k=a[9],l=a[10],m=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=
e*b+h*d;c[5]=g*b+k*d;c[6]=f*b+l*d;c[7]=n*b+m*d;c[8]=e*-d+h*b;c[9]=g*-d+k*b;c[10]=f*-d+l*b;c[11]=n*-d+m*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],f=a[2],n=a[3],h=a[8],k=a[9],l=a[10],m=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+h*-d;c[1]=g*b+k*-d;c[2]=f*b+l*-d;c[3]=n*b+m*-d;c[8]=e*d+h*b;c[9]=g*d+k*b;c[10]=f*d+l*b;c[11]=n*d+m*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);
var e=a[0],g=a[1],f=a[2],n=a[3],h=a[4],k=a[5],l=a[6],m=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+h*d;c[1]=g*b+k*d;c[2]=f*b+l*d;c[3]=n*b+m*d;c[4]=e*-d+h*b;c[5]=g*-d+k*b;c[6]=f*-d+l*b;c[7]=n*-d+m*b;return c},frustum:function(a,b,c,d,e,f,h){h||(h=y.create());var g=b-a,n=d-c,k=f-e;h[0]=2*e/g;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*e/n;h[6]=0;h[7]=0;h[8]=(b+a)/g;h[9]=(d+c)/n;h[10]=-(f+e)/k;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(f*e*2)/
k;h[15]=0;return h},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return y.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,f,h){h||(h=y.create());var g=b-a,n=d-c,k=f-e;h[0]=2/g;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2/n;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/k;h[11]=0;h[12]=-(a+b)/g;h[13]=-(d+c)/n;h[14]=-(f+e)/k;h[15]=1;return h},lookAt:function(a,b,c,d){d||(d=y.create());var e,g,f,n,h,k,l,m,p=a[0],r=a[1];a=a[2];f=c[0];n=c[1];g=c[2];l=b[0];c=b[1];e=b[2];if(p===l&&r===c&&a===e)return y.identity(d);
b=p-l;c=r-c;l=a-e;m=1/Math.sqrt(b*b+c*c+l*l);b*=m;c*=m;l*=m;e=n*l-g*c;g=g*b-f*l;f=f*c-n*b;(m=Math.sqrt(e*e+g*g+f*f))?(m=1/m,e*=m,g*=m,f*=m):f=g=e=0;n=c*f-l*g;h=l*e-b*f;k=b*g-c*e;(m=Math.sqrt(n*n+h*h+k*k))?(m=1/m,n*=m,h*=m,k*=m):k=h=n=0;d[0]=e;d[1]=n;d[2]=b;d[3]=0;d[4]=g;d[5]=h;d[6]=c;d[7]=0;d[8]=f;d[9]=k;d[10]=l;d[11]=0;d[12]=-(e*p+g*r+f*a);d[13]=-(n*p+h*r+k*a);d[14]=-(b*p+c*r+l*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=y.create());var d=a[0],e=a[1],g=a[2],f=a[3],n=d+d,h=
e+e,k=g+g;a=d*n;var l=d*h,d=d*k,m=e*h,e=e*k,g=g*k,n=f*n,h=f*h,f=f*k;c[0]=1-(m+g);c[1]=l+f;c[2]=d-h;c[3]=0;c[4]=l-f;c[5]=1-(a+g);c[6]=e+n;c[7]=0;c[8]=d+h;c[9]=e-n;c[10]=1-(a+m);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},u={create:function(a){var b=new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=u.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},A=u.identity();u.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b};u.dot=function(a,b){return a[0]*b[0]+
a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};u.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],c=(c=c*c+d*d+e*e+g*g)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};u.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};u.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};u.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],
e=a[2];a=a[3];var g=Math.sqrt(c*c+d*d+e*e+a*a);if(0===g)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;b[3]=a*g;return b};u.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};u.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var f=b[0],n=b[1],h=b[2];b=b[3];c[0]=d*b+a*f+e*h-g*n;c[1]=e*b+a*n+g*f-d*h;c[2]=g*b+a*h+d*n-e*f;c[3]=a*b-d*f-e*n-g*h;return c};u.multiplyVec3=
function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=a[0];var f=a[1],n=a[2];a=a[3];var h=a*d+f*g-n*e,k=a*e+n*d-b*g,l=a*g+b*e-f*d,d=-b*d-f*e-n*g;c[0]=h*a+d*-b+k*-n-l*-f;c[1]=k*a+d*-f+l*-b-h*-n;c[2]=l*a+d*-n+h*-f-k*-b;return c};u.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};u.toMat3=function(a,b){b||(b=v.create());var c=a[0],d=a[1],e=a[2],g=a[3],f=c+c,n=d+d,h=e+e;a=c*f;var k=c*n,c=c*h,l=d*n,d=d*h,e=e*h,f=g*f,n=g*
n,g=g*h;b[0]=1-(l+e);b[1]=k+g;b[2]=c-n;b[3]=k-g;b[4]=1-(a+e);b[5]=d+f;b[6]=c+n;b[7]=d-f;b[8]=1-(a+l);return b};u.toMat4=function(a,b){b||(b=y.create());var c=a[0],d=a[1],e=a[2],g=a[3],f=c+c,n=d+d,h=e+e;a=c*f;var k=c*n,c=c*h,l=d*n,d=d*h,e=e*h,f=g*f,n=g*n,g=g*h;b[0]=1-(l+e);b[1]=k+g;b[2]=c-n;b[3]=0;b[4]=k-g;b[5]=1-(a+e);b[6]=d+f;b[7]=0;b[8]=c+n;b[9]=d-f;b[10]=1-(a+l);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};u.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],g,
f;if(1<=Math.abs(e))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;g=Math.acos(e);f=Math.sqrt(1-e*e);if(.001>Math.abs(f))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;e=Math.sin((1-c)*g)/f;c=Math.sin(c*g)/f;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};u.fromRotationMatrix=function(a,b){b||(b=u.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=.5*d,d=.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*
d,b[2]=(a[3]-a[1])*d;else{d=u.fromRotationMatrix.s_iNext=u.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var e=d[c],g=d[e];d=Math.sqrt(a[3*c+c]-a[3*e+e]-a[3*g+g]+1);b[c]=.5*d;d=.5/d;b[3]=(a[3*g+e]-a[3*e+g])*d;b[e]=(a[3*e+c]+a[3*c+e])*d;b[g]=(a[3*g+c]+a[3*c+g])*d}return b};v.toQuat4=u.fromRotationMatrix;(function(){var a=v.create();u.fromAxes=function(b,c,d,e){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return u.fromRotationMatrix(a,
e)}})();u.identity=function(a){a||(a=u.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};u.fromAngleAxis=function(a,b,c){c||(c=u.create());a*=.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];return c};u.toAngleAxis=function(a,b){b||(b=a);var d=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<d?(b[3]=2*Math.acos(a[3]),d=c.invsqrt(d),b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};u.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var z={create:function(a){var b=
new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=z.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,
b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var g=c*a-e*d;if(!g)return null;g=1/g;b[0]=a*g;b[1]=-d*g;b[2]=-e*g;b[3]=c*g;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];c[0]=d*b[0]+e*b[2];c[1]=d*b[1]+e*b[3];c[2]=g*b[0]+a*b[2];c[3]=g*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var f=Math.sin(b);b=Math.cos(b);c[0]=d*b+e*f;c[1]=d*-f+e*b;c[2]=g*b+a*f;c[3]=g*-f+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=
d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],g=a[3],f=b[0];b=b[1];c[0]=a[0]*f;c[1]=d*b;c[2]=e*f;c[3]=g*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};b=b?"":"d";a["glMath"+b]=c;a["vec2"+b]={create:function(a){var b=new e(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new e(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,
b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*
b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+b]=h;a["vec4"+b]={create:function(a){var b=new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,d){var f=new e(4);f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];
return b},set4:function(a,b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+b]=z;a["mat3"+b]=v;a["mat4"+b]=y;a["quat4"+b]=u});return c})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(c,a){function b(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var d=1/Math.LN2;a.positiveMod=b;a.radToByte=function(c){return b(c*a.C_RAD_TO_256,256)};a.degToByte=function(c){return b(c*a.C_DEG_TO_256,256)};a.log2=
function(a){return Math.log(a)*d};a.sqr=function(a){return a*a};a.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};a.interpolate=function(a,b,c){return a*(1-c)+b*c};a.between=function(a,b,c){return a>=b&&a<=c||a>=c&&a<=b}})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphMosaic":function(){define("require exports dojo/has dojo/promise/all ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(c,a,b,d,e,h,m){var f;b("stable-symbol-rendering")&&(f=new Set);return function(){function a(a,
b,c){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;(0>=a||0>=b)&&console.error("Glyph mosaic width and height must be greater than zero!");this.width=a;this.height=b;this._glyphSource=c;this._binPack=new h(a-4,b-4);this._glyphData.push(new Uint8Array(a*b));this._dirties.push(!0);this._textures.push(void 0);this._addDecorationGlyph()}a.prototype.getGlyphItems=function(a,c){for(var e=this,h=[],k=this._glyphSource,
l=new Set,m=1/256,p=0;p<c.length;p++)l.add(Math.floor(c[p]*m));var z=[];l.forEach(function(b){if(256>=b){var c=a+b;e._rangePromises.has(c)?z.push(e._rangePromises.get(c)):(b=k.getRange(a,b).then(function(){e._rangePromises["delete"](c)}).catch(function(){e._rangePromises["delete"](c);throw Error("Unable to query resource");}),e._rangePromises.set(c,b),z.push(b))}});return d(z).then(function(d){d=e._glyphIndex[a];d||(d={},e._glyphIndex[a]=d);var g;if(b("stable-symbol-rendering")){f.clear();for(var m=
0;m<c.length;m++)g=c[m],f.add(g);var p=[];l.forEach(function(a){p.push(a)});p.sort();g=[];for(m=0;m<p.length;m++)for(var q=p[m],t=0;256>t;++t)g.push(256*q+t)}else g=c;m=0;for(q=g;m<q.length;m++)if(g=q[m],t=d[g]){if(!b("stable-symbol-rendering")||f.has(g))h[g]={rect:t.rect,metrics:t.metrics,page:t.page}}else if((t=k.getGlyph(a,g))&&t.metrics){var v=e._recordGlyph(t,g);d[g]={rect:v,metrics:t.metrics,tileIDs:null,page:e._currentPage};if(!b("stable-symbol-rendering")||f.has(g))h[g]={rect:v,metrics:t.metrics,
page:e._currentPage};e._dirties[e._currentPage]=!0}return h})};a.prototype._recordGlyph=function(a,b){var c=a.metrics;if(0===c.width)c=new e(0,0,0,0);else{b=c.width+6;var d=c.height+6,f=b%4?4-b%4:4,k=d%4?4-d%4:4;1===f&&(f=5);1===k&&(k=5);c=this._binPack.allocate(b+f,d+k);c.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),
this._binPack=new h(this.width-4,this.height-4),c=this._binPack.allocate(b+f,d+k));f=this._glyphData[this._currentPage];a=a.bitmap;var l=k=void 0;if(a)for(var m=0;m<d;m++)for(var k=b*m,l=this.width*(c.y+m+1)+c.x,p=0;p<b;p++)f[l+p+1]=a[k+p]}return c};a.prototype._addDecorationGlyph=function(){for(var a=[117,149,181,207,207,181,149,117],b=[],c=0;c<a.length;c++)for(var d=a[c],e=0;11>e;e++)b.push(d);a={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(b)};this._recordGlyph(a,0)};
a.prototype.bind=function(a,b,c,d){this._textures[c]||(this._textures[c]=new m(a,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var e=this._textures[c];e.setSamplingMode(b);this._dirties[c]&&e.setData(this._glyphData[c]);a.bindTexture(e,d);this._dirties[c]=!1};a.prototype.dispose=function(){this._binPack=null;for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0;this._glyphData.length=0};return a}()})},
"esri/layers/vectorTiles/views/2d/engine/webgl/RectangleBinPack":function(){define(["require","exports","./Rect"],function(c,a,b){return function(){function a(a,c){this._height=this._width=0;this._free=[];this._width=a;this._height=c;this._free.push(new b(0,0,a,c))}Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});a.prototype.allocate=
function(a,c){if(a>this._width||c>this._height)return new b;for(var d=null,e=-1,h=0;h<this._free.length;++h){var l=this._free[h];a<=l.width&&c<=l.height&&(null===d||l.y<=d.y&&l.x<=d.x)&&(d=l,e=h)}if(null===d)return new b;this._free.splice(e,1);d.width<d.height?(d.width>a&&this._free.push(new b(d.x+a,d.y,d.width-a,c)),d.height>c&&this._free.push(new b(d.x,d.y+c,d.width,d.height-c))):(d.width>a&&this._free.push(new b(d.x+a,d.y,d.width-a,d.height)),d.height>c&&this._free.push(new b(d.x,d.y+c,a,d.height-
c)));return new b(d.x,d.y,a,c)};a.prototype.release=function(a){for(var b=0;b<this._free.length;++b){var c=this._free[b];if(c.y===a.y&&c.height===a.height&&c.x+c.width===a.x)c.width+=a.width;else if(c.x===a.x&&c.width===a.width&&c.y+c.height===a.y)c.height+=a.height;else if(a.y===c.y&&a.height===c.height&&a.x+a.width===c.x)c.x=a.x,c.width+=a.width;else if(a.x===c.x&&a.width===c.width&&a.y+a.height===c.y)c.y=a.y,c.height+=a.height;else continue;this._free.splice(b,1);this.release(a)}this._free.push(a)};
return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphSource":function(){define(["require","exports","../../../../request","../../../../core/pbf","../../../../core/promiseUtils"],function(c,a,b,d,e){var h=function(){function a(a){this._metrics=[];for(this._bitmaps=[];a.next();)switch(a.tag()){case 1:for(var b=a.getMessage();b.next();)switch(b.tag()){case 3:for(var c=b.getMessage(),d=void 0,e=void 0,f=void 0,h=void 0,k=void 0,m=void 0,z=void 0;c.next();)switch(c.tag()){case 1:d=c.getUInt32();
break;case 2:e=c.getBytes();break;case 3:f=c.getUInt32();break;case 4:h=c.getUInt32();break;case 5:k=c.getSInt32();break;case 6:m=c.getSInt32();break;case 7:z=c.getUInt32();break;default:c.skip()}d&&(this._metrics[d]={width:f,height:h,left:k,top:m,advance:z},this._bitmaps[d]=e);break;default:b.skip()}break;default:a.skip()}}a.prototype.getMetrics=function(a){return this._metrics[a]};a.prototype.getBitmap=function(a){return this._bitmaps[a]};return a}(),m=function(){function a(){this._ranges=[]}a.prototype.getRange=
function(a){return this._ranges[a]};a.prototype.addRange=function(a,b){this._ranges[a]=b};return a}();return function(){function a(a){this._glyphInfo={};this._baseURL=a}a.prototype.getRange=function(a,c){var f=this._getFontStack(a);if(f.getRange(c))return e.resolve();var k=256*c,l=k+255;a=this._baseURL.replace("{fontstack}",a).replace("{range}",k+"-"+l);return b(a,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){f.addRange(c,new h(new d(new Uint8Array(a.data),new DataView(a.data))))})};
a.prototype.getGlyph=function(a,b){if(a=this._getFontStack(a)){var c=Math.floor(b/256);if(!(256<c)&&(a=a.getRange(c)))return{metrics:a.getMetrics(b),bitmap:a.getBitmap(b)}}};a.prototype._getFontStack=function(a){var b=this._glyphInfo[a];b||(b=this._glyphInfo[a]=new m);return b};return a}()})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(c,a,b,d,e){return function(a,c){a=d.mixin({},{url:a,failOk:!0},c);"array-buffer"===
c.responseType?(a.handleAs="arraybuffer",delete a.responseType):c.responseType&&(a.handleAs=c.responseType,delete a.responseType);null!==c.query&&(a.content=a.query,delete a.query);var f;c.hasOwnProperty("allowImageDataAccess")&&(f={allowImageDataAccess:c.allowImageDataAccess},delete a.allowImageDataAccess);var h,l=new e(function(){h.isFulfilled()||h.cancel()});h=b(a,f).then(function(a){l.resolve({data:a})}).catch(function(a){a&&null!=a.httpCode&&(a.details=a.details||{},a.details.httpStatus=a.httpCode);
l.reject(a)});return l.promise}})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(c,a){return function(){function a(a,b,c,m){this._tag=0;this._dataType=99;this._data=a;this._dataView=b;this._pos=c||0;this._end=m||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();this._tag=
b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var a=4294967295,a=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return a;
a=(a|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return a};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var a=this.getUInt32();return a>>>1^-(a&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];
this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=
this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);this._skip(a);return b};a.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);this._skip(a);
return b};a.prototype.getMessage=function(){var b=this._getLength(),c=this._pos,c=new a(this._data,this._dataView,c,c+b);this._skip(b);return c};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=
function(){var a=this._data,b=this._pos,c=0,m;if(10<=this._end-b){if(m=a[b++],c|=m&127,0!==(m&128)&&(m=a[b++],c|=(m&127)<<7,0!==(m&128)&&(m=a[b++],c|=(m&127)<<14,0!==(m&128)&&(m=a[b++],c|=(m&127)<<21,0!==(m&128)&&(m=a[b++],c+=268435456*(m&127),0!==(m&128)&&(m=a[b++],c+=34359738368*(m&127),0!==(m&128)&&(m=a[b++],c+=4398046511104*(m&127),0!==(m&128)&&(m=a[b++],c+=562949953421312*(m&127),0!==(m&128)&&(m=a[b++],c+=72057594037927936*(m&127),0!==(m&128)&&(m=a[b++],c+=0x7fffffffffffffff*(m&127),0!==(m&128)))))))))))throw Error("Varint too long!");
}else{for(var f=1;b!==this._end;){m=a[b];if(0===(m&128))break;++b;c+=(m&127)*f;f*=128}if(b===this._end)throw Error("Varint overrun!");++b;c+=m*f}this._pos=b;return c};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,b,c){var d="",e="";for(c=Math.min(this._end,c);b<c;++b){var h=a[b];h&128?e+="%"+h.toString(16):
(d+=decodeURIComponent(e)+String.fromCharCode(h),e="")}e.length&&(d+=decodeURIComponent(e));return d};a.prototype._toBytes=function(a,b,c){c=Math.min(this._end,c);return new Uint8Array(a.buffer,b,c-b)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(c,a,b,d,e,h){return function(){function a(a,b,c){void 0===c&&(c=0);this._size=[];this._mosaicsData=[];
this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=1;(0>=a||0>=b)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=a;this._pageHeight=b;0<c&&(this._maxItemSize=c);this.pixelRatio=window.devicePixelRatio|1;this._binPack=new e(this._pageWidth,this._pageHeight);this._mosaicsData[0]=new Uint32Array(Math.floor(this._pageWidth)*
Math.floor(this._pageHeight));this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}a.prototype.getWidth=function(a){return a>=this._size.length?-1:this._size[a][0]};a.prototype.getHeight=function(a){return a>=this._size.length?-1:this._size[a][1]};a.prototype.getPage=function(a){return a<this._textures.length?this._textures[a]:null};a.prototype.has=function(a){return this._mosaicRects.has(a)};Object.defineProperty(a.prototype,"itemCount",{get:function(){return this._mosaicRects.size},
enumerable:!0,configurable:!0});a.prototype.getSpriteItem=function(a){return this._mosaicRects.get(a)};a.prototype.addSpriteItem=function(a,b,c,d,e,h){if(this._mosaicRects.has(a))return this._mosaicRects.get(a);var f=this._allocateImage(b[0],b[1]),k=f[0],l=f[1],f=f[2];if(0>=k.width||0>=k.height)return null;c={rect:k,width:b[0],height:b[1],anchorX:c[0],anchorY:c[1],sdf:h,pixelRatio:1,page:l};this._mosaicRects.set(a,c);this._copy({rect:k,spriteSize:b,spriteData:d,page:l,pageSize:f,repeat:e,sdf:h});
return c};a.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};a.prototype.processNextItem=function(){var a=this._spriteCopyQueue.pop();a&&this._copy(a)};a.prototype.getSpriteItems=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]=this.getSpriteItem(d)}return b};a.prototype.getMosaicItemPosition=function(a,b){b=(a=this.getSpriteItem(a))&&a.rect;if(!b)return null;b.width=a.width;b.height=a.height;return{size:[a.width,a.height],tl:[(b.x+1)/this._size[a.page][0],
(b.y+1)/this._size[a.page][1]],br:[(b.x+1+a.width)/this._size[a.page][0],(b.y+1+a.height)/this._size[a.page][1]],page:a.page}};a.prototype.bind=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);this._textures[c]||(this._textures[c]=new h(a,{pixelFormat:6408,dataType:5121,width:this._size[c][0],height:this._size[c][1]},new Uint8Array(this._mosaicsData[c].buffer)));var e=this._textures[c];e.setSamplingMode(b);this._dirties[c]&&(e.setData(new Uint8Array(this._mosaicsData[c].buffer)),e.generateMipmap());
a.bindTexture(e,d);this._dirties[c]=!1};a._copyBits=function(a,b,c,d,e,h,m,y,u,A,z){var f=d*b+c;m=y*h+m;if(z)for(m-=h,z=-1;z<=A;z++,f=((z+A)%A+d)*b+c,m+=h)for(y=-1;y<=u;y++)e[m+y]=a[f+(y+u)%u];else for(z=0;z<A;z++){for(y=0;y<u;y++)e[m+y]=a[f+y];f+=b;m+=h}};a.prototype._copy=function(b){if(!(b.page>=this._mosaicsData.length)){var c=b.spriteData,d=this._mosaicsData[b.page];d&&c||console.error("Source or target images are uninitialized!");a._copyBits(c,b.spriteSize[0],0,0,d,b.pageSize[0],b.rect.x+1,
b.rect.y+1,b.spriteSize[0],b.spriteSize[1],b.repeat);this._dirties[b.page]=!0}};a.prototype._allocateImage=function(a,c){a+=2;c+=2;var f=Math.max(a,c);if(this._maxItemSize&&this._maxItemSize<f){var f=Math.pow(2,Math.ceil(b.log2(a))),h=Math.pow(2,Math.ceil(b.log2(c)));a=new d(0,0,a,c);this._mosaicsData.push(new Uint32Array(f*h));this._dirties.push(!0);this._size.push([f,h]);this._textures.push(void 0);return[a,this._mosaicsData.length-1,[f,h]]}f=this._binPack.allocate(a+(a%4?4-a%4:0),c+(c%4?4-c%4:
0));return 0>=f.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new e(this._pageWidth,this._pageHeight),this._allocateImage(a,c)):[f,this._currentPage,[this._pageWidth,this._pageHeight]]};a.prototype.dispose=function(){this._binPack=
null;for(var a=0,b=this._textures;a<b.length;a++){var c=b[a];c&&c.dispose()}this._textures.length=0;this._mosaicsData.length=0;this._mosaicRects.clear()};return a}()})},"esri/layers/vectorTiles/views/3d/support/imageUtils":function(){define(["require","exports","../../../request"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.dataURItoBlob=function(a){var b=atob(a.split(",")[1]);a=a.split(",")[0].split(":")[1].split(";")[0];for(var c=new ArrayBuffer(b.length),d=new Uint8Array(c),
f=0;f<b.length;f++)d[f]=b.charCodeAt(f);return new Blob([c],{type:a})};a.requestImage=function(a){return b(a,{responseType:"image",allowImageDataAccess:!0}).then(function(a){return a.data})}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLRendererInfo":function(){define("require exports ../../../../core/screenUtils ../../../../geometry/support/scaleUtils ../../../../renderers/support/utils ./color ./Utils".split(" "),function(c,a,b,d,e,h,m){function f(a,b){var c=b.length;if(a<b[0].value||1===
c)return b[0].size;for(var d=1;d<c;d++)if(a<b[d].value)return b[d-1].size+(a-b[d-1].value)/(b[d].value-b[d-1].value)*(b[d].size-b[d-1].size);return b[c-1].size}return function(){function a(){this.symbolLevels=[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this.vvSizeFieldStopsValues=new Float32Array(6);this.vvSizeFieldStopsSizes=new Float32Array(6);
this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1};this.symbolLevels.push(0)}Object.defineProperty(a.prototype,"vvMaterialParameters",{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"heatmapParameters",{get:function(){return this._heatmapParameters},enumerable:!0,configurable:!0});a.prototype.updateHeatmapParameters=function(a){var b=a.blurRadius,c=
Math.round(4.5*a.blurRadius),d=2*c+1;this._heatmapParameters||(this._heatmapParameters={radius:b,blurRadius:c,kernelSize:d,refreshIntensityKernel:!0,intensityKernel:null,color:null,maxPixelIntensity:a.maxPixelIntensity,minPixelIntensity:a.minPixelIntensity});for(var e=this._heatmapParameters,f=a.colorStops,k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m,g=0;16>g;g++){var n=f[Math.min(g,
f.length-1)];k[g]=n.ratio;m=4*g;l[m+0]=n.color[0]/255;l[m+1]=n.color[1]/255;l[m+2]=n.color[2]/255;l[m+3]=1<n.color[3]?n.color[3]/255:n.color[3];h.premultiplyAlpha(l,m,!0)}e.color={values:k,colors:l,refreshColorRamp:!0};1E-6<Math.abs(e.radius-a.radius)&&(e.radius=b,e.blurRadius=c,e.kernelSize=d,e.refreshIntensityKernel=!0);e.maxPixelIntensity=a.maxPixelIntensity;e.minPixelIntensity=a.minPixelIntensity};a.prototype.updateVisualVariables=function(a,c){var h=this._vvMaterialParameters;h.vvOpacityEnabled=
!1;h.vvSizeEnabled=!1;h.vvColorEnabled=!1;h.vvRotationEnabled=!1;if(a){var k=a.size;if(k){h.vvSizeEnabled=!0;if(k.minMaxValue){var l=k.minMaxValue,p=void 0,u=void 0;m.isDefined(l.minSize)&&m.isDefined(l.maxSize)&&(m.isNumber(l.minSize)&&m.isNumber(l.maxSize)?(p=b.pt2px(l.minSize),u=b.pt2px(l.maxSize)):(u=c.scale,p=b.pt2px(f(u,l.minSize.stops)),u=b.pt2px(f(u,l.maxSize.stops))));this.vvSizeMinMaxValue.set([l.minDataValue,l.maxDataValue,p,u])}k.scaleStops&&(this.vvSizeScaleStopsValue=b.pt2px(f(c.scale,
k.scaleStops.stops)));k.unitValue&&(this.vvSizeUnitValueToPixelsRatio=d.getMetersPerUnitForSR(c.spatialReference)/e.meterIn[k.unitValue.unit]/c.resolution);k.fieldStops&&(this.vvSizeFieldStopsValues.set(k.fieldStops.values),this.vvSizeFieldStopsSizes.set(k.fieldStops.sizes))}if(c=a.color)h.vvColorEnabled=!0,this.vvColorValues.set(c.values),this.vvColors.set(c.colors);if(c=a.opacity)h.vvOpacityEnabled=!0,this.vvOpacityValues.set(c.values),this.vvOpacities.set(c.opacities);if(a=a.rotation)h.vvRotationEnabled=
!0,h.vvRotationType=a.type}};return a}()})},"esri/layers/vectorTiles/geometry/support/scaleUtils":function(){define(["require","exports","../../config","../../core/kebabDictionary","./WKIDUnitConversion"],function(c,a,b,d,e){function h(a){return t.fromJSON(a.toLowerCase())||null}function m(b){return f(b)||a.decDegToMeters}function f(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=q.values[q[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=p.exec(c))&&
a[1]&&(d=parseFloat(a[1].split(",")[1]));return d}function k(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=q.units[q[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=p.exec(c))&&a[1]&&(d=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return d?h(d):null}function l(c,d){d=m(d);return c/(d*a.inchesPerMeter*b.screenDPI)}Object.defineProperty(a,"__esModule",{value:!0});a.inchesPerMeter=39.37;a.decDegToMeters=20015077/180;var p=/UNIT\[([^\]]+)\]\]$/i,
q=e,t=d({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"},{ignoreUnknown:!0});a.unitFromRESTJSON=
h;a.unitToRESTJSON=function(a){return t.toJSON(a)||null};a.getMetersPerVerticalUnitForSR=function(a){a=m(a);return 1E5<a?1:a};a.getVerticalUnitStringForSR=function(a){return 1E5<m(a)?"meters":k(a)};a.getMetersPerUnitForSR=m;a.getMetersPerUnit=f;a.getUnitString=k;a.getScale=function(c,d){d=d||c.extent;c=c.width;var e=f(d&&d.spatialReference);return d&&c?d.width/c*(e||a.decDegToMeters)*a.inchesPerMeter*b.screenDPI:0};a.getResolutionForScale=l;a.getExtentForScale=function(a,b){var c=a.extent;a=a.width;
b=l(b,c.spatialReference);return c.clone().expand(b*a/c.width)}})},"esri/layers/vectorTiles/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../renderers ../../../../../core/executeAsync ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/SetPool ../../../../../renderers/support/jsonUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/mesh/factories/WGLMeshFactory".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p){function q(a,b){l.isMarkerSymbol(a)||l.isLineSymbol(a)?b.add(a):l.isFillSymbol(a)&&(b.add(a),a.outline&&"none"!==a.outline.style&&b.add(a.outline))}function t(a,b){b.has(a)||b.set(a,new Set);var c=a.text;a=b.get(a);b=c.length;for(var d=0;d<b;d++){var e=c.charCodeAt(d);a.add(e)}}Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a){this.type="symbol";this._symbolToMosaicItemMap=new Map;this._symbolToMosaicItemMap.clear();this.configuration=a.configuration;
this.service=a.service;this.spatialReference=a.spatialReference;this.tileRenderer=a.tileRenderer}a.prototype.destroy=function(){this._symbolToMosaicItemMap.clear()};a.prototype.getMeshData=function(a,b){return b&&b.features&&0!==b.features.length?this._processFeatures(a,b.features).then(function(b){return{tileKey:a.id,data:b}}):h.resolve({tileKey:a.id,data:null})};a.prototype.setConfiguration=function(a){this.configuration=a;this.factory=this.renderer=this.rendererInfo=null};a.prototype.getFactory=
function(){this.factory||(this.factory=this._createFactory());return this.factory};a.prototype.getRenderer=function(){this.renderer||(this.renderer=this._createRenderer());return this.renderer};a.prototype.getRendererInfo=function(){this.rendererInfo||(this.rendererInfo=this._createRendererInfo());return this.rendererInfo};a.prototype._createFactory=function(){if(!this.configuration)return null;var a={fields:this.configuration.outFields};return p.default.from(this.getRenderer(),a,this._symbolToMosaicItemMap,
this.service.geometryType,this.service.objectIdField,this.spatialReference,this.configuration.devicePixelRatio)};a.prototype._createRenderer=function(){return this.configuration?f.fromJSON(this.configuration.renderer):null};a.prototype._createRendererInfo=function(){return this.configuration?k.createRendererInfo(f.fromJSON(this.configuration.renderer),this.spatialReference,{fields:this.service.fields}):null};a.prototype._processFeatures=function(a,b){var c=this;return b&&b.length?this._getMosaicItems(b).then(function(){return c._writeFeatures(a,
b)}):h.resolve(null)};a.prototype._writeFeatures=function(a,b){var c=this,e=0,f=this.getFactory(),h=f.createMeshData(b.length),k={viewingMode:"",scale:a.scale};return d(function(){var a=b[e++],c=e===b.length;f.write(h,a,k);return c}).then(function(){return c._encodeDisplayData(h)})};a.prototype._encodeDisplayData=function(a){var b={};a.encode(b,[]);return b};a.prototype._getReturnCentroid=function(a){function b(a){if(!a)return!1;a=a.type;return"simple-marker"===a||"picture-marker"===a||"text"===a}
if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(a.type){case "simple":return b(a.symbol);case "unique-value":return b(a.defaultSymbol)||a.uniqueValueInfos.some(function(a){return b(a.symbol)});case "class-breaks":return b(a.defaultSymbol)||a.classBreakInfos.some(function(a){return b(a.symbol)});default:return!0}};a.prototype._getMosaicItems=function(a){a=m.acquire();for(var c=e.acquire(),d=this.getRenderer(),f=0,g=d.getSymbols();f<g.length;f++){var n=g[f];l.isTextSymbol(n)?t(n,
c):q(n,a)}(d instanceof b.UniqueValueRenderer||d instanceof b.ClassBreaksRenderer)&&(d=d.backgroundFillSymbol)&&q(d,a);var k=this._symbolToMosaicItemMap,p=e.acquire(),v=[],y=0;a.forEach(function(a){k.has(a.id)||(p.set(y,a),v.push({symbol:a.toJSON(),id:y}),y++)});c.forEach(function(a,b){if(k.has(b.id)){var c=k.get(b.id).glyphMosaicItems,d=[];a.forEach(function(a){if(c&&c.length<a||!c[a])d[a]=a});0<d.length&&(p.set(y,b),v.push({symbol:b.toJSON(),id:y,glyphIds:d}),y++)}else{p.set(y,b);var e=[];a.forEach(function(a){return e.push(a)});
v.push({symbol:b.toJSON(),id:y,glyphIds:e});y++}});if(0<v.length)return this.tileRenderer.getMaterialItems(v).then(function(a){for(var b=0;b<a.length;b++){var c=a[b],d=p.get(c.id);if(d)if(l.isTextSymbol(d))if(k.has(d.id)){if(d=k.get(d.id).glyphMosaicItems,c=c.mosaicItem.glyphMosaicItems)for(var f=0;f<c.length;f++)null!=c[f]&&(d[f]=c[f])}else k.set(d.id,c.mosaicItem);else k.set(d.id,c.mosaicItem)}e.release(p)});m.release(a);e.release(c);return h.resolve()};return a}();a.SymbolProcessor=c})},"esri/layers/vectorTiles/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),
function(c,a,b,d,e,h,m,f){Object.defineProperty(a,"__esModule",{value:!0});a.ClassBreaksRenderer=b;a.HeatmapRenderer=d;a.BaseRenderer=e;a.SimpleRenderer=h;a.UniqueValueRenderer=m;a.isRenderer=function(b){return b instanceof a.BaseRenderer};a.fromJSON=f.fromJSON})},"esri/layers/vectorTiles/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v){var y=e.getLogger("esri.renderers.ClassBreaksRenderer");t=t.LegendOptions;v=v.ClassBreakInfo;var u=b({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),A=h.ensureType(v),z=c(q,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:f,key:"type",typeMap:{"simple-fill":p.types.typeMap["simple-fill"],"picture-fill":p.types.typeMap["picture-fill"],"polygon-3d":p.types.typeMap["polygon-3d"]}},
value:null,json:{origins:{"web-scene":{read:l.read,write:{target:{backgroundFillSymbol:{type:k}},writer:l.writeTarget}}},read:l.read,write:l.writeTarget}},classBreakInfos:{type:[v],json:{read:function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new v;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}},write:function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){delete a.classMinValue});
b[c]=a}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:p.rendererTypes,value:null,json:{origins:{"web-scene":{read:l.read,write:{target:{defaultSymbol:{types:p.rendererTypes3D}},
writer:l.writeTarget}}},read:l.read,write:l.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return m.createFunction(this.valueExpression)}},legendOptions:{type:t,value:null,json:{write:!0}},field:{value:null,cast:function(a){return null==a?a:"function"===typeof a?a:h.ensureString(a)},json:{type:String,write:function(a,b,c,e){"string"===typeof a?b[c]=a:e&&
e.messages?e.messages.push(new d("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):y.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:String,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,
c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===a||"percent-of-total"===a)a=null;return a},json:{read:u.fromJSON,write:function(a,b){if(a=u.toJSON(a))b.normalizationType=a}}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{value:"class-breaks",json:{write:function(a,b){b.type="classBreaks"}}}},constructor:function(){this.classBreakInfos=
[]},addClassBreakInfo:function(b,c,d){b="number"===typeof b?new v({minValue:b,maxValue:c,symbol:d}):A(a.clone(b));this.classBreakInfos.push(b);1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;d<e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var c=this.field,d=a.attributes,e=this.classBreakInfos.length,
f=this.isMaxInclusive;if(this.valueExpression)a=m.executeFunction(this.compiledFunc,m.createExecContext(a,m.getViewInfo(b)));else if("function"===typeof c)a=c(a);else if(a=parseFloat(d[c]),b=this.normalizationType)if(c=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===b)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(c))a=a/c*100;else if("field"===b&&!isNaN(d)){if(isNaN(a)||isNaN(d))return-1;a/=d}if(null!=a&&!isNaN(a)&&"number"===typeof a)for(d=
0;d<e;d++)if(b=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],b[0]<=a&&(f?a<=b[1]:a<b[1]))return d;return-1},getClassBreakInfo:function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},getSymbols:function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a},
clone:function(){return new z({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:a.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,
visualVariables:a.clone(this.visualVariables),legendOptions:a.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&(a[b]=!0)});this.valueExpression&&m.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})},_areClassBreaksConsecutive:function(){for(var a=this.classBreakInfos,b=1;b<a.length;b++)if(a[b-1].maxValue!==a[b].minValue)return!1;
return!0}});return z})},"esri/layers/vectorTiles/symbols/PolygonSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/Symbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,
arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z,g){function n(a,
b,c){b=a?B[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new d("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function r(a,c,d){if(!a)return null;if(!d||"web-scene"!==d.origin||a.isInstanceOf(y)||a.isInstanceOf(A))return a.write(c,d);var e=g.to3D(a);if(e.symbol)return e.symbol.write(c,d);d.messages&&d.messages.push(new b("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",
{symbol:a,context:d,error:e.error}));return null}Object.defineProperty(a,"__esModule",{value:!0});var B={esriSMS:v,esriPMS:k,esriTS:u,esriSLS:t,esriSFS:q,esriPFS:f,PointSymbol3D:l,LineSymbol3D:h,PolygonSymbol3D:p,MeshSymbol3D:m,LabelSymbol3D:e,styleSymbolReference:A};a.read=n;a.writeTarget=function(a,b,c,d){(a=r(a,{},d))&&(b[c]=a)};a.write=r;a.fromJSON=function(a,b){return n(a,null,b)};a.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new z}c&&c.read(a,
b);return c}})},"esri/layers/vectorTiles/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(c,a,b,d,e){c=function(a){function c(b,d,e){var f=a.call(this,b,d,e)||this;return f instanceof c?f:new c(b,d,e)}b(c,a);return c}(e);c.prototype.type="warning";return c})},"esri/layers/vectorTiles/symbols/LabelSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(c,a,b,d){return function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/LineSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/MeshSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(c,a,b,d){return function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/PictureFillSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./FillSymbol","./support/urlUtils"],function(c,a,b,d,e){var h={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},m=c(d,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",url:e.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:b.toPt,
json:{write:!0}},height:{value:12,cast:b.toPt,json:{write:!0}},xoffset:{value:0,cast:b.toPt,json:{write:!0}},yoffset:{value:0,cast:b.toPt,json:{write:!0}},source:e.sourcePropertyDefinition},getDefaults:function(){return a.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,c,d,e){if(a&&"string"!==typeof a&&null==a.imageData)return a;var f={};a&&(f.url=a);c&&(f.outline=c);null!=d&&(f.width=b.toPt(d));null!=e&&(f.height=b.toPt(e));return f},clone:function(){var b=new m({color:a.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});b._set("source",a.clone(this.source));return b}});m.defaultProps=h;return m})},"esri/layers/vectorTiles/symbols/FillSymbol":function(){define(["./Symbol","./SimpleLineSymbol"],function(c,a){return c.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:a,json:{read:{default:null},write:!0}},type:null}})})},
"esri/layers/vectorTiles/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(c,a,b){function d(a,c,d){return c.imageData?b.makeData({mediaType:c.contentType||"image/png",isBase64:!0,data:c.imageData}):e(c.url,d)}function e(a,c){return!c||"service"!==c.origin&&"portal-item"!==c.origin||!c.layer||"feature"!==c.layer.type&&"stream"!==c.layer.type||b.isAbsolute(a)||!c.layer.parsedUrl?b.read(a,c):b.join(c.layer.parsedUrl.path,"images",a)}function h(a,c,d,e){b.isDataProtocol(a)?
(a=b.dataComponents(a),c.contentType=a.mediaType,c.imageData=a.data,d&&d.imageData===c.imageData&&d.url&&(c.url=m(d.url,e))):c.url=m(a,e)}function m(a,c){return b.write(a,c)}Object.defineProperty(a,"__esModule",{value:!0});a.readImageDataOrUrl=d;a.read=e;a.writeImageDataAndUrl=h;a.write=m;a.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:d},write:{writer:function(a,b,c,d){h(a,b,this.source,d)}}}};a.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,
b,c){a={};b.imageData&&(a.imageData=b.imageData);b.contentType&&(a.contentType=b.contentType);b.url&&(a.url=e(b.url,c));return a}}}}})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(c,a,b,d){function e(a){return b.normalize(a)}function h(a){return"data:"===a.slice(0,5)}function m(a){return f(a)||z.test(a)}function f(a){return a&&"/"===a[0]&&"/"===a[1]}function k(a){return b.urlToObject(a)}function l(b){if("string"===typeof b)return new d(q(b));
b.scheme||(b.scheme=a.appUrl.scheme);return b}function p(a){if(h(a))return null;var b=a.indexOf("://");if(-1===b&&f(a))b=2;else if(-1!==b)b+=3;else return null;b=a.indexOf("/",b);return-1===b?a:a.slice(0,b)}function q(b,c,d){void 0===c&&(c=a.appBaseUrl);if(f(b))return d&&d.preserveProtocolRelative?b:"http"===a.appUrl.scheme&&a.appUrl.authority===p(b).slice(2)?"http:"+b:"https:"+b;if(z.test(b))return b;d=v;if("/"===b[0]){var e=c.indexOf("//"),e=c.indexOf("/",e+2);c=-1===e?c:c.slice(0,e)}return d(c,
b)}function t(a,b,c){void 0===c&&(c=!1);a=l(a);b=l(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function v(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=[];if(m(a[0])){var c=a[0],d=c.indexOf("//");b.push(c.slice(0,d+1));A.test(a[0])&&(b[0]+="/");a[0]=c.slice(d+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return b?a.concat(b.split("/")):a},[]);for(c=0;c<a.length;c++)d=a[c],".."===d&&0<b.length?b.pop():
!d||"."===d&&0!==b.length||b.push(d);return b.join("/")}}function y(a,b,c){if(!(b&&c&&a&&m(a)))return a;var d=a.indexOf("//"),e=a.indexOf("/",d+2),f=a.indexOf(":",d+2),e=Math.min(0>e?a.length:e,0>f?a.length:f);if(a.slice(d+2,e).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,d+2);a=a.slice(e);return""+b+c+a}function u(b,c,d){void 0===c&&(c=a.appBaseUrl);if(!m(b))return b;var f=e(b),g=f.toLowerCase();c=e(c).toLowerCase().replace(/\/+$/,"");if((d=d?e(d).toLowerCase().replace(/\/+$/,""):null)&&
0!==c.indexOf(d))return b;for(var h=function(a,b,c){c=a.indexOf(b,c);return-1===c?a.length:c},k=h(g,"/",g.indexOf("//")+2),n=-1;g.slice(0,k+1)===c.slice(0,k)+"/";){n=k+1;if(k===g.length)break;k=h(g,"/",k+1)}if(-1===n||d&&n<d.length)return b;b=f.slice(n);f=c.slice(n-1).replace(/[^/]+/g,"").length;if(0<f)for(g=0;g<f;g++)b="../"+b;else b="./"+b;return b}Object.defineProperty(a,"__esModule",{value:!0});a.normalize=e;a.canUseXhr=function(a){return b.canUseXhr(a)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,
"")};c=Function("return this")();a.appUrl=new d(c.location);a.appBaseUrl=function(){var b=a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();var A=/^\s*file:/i,z=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;a.isDataProtocol=h;a.isAbsolute=m;a.isProtocolRelative=f;a.urlToObject=k;a.getOrigin=p;a.makeAbsolute=q;a.hasSameOrigin=t;a.join=v;a.removeFile=function(a){var b=0;if(m(a)){var c=a.indexOf("//");
-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};a.addProxy=function(a){return b.addProxy(a)};a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};var g=/^data:(.*?)(;base64)?,(.*)$/;a.dataComponents=function(a){return(a=a.match(g))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null};a.changeDomain=y;a.read=function(b,c){var d=c&&c.url&&c.url.path;b&&d&&(b=q(b,d,{preserveProtocolRelative:!0}));(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&
c.customBaseUrl?(d=c.urlKey+"."+c.customBaseUrl,c=t(a.appUrl,a.appUrl.scheme+"://"+d)?y(b,c.portalHostname,d):y(b,d,c.portalHostname)):c=b;return c};a.write=function(a,b){if(!a)return a;!m(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var c=q(a);if(b){var d=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;d&&(c=u(c,d,d),c!==a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(c))}a=c;c=(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?
y(a,b.urlKey+"."+b.customBaseUrl,b.portalHostname):a;return c};a.makeRelative=u;a.removeQueryParameters=function(a){a=k(a);Object.keys(a.query||{});return a.path}})},"esri/layers/vectorTiles/symbols/PictureMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./support/urlUtils"],function(c,a,b,d,e){var h={width:12,height:12,angle:0,xoffset:0,yoffset:0},m=c(d,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",
url:e.urlPropertyDefinition,source:e.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(a,b){return b.size||a}},write:!0},cast:b.toPt},width:{json:{read:{source:["width","size"],reader:function(a,b){return b.size||a}},write:!0},cast:b.toPt},size:{json:{write:!1}}},getDefaults:function(){return a.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,c,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);null!=c&&(e.width=b.toPt(c));
null!=d&&(e.height=b.toPt(d));return e},clone:function(){var b=new m({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});b._set("source",a.clone(this.source));return b}});m.defaultProps=h;return m})},"esri/layers/vectorTiles/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(c,a,b){return c(b,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(a){return a&&
-1*a},write:function(a,b){b.angle=a&&-1*a}}},type:{},xoffset:{value:0,cast:a.toPt,json:{write:!0}},yoffset:{value:0,cast:a.toPt,json:{write:!0}},size:{value:9,cast:function(b){return"auto"===b?b:a.toPt(b)},json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/PointSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/SimpleFillSymbol":function(){define(["../core/declare",
"../core/lang","./FillSymbol","./SimpleLineSymbol"],function(c,a,b,d){var e={style:"solid",outline:new d,color:[0,0,0,.25]},h=c(b,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(b){return a.valueOf(this._styles,b)||void 0},write:function(a,b){b.style=this._styles[a]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal",
"backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return a.mixin(this.inherited(arguments),e)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);b&&(d.outline=b);c&&(d.color=c);return d},clone:function(){return new h({color:a.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});a.mixin(h,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",
STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});h.defaultProps=e;return h})},"esri/layers/vectorTiles/symbols/SimpleMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./SimpleLineSymbol"],function(c,a,b,d,e){var h={style:"circle",color:[255,255,255,.25],outline:new e,size:12,angle:0,xoffset:0,yoffset:0},m=c(d,{declaredClass:"esri.symbols.SimpleMarkerSymbol",
properties:{color:{json:{write:function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())}}},type:"simple-marker",size:{value:12},style:{type:String,value:"circle",json:{read:function(b){return a.valueOf(this._styles,b)},write:function(a,b){b.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style="path";this._set("path",a)},json:{write:!0}},outline:{type:e,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",
diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return a.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,c,d,e){if(a&&"string"!==typeof a)return a;var f={};a&&(f.style=a);null!=c&&(f.size=b.toPt(c));d&&(f.outline=d);e&&(f.color=e);return f},clone:function(){return new m({angle:this.angle,color:a.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function k(b,
c){return this.getInherited(k,arguments).call(this,a.mixin({outline:null},b),c)}});a.mixin(m,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});m.defaultProps=h;return m})},"esri/layers/vectorTiles/symbols/TextSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),function(c,a,b,d,e,h){var m={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,
xoffset:0,yoffset:0,horizontalAlignment:"center"},f=c(e,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:d,json:{write:!0}},borderLineColor:{type:d,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:h,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:d,json:{write:!0}},haloSize:{type:Number,cast:b.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},
text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:b.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:b.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},width:{json:{write:!0}}},getDefaults:function(){return a.mixin(this.inherited(arguments),m)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.text=a);
b&&(d.font=b);c&&(d.color=c);return d},clone:function(){return new f({angle:this.angle,backgroundColor:a.clone(this.backgroundColor),borderLineColor:a.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:a.clone(this.color),font:this.font&&this.font.clone(),haloColor:a.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,
width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});a.mixin(f,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});f.defaultProps=m;return f})},"esri/layers/vectorTiles/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/write".split(" "),
function(c,a,b,d,e,h,m,f){return function(a){function c(b){b=a.call(this)||this;b.decoration="none";b.family="sans-serif";b.size=9;b.style="normal";b.weight="normal";return b}b(c,a);e=c;c.prototype.castSize=function(a){return h.toPt(a)};c.prototype.clone=function(){return new e({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var e;d([m.property({type:String,json:{write:{overridePolicy:f.disableWriteDefaultPolicy("none")}}})],c.prototype,"decoration",
void 0);d([m.property({type:String,json:{write:!0}})],c.prototype,"family",void 0);d([m.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:!c||!c.textSymbol3D}}}}})],c.prototype,"size",void 0);d([m.cast("size")],c.prototype,"castSize",null);d([m.property({type:String,json:{write:{overridePolicy:f.disableWriteDefaultPolicy("normal")}}})],c.prototype,"style",void 0);d([m.property({type:String,json:{write:{overridePolicy:f.disableWriteDefaultPolicy("normal")}}})],c.prototype,
"weight",void 0);return c=e=d([m.subclass("esri.symbols.Font")],c)}(m.declared(e))})},"esri/layers/vectorTiles/symbols/WebStyleSymbol":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/callouts/LineCallout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","./Callout3D"],
function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/callouts/Callout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/JSONSupport"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../FillSymbol3DLayer ../Font ../IconSymbol3DLayer ../LabelSymbol3D ../LineSymbol3D ../LineSymbol3DLayer ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ../TextSymbol3DLayer ../WebStyleSymbol".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z,g,n,r){function B(a){var c=a.color?a.color.clone():new b([255,255,255]),d,e,f;a instanceof t?(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(c=new b([255,255,255])),d={href:a.url},e=a.width<=a.height?a.height:a.width):(d=a.style,d in C?d=C[d]:(console.log(d+' cannot be mapped to Icon symbol. Fallback to "circle"'),d="circle"),d={primitive:d},e=a.size,a.outline&&a.outline.color&&0<a.outline.width&&(f={size:a.outline.width,color:a.outline.color.clone()}));
return new v(new k({size:e,resource:d,material:{color:c},outline:f}))}Object.defineProperty(a,"__esModule",{value:!0});var C={};C[z.STYLE_CIRCLE]="circle";C[z.STYLE_CROSS]="cross";C[z.STYLE_DIAMOND]="kite";C[z.STYLE_SQUARE]="square";C[z.STYLE_X]="x";a.to3D=function(a,b,c,k){void 0===b&&(b=!1);void 0===c&&(c=!1);void 0===k&&(k=!0);if(!a)return{symbol:null};if(d.isSymbol3D(a)||a instanceof r)k=a.clone();else if(a instanceof A)k=new p(new q({size:a.width||1,material:{color:a.color?a.color.clone():[255,
255,255]}}));else if(a instanceof z)k=B(a);else if(a instanceof t)k=B(a);else if(a instanceof u)k=new m({material:{color:a.color?a.color.clone():[255,255,255]}}),a.outline&&a.outline.color&&(k.outline={size:a.outline.width||0,color:a.outline.color}),k=new y(k);else if(a instanceof g){var C;C=a.haloColor;var G=a.haloSize;C=C&&0<G?{color:h.clone(C),size:G}:null;G=a.font?a.font.clone():new f;k=new (k?l:v)(new n({size:G.size,font:G,halo:C,material:{color:a.color.clone()},text:a.text}))}else return{error:new e("symbol-conversion:unsupported-2d-symbol",
"2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};b&&(k.id=a.id);if(c&&d.isSymbol3D(k))for(a=0;a<k.symbolLayers.length;++a)k.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:k}}})},"esri/layers/vectorTiles/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/support/jsonUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z,g,n,r,B,C,D,F,H,J,I){Object.defineProperty(a,"__esModule",{value:!0});a.ExtrudeSymbol3DLayer=b;a.BaseFillSymbol=d;a.FillSymbol3DLayer=e;a.Font=h;a.IconSymbol3DLayer=m;a.LabelSymbol3D=f;a.LineSymbol3D=k;a.LineSymbol3DLayer=l;a.BaseMarkerSymbol=p;a.MeshSymbol3D=q;a.ObjectSymbol3DLayer=t;a.PathSymbol3DLayer=v;a.PictureFillSymbol=y;a.PictureMarkerSymbol=u;a.PointSymbol3D=A;a.PolygonSymbol3D=z;a.SimpleFillSymbol=g;a.SimpleLineSymbol=n;a.SimpleMarkerSymbol=r;
a.BaseSymbol=B;a.BaseSymbol3D=C;a.BaseSymbol3DLayer=D;a.TextSymbol=F;a.TextSymbol3DLayer=H;a.WebStyleSymbol=J;a.fromJSON=I.fromJSON;a.isSymbol=function(b){return b instanceof a.BaseSymbol};a.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};a.isSymbol3D=function(a){if(!a)return!1;switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;
default:return!1}}})},"esri/layers/vectorTiles/symbols/ExtrudeSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/Symbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","../core/JSONSupport"],function(c,a,b,d){return function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/FillSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/IconSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(c,a,b,d){return function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/LineSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(c,a,b,d){(function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c})(d);return d})},"esri/layers/vectorTiles/symbols/ObjectSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(c,a,b,d){return function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/PathSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(c,a,b,d){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/TextSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(c,a,b,d){return function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}b(c,a);return c}(d)})},"esri/layers/vectorTiles/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u){Object.defineProperty(a,"__esModule",
{value:!0});a.types={base:v,key:"type",typeMap:{"simple-fill":p,"picture-fill":m,"picture-marker":f,"simple-line":q,"simple-marker":t,text:y,"label-3d":d,"line-3d":e,"mesh-3d":h,"point-3d":k,"polygon-3d":l,"web-style":u}};a.rendererTypes={base:v,key:"type",typeMap:{"simple-fill":p,"picture-fill":m,"picture-marker":f,"simple-line":q,"simple-marker":t,text:y,"line-3d":e,"mesh-3d":h,"point-3d":k,"polygon-3d":l,"web-style":u}};a.labelTypes={base:v,key:"type",typeMap:{text:y,"label-3d":d}};a.types3D={base:v,
key:"type",typeMap:{"label-3d":d,"line-3d":e,"mesh-3d":h,"point-3d":k,"polygon-3d":l,"web-style":u}};a.rendererTypes3D={base:v,key:"type",typeMap:{"line-3d":e,"mesh-3d":h,"point-3d":k,"polygon-3d":l,"web-style":u}};a.labelTypes3D={base:v,key:"type",typeMap:{"label-3d":d}};a.ensureType=b.ensureOneOfType(a.types)})},"esri/layers/vectorTiles/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q){var t=d({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),v=d({widthAndDepth:"width-and-depth"}),y=d({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});d({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"});
d({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});d({percentTotal:"percent-of-total"});var u=Math.PI,A=k.opacityToTransparency,z=k.transparencyToOpacity;return c([a,b],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:q,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);
this.collectRequiredFields(a);return Object.keys(a).sort()}},type:{type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var e=[];a.forEach(function(a,b){"size"===a.type?e.push(this._writeSizeInfo(a,d,b)):"color"===a.type?e.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?e.push(this._writeOpacityInfo(a,d,b)):"rotation"===
a.type&&e.push(this._writeRotationInfo(a,d,b))},this);b.visualVariables=e}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(a){var b=this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===
a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);this._set("visualVariables",a)},getSymbol:function(a,b){},getVisualVariableValues:function(a,b){var c=this.visualVariables,d;c&&(d=c.map(function(c){var d,e=c.type,f=e+"Info";b=h.mixin({},b);b[f]=c;switch(e){case "size":d=this.getSize(a,b);break;case "color":d=this.getColor(a,b);break;case "opacity":d=
this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,b)}return{variable:c,value:d}},this).filter(function(a){return null!=a.value},this));return d},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c=this.visualVariables,d;c&&(d=c.filter(function(c){return c.type===
a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._cache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"===typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"===typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c;a=this._getVarInfo(a,"size");var d=this._cache[a.cacheKey],
e={scale:b};if((a=a.variable)&&b){b=a.minSize;var f=a.maxSize;a="object"===typeof b&&b?this._getSize({},b,d&&d.minSize,e):b;d="object"===typeof f&&f?this._getSize({},f,d&&d.maxSize,e):f;if(null!=a||null!=d)a>d&&(c=d,d=a,a=c),c={minSize:a,maxSize:d}}return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,
c.variable,this._cache[c.cacheKey],b,!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation"),d=c.variable,e=this._cache[c.cacheKey],g=d.axis||"heading",c="heading"===g&&"arithmetic"===d.rotationType?90:0,g="heading"===g&&"arithmetic"===d.rotationType?-1:1,d=d.field,e=e&&e.compiledFunc,h=a.attributes,k=0;if(d||e)e?k=f.executeFunction(e,f.createExecContext(a,f.getViewInfo(b))):"function"===typeof d?k=d.apply(this,arguments):h&&(k=h[d]||0),k="number"!==typeof k||isNaN(k)?
null:c+g*k;return k},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&(b.field&&(a[b.field]=!0),b.normalizationField&&(a[b.normalizationField]=!0),b.valueExpression&&f.extractFieldNames(b.valueExpression).forEach(function(b){a[b]=!0}))})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(a=this.getVisualVariablesForType(b))&&
a[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=v.fromJSON(a.axis));a.valueUnit&&(a.valueUnit=y.fromJSON(a.valueUnit));return a},_readColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){Array.isArray(b)?a.colors[c]=l.fromJSON(b):a.colors[c]=new l(b)}),a.stops&&a.stops.forEach(function(b,c){b.color&&Array.isArray(b.color)?a.stops[c].color=l.fromJSON(b.color):b.color&&(a.stops[c].color=new l(b.color))}));return a},_readOpacityInfo:function(a){var b;
a&&(b=h.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(z),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){a=h.mixin({},a);a.opacity=z(a.transparency);delete a.transparency;return a})));return b},_readVariables:function(a,b){a&&(a=a.map(function(a){a=h.clone(a);a.type=t.fromJSON(a.type);"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var c=b.rotationType;
if(b=b.rotationExpression)c={type:"rotation",rotationType:c},(b=b.match(this._rotationRE))&&b[1]&&(c.field=b[1],a||(a=[]),a.push(c));return a},_createCache:function(a){var b=a&&a.valueExpression,c=f.createSyntaxTree(b),c=f.createFunction(c),d=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,compiledFunc:c,isScaleDriven:d}},_processColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){b instanceof l||(a.colors[c]=new l(b))}),a.stops&&a.stops.forEach(function(b,
c){!b.color||b.color instanceof l||(a.stops[c].color=new l(b.color))}),this._sortStops(a.stops));return this._createCache(a)},_processOpacityInfo:function(a){this._sortStops(a&&a.stops);return this._createCache(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._createCache(a),minSize:this._createCache(a.minSize),
maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=e.toPt(a);return a},_processSizeInfoStops:function(a){a&&Array.isArray(a)&&(a.forEach(function(a){a.size=e.toPt(a.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(a,b,c,d,e){var g=a.attributes,h=b.field,
k=b.stops,n=0,l=c&&c.hasExpr,m=c&&c.compiledFunc,q=c&&c.ipData,r=c&&c.isScaleDriven,t="number"===typeof a,v=t?a:null;if(h||r||l){var y=d&&d.scale,B=e?e[0]:b.minSize,z=e?e[1]:b.maxSize,A=b.minDataValue,C=b.maxDataValue,Z=b.valueUnit||"unknown",V=b.valueRepresentation,n=b.scaleBy,P=b.normalizationField,M=g?parseFloat(g[P]):void 0,N=d&&d.shape;r?v=null==y?this._getAverageValue(b):y:"number"!==typeof v&&(l?v=f.executeFunction(m,f.createExecContext(a,f.getViewInfo(d))):"function"===typeof h?v=h.apply(this,
arguments):g&&(v=g[h]));if(null==v||P&&!t&&(isNaN(M)||0===M))return null;isNaN(M)||t||(v/=M);if(k)z=this._lookupData(v,q),v=z[0],B=z[1],v===B?n=k[v].size:(v=k[v].size,k=k[B].size,n=v+(k-v)*z[2]);else if(null!=B&&null!=z&&null!=A&&null!=C)v<=A?n=B:v>=C?n=z:(k=(v-A)/(C-A),"area"===n&&N?(B=(v="circle"===N)?u*Math.pow(B/2,2):B*B,k=B+k*((v?u*Math.pow(z/2,2):z*z)-B),n=v?2*Math.sqrt(k/u):Math.sqrt(k)):n=B+k*(z-B));else if("unknown"===Z)null!=B&&null!=A?(B&&A?(k=v/A,n="circle"===N?2*Math.sqrt(k*Math.pow(B/
2,2)):"square"===N||"diamond"===N||"image"===N?Math.sqrt(k*Math.pow(B,2)):k*B):n=v+(B||A),n=n<B?B:n,null!=z&&n>z&&(n=z)):n=v;else{k=(d&&d.resolution?d.resolution:1)*p.meterIn[Z];if("area"===V)n=Math.sqrt(v/u)/k,n*=2;else if(n=v/k,"radius"===V||"distance"===V)n*=2;null!=B&&n<B&&(n=B);null!=z&&n>z&&(n=z)}}else b&&(n=k&&k[0]&&k[0].size,null==n&&(n=b.minSize));return n=isNaN(n)?0:n},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||
0);return(c+a)/2},_getColorComponent:function(a,b,c,d,e,h){var g=a.attributes,k=b&&b.field,n="number"===typeof a,l=n?a:null,m=c&&c.hasExpr,p=c&&c.compiledFunc,q=c&&c.ipData,r;if(k||m){var t=b.normalizationField,v=g?parseFloat(g[t]):void 0;"number"!==typeof l&&(m?l=f.executeFunction(p,f.createExecContext(a,f.getViewInfo(d))):"function"===typeof k?l=k.apply(this,arguments):g&&(l=g[k]));null==l||t&&!n&&(isNaN(v)||0===v)||(isNaN(v)||n||(l/=v),r=e?this._getOpacity(l,b,q):this._getColor(l,b,q))}else b&&
(g=b.stops,e?(r=g&&g[0]&&g[0].opacity,null==r&&(r=b.opacityValues&&b.opacityValues[0])):r=g&&g[0]&&g[0].color||b.colors&&b.colors[0]);h&&(h.data=l,h.value=r);return h||r},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value||0}));return b},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;
a&&(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.colorInfo;a&&(d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):l.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]),d=new l(d));return d},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},
_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){if(a<b)return e=c,!0;d=c;return!1});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_processForContext:function(a,b,c){if(b&&"web-scene"===b.origin){var d=null!=a.expression,e=null!=a.valueExpressionTitle&&"rotation"===a.type;b.messages&&(d&&b.messages.push(new m("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+
".expression",context:b})),e&&b.messages.push(new m("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpressionTitle",context:b})));d&&delete a.expression;e&&delete a.valueExpressionTitle}else"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,c){a&&(a=h.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=t.toJSON(a.type),
a=h.fixJson(a,!0));return a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,c){if(a){a=h.mixin({},a);this._processForContext(a,b,"string"===typeof c?c:"visualVariables["+c+"]");var d=a.minSize,e=a.maxSize;d&&(a.minSize="number"===typeof d?d:this._writeSizeInfo(d,b,"visualVariables["+c+"].minSize"));e&&(a.maxSize="number"===typeof e?e:this._writeSizeInfo(e,b,"visualVariables["+c+"].maxSize"));b=a.legendOptions;c=a.axis;a.type=
t.toJSON(a.type);c&&(a.axis=v.toJSON(c));b&&(a.legendOptions=h.mixin({},b),b=b.customValues)&&(a.legendOptions.customValues=b.slice(0));a.stops&&(a.stops=a.stops.map(function(a){a=h.mixin({},a);null===a.label&&delete a.label;return a}));a=h.fixJson(a,!0)}return a},_writeColorInfo:function(a,b,c){a&&(a=h.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=t.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return l.toJSON(a)})),a.stops&&(a.stops=a.stops.map(function(a){a=
h.mixin({},a);a.color&&(a.color=l.toJSON(a.color));null==a.value&&(a.value=0);null===a.label&&delete a.label;return a})),a.legendOptions&&(a.legendOptions=h.mixin({},a.legendOptions)),a=h.fixJson(a,!0));return a},_writeOpacityInfo:function(a,b,c){var d;a&&(d=h.mixin({},a),this._processForContext(d,b,"visualVariables["+c+"]"),d.type=t.toJSON(d.type),d.opacityValues&&(d.transparencyValues=d.opacityValues.map(A),delete d.opacityValues),d.stops&&(d.stops=d.stops.map(function(a){a=h.mixin({},a);a.transparency=
A(a.opacity);delete a.opacity;null===a.label&&delete a.label;return a})),d.legendOptions&&(d.legendOptions=h.mixin({},d.legendOptions)),d=h.fixJson(d,!0));return d}})})},"esri/layers/vectorTiles/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(c,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.opacityToTransparency=function(a){a=b.ensureInteger(100*(1-a));return Math.max(0,Math.min(a,100))};a.transparencyToOpacity=function(a){return Math.max(0,
Math.min(1-a/100,1))}})},"esri/layers/vectorTiles/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),function(c,a,b,d,e,h,m,f,k){var l=h({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",
esriClassifyStandardDeviation:"standard-deviation"}),p=h({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size"});return function(a){function c(b){b=a.call(this)||this;b.lengthUnit=null;b.visualVariables=null;return b}b(c,a);e=c;Object.defineProperty(c.prototype,"classificationMethod",{get:function(){if("class-breaks-size"===this.type||"class-breaks-color"===this.type){var a=this._get("classificationMethod");return a?a:"manual"}return null},
set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fields",{get:function(){return"predominance"===this.type?this._get("fields"):null},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"field1",{get:function(){return"relationship"===this.type?this._get("field1"):null},set:function(a){this._set("field1",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"field2",
{get:function(){return"relationship"===this.type?this._get("field2"):null},set:function(a){this._set("field2",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"focus",{get:function(){return"relationship"===this.type?this._get("focus"):null},set:function(a){this._set("focus",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"numClasses",{get:function(){return"relationship"===this.type?this._get("numClasses"):null},set:function(a){this._set("numClasses",a)},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"standardDeviationInterval",{get:function(){return"standard-deviation"===this.classificationMethod?this._get("standardDeviationInterval"):null},set:function(a){this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",
b)},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new e({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:m.clone(this.field1),field2:m.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};d([f.property({type:String,value:null,
dependsOn:["type"],json:{read:l.read,write:l.write}})],c.prototype,"classificationMethod",null);d([f.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"fields",null);d([f.property({value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"field1",null);d([f.property({value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"field2",null);d([f.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"focus",null);d([f.property({type:Number,
value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"numClasses",null);d([f.property({type:String,json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],c.prototype,"lengthUnit",void 0);d([f.property({type:Number,value:null,dependsOn:["classificationMethod"],json:{write:!0}})],c.prototype,"standardDeviationInterval",null);d([f.property({type:String,value:null,json:{read:p.read,write:p.write}})],c.prototype,"type",null);d([f.property({type:[k],json:{write:!0}})],c.prototype,"visualVariables",
void 0);return c=e=d([f.subclass("esri.renderers.support.AuthoringInfo")],c);var e}(f.declared(e))})},"esri/layers/vectorTiles/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),function(c,a,b,d,e,h,m,f){var k=h({percentTotal:"percent-of-total"}),l=
h({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity"}),p={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null};return function(a){function c(b){b=a.call(this)||this;b.endTime=null;b.field=null;b.maxSliderValue=null;b.minSliderValue=null;b.startTime=null;b.type=null;b.units=null;return b}b(c,a);e=c;c.prototype.castEndTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};c.prototype.castStartTime=function(a){return"string"===
typeof a||"number"===typeof a?a:null};Object.defineProperty(c.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new e({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,
minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};d([m.property({types:p,json:{write:!0}})],c.prototype,"endTime",void 0);d([f.cast("endTime")],c.prototype,"castEndTime",null);d([m.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);d([m.property({type:Number,json:{write:!0}})],c.prototype,"maxSliderValue",void 0);d([m.property({type:Number,json:{write:!0}})],c.prototype,"minSliderValue",void 0);d([m.property({types:p,
json:{write:!0}})],c.prototype,"startTime",void 0);d([f.cast("startTime")],c.prototype,"castStartTime",null);d([m.property({type:String,value:null,dependsOn:["type"],json:{read:k.read,write:k.write}})],c.prototype,"style",null);d([m.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"theme",null);d([m.property({type:String,json:{read:l.read,write:l.write}})],c.prototype,"type",void 0);d([m.property({type:String,json:{write:!0}})],c.prototype,"units",void 0);return c=
e=d([m.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],c);var e}(m.declared(e))})},"esri/layers/vectorTiles/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,b,d,e,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.title=null;return b}
b(c,a);e=c;c.prototype.clone=function(){return new e({title:this.title})};d([h.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=e=d([h.subclass("esri.renderers.support.LegendOptions")],c);var e}(h.declared(e));a.LegendOptions=c;a.default=c})},"esri/layers/vectorTiles/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(c,a,b,d,e,h,m,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.minValue=null;b.maxValue=0;b.symbol=null;return b}b(c,a);e=c;c.prototype.clone=function(){return new e({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};d([h.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);
d([h.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);d([h.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],c.prototype,"minValue",void 0);d([h.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],c.prototype,"maxValue",void 0);d([h.property({types:f.rendererTypes,json:{origins:{"web-scene":{read:m.read,write:{target:{symbol:{types:f.rendererTypes3D}},writer:m.writeTarget}}},read:m.read,write:m.writeTarget}})],
c.prototype,"symbol",void 0);return c=e=d([h.subclass("esri.renderers.support.ClassBreakInfo")],c);var e}(h.declared(e));a.ClassBreakInfo=c;a.default=c})},"esri/layers/vectorTiles/renderers/HeatmapRenderer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Renderer"],function(c,a,b,d){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.type="heatmap";return b}b(c,a);return c}(d)})},"esri/layers/vectorTiles/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(c,a,b,d,e,h,m,f,k){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.symbol=null;b.type="simple";return b}b(c,a);l=c;c.prototype.writeSymbolWebScene=function(a,b,c,d){f.writeTarget(a,b,c,d)};c.prototype.writeSymbol=function(a,b,c,d){f.writeTarget(a,b,c,d)};c.prototype.readSymbol=function(a,b,c){return f.read(a,b,c)};c.prototype.getSymbol=function(a,b){return this.symbol};c.prototype.getSymbols=function(){return this.symbol?[this.symbol]:
[]};c.prototype.clone=function(){return new l({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:e.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};d([h.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);d([h.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);d([h.property({types:k.rendererTypes})],c.prototype,"symbol",void 0);d([h.writer("web-scene","symbol",{symbol:{types:k.rendererTypes3D}})],
c.prototype,"writeSymbolWebScene",null);d([h.writer("symbol")],c.prototype,"writeSymbol",null);d([h.reader("symbol")],c.prototype,"readSymbol",null);return c=l=d([h.subclass("esri.renderers.SimpleRenderer")],c);var l}(h.declared(m))})},"esri/layers/vectorTiles/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z,g,n,r,B){var C=l.getLogger("esri.renderers.UniqueValueRenderer"),D=t.ensureType(z.default);return function(a){function c(b){b=a.call(this)||this;b._valueInfoMap={};b._isDefaultSymbolDerived=!1;b.type="unique-value";b.backgroundFillSymbol=null;b.field=null;b.field2=null;b.field3=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;b.defaultLabel=null;b.fieldDelimiter=null;b.portal=null;b.styleOrigin=null;b.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},e=function(e){var f=m.find(a,function(a){return a.value===b[e].value});f?u.diff(f,b[e])?d.changed.push({type:"complete",oldValue:f,newValue:b[e]}):d.unchanged.push({oldValue:f,newValue:b[e]}):d.added.push(b[e]);c=!0},f=0;f<b.length;f++)e(f);e=function(e){m.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(f=0;f<a.length;f++)e(f);
return c?d:void 0}}};b._set("uniqueValueInfos",[]);return b}b(c,a);l=c;c.prototype.writeType=function(a,b,c,d){b.type="uniqueValue"};c.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){n.writeTarget(a,b,c,d)};c.prototype.castField=function(a){return null==a?a:"function"===typeof a?a:t.ensureString(a)};c.prototype.writeField=function(a,b,c,d){"string"===typeof a?b[c]=a:d&&d.messages?d.messages.push(new f("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):
C.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(c.prototype,"compiledFunc",{get:function(){return g.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});c.prototype.readDefaultSymbol=function(a,b,c){return n.read(a,b,c)};c.prototype.writeDefaultSymbolWebScene=function(a,b,
c,d){this._isDefaultSymbolDerived||n.writeTarget(a,b,c,d)};c.prototype.writeDefaultSymbol=function(a,b,c,d){this._isDefaultSymbolDerived||n.writeTarget(a,b,c,d)};c.prototype.readPortal=function(a,b,c){return c.portal||v.getDefault()};c.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=p.read(b.styleUrl,c),Object.freeze({styleUrl:a})};c.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&
(b.styleUrl=p.write(a.styleUrl,d),p.isAbsolute(b.styleUrl)&&(b.styleUrl=p.normalize(b.styleUrl)))};Object.defineProperty(c.prototype,"uniqueValueInfos",{set:function(a){this.styleOrigin?C.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});c.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?C.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):
(a="object"===typeof a?D(a):new z.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),this._valueInfoMap[a.value]=a)};c.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)C.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};c.prototype.getUniqueValueInfo=
function(a,b){var c=this.field,d=a.attributes,e;this.valueExpression?e=g.executeFunction(this.compiledFunc,g.createExecContext(a,g.getViewInfo(b))):"function"!==typeof c&&this.field2?(a=this.field2,b=this.field3,e=[],c&&e.push(d[c]),a&&e.push(d[a]),b&&e.push(d[b]),e=e.join(this.fieldDelimiter||"")):"function"===typeof c?e=c(a):c&&(e=d[c]);return this._valueInfoMap[e+""]};c.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};c.prototype.getSymbols=
function(){for(var a=[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&a.push(this.defaultSymbol);return a};c.prototype.clone=function(){var a=new l({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:k.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:k.clone(this.visualVariables),legendOptions:k.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:k.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=k.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(k.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};c.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,
this.field3].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&g.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})};c.prototype.populateFromStyle=function(){var a=this;return r.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new h.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||
d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new z.default({value:d.name,symbol:e});c.push(e);a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};c.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};c.fromPortalStyle=
function(a,b){var c=new l(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||v.getDefault());b=c.populateFromStyle();b.catch(function(b){C.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};c.fromStyleUrl=function(a,b){b=new l(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){C.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",
b)});return b};d([q.property()],c.prototype,"type",void 0);d([q.writer("type")],c.prototype,"writeType",null);d([q.property({types:{base:h.BaseSymbol,key:"type",typeMap:{"simple-fill":B.rendererTypes.typeMap["simple-fill"],"picture-fill":B.rendererTypes.typeMap["picture-fill"],"polygon-3d":B.rendererTypes.typeMap["polygon-3d"]}},json:{read:n.read,write:n.writeTarget}})],c.prototype,"backgroundFillSymbol",void 0);d([q.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:h.PolygonSymbol3D}})],
c.prototype,"writeBackgroundFillSymbolWebScene",null);d([q.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],c.prototype,"field",void 0);d([q.cast("field")],c.prototype,"castField",null);d([q.writer("field")],c.prototype,"writeField",null);d([q.property({type:String,json:{write:!0}})],c.prototype,"field2",void 0);d([q.property({type:String,json:{write:!0}})],c.prototype,"field3",void 0);d([q.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);
d([q.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);d([q.property({dependsOn:["valueExpression"]})],c.prototype,"compiledFunc",null);d([q.property({type:A.default,json:{write:!0}})],c.prototype,"legendOptions",void 0);d([q.property({type:String,json:{write:!0}})],c.prototype,"defaultLabel",void 0);d([q.property({types:B.rendererTypes})],c.prototype,"defaultSymbol",null);d([q.reader("defaultSymbol")],c.prototype,"readDefaultSymbol",null);d([q.writer("web-scene",
"defaultSymbol",{defaultSymbol:{types:B.rendererTypes3D}})],c.prototype,"writeDefaultSymbolWebScene",null);d([q.writer("defaultSymbol")],c.prototype,"writeDefaultSymbol",null);d([q.property({type:String,json:{write:!0}})],c.prototype,"fieldDelimiter",void 0);d([q.property({type:v,readOnly:!0})],c.prototype,"portal",void 0);d([q.reader("portal",["styleName"])],c.prototype,"readPortal",null);d([q.property({readOnly:!0})],c.prototype,"styleOrigin",void 0);d([q.reader("styleOrigin",["styleName","styleUrl"])],
c.prototype,"readStyleOrigin",null);d([q.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],c.prototype,"writeStyleOrigin",null);d([q.property({type:[z.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],c.prototype,"uniqueValueInfos",null);d([q.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],c.prototype,"requiredFields",void 0);d([e(1,q.cast(B.ensureType))],c.prototype,"addUniqueValueInfo",null);
return c=l=d([q.subclass("esri.renderers.UniqueValueRenderer")],c);var l}(q.declared(y))})},"esri/layers/vectorTiles/core/tsSupport/paramHelper":function(){define([],function(){return function(c,a){return function(b,d){a(b,d,c)}}})},"esri/layers/vectorTiles/core/arrayUtils":function(){define(["require","exports"],function(c,a){function b(a,b,c){for(var d=a.length,e=0;e<d;e++)if(b.call(c,a[e],e,a))return e;return-1}function d(a,b,c,d){void 0===c&&(c=a.length);d=d||l;for(var e=Math.max(0,d.last-10),
f=-1,h=e;h<c;++h)if(a[h]===b){f=h;break}if(-1===f){for(h=0;h<e;++h)if(a[h]===b){f=h;break}if(-1===f)return}a[f]=a[c-1];a.pop();d.last=f;return b}function e(a,b,c,e){void 0===c&&(c=a.length);var f=[];b.forEach(function(b){void 0!==d(a,b,c,e)&&(f.push(b),--c)});return f}function h(a,b){return-1===a.indexOf(b)}function m(a,b,c){return!a.some(b.bind(null,c))}function f(a){return a}Object.defineProperty(a,"__esModule",{value:!0});a.findIndex=b;a.find=function(a,b,c){for(var d=a.length,e=0;e<d;e++){var f=
a[e];if(b.call(c,f,e,a))return f}};a.unique=function(a){return a.filter(function(a,b,c){return c.indexOf(a)===b})};a.equals=function(a,b,c){if(!a&&!b)return!0;if(!a||!b||a.length!==b.length)return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.difference=function(a,b,c){var d;c?(d=b.filter(m.bind(null,a,c)),a=a.filter(m.bind(null,b,c))):(d=b.filter(h.bind(null,a)),a=a.filter(h.bind(null,b)));return{added:d,removed:a}};a.intersect=
function(a,c,d){return a&&c?d?a.filter(function(a){return-1<b(c,function(b){return d(a,b)})}):a.filter(function(a){return-1<c.indexOf(a)}):[]};a.constant=function(a,b){for(var c=Array(a),d=0;d<a;d++)c[d]=b;return c};a.range=function(a,b){void 0===b&&(b=a,a=0);for(var c=Array(b-a),d=a;d<b;d++)c[d-a]=d;return c};a.binaryIndexOf=function(a,b,c){for(var d=a.length,e=0,f=d-1;e<f;){var h=e+Math.floor((f-e)/2);b>a[h]?e=h+1:f=h}f=a[e];return c?b>=a[d-1]?-1:f===b?e:e-1:f===b?e:-1};var k=function(){return function(){this.last=
0}}();a.RemoveHint=k;var l=new k;c=function(){return function(a){var b=this;this._array=a;this._hint=new k;this.remove=function(a){return d(b._array,a,b._array.length,b._hint)};this.removeMany=function(a){return e(b._array,a,b._array.length,b._hint)}}}();a.UnorderedRemover=c;a.removeUnordered=d;a.removeUnorderedMany=e;a.keysOfMap=function(a){var b=[];a.forEach(function(a,c){return b.push(c)});return b};a.keysOfSet=function(a,b){void 0===b&&(b=f);var c=[];a.forEach(function(a){return c.push(b(a))});
return c}})},"esri/layers/vectorTiles/portal/Portal":function(){define(["require","exports"],function(c,a){return function(){function a(){}a.getDefault=function(){return null};return a}()})},"esri/layers/vectorTiles/renderers/support/diffUtils":function(){define(["require","exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(c,a,b,d,e){function h(a){return a instanceof d?Object.keys(a.items):a instanceof b?e.getProperties(a).keys():a?Object.keys(a):
[]}function m(a,b){return a instanceof d?a.items[b]:a[b]}function f(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function k(a){return a?a.declaredClass:null}function l(a,c){var d=a.diff;if(d&&"function"===typeof d)return d(a,c);var e=h(a),q=h(c);if(0!==e.length||0!==q.length){if(!e.length||!q.length||f(a,c))return{type:"complete",oldValue:a,newValue:c};var t=q.filter(function(a){return-1===e.indexOf(a)}),z=e.filter(function(a){return-1===q.indexOf(a)}),t=e.filter(function(b){return-1<
q.indexOf(b)&&m(a,b)!==m(c,b)}).concat(t,z).sort();if((z=k(a))&&-1<p.indexOf(z)&&t.length)return{type:"complete",oldValue:a,newValue:c};var g,z=a instanceof b&&c instanceof b,n;for(n in t){var r=t[n],B=m(a,r),C=m(c,r),D=void 0;(z||"function"!==typeof B&&"function"!==typeof C)&&B!==C&&(null!=B||null!=C)&&(D=d&&d[r]&&"function"===typeof d[r]?d[r](B,C):"object"===typeof B&&"object"===typeof C&&k(B)===k(C)?l(B,C):{type:"complete",oldValue:B,newValue:C})&&(g=g||{type:"partial",diff:{}},g.diff[r]=D)}return g}}
Object.defineProperty(a,"__esModule",{value:!0});var p=["esri.Color","esri.portal.Portal"];a.diff=function(a,b){if("function"!==typeof a&&"function"!==typeof b&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof b&&k(a)!==k(b)?{type:"complete",oldValue:a,newValue:b}:l(a,b)}})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t){function v(a){return a?a.isInstanceOf&&a.isInstanceOf(F):!1}function y(a){return a?v(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function u(a){if(a&&a.length)return a[0]}function A(a,b,c,d){b&&b.forEach(function(b,e,f){a.push(b);A(a,c.call(d,b,e,f),c,d)})}c=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=
!1;this.item=a};return a}();var z=function(){},g=new l(c,!0,function(a){a.item=null;a.target=null}),n=new Set,r=new Set,B=new Set,C=new Map,D=0,F=function(a){function c(b){b=a.call(this,b)||this;b._boundDispatch=b._dispatchColChange.bind(b);b._chgListeners=[];b._notifications=null;b._timer=null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:D++});return b}b(c,a);f=c;c.ofType=function(a){if(!a)return f;if(C.has(a))return C.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;
else if(a.base)b=a.base.prototype.declaredClass;else for(var c in a.typeMap){var d=a.typeMap[c].prototype.declaredClass;b=b?b+(" | "+d):d}b=f.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});c={Type:a,ensureType:"function"===typeof a?t.ensureType(a):t.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:c});C.set(a,b);return b};c.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||v(a)?{items:a}:a:{}};Object.defineProperty(c.prototype,"items",{get:function(){return this._items},
set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(y(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});c.prototype.on=function(a,b){var c;Array.isArray(a)?c=a:-1<a.indexOf(",")&&(c=a.split(/\s*,\s*/));if(c){var d=[];for(a=0;a<c.length;a++)d.push(this.on(c[a],b));d.remove=function(){for(var a=0;a<d.length;a++)d[a].remove()};return d}if("change"===a){var f=this._chgListeners,g={removed:!1,callback:b};f.push(g);this._notifications&&this._notifications.push({listeners:f.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=z;g.removed=!0;f.splice(f.indexOf(g),1)}}}return e.after(this,"on"+a,b,!0)};c.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)};c.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges();return this};c.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||
this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(y(a)));this._emitAfterChanges();return this};c.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];this._emitAfterChanges();return a};c.prototype.clone=function(){return this._createNewInstance({items:this._items.map(k.clone)})};c.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=a.map(y);return this._createNewInstance({items:(c=
this._items).concat.apply(c,a)});var c};c.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=this._splice(0,this.length),d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c);this._emitAfterChanges()}};c.prototype.every=function(a,b){return this._items.every(a,b)};c.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};c.prototype.find=function(a,b){if("function"!==typeof a)throw new TypeError(a+
" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++){var f=c[e];if(a.call(b,f,e,c))return f}};c.prototype.findIndex=function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++)if(a.call(b,c[e],e,c))return e;return-1};c.prototype.flatten=function(a,b){var c=[];A(c,this,a,b);return new f(c)};c.prototype.forEach=function(a,b){for(var c=this._items,d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c)};c.prototype.getItemAt=function(a){return this._items[a]};
c.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};c.prototype.includes=function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};c.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};c.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};c.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};c.prototype.map=function(a,
b){a=this._items.map(a,b);return new f({items:a})};c.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};c.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=u(this._splice(this.length-1,1));this._emitAfterChanges();return a}};c.prototype.push=function(){for(var a=[],b=
0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(a));this._emitAfterChanges();return this.length};c.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};c.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};c.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};c.prototype.removeAt=
function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=u(this._splice(a,1)),this._emitAfterChanges(),a};c.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=v(a)?a.toArray():a;for(var b=this._items,c=[],d=a.length,e=0;e<d;e++){var f=b.indexOf(a[e]);if(-1<f){for(var g=e+1,h=f+1,k=Math.min(a.length-g,b.length-h),l=0;l<k&&a[g+l]===b[h+l];)l++;g=1+l;(f=this._splice(f,g))&&0<f.length&&c.push.apply(c,f);e+=g-1}}this._emitAfterChanges();return c};c.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a)));this._emitAfterChanges();return this};c.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=u(this._splice(0,1));this._emitAfterChanges();return a}};c.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};c.prototype.some=function(a,b){return this._items.some(a,
b)};c.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));return this};c.prototype.splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};c.prototype.toArray=function(){return this._items.slice()};c.prototype.toJSON=
function(){return this.toArray()};c.prototype.toLocaleString=function(){return this._items.toLocaleString()};c.prototype.toString=function(){return this._items.toString()};c.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};c.prototype._createNewInstance=function(a){return new this.constructor(a)};c.prototype._splice=function(a,
b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var d=this._items,e=this.constructor.prototype.itemType,f,h;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=p.schedule(this._boundDispatch));if(b){h=d.splice(a,b);if(this.hasEventListener("before-remove")){var k=g.acquire();k.target=this;k.cancellable=!0;for(var l=0,m=h.length;l<m;l++)f=
h[l],k.reset(f),this.emit("before-remove",k),k.defaultPrevented&&(h.splice(l,1),d.splice(a,0,f),a+=1,--l,--m);g.release(k)}this.length=this._items.length;if(this.hasEventListener("after-remove")){f=g.acquire();f.target=this;f.cancellable=!1;m=h.length;for(l=0;l<m;l++)f.reset(h[l]),this.emit("after-remove",f);g.release(f)}}if(c&&c.length){if(e){l=[];for(m=0;m<c.length;m++)f=c[m],k=e.ensureType(f),null==k&&null!=f||l.push(k);c=l}e=this.hasEventListener("before-add");l=this.hasEventListener("after-add");
m=a===this.length;if(e||l){f=g.acquire();f.target=this;f.cancellable=!0;k=g.acquire();k.target=this;k.cancellable=!1;for(var n=0,q=c;n<q.length;n++){var r=q[n];e?(f.reset(r),this.emit("before-add",f),f.defaultPrevented||(m?d.push(r):d.splice(a++,0,r),this._set("length",d.length),l&&(k.reset(r),this.emit("after-add",k)))):(m?d.push(r):d.splice(a++,0,r),this._set("length",d.length),k.reset(r),this.emit("after-add",k))}g.release(f)}else m?d.push.apply(d,c):d.splice.apply(d,[a,0].concat(c)),this._set("length",
d.length)}(c&&c.length||h&&h.length)&&this._notifyChangeEvent(c,h);return h};c.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=g.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;g.release(b)}return a};c.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=g.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);g.release(a)}};c.prototype._notifyChangeEvent=
function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};c.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;n.clear();r.clear();B.clear();for(var d=0;d<b.length;d++){var e=b[d],f=e.added,e=e.removed;if(f)if(0===B.size&&0===r.size)for(var g=0,h=f;g<h.length;g++)f=h[g],n.add(f);
else for(g=0,h=f;g<h.length;g++)f=h[g],r.has(f)?(B.add(f),r.delete(f)):B.has(f)||n.add(f);if(e)if(0===B.size&&0===n.size)for(g=0;g<e.length;g++)f=e[g],r.add(f);else for(g=0;g<e.length;g++)f=e[g],n.has(f)?n.delete(f):(B.delete(f),r.add(f))}var k=m.acquire();n.forEach(function(a){k.push(a)});var l=m.acquire();r.forEach(function(a){l.push(a)});var p=c._items,q=a.items,t=m.acquire();B.forEach(function(a){q.indexOf(a)!==p.indexOf(a)&&t.push(a)});if(a.listeners&&(k.length||l.length||t.length))for(b={target:c,
added:k,removed:l,moved:t},d=a.listeners.length,f=0;f<d;f++)e=a.listeners[f],e.removed||e.callback.call(c,b);m.release(k);m.release(l);m.release(t)},c=this,d=0;d<a.length;d++)b(a[d]);n.clear();r.clear();B.clear()}};c.isCollection=v;d([q.property()],c.prototype,"length",void 0);d([q.property()],c.prototype,"items",null);return c=f=d([q.subclass("esri.core.Collection")],c);var f}(q.declared(h,f));return F})},"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect",
"dojo/on"],function(c,a,b,d){function e(a,b,c,d){var f;Array.isArray(b)?f=b:-1<b.indexOf(",")&&(f=b.split(/\s*,\s*/));if(f){var h=[];for(b=0;b<f.length;b++)h.push(e(a,f[b],c,d));h.remove=function(){for(var a=0;a<h.length;a++)h[a].remove()};return h}return d(a,b)}return function(){function a(){}a.prototype.emit=function(a,b){if(this.hasEventListener(a))return b=b||{},b.target||(b.target=this),d.emit(this,a,b)};a.prototype.on=function(a,c){return e(this,a,c,function(a,d){return b.after(a,"on"+d,c,!0)})};
a.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return a}()})},"esri/layers/vectorTiles/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(c,a,b,d,e,h,m,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.symbol=null;b.value=null;return b}b(c,a);e=c;c.prototype.clone=function(){return new e({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};d([h.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);d([h.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);d([h.property({types:f.rendererTypes,json:{origins:{"web-scene":{read:m.read,
write:{target:{symbol:{types:f.rendererTypes3D}},writer:m.writeTarget}}},read:m.read,write:m.writeTarget}})],c.prototype,"symbol",void 0);d([h.property({type:String,json:{write:!0}})],c.prototype,"value",void 0);return c=e=d([h.subclass("esri.renderers.support.UniqueValueInfo")],c);var e}(h.declared(e));a.UniqueValueInfo=c;a.default=c})},"esri/layers/vectorTiles/symbols/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Error"],function(c,a,b,d){Object.defineProperty(a,
"__esModule",{value:!0});a.fetchStyle=function(a,c){return b.reject(new d("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}})},"esri/layers/vectorTiles/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(c,a,b,d,e,h,m,f,k){function l(a,b,c){if(!a)return null;if(a&&(a.styleName||
a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new e("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,context:c})),null;b=a?q[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new e("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function p(a,c,d){return a?d&&"web-scene"===d.origin&&"heatmap"===
a.type?(d.messages&&d.messages.push(new b("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:d})),null):a.write(c,d):null}Object.defineProperty(a,"__esModule",{value:!0});var q={simple:f,uniqueValue:k,classBreaks:h,heatmap:m};a.read=l;a.writeTarget=function(a,b,c,e){(a=p(a,{},e))&&d.setDeepValue(c,a,b)};a.write=p;a.fromJSON=function(a,b){return l(a,null,b)}})},"esri/layers/vectorTiles/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),
function(c,a,b,d,e,h){function m(){var a=0===f.length;if(!a){for(var b=e();!a&&6>e()-b;){var c=f[l];if(c){if(!0===c()){var h=k.get(c);f[l]=null;k.delete(c);h()}l=(l+1)%f.length}else f.splice(l,1),l=(a=0===f.length)?0:l%f.length}a||d(m)}}var f=[],k=new Map,l=0;return function(a){return a?h.create(function(b){f.push(a);k.set(a,b);1===f.length&&d(m)},function(){f[f.indexOf(a)]=null;k.delete(a)}):h.reject(new TypeError("callback is not a function"))}})},"esri/layers/vectorTiles/core/MapPool":function(){define(["require",
"exports","./ObjectPool"],function(c,a,b){c=function(){function a(a,c){void 0===a&&(a=50);void 0===c&&(c=50);this._pool=new b(Map,!1,function(a){return a.clear()},c,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return d.acquire()};a.release=function(a){return d.release(a)};return a}();var d=new c(100);return c})},"esri/layers/vectorTiles/core/SetPool":function(){define(["require","exports","./ObjectPool"],
function(c,a,b){c=function(){function a(a,c){void 0===a&&(a=50);void 0===c&&(c=50);this._pool=new b(Set,!1,function(a){return a.clear()},c,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return d.acquire()};a.release=function(a){return d.release(a)};return a}();var d=new c(100);return c})},"esri/layers/vectorTiles/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),
function(c,a,b,d,e,h,m,f){function k(a,c,e){if(!a)return null;var f=0,k={};a=a.clone();var m=a.visualVariables,p=null;if("simple"!==a.type){var q=a.valueExpression;if(!a.field&&q){var g="$$fake"+f++,n=h.createFunction(q);k[g]=function(a,b){l.repurposeFromGraphicLikeObject(a.geometry,a.attributes,e);return h.executeFunction(n,{vars:{$feature:l,$view:h.getViewInfo(b)},spatialReference:c})};a.field=g;a.valueExpression=null;p=function(a,b){b.attributes[g]=k[g](b);return a.valueExpression?a.getSymbol(d.fromJSON(b)):
a.getSymbol(b)}}}m&&(a.visualVariables=m.map(function(a){if(a.normalizationField){var d=a.field,g=a.normalizationField,n="$$fake"+f++;k[n]=function(a,b){return a.attributes[d]/a.attributes[g]};a=b({},a);a.field=n;delete a.normalizationField;return a}if(a.valueExpression&&"$view.scale"!==a.valueExpression){var m=a.valueExpression,n="$$fake"+f++,p=h.createFunction(m);k[n]=function(a,b){l.repurposeFromGraphicLikeObject(a.geometry,a.attributes,e);return h.executeFunction(p,{vars:{$feature:l,$view:h.getViewInfo(b)},
spatialReference:c})};a=b({},a);a.field=n;delete a.valueExpression}return a}));return{renderer:a,normalizingFunctions:k,getSymbolFunction:p}}Object.defineProperty(a,"__esModule",{value:!0});var l=new e;a.createRendererInfo=function(a,b,c){var d=(b=k(a,b,c)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.normalizingFunctions),e=b&&b.getSymbolFunction;a=b&&b.renderer||a;b=f.convertVisualVariables(a.visualVariables);return{renderer:a,vvFields:b.vvFields,vvRanges:b.vvRanges,getValue:function(a,
b){var c=d[b];return c?c(a):a.attributes[b]},getSymbol:function(a){return e?e(this.renderer,a):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,a):null}}};a.getNormalizedRenderer=function(a,b,c){return(b=k(a,b,c)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.renderer)||a};a.getSymbol=function(a,b){return a.getSymbol(b)};a.isRendererWebGLCompatible=function(a){if(!a||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(a.type))return!1;if(a.visualVariables){var b=
0;for(a=a.visualVariables;b<a.length;b++){var c=a[b];switch(c.type){case "color":case "opacity":if(c.stops&&8<c.stops.length)return!1;break;case "size":if(f.getTypeOfSizeVisualVariable(c)===m.WGLVVFlag.SIZE_FIELD_STOPS&&c.stops&&6<c.stops.length)return!1}}}return!0}})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../renderers ../../../../../core/Accessor ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/aaBoundingRect ../../../../../renderers/support/diffUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/visualVariablesUtils ../../../engine/webgl/WGLFeatureView ../../../engine/webgl/WGLTile ./BaseTileRenderer".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v){function y(a){for(var b in a.diff){var c=a.diff[b];if("collection"===c.type){if(0!==c.changed.length||0!==c.added.length||0!==c.removed.length)return!0}else if("visualVariables"!==b&&"authoringInfo"!==b)return!0}return!1}Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){return a.call(this)||this}b(c,a);c.prototype.initialize=function(){};c.prototype.createTile=function(a){var b=f.create();this.tileInfoView.getTileBounds(b,a);return new t(a,
b)};c.prototype.disposeTile=function(a){this._featuresView.removeChild(a)};c.prototype.highlight=function(a){return this._featuresView.highlight(a)};c.prototype.hitTest=function(a,b){return this._featuresView.hitTest(a,b)};c.prototype.supportsRenderer=function(a){return null!=a&&l.isRendererWebGLCompatible(a)&&-1!==["simple","class-breaks","unique-value"].indexOf(a.type)};c.prototype.getProcessorConfiguration=function(){var a=this.layer;return{type:"symbol",renderer:a.renderer.toJSON(),devicePixelRatio:window.devicePixelRatio||
1,definitionExpression:a.definitionExpression,outFields:a.outFields.slice().sort(),gdbVersion:a.gdbVersion,historicMoment:a.historicMoment&&a.historicMoment.getTime(),labelingInfo:a.labelingInfo&&a.labelingInfo.map(function(a){return a.toJSON()})}};c.prototype.needsProcessorReconfiguration=function(a){var b=this.configuration;if(!b||b.definitionExpression!==a.definitionExpression||b.outFields.join()!==a.outFields.join())return!0;b=this.configuration&&e.fromJSON(this.configuration.renderer)||null;
a=a&&e.fromJSON(a.renderer)||null;b=k.diff(b,a);if(!b)return!1;switch(b.type){case "complete":return!0;case "partial":if(y(b))return!0;if(b.diff.visualVariables){var b=this._featuresView.visualVariablesInfo,c=this.tileInfoView.tileInfo.spatialReference,d={fields:this.layer.fields.map(function(a){return a.toJSON()})};a=l.getNormalizedRenderer(a,c,d);a=p.convertVisualVariables(a.visualVariables).vvFields;return k.diff(b.vvFields,a)?!0:!1}}};c.prototype.applyConfiguration=function(a,b){var c=e.fromJSON(a.renderer),
d={fields:this.layer.fields.map(function(a){return a.toJSON()})},c=l.getNormalizedRenderer(c,this.tileInfoView.tileInfo.spatialReference,d);this.configuration=a;this._featuresView.visualVariablesInfo=p.convertVisualVariables(c.visualVariables);b&&this._featuresView.disposeWebGLResources()};c.prototype.install=function(a){var b=new q.default({highlightOptions:this.highlightOptions,tileInfoView:this.tileInfoView,layer:this.layer,layerView:this.layerView});this._featuresView=b;b.install(a)};c.prototype.uninstall=
function(a){this._featuresView.uninstall(a)};c.prototype.onTileData=function(a){var b=this.tiles.get(a.tileKey);b&&(this._featuresView.onTileData(b,a.data),this.requestUpdate())};c.prototype.onTileDataUpdate=function(a){var b=this.tiles.get(a.tileId);b&&(this._featuresView.onTileDataUpdate(b,a.data),this.requestUpdate())};c.prototype.onTileError=function(a){if(a=this.tiles.get(a.tileKey))this._featuresView.onTileError(a),this.requestUpdate()};c.prototype.getMaterialItems=function(a){return this._featuresView.getMaterialItems(a)};
return c=d([m.subclass()],c)}(m.declared(h,v.default));a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLTile":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix/mat2d ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec2 ../DisplayObject ./definitions ./DirtyMap ./DisplayRecordStore ./enums ./number ./Utils ./WGLBuffers ./WGLDisplayList ./WGLDisplayObject ../../tiling/enums ../../tiling/TileKey".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A,z){function g(a,b){return a.sortKey-b.sortKey}return function(a){function c(b,c){var f=a.call(this)||this;f.status=A.TileStatus.INITIALIZED;f._data=null;f.hlDisplayList=null;f._wglBuffers=null;f._dirtyMap=new k.default;f.coords=[0,0];f.bounds=[0,0,0,0];f.tileTransform={transform:Float32Array[16],screenTransform:Float32Array[16],displayCoord:Float32Array[2],screenCoord:Float32Array[2]};f._hasVisualVariables=!1;f._labelIndex=null;f.tileTransform.screenTransform=
d.create();f.tileTransform.transform=e.create();f.tileTransform.displayCoord=h.create();f.tileTransform.screenCoord=h.create();f.key=z.pool.acquire(b);f.coords[0]=c[0];f.coords[1]=c[3];f.bounds=c;return f}b(c,a);Object.defineProperty(c.prototype,"iconGeometry",{get:function(){return this.getGeometry(p.WGLGeometryType.MARKER)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textGeometry",{get:function(){return this.getGeometry(p.WGLGeometryType.TEXT)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"fillGeometry",{get:function(){return this.getGeometry(p.WGLGeometryType.FILL)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lineGeometry",{get:function(){return this.getGeometry(p.WGLGeometryType.LINE)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"labelGeometry",{get:function(){return this.getGeometry(p.WGLGeometryType.LABEL)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"displayObjects",{get:function(){return this._data.tileDisplayData.displayObjects},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"canDisplay",{get:function(){return!!this.attached&&!!this._data},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isDirty",{get:function(){return this.status===A.TileStatus.MODIFIED},set:function(a){a&&this.status===A.TileStatus.READY?this.setStatus(A.TileStatus.MODIFIED):a||this.status!==A.TileStatus.MODIFIED||this.setStatus(A.TileStatus.READY);this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"hasData",{get:function(){return this.status===A.TileStatus.MODIFIED||this.status===A.TileStatus.READY},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"labelIndex",{get:function(){return this._labelIndex},enumerable:!0,configurable:!0});c.prototype.getGeometry=function(a){return this._wglBuffers&&this._wglBuffers.has(a)?this._wglBuffers.get(a):null};c.prototype.getDisplayList=function(a){switch(a){case p.WGLDrawPhase.HIGHLIGHT:return this.hlDisplayList;default:return this._data&&
this._data.tileDisplayData.displayList}};Object.defineProperty(c.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});c.prototype.setData=function(a,b,c){this._hasVisualVariables=b;a&&a.tileDisplayData?(this._dispRecStore=l.default.fromTileData(a,this._dirtyMap),this._data=a,a.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(c?A.TileStatus.MODIFIED:A.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(A.TileStatus.READY),this._dirtyMap.markAllDirty()):
(this.clear(),this.setStatus(A.TileStatus.NO_DATA))};c.prototype.patchData=function(a,b){this._data||(this.setData(a.addOrUpdate,this._hasVisualVariables,b),a.addOrUpdate=null);this._patchData(a)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=l.default.fromTileData(this._data,this._dirtyMap));a.addOrUpdate.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(b?A.TileStatus.MODIFIED:A.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(A.TileStatus.READY)};
c.prototype.commitChanges=function(a){this._data&&this.status===A.TileStatus.READY&&(this._wglBuffers||(this._wglBuffers=new v.default(a.context,this._hasVisualVariables)),this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._dirtyMap.markAllClean())};c.prototype.setVisibility=function(a,b){for(var c=this._data.tileBufferData.geometries.map(function(a){return{vertexFrom:void 0,vertexTo:void 0,geometry:a}}),d=0;d<a.length;d++)for(var e=a[d],f=0,g=this._data.tileDisplayData.displayObjectRegistry.get(e.id).displayRecords;f<
g.length;f++){var h=g[f];if(null==b||b===h.geometryType){var k=c[h.geometryType],l=k.geometry.vertexBuffer[t.C_VBO_VISIBILITY];if(l){k.vertexFrom=null==k.vertexFrom?h.vertexFrom:Math.min(k.vertexFrom,h.vertexFrom);k.vertexTo=null==k.vertexTo?h.vertexFrom+h.vertexCount:Math.max(k.vertexTo,h.vertexFrom+h.vertexCount);for(var k=h.vertexFrom*l.stride/4,h=h.vertexCount*l.stride/4,n=0;n<h;++n)l.data[k+n]=e.visibility?4294967295:0}}}b=!1;for(a=0;a<c.length;++a)k=c[a],null!=k.vertexFrom&&null!=k.vertexTo&&
(b=k.vertexTo?k.vertexTo-k.vertexFrom:0,this.setStatus(A.TileStatus.MODIFIED),this._dirtyMap.markDirtyVertices(a,t.C_VBO_VISIBILITY,k.vertexFrom,b),b=!0);b&&this.requestRender()};c.prototype.setVisibilityRange=function(a,b,c,d){c=q.i8888to32(c,d,c,d);var e=d=void 0,f=this._data.tileBufferData.geometries[p.WGLGeometryType.LABEL].vertexBuffer[t.C_VBO_VISIBILITY_RANGE];a=this._data.tileDisplayData.displayObjectRegistry.get(a);b=a.metrics[b];var g=b.range.from;for(b=g+b.range.count;g<b;++g){var h=a.displayRecords[g];
if(h.geometryType===p.WGLGeometryType.LABEL){d=null==d?h.vertexFrom:Math.min(d,h.vertexFrom);for(var e=null==e?h.vertexFrom+h.vertexCount:Math.max(e,h.vertexFrom+h.vertexCount),k=h.vertexFrom*f.stride/4,h=h.vertexCount*f.stride/4,l=0;l<h;++l)f.data[k+l]=c}}this._dirtyMap.markDirtyVertices(p.WGLGeometryType.LABEL,t.C_VBO_VISIBILITY_RANGE,d,e?e-d:0)};c.prototype.setStatus=function(a){this.status=a;if(a===A.TileStatus.READY||a===A.TileStatus.NO_DATA)this.attached=!0};c.prototype.clear=function(){this._data=
null;this.setStatus(A.TileStatus.INVALID);this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null);this.hlDisplayList&&(this.hlDisplayList=null)};c.prototype.dispose=function(){this.clear()};c.prototype.attach=function(a){return this.canDisplay};c.prototype.detach=function(b){a.prototype.detach.call(this,b)};c.prototype.doRender=function(a){var b=this;this.attached&&(this.commitChanges(a),a.context.setStencilFunction(514,this.stencilRef,255),a.painter.getBrushes(a.drawPhase).forEach(function(c){return c.draw(a,
b)}))};c.prototype.buildHLList=function(a){var b=this;this.hlDisplayList=new y;a.forEach(function(a){b._addToHLDisplayList(b.hlDisplayList,a)})};c.prototype._addToHLDisplayList=function(a,b){if(this._data){var c=this._data.tileDisplayData.displayObjectRegistry.get(b);if(c){b=[];for(var d=0,c=c.displayRecords;d<c.length;d++){var e=c[d].copy();e.meshData=null;e.symbolLevel=0;e.zOrder=0;b.push(e)}b.sort(g);a.addToList(b)}}};c.prototype._rebuildLabelIndex=function(){this._labelIndex=this._initLabelIndex();
for(var a=0,b=this.displayObjects;a<b.length;a++)this._insertIntoLabelIndex(b[a])};c.prototype._insertIntoLabelIndex=function(a){var b=a.anchor;-1!==a.xBucket&&b&&this.labelIndex[a.yBucket][a.xBucket].push(a)};c.prototype._initLabelIndex=function(){for(var a=[],b=0;b<f.TILE_SIZE/f.COLLISION_BUCKET_SIZE;b++){a.push([]);for(var c=0;c<f.TILE_SIZE/f.COLLISION_BUCKET_SIZE;c++)a[b].push([])}return a};c.prototype._patchData=function(a){for(var b=!0,c=0,d=a.remove||[];c<d.length;c++){var e=d[c],f=this._data.tileDisplayData.displayObjectRegistry.get(e);
if(f){this._data.tileDisplayData.displayList.removeFromList(f.displayRecords);for(var g=0,h=f.displayRecords;g<h.length;g++)this._dispRecStore.delete(h[g]);this._data.tileDisplayData.displayObjectRegistry.delete(e);f=this._data.tileDisplayData.displayObjects.indexOf(f);this._data.tileDisplayData.displayObjects.splice(f,1)}}c=0;for(d=a.addOrUpdate&&a.addOrUpdate.tileDisplayData&&a.addOrUpdate.tileDisplayData.displayObjects||[];c<d.length;c++){e=d[c];if(f=this._data.tileDisplayData.displayObjectRegistry.get(e.id)){for(var k=
f.displayRecords.length,g=0;g<k;++g){var h=f.displayRecords[g],l=e.displayRecords[g];if(g>=e.displayRecords.length||h.geometryType!==l.geometryType||h.symbolLevel!==l.symbolLevel||h.zOrder!==l.zOrder||h.materialInfo.materialKey!==l.materialInfo.materialKey)this._dispRecStore.delete(f.displayRecords[g]),g<e.displayRecords.length&&(f.displayRecords[g]=void 0)}f.displayRecords.length=e.displayRecords.length}else f=new u(e.id),this._data.tileDisplayData.displayObjectRegistry.set(e.id,f),this._data.tileDisplayData.displayObjects.push(f);
k=e.displayRecords.length;for(g=0;g<k;++g){l=e.displayRecords[g];(h=f.displayRecords[g])?(h.meshData=l.meshData,h.materialInfo=l.materialInfo):(h=l.copy(),h.vertexFrom=void 0,h.indexFrom=void 0,f.displayRecords[g]=h);var n=a.addOrUpdate.tileBufferData.geometries[l.geometryType],b=this._dispRecStore.setMeshData(h,l,n.vertexBuffer,n.indexBuffer)&&b}}return b};return c}(m)})},"esri/layers/vectorTiles/views/2d/engine/webgl/DirtyMap":function(){define(["require","exports","./Utils"],function(c,a,b){function d(a,
b,c){a.allDirty||(null!=a.from&&null!=a.count?(a.from=Math.min(a.from,b),a.count=Math.max(a.from+a.count,b+c)-a.from):(a.from=b,a.count=c))}Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this._dirties=b.createGeometryData(void 0,function(a){return{indices:{from:null,count:null,allDirty:!1}}},function(a,b){return{vertices:{from:null,count:null,allDirty:!1}}})}a.prototype.markAllClean=function(){for(var a=0,b=this._dirties;a<b.length;a++){var c=b[a];c.data.indices.from=null;
c.data.indices.count=null;c.data.indices.allDirty=!1;for(var d in c.buffers)c.buffers[d].data.vertices.from=null,c.buffers[d].data.vertices.count=null,c.buffers[d].data.vertices.allDirty=!1}};a.prototype.markAllDirty=function(){for(var a=0,b=this._dirties;a<b.length;a++){var c=b[a];c.data.indices.allDirty=!0;for(var d in c.buffers)c.buffers[d].data.vertices.allDirty=!0}};a.prototype.forEach=function(a){for(var b=new Map,c=0;c<this._dirties.length;++c){var d=this._dirties[c],e=new Map,h;for(h in d.buffers){var q=
d.buffers[h].data.vertices;(q.allDirty||null!=q.from&&null!=q.count)&&e.set(h,q)}d=d.data.indices;q=void 0;q=d.allDirty||null!=d.from&&null!=d.count?{indices:d,vertices:e}:{indices:void 0,vertices:e};(q.indices||0<q.vertices.size)&&b.set(c,q)}b.forEach(function(b,c){a({indices:b.indices||null,vertices:0<b.vertices.size?b.vertices:null},c)})};a.prototype.markDirtyIndices=function(a,b,c){d(this._dirties[a].data.indices,b,c)};a.prototype.markDirtyVertices=function(a,b,c,e){d(this._dirties[a].buffers[b].data.vertices,
c,e)};return a}();a.default=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/DisplayRecordStore":function(){define(["require","exports","dojo/has","./FreeList","./Utils"],function(c,a,b,d,e){function h(a){a=a.getStrides();var b={},c;for(c in a)b[m[c]]=a[c];return b}Object.defineProperty(a,"__esModule",{value:!0});var m=["FILL","LINE","MARKER","TEXT","LABEL"];c=function(){function a(a,b,c,e){this._strides=a;this._displayList=b;this._vertexAlignments={};this._freeListsAndStorage={};this._dirtyMap=
null;this._dirtyMap=c;for(var f in a){c=b=!1;this._freeListsAndStorage[f]={vtxFreeList:e?new d.FreeList(e):null,idxFreeList:e?new d.FreeList(e):null,vertexBuffers:{},indexBuffer:e?new Uint32Array(e):null};for(var h in a[f])this._freeListsAndStorage[f].vertexBuffers[h]={data:e?new Uint32Array(Math.floor(e*a[f][h]/4)):null,stride:a[f][h]},2===a[f][h]%4?b=!0:0!==a[f][h]%4&&(c=!0);this._vertexAlignments[f]=c?4:b?2:1}}a.fromTileData=function(b,c){var e=h(b),f=[0,0,0,0,0],k=[0,0,0,0,0],l=[];b.tileDisplayData.displayObjectRegistry.forEach(function(a){l.push(a)});
for(var y=0;y<l.length;y++)for(var u=0,A=l[y].displayRecords;u<A.length;u++){var z=A[u];f[z.geometryType]=Math.max(f[z.geometryType],z.vertexFrom+z.vertexCount);k[z.geometryType]=Math.max(k[z.geometryType],z.indexFrom+z.indexCount)}c=new a(e,b.tileDisplayData.displayList,c,null);for(e=0;e<b.tileBufferData.geometries.length;++e){var y=f[e],z=k[e],A=b.tileBufferData.geometries[e],u=c._storageFor(m[e]),g=b.tileBufferData.geometries[e].indexBuffer;u.indexBuffer=g;u.idxFreeList=new d.FreeList(g.length);
u.idxFreeList.allocate(z);var z=void 0,n;for(n in A.vertexBuffer)A=b.tileBufferData.geometries[e].vertexBuffer[n],u.vertexBuffers[n].data=A.data,u.vertexBuffers[n].stride=A.stride,z=4*A.data.length/A.stride;u.vtxFreeList=new d.FreeList(z);u.vtxFreeList.allocate(y)}return c};a.prototype.delete=function(a){var b=m[a.geometryType];this._freeVertices(b,a.vertexFrom,a.vertexCount);this._freeIndices(b,a.indexFrom,a.indexCount);this._displayList.removeFromList(a);a.vertexFrom=void 0;a.indexFrom=void 0};
a.prototype.setMeshData=function(a,b,c,d){var f=m[a.geometryType];a.meshData=null;var h=void 0,k=void 0;void 0===a.vertexFrom?(k=this._align(f,b.vertexCount),h=this._allocateVertices(f,k)):b.vertexCount>a.vertexCount?(this._freeVertices(f,a.vertexFrom,a.vertexCount),k=this._align(f,b.vertexCount),h=this._allocateVertices(f,k)):b.vertexCount===a.vertexCount?(h=a.vertexFrom,k=a.vertexCount):(this._freeVertices(f,a.vertexFrom+b.vertexCount,a.vertexCount-b.vertexCount),h=a.vertexFrom,k=b.vertexCount);
var l=!0,p=void 0,q=void 0;void 0===a.indexFrom?(q=b.indexCount,p=this._allocateIndices(f,q)):b.indexCount>a.indexCount?(this._displayList.removeFromList(a),this._freeIndices(f,a.indexFrom,a.indexCount),q=b.indexCount,p=this._allocateIndices(f,q)):b.indexCount===a.indexCount?(l=!1,p=a.indexFrom,q=a.indexCount):(this._displayList.removeFromList(a),this._freeIndices(f,a.indexFrom+b.indexCount,a.indexCount-b.indexCount),p=a.indexFrom,q=b.indexCount);if(-1!==h&&-1!==p){f=this._storageFor(f);e.copyMeshData(h,
p,f.vertexBuffers,f.indexBuffer,b,c,d);a.vertexFrom=h;a.indexFrom=p;a.vertexCount=b.vertexCount;a.indexCount=b.indexCount;if(this._dirtyMap){this._dirtyMap.markDirtyIndices(a.geometryType,a.indexFrom,a.indexCount);for(var g in c)this._dirtyMap.markDirtyVertices(a.geometryType,g,a.vertexFrom,a.vertexCount)}l&&this._displayList.addToList(a);return!0}-1!==h&&this._freeVertices(f,h,k);-1!==p&&this._freeIndices(f,p,q);a.setMeshDataFromBuffers(b,c,d);a.vertexFrom=void 0;a.vertexCount=0;a.indexFrom=void 0;
a.indexCount=0;return!1};a.prototype._allocateVertices=function(a,b){a=this._storageFor(a);b=a.vtxFreeList.allocate(b);return-1===b||.5<a.vtxFreeList.fragmentation?-1:b};a.prototype._freeVertices=function(a,c,d){var e=this._storageFor(a);e.vtxFreeList.free(c,d);if(b("esri-feature-tiles-debug"))for(var f in e.vertexBuffers)for(var h=e.vertexBuffers[f].data,k=this._stridesFor(a,f),l=c*k/4,k=d*k/4,m=l;m<l+k;++m)h[m]=0};a.prototype._freeIndices=function(a,c,d){a=this._storageFor(a);a.idxFreeList.free(c,
d);if(b("esri-feature-tiles-debug")){a=a.indexBuffer;for(var e=c;e<c+d;++e)a[e]=0}};a.prototype._align=function(a,b){var c=b%this._vertexAlignments[a];return 0===c?b:b+(this._vertexAlignments[a]-c)};a.prototype._allocateIndices=function(a,b){a=this._storageFor(a);b=a.idxFreeList.allocate(b);return-1===b||.5<a.idxFreeList.fragmentation?-1:b};a.prototype._storageFor=function(a){return this._freeListsAndStorage[a]};a.prototype._stridesFor=function(a,b){return this._strides[a][b]};return a}();a.default=
c})},"esri/layers/vectorTiles/views/2d/engine/webgl/FreeList":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var b=function(){function a(a){this._largestRange=null;this._parent=a;this._updateLargestRange()}Object.defineProperty(a.prototype,"largestRange",{get:function(){return this._largestRange},enumerable:!0,configurable:!0});a.prototype.rangeCreated=function(a){if(!this._largestRange||a.count>this._largestRange.count)this._largestRange=a};
a.prototype.rangeResized=function(a,b,c){if(a===this._largestRange)a.count<c&&this._updateLargestRange();else if(!this._largestRange||a.count>this._largestRange.count)this._largestRange=a};a.prototype.findBestRange=function(a){for(var b=this._parent._freeHead,c=null;null!==b;)b.count>=a&&(!c||b.count-a<c.count-a)&&(c=b),b=b.next;return c};a.prototype.findAdjacentRanges=function(a,b){for(var c=!0,d=!1,e=null,h=this._parent._freeHead;c&&!d;){var p=null!==h?h.from:this._parent._size;a>=(null!==e?e.from+
e.count:0)&&a+b<=p?(c=!1,d=!0):null!==h?(e=h,h=h.next):c=!1}return[e,h]};a.prototype._updateLargestRange=function(){for(var a=null,b=this._parent._freeHead;null!==b;){if(!a||b.count>a.count)a=b;b=b.next}this._largestRange=a};return a}();c=function(){function a(a,c){this._allocated=0;this._size=a;this._freeHead=0<a?{from:0,count:a,prev:null,next:null}:null;this._bookKeeper=c||new b(this);this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}a.prototype.allocate=function(b){var c=this._bookKeeper.findBestRange(b);
if(null===c)return-1;var d=c.from,e=c.count;c.from+=b;c.count-=b;this._bookKeeper.rangeResized(c,d,e);this._allocated+=b;0===c.count&&(b=null!==c.prev?this._freeHead:c.next,a._removeRange(c),this._freeHead=b);return d};a.prototype.free=function(b,c){var d=this._bookKeeper.findAdjacentRanges(b,c),e=d[0],d=d[1];b={from:b,count:c,prev:e,next:d};null!==e&&(e.next=b);null!==d&&(d.prev=b);this._bookKeeper.rangeCreated(b);this._allocated-=c;if(null!==d&&b.from+b.count===d.from){c=b.from;var h=b.count;a._fuse(b,
d);a._removeRange(d);this._bookKeeper.rangeResized(b,c,h);this._bookKeeper.rangeResized(d,void 0,0)}null!==e&&e.from+e.count===b.from&&(c=e.from,h=e.count,a._fuse(e,b),a._removeRange(b),this._bookKeeper.rangeResized(e,c,h),this._bookKeeper.rangeResized(b,void 0,0));this._freeHead=null!==b.prev?this._freeHead:b};Object.defineProperty(a.prototype,"fragmentation",{get:function(){var a=this._size-this._allocated;return 0===a?0:1-this._bookKeeper.largestRange.count/a},enumerable:!0,configurable:!0});a._removeRange=
function(a){null!==a.prev?null!==a.next?(a.prev.next=a.next,a.next.prev=a.prev):a.prev.next=null:null!==a.next&&(a.next.prev=null)};a._fuse=function(a,b){a.count+=b.count;a.next=b.next;b.from+=b.count;b.count=0;null!==b.next&&(b.next.prev=a)};return a}();a.FreeList=c})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLBuffers":function(){define(["require","exports","./Utils","../../../webgl/BufferObject"],function(c,a,b,d){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,
c){this.geometryMap=b.createGeometryData(c,function(b){return{indexBuffer:d.createIndex(a,35044),vao:null}},function(c,e){return{vertexBuffer:d.createVertex(a,b.C_VBO_INFO[e])}})}a.prototype.dispose=function(){for(var a in this.geometryMap){var b=this.geometryMap[a];b.data.vao&&b.data.vao.dispose(!1);b.data.indexBuffer&&b.data.indexBuffer.dispose();for(var c in b.buffers)b.buffers[c]&&b.buffers[c].data.vertexBuffer.dispose()}};a.prototype.get=function(a){var b=this.geometryMap[a];a={};for(var c in b.buffers)a[c]=
b.buffers[c].data.vertexBuffer;return{indexBuffer:b.data.indexBuffer,get vao(){return b.data.vao},set vao(a){b.data.vao=a},vertexBufferMap:a}};a.prototype.has=function(a){return null!=this.geometryMap[a]};a.prototype.upload=function(a,b){var c=this;b.forEach(function(b,d){b.indices&&(b.indices.allDirty?c._uploadIndices(a,d):null!=b.indices.from&&null!=b.indices.count&&c._uploadIndices(a,d,b.indices.from,b.indices.count));b.vertices&&b.vertices.forEach(function(b,e){b.allDirty?c._uploadVertices(a,
d,e):null!=b.from&&null!=b.count&&c._uploadVertices(a,d,e,b.from,b.count)})})};a.prototype._uploadVertices=function(a,b,c,d,e){var f=this.geometryMap[b];f&&(b=a.geometries[b].vertexBuffer[c])&&(a=b.stride,b=b.data.buffer,f.buffers[c]&&0<b.byteLength&&(null!=d&&null!=e?f.buffers[c].data.vertexBuffer.setSubData(b,d*a,d*a,(d+e)*a):f.buffers[c].data.vertexBuffer.setData(b)))};a.prototype._uploadIndices=function(a,b,c,d){var e=this.geometryMap[b];e&&(a=a.geometries[b].indexBuffer.buffer,e.data.indexBuffer&&
0<a.byteLength&&(null!=c&&null!=d?e.data.indexBuffer.setSubData(a,4*c,4*c,4*(c+d)):e.data.indexBuffer.setData(a)))};return a}();a.default=c})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(c,a,b){return function(){function a(a,b,c,d){this.set(a,b,c,d)}a.from=function(b,c,d,f){return a.pool.acquire(b,c,d,f)};a.getId=function(a,b,c,d){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+b+"/"+c+"/"+d};
Object.defineProperty(a.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,b,c,d){null==a?this.world=this.col=this.row=this.level=0:"object"===typeof a?
(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),b=a[1],c=a[2],d=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(b),this.col=parseFloat(c),this.world=parseFloat(d)):(this.level=+a,this.row=+b,this.col=+c,this.world=+d||0);return this};a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.prototype.getChildKeys=function(){var b=this.level+1,c=this.row<<1,d=this.col<<1,f=this.world;return[a.pool.acquire(b,
c,d,f),a.pool.acquire(b,c,d+1,f),a.pool.acquire(b,c+1,d,f),a.pool.acquire(b,c+1,d+1,f)]};a.prototype._compare=function(a){return this.row<a.row?-1:this.row>a.row?1:this.col<a.col?-1:this.col>a.col?1:0};a.sort=function(b){return b.map(function(b){return a.from(b)}).sort(function(a,b){return a._compare(b)}).map(function(a){return a.id})};a.pool=new b(a,!0,null,25,50);return a}()})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/BaseTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators ../../../tiling/enums".split(" "),
function(c,a,b,d,e,h,m,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){b=a.call(this)||this;b.tiles=new Map;b.layer=null;return b}b(c,a);c.prototype.destroy=function(){this.tiles.clear();this.layer=this.layerView=this.tileInfoView=this.highlightOptions=this.configuration=this.tiles=null};Object.defineProperty(c.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0});c.prototype.acquireTile=function(a){var b=this,c=this.createTile(a);
c.once("attach",function(){return b.notifyChange("updating")});this.tiles.set(a.id,c);return c};c.prototype.forEachTile=function(a){this.tiles.forEach(a)};c.prototype.releaseTile=function(a){this.tiles.delete(a.key.id);this.disposeTile(a)};c.prototype.isUpdating=function(){var a=!0;this.tiles.forEach(function(b){a=a&&b.status!==f.TileStatus.INITIALIZED});return!a};c.prototype.requestUpdate=function(){this.layerView.requestUpdate()};d([m.property()],c.prototype,"configuration",void 0);d([m.property()],
c.prototype,"highlightOptions",void 0);d([m.property()],c.prototype,"layer",void 0);d([m.property()],c.prototype,"layerView",void 0);d([m.property()],c.prototype,"tileInfoView",void 0);d([m.property()],c.prototype,"updating",null);return c=d([m.subclass()],c)}(m.declared(e,h));a.default=c})},"esri/layers/vectorTiles/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),
function(c,a,b,d,e,h,m){return function(a){function c(){var b=a.call(this)||this;b.handles=new h;return b}b(c,a);c.prototype.destroy=function(){this.handles.destroy()};d([m.property({readOnly:!0})],c.prototype,"handles",void 0);return c=d([m.subclass("esri.core.HandleOwner")],c)}(m.declared(e))})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
function(c,a,b,d,e,h,m){return function(a){function c(b){b=a.call(this)||this;b._groups=new Map;return b}b(c,a);c.prototype.destroy=function(){this.removeAll()};Object.defineProperty(c.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=b.length});return a},enumerable:!0,configurable:!0});c.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a)&&!h.isCollection(a))return this;var c=this._getOrCreateGroup(b);Array.isArray(a)||h.isCollection(a)?a.forEach(function(a){return c.push(a)}):
c.push(a);this.notifyChange("size");return this};c.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};c.prototype.remove=function(a){if(Array.isArray(a)||h.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=this._getGroup(a),c=0;c<b.length;c++)b[c].remove();this._deleteGroup(a);this.notifyChange("size");return this};c.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();
this.notifyChange("size");return this};c.prototype._isHandle=function(a){return a&&!!a.remove};c.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};c.prototype._getGroup=function(a){return this._groups.get(this._ensureGroupKey(a))};c.prototype._deleteGroup=function(a){return this._groups.delete(this._ensureGroupKey(a))};c.prototype._ensureGroupKey=function(a){return a||"_default_"};d([m.property({readOnly:!0})],
c.prototype,"size",null);return c=d([m.subclass("esri.core.Handles")],c)}(m.declared(e))})},"esri/layers/vectorTiles/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(c,a,b,d,e,h,m){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new e([0,255,255]);b.haloOpacity=
1;b.fillOpacity=.5;return b}b(c,a);d([m.property({type:e})],c.prototype,"color",void 0);d([m.property()],c.prototype,"haloOpacity",void 0);d([m.property()],c.prototype,"fillOpacity",void 0);return c=d([m.subclass("esri.views.2d.support.HighlightOptions")],c)}(m.declared(h))})},"esri/layers/vectorTiles/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y){var u=f({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(a){function c(b){b=a.call(this)||this;b.dpi=96;b.format=null;b.origin=null;b.minScale=0;b.maxScale=0;b.size=null;b.spatialReference=null;return b}d(c,a);f=c;c.create=function(a){void 0===a&&(a={size:256,spatialReference:h.SpatialReference.WebMercator});
var b=a.resolutionFactor||1,c=a.scales,d=a.size||256;a=a.spatialReference||h.SpatialReference.WebMercator;var e=t.getInfo(a),e=e?new h.Point(e.origin[0],e.origin[1],a):new h.Point(0,0,a),g=1/(39.37*q.getMetersPerUnitForSR(a)*96),k=[];if(c)for(var n=0;n<c.length;n++){var m=c[n],l=m*g;k.push({level:n,scale:m,resolution:l})}else for(m=t.isGeographic(a)?512/d*1.47748799285417E8:256/d*5.91657527591555E8,c=Math.ceil(24/b),k.push({level:0,scale:m,resolution:m*g}),n=1;n<c;n++)m/=Math.pow(2,b),l=m*g,k.push({level:n,
scale:m,resolution:l});return new f({dpi:96,lods:k,origin:e,size:d,spatialReference:a})};Object.defineProperty(c.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var c=t.getInfo(a);return a.isWrappable&&Math.abs(c.origin[0]-b.x)<=c.dx}return!1},enumerable:!0,configurable:!0});c.prototype.readOrigin=function(a,c){return h.Point.fromJSON(b({spatialReference:c.spatialReference},a))};Object.defineProperty(c.prototype,"lods",{set:function(a){var b=this,c=0,d=0,
e=[];this._levelToLOD={};a&&(c=-Infinity,d=Infinity,a.forEach(function(a){e.push(a.scale);c=a.scale>c?a.scale:c;d=a.scale<d?a.scale:d;b._levelToLOD[a.level]=a}));this._set("scales",e);this._set("minScale",c);this._set("maxScale",d);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});c.prototype.readSize=function(a,b){return[b.cols,b.rows]};c.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};c.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];
if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};c.prototype.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var e=b[d],f=b[d+1];if(e<=a)break;if(f===a)return d+1;if(e>a&&f<a)return d+1-(a-f)/(e-f)}return d};c.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};c.prototype.tileAt=function(a,b,c,d){var e=this.lodAt(a);
if(!e)return null;var f;if("number"===typeof b)f=b,b=c;else{if(t.equals(b.spatialReference,this.spatialReference))f=b.x,b=b.y;else{d=v.project(b,this.spatialReference);if(!d)return null;f=d.x;b=d.y}d=c}c=e.resolution*this.size[0];e=e.resolution*this.size[1];d||(d={id:null,level:0,row:0,col:0,extent:p.create()});d.level=a;d.row=Math.floor((this.origin.y-b)/e+.001);d.col=Math.floor((f-this.origin.x)/c+.001);this.updateTileInfo(d);return d};c.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level),
c=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=p.create());a.extent[0]=this.origin.x+a.col*c;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+b};c.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};c.prototype.getTileBounds=
function(a,b){var c=this.lodAt(b.level).resolution,d=c*this.size[0],c=c*this.size[1];a[0]=this.origin.x+b.col*d;a[1]=this.origin.y-(b.row+1)*c;a[2]=a[0]+d;a[3]=a[1]+c;return a};c.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};c.prototype.clone=function(){return f.fromJSON(this.write({}))};c.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<a.length;c++){var d=a[c];this._upsampleLevels[d.level]={parentLevel:b?
b.level:-1,factor:b?b.resolution/d.resolution:0};b=d}};e([k.property({type:Number,json:{write:!0}})],c.prototype,"compressionQuality",void 0);e([k.property({type:Number,json:{write:!0}})],c.prototype,"dpi",void 0);e([k.property({type:String,json:{read:u.read,write:u.write}})],c.prototype,"format",void 0);e([k.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],c.prototype,"isWrappable",null);e([k.property({type:h.Point,json:{write:!0}})],c.prototype,"origin",void 0);e([k.reader("origin")],
c.prototype,"readOrigin",null);e([k.property({type:[y],value:null,json:{write:!0}})],c.prototype,"lods",null);e([k.property({readOnly:!0})],c.prototype,"minScale",void 0);e([k.property({readOnly:!0})],c.prototype,"maxScale",void 0);e([k.property({readOnly:!0})],c.prototype,"scales",void 0);e([k.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],c.prototype,"size",void 0);e([k.reader("size",["rows","cols"])],c.prototype,"readSize",null);e([k.writer("size",
{cols:{type:l.Integer},rows:{type:l.Integer}})],c.prototype,"writeSize",null);e([k.property({type:h.SpatialReference,json:{write:!0}})],c.prototype,"spatialReference",void 0);return c=f=e([k.subclass("esri.layers.support.TileInfo")],c);var f}(k.declared(m))})},"esri/layers/vectorTiles/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(c,a,b,d,e,h,m){return function(a){function c(b){b=a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}b(c,a);e=c;c.prototype.clone=function(){return new e({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};d([h.property({type:m.Integer,json:{write:!0}})],c.prototype,"level",void 0);d([h.property({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0);d([h.property({type:Number,json:{write:!0}})],c.prototype,
"resolution",void 0);d([h.property({type:Number,json:{write:!0}})],c.prototype,"scale",void 0);return c=e=d([h.subclass("esri.layers.support.LOD")],c);var e}(h.declared(e))})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(c,a,b,d,e,h,m){var f=new h("0/0/0/0"),k=function(){function a(a,b,c,d,e,f,h,g){this.x=a;this.ymin=b;this.ymax=c;this.invM=
d;this.leftAdjust=e;this.rightAdjust=f;this.leftBound=h;this.rightBound=g}a.create=function(b,c){b[1]>c[1]&&(g=[c,b],b=g[0],c=g[1]);g=b[0];b=b[1];var d=c[0];c=c[1];var e=d-g,f=c-b,f=0!==f?e/f:0,h=(Math.ceil(b)-b)*f,k=(Math.floor(b)-b)*f;return new a(g,Math.floor(b),Math.ceil(c),f,0>e?h:k,0>e?k:h,0>e?d:g,0>e?g:d);var g};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+
this.rightAdjust,this.rightBound)};return a}(),l=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var e=a.lods.slice();e.sort(function(a,b){return b.scale-a.scale});var f=this._lodInfos=e.map(function(c){return d.create(a,c,b)});e.forEach(function(a,b){c._infoByLevel[a.level]=f[b];c._infoByScale[a.scale]=f[b];c.scales[b]=a.scale},this);this._wrap=a.isWrappable}a.prototype.getLODInfoAt=
function(a){return this._infoByLevel[a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);f.set(b);return(b=this._infoByLevel[f.level])?b.getTileBounds(a,f,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);f.set(b);return(b=this._infoByLevel[f.level])?b.getTileCoords(a,f,c):a};a.prototype.getTileCoverage=function(a,b,c){void 0===b&&(b=192);void 0===c&&(c="closest");c="closest"===c?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);var d=e.pool.acquire(c),
f=this._wrap,h;h=Infinity;var p=-Infinity,g,n,q=d.spans;l[0][0]=l[0][1]=l[1][1]=l[3][0]=-b;l[1][0]=l[2][0]=a.size[0]+b;l[2][1]=l[3][1]=a.size[1]+b;for(b=0;b<l.length;b++){var t=l[b];a.toMap(t,t);t[0]=c.getColumnForX(t[0]);t[1]=c.getRowForY(t[1])}a=[];t=3;for(b=0;4>b;b++){if(l[b][1]!==l[t][1]){var v=k.create(l[b],l[t]);h=Math.min(v.ymin,h);p=Math.max(v.ymax,p);void 0===a[v.ymin]&&(a[v.ymin]=[]);a[v.ymin].push(v)}t=b}if(null==h||null==p||100<p-h)return null;for(t=[];h<p;){null!=a[h]&&(t=t.concat(a[h]));
g=Infinity;n=-Infinity;for(b=t.length-1;0<=b;b--)v=t[b],g=Math.min(g,v.getLeftCol()),n=Math.max(n,v.getRightCol());g=Math.floor(g);n=Math.floor(n);if(h>=c.first[1]&&h<=c.last[1])if(f)if(c.size[0]<c.worldSize[0])for(v=Math.floor(n/c.worldSize[0]),b=Math.floor(g/c.worldSize[0]);b<=v;b++)q.push(new m(h,Math.max(c.getFirstColumnForWorld(b),g),Math.min(c.getLastColumnForWorld(b),n)));else q.push(new m(h,g,n));else g>c.last[0]||n<c.first[0]||(g=Math.max(g,c.first[0]),n=Math.min(n,c.last[0]),q.push(new m(h,
g,n)));h+=1;for(b=t.length-1;0<=b;b--)v=t[b],v.ymax>=h?v.incrRow():t.splice(b,1)}return d};a.prototype.getTileIdAtParent=function(a,b){b=h.pool.acquire(b);var c=this._infoByLevel[b.level];if(a.resolution<c.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+" is not a parent resolution of "+c.resolution);return a.resolution===c.resolution?b.id:h.getId(a.level,Math.floor(b.row*c.resolution/a.resolution+.01),Math.floor(b.col*c.resolution/a.resolution+.01),
b.world)};a.prototype.getTileParentId=function(a){a=h.pool.acquire(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;if(0>b)return h.pool.release(a),null;b=this.getTileIdAtParent(this._lodInfos[b],a);h.pool.release(a);return b};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel[a.level])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};a.prototype.intersects=function(a,b){var c=h.pool.acquire(b);b=this._infoByLevel[c.level];
var d=a.lodInfo;if(d.resolution>b.resolution){var e=h.pool.acquire(this.getTileIdAtParent(d,c)),f=d.denormalizeCol(e.col,e.world);b=a.spans.some(function(a){return a.row===e.row&&a.colFrom<=f&&a.colTo>=f});h.pool.release(c);h.pool.release(e);return b}if(d.resolution<b.resolution){var k=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=k[0];var g=k[1],m=k[2],
k=k[3],l=b.denormalizeCol(c.col,c.world),p=d.getColumnForX(b.getXForColumn(l)),q=d.getRowForY(b.getYForRow(c.row)),l=d.getColumnForX(b.getXForColumn(l+1))-1;b=d.getRowForY(b.getYForRow(c.row+1))-1;h.pool.release(c);return!(p>k||l<m||q>g||b<a)}var t=d.denormalizeCol(c.col,c.world);b=a.spans.some(function(a){return a.row===c.row&&a.colFrom<=t&&a.colTo>=t});h.pool.release(c);return b};a.prototype.normalizeBounds=function(a,c,d){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];this._wrap&&(c=b.getInfo(this.tileInfo.spatialReference),
d=-d*(c.valid[1]-c.valid[0]),a[0]+=d,a[2]+=d);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var c=1;c<b.length-1;c++)if(a>b[c])return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]));return this._infoByScale[a]};
return a}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(c,a,b,d){function e(a,b,c){a[0]=b;a[1]=c;return a}var h=new d("0/0/0/0");return function(){function a(a,b,c,d,e,h,m,y,u,A,z,g){this.level=a;this.resolution=b;this.scale=c;this.origin=d;this.first=e;this.last=h;this.size=m;this.norm=y;this.worldStart=u;this.worldEnd=A;this.worldSize=z;this.wrap=g}a.create=function(c,d,h){var f=
b.getInfo(c.spatialReference),k=[c.origin.x,c.origin.y],m=[c.size[0]*d.resolution,c.size[1]*d.resolution],l=[-Infinity,-Infinity],y=[Infinity,Infinity],u=[Infinity,Infinity];h&&(e(l,Math.max(0,Math.floor((h.xmin-k[0])/m[0])),Math.max(0,Math.floor((k[1]-h.ymax)/m[1]))),e(y,Math.max(0,Math.floor((h.xmax-k[0])/m[0])),Math.max(0,Math.floor((k[1]-h.ymin)/m[1]))),e(u,y[0]-l[0]+1,y[1]-l[1]+1));var A;c.isWrappable?(c=[Math.ceil(Math.round(2*f.origin[1]/d.resolution)/c.size[0]),u[1]],f=[Math.floor((f.origin[0]-
k[0])/m[0]),l[1]],h=[c[0]+f[0]-1,y[1]],A=!0):(f=l,h=y,c=u,A=!1);return new a(d.level,d.resolution,d.scale,k,l,y,u,m,f,h,c,A)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};a.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};
a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);var d=c?h.col:this.denormalizeCol(h.col,
h.world),e=h.row;b=this.getXForColumn(d);c=this.getYForRow(e+1);d=this.getXForColumn(d+1);e=this.getYForRow(e);a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);h.set(b);b=c?h.col:this.denormalizeCol(h.col,h.world);Array.isArray(a)?e(a,this.getXForColumn(b),this.getYForRow(h.row)):(a.x=this.getXForColumn(b),a.y=this.getYForRow(h.row));return a};return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require","exports",
"../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(c,a,b,d,e){return function(){function a(a){this.lodInfo=a;this.spans=b.acquire()}a.prototype.release=function(){for(var a=0,c=this.spans;a<c.length;a++)e.pool.release(c[a]);b.release(this.spans)};a.prototype.forEach=function(a,b){var c=this.spans,d=this.lodInfo,e=d.level;if(0!==c.length)for(var f=0;f<c.length;f++)for(var h=c[f],m=h.row,y=h.colTo,h=h.colFrom;h<=y;h++)a.call(b,e,m,d.normalizeCol(h),d.getWorldForColumn(h))};
a.pool=new d(a,!0);return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(c,a,b){return function(){function a(a,b,c){this.row=a;this.colFrom=b;this.colTo=c}a.pool=new b(a,!0);return a}()})},"esri/layers/OnDemandDrillMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ../sniff ../kernel ../promiseList ./RenderMode ../geometry/Extent ../geometry/jsonUtils ../tasks/query ../tasks/FeatureSet ../tasks/support/pbfDeps ./vectorTiles/core/promiseUtils ./vectorTiles/core/SetPool ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey".split(" "),
function(c,a,b,d,e,h,m,f,k,l,p,q,t,v,y,u,A){var z=q.pbfQueryUtils,g=q.optimizedFeatures;q=d("esri-featurelayer-webgl");c=c([m],{declaredClass:"esri.layers._OnDemandDrillMode",featureLayer:null,graphics:null,maxDrillLevel:q&&q.maxDrillLevel,maxRecordCountFactor:q&&q.maxRecordCountFactor,enablePBFQuery:q&&q.enablePBFQuery,_graphicsVal:null,_reEvalGraphics:!1,_featureMap:null,_quantizationFactor:1,_wglRenderer:null,_tileInfo:null,_tileInfoView:null,_tileFetchQueue:null,_tileStrategy:null,_tileRequests:null,
constructor:function(a){this._isTileFulfilled=this._isTileFulfilled.bind(this);this._graphicsVal=[];this._featureMap={};this.featureLayer=a},initialize:function(a){this.inherited(arguments);this._tileRequests=new Map},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var a=this.featureLayer;this._wglRenderer=a._div;this._tileInfo=this._wglRenderer._tileInfo;this._tileInfoView=this._wglRenderer._tileInfoView;this._tileRenderer=this._wglRenderer._tileRenderer;
this._tileFetchQueue=new y({tileInfoView:this._tileInfoView,process:this._getFeatureSet.bind(this)});this._tileStrategy=new u({cachePolicy:"purge",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._isSuspendedAtStartup=a.suspended;this.start()}},propertyChangeHandler:function(a){this._init&&(2>a?this.start():console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d "+this.featureLayer.id+
", Layer URL \x3d "+this.featureLayer.url))},destroy:function(){this._tileFetchQueue&&this._tileFetchQueue.clear();this._tileStrategy&&this._tileStrategy.destroy();this._tileRequests&&this._tileRequests.clear();this.inherited(arguments)},update:function(a){this._tileFetchQueue.pause();this._tileFetchQueue.state=a.state;this._tileStrategy.update(a);this._tileFetchQueue.resume();this._evalUpdateStatus()},suspend:function(){this._init&&this.stop()},resume:function(){this._init&&this.start()},refresh:function(){this.start()},
hasAllFeatures:function(){var a=!1;this._getVisibleTileRequests().forEach(function(b){b.hasPartialFeatures&&(a=!0)});return!a},hasUpdateError:function(){var a=!1;this._getVisibleTileRequests().forEach(function(b){b.hasUpdateError&&(a=!0)});return a},start:function(){var a=this.featureLayer;!a.suspended&&a.isQueryable()&&(this._clearIIf(),this._tileFetchQueue.pause(),this._tileFetchQueue.clear(),this._tileStrategy.clear(),this._wglRenderer.start())},stop:function(){this._wglRenderer.stop()},_evalUpdateStatus:function(){this._getCurrentTiles().every(this._isTileFulfilled)?
this.featureLayer._fireUpdateEnd():this.featureLayer._fireUpdateStart()},_getCurrentTiles:function(){var a=[];this._tileStrategy.tileIndex.forEach(function(b,c,d){b.visible&&a.push(c)});return a},_isTileFulfilled:function(a){a=this._tileRequests.get(a);return!(!a||!a.isFulfilled)},_getVisibleTileRequests:function(){var a=this._tileStrategy.tileIndex;if(!a)return[];var b=[];this._tileRequests.forEach(function(c,d){(d=a.get(d))&&d.visible&&b.push(c)});return b},_acquireTile:function(a){this.featureLayer._fireUpdateStart();
var b=this._acquireRendererTile(a),c=b.key,d=c.id;a=this._tileInfo.lodAt(a.level);var e={id:d,key:c,bounds:this._tileInfo.getTileBounds([0,0,0,0],c),resolution:a.resolution,scale:a.scale},c=this._tileFetchQueue.push(c).then(function(a){return this._wglRenderer._symbolProcessor.getMeshData(e,a.featureSet).then(function(b){return{meshData:b.data,featureSet:a.featureSet,errors:a.errors,hasPartialFeatures:a.hasPartialFeatures}})}.bind(this)).then(function(a){this._tileRenderer.onTileData({tileKey:d,data:a.meshData});
this._addTile(d,a)}.bind(this)).otherwise(function(a){this._tileError(d);return t.reject(a)}.bind(this));this._tileRequests.set(d,{tsTile:e,request:c,isFulfilled:!1,hasUpdateError:null,hasPartialFeatures:null,featureSet:null,graphics:[]});return b},_acquireRendererTile:function(a){a=this._tileRenderer.acquireTile(a);a.once("attach",function(){this._wglRenderer._scheduleUpdate()}.bind(this));return a},_releaseTile:function(a){this.featureLayer._fireUpdateStart();this._tileRequests.get(a.key.id)&&(this._removeTile(a),
this._wglRenderer._scheduleUpdate())},_addTile:function(a,b){this._reEvalGraphics=!0;var c=this._createGraphics(b.featureSet);this._registerGraphics(c);if(a=this._tileRequests.get(a))a.isFulfilled=!0,a.hasUpdateError=!!b.errors.length,a.hasPartialFeatures=b.hasPartialFeatures||a.hasUpdateError,a.featureSet=b.featureSet,a.graphics=c},_tileError:function(a){if(a=this._tileRequests.get(a))a.isFulfilled=!0,a.hasUpdateError=!0,a.hasPartialFeatures=!0,a.graphics=[];this._wglRenderer._scheduleUpdate()},
_removeTile:function(a){var b=a.key.id,c=this._tileRequests.get(b);c.request.isFulfilled()||c.request.cancel();this._tileRequests["delete"](b);this._wglRenderer._cancelRedraw(b);this._reEvalGraphics=!0;this._tileRenderer.releaseTile(a);this._unregisterGraphics(c.graphics)},_getFeatureSet:function(a){var b={hashes:new Set,drill:[],featureSet:{features:[],geometryType:this.featureLayer.geometryType,spatialReference:this.map.spatialReference.toJson(),transform:null},hasPartialFeatures:!1,errors:[]},
c=this.featureLayer._task,d=this._getResolutionParams(a),e=this._tileInfoView.getTileBounds([0,0,0,0],a),e=this._expandTileBounds(e,d),f=v.acquire();return this._drillQuery(b,f,c,e,d,null,a).then(function(a){v.release(f);this._calculateCentroid(a);return a}.bind(this)).otherwise(function(a){v.release(f);throw a;})},_getResolutionParams:function(a){this._tileInfo.updateTileInfo(a);var b=this._tileInfo.lodAt(a.level);return{mode:"view",originPosition:"upperLeft",tolerance:this._quantizationFactor*b.resolution,
extent:new f(a.extent[0],a.extent[1],a.extent[2],a.extent[3],this.map.spatialReference)}},_expandTileBounds:function(a,b){var c=this.featureLayer.geometryType;b=("esriGeometryPoint"===c||"esriGeometryMultipoint"===c||this._wglRenderer._returnCentroid?20:0)*b.tolerance;a[0]-=b;a[1]-=b;a[2]+=b;a[3]+=b;return a},_calculateCentroid:function(a){var b;if("esriGeometryPolygon"===a.featureSet.geometryType&&this._wglRenderer._returnCentroid){b=0;var c=a.featureSet.spatialReference,d=a.featureSet.transform,
e={geometry:{x:null,y:null}},f=[e];a.featureSet.features.forEach(function(a){if(!a.centroid){var g=a.geometry;g&&(g=p.createPolygon(g,c,d),g=g.getCentroid())&&(e.geometry.x=g.x,e.geometry.y=g.y,k.quantize(f,"esriGeometryPoint",d),a.centroid={x:e.geometry.x,y:e.geometry.y},b++)}})}return b},_drillQuery:function(a,b,c,d,e,f,k,m){m=null!=m?m:0;a.drill.push(d);return this._query(c,d,e,f,k,m).then(function(l){this.featureLayer.supportsFormatPBF&&this.enablePBFQuery&&(l=g.convertToFeatureSet(z.parsePBFFeatureQuery(l)));
this._appendFeatures(a.featureSet.features,b,l.features);l.transform&&(a.featureSet.transform=l.transform);if(l.exceededTransferLimit){if(m<this.maxDrillLevel){m++;l=(d[2]-d[0])/2;var n=(d[3]-d[1])/2,p=[d[0]+l,d[1]+n,d[2],d[3]],q=[d[0],d[1],d[2]-l,d[3]-n],r=[d[0]+l,d[1],d[2],d[3]-n];return h([this._drillQuery(a,b,c,[d[0],d[1]+n,d[2]-l,d[3]],e,f,k,m),this._drillQuery(a,b,c,p,e,f,k,m),this._drillQuery(a,b,c,q,e,f,k,m),this._drillQuery(a,b,c,r,e,f,k,m)]).then(function(){return a})}a.hasPartialFeatures=
!0}return a}.bind(this)).otherwise(function(b){if(0<m)a.errors.push(b);else throw b;}.bind(this))},_appendFeatures:function(a,b,c){var d=a.length,e=c?c.length:0;a.length=d+e;var f=0,g,h,k,m=this.featureLayer.objectIdField;for(g=0;g<e;g++)h=c[g],k=h.attributes[m],b.has(k)||(a[d+f]=h,b.add(k),f++);a.length-=e-f},_query:function(a,b,c,d,e,g){d=this.featureLayer;e=new l;var h=d.getOutFields();.75<=h.length/d.fields.length&&(h=["*"]);e.geometry=new f(b[0],b[1],b[2],b[3],this.map.spatialReference);e.outFields=
h;e.where=d.getDefinitionExpression();e.returnGeometry=!0;e.returnCentroid=this._wglRenderer._returnCentroid;e.timeExtent=d._getOffsettedTE(d._mapTimeExtent);d._ts&&(e._ts=Date.now());e.orderByFields=d.supportsAdvancedQueries?d.getOrderByFields():null;e.multipatchOption=d.multipatchOption;e.maxAllowableOffset="esriGeometryPolyline"===d.geometryType?c.tolerance:null;e.quantizationParameters=c;(b=d.advancedQueryCapabilities)&&b.supportsQueryWithResultType&&(e.resultType="tile");e.returnExceededLimitFeatures=
g===this.maxDrillLevel;b&&b.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=this.maxRecordCountFactor);return this._wrapInNewDeferred(a.rawExecute(e,d.supportsFormatPBF&&this.enablePBFQuery?{format:"pbf"}:null))},_wrapInNewDeferred:function(a){var c=new b(function(){a.isFulfilled()||a.cancel()});a.then(function(a){c.resolve(a)}).otherwise(function(a){c.reject(a)});return c.promise},_collectGraphics:function(){var a=this._featureMap,b=[],c;for(c in a)b.push(a[c]);return b},_createGraphics:function(a){return p.createGraphics(a)},
_registerGraphics:function(a){var b=this.featureLayer.objectIdField;a.forEach(function(a){var c=a.attributes&&a.attributes[b];this._registerFeature(c,a);this._incRefCount(c)}.bind(this))},_unregisterGraphics:function(a){var b=this.featureLayer.objectIdField;a.forEach(function(a){a=a.attributes&&a.attributes[b];this._decRefCount(a);this._unregisterFeature(a)}.bind(this))}});Object.defineProperty(c.prototype,"graphics",{get:function(){this._reEvalGraphics&&(this._reEvalGraphics=!1,this._graphicsVal=
this._collectGraphics());return this._graphicsVal}});d("extend-esri")&&a.setObject("layers._OnDemandDrillMode",c,e);return c})},"esri/tasks/support/pbfDeps":function(){define(["../../layers/vectorTiles/tasks/operations/pbfQueryUtils","../../layers/vectorTiles/layers/graphics/optimizedFeatures"],function(c,a){return{pbfQueryUtils:c,optimizedFeatures:a}})},"esri/layers/vectorTiles/tasks/operations/pbfQueryUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ../../layers/graphics/optimizedFeatures".split(" "),
function(c,a,b,d,e,h){function m(a){if(a>=v.length){var c=new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload. Unknown GeometryType");p.error(c)}return v[a]}function f(a){var b,c=b||(b={});c[c.STRING=1]="STRING";c[c.FLOAT=2]="FLOAT";c[c.DOUBLE=3]="DOUBLE";c[c.SINT32=4]="SINT32";c[c.UINT32=5]="UINT32";c[c.INT64=6]="INT64";c[c.UINT64=7]="UINT64";c[c.SINT64=8]="SINT64";for(c[c.BOOL=9]="BOOL";a.next();)switch(a.tag()){case b.STRING:return a.getString();case b.FLOAT:return a.getFloat();
case b.DOUBLE:return a.getDouble();case b.SINT32:return a.getSInt32();case b.UINT32:return a.getUInt32();case b.INT64:return a.getInt64();case b.UINT64:return a.getUInt64();case b.SINT64:return a.getSInt64();case b.BOOL:return a.getBool();default:return a.skip(),null}return null}function k(a){var b,c=b||(b={});c[c.NAME=1]="NAME";c[c.TYPE=2]="TYPE";c[c.ALIAS=3]="ALIAS";c[c.SQL_TYPE=4]="SQL_TYPE";c[c.DOMAIN=5]="DOMAIN";c[c.DEFAULT_VALUE=6]="DEFAULT_VALUE";for(c={type:q[0]};a.next();)switch(a.tag()){case b.NAME:c.name=
a.getString();break;case b.TYPE:c.type=q[a.getEnum()];break;case b.ALIAS:c.alias=a.getString();break;case b.SQL_TYPE:c.sqlType=t[a.getEnum()];break;case b.DOMAIN:a.skip();break;case b.DEFAULT_VALUE:a.skip();break;default:a.skip()}return c}function l(a,b){var c,d=c||(c={});d[d.ATTRIBUTES=1]="ATTRIBUTES";d[d.GEOMETRY=2]="GEOMETRY";d[d.CENTROID=4]="CENTROID";for(var d=new h.OptimizedFeature,e=0;a.next();)switch(a.tag()){case c.ATTRIBUTES:var k=a.getMessage(),m=b[e++].name;d.attributes[m]=f(k);break;
case c.GEOMETRY:var k=a.getMessage(),l=(m=void 0,m={});l[l.TYPE=1]="TYPE";l[l.LENGTHS=2]="LENGTHS";l[l.COORDS=3]="COORDS";for(var l=new h.OptimizedGeometry,p=l.coords,q=l.lengths;k.next();)switch(k.tag()){case m.LENGTHS:for(var t=k.getUInt32(),t=k.pos()+t;k.pos()<t;)q.push(k.getUInt32());break;case m.COORDS:for(var t=k.getUInt32(),t=k.pos()+t,u=0;k.pos()<t;)p[u++]=k.getSInt64();break;default:k.skip()}d.geometry=l;break;case c.CENTROID:k=a.getMessage();l=(m=void 0,m={});l[l.TYPE=1]="TYPE";l[l.LENGTHS=
2]="LENGTHS";l[l.COORDS=3]="COORDS";l=new h.OptimizedGeometry;for(p=l.coords;k.next();)switch(k.tag()){case m.COORDS:q=k.getUInt32();q=k.pos()+q;for(t=0;k.pos()<q;)p[t++]=k.getSInt64();break;default:k.skip()}d.centroid=l;break;default:a.skip()}return d}Object.defineProperty(a,"__esModule",{value:!0});var p=d.getLogger("esri.tasks.operations.pbfQueryUtils"),q="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
t="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),v=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],y=["upperLeft",
"lowerLeft"];a.parsePBFFeatureQuery=function(a){try{var c,d=c||(c={});d[d.QUERY_RESULT=2]="QUERY_RESULT";for(var f=new e(new Uint8Array(a),new DataView(a)),n;f.next();)switch(f.tag()){case c.QUERY_RESULT:var q=f.getMessage(),t=(a=void 0,a={});t[t.FEATURE_RESULT=1]="FEATURE_RESULT";for(d={};q.next();)switch(q.tag()){case a.FEATURE_RESULT:var v=q.getMessage(),u=void 0,F=u||(u={});F[F.OBJECT_ID_NAME=1]="OBJECT_ID_NAME";F[F.UNIQUE_ID_NAME=2]="UNIQUE_ID_NAME";F[F.GLOBAL_ID_NAME=3]="GLOBAL_ID_NAME";F[F.GEOHASH_NAME=
4]="GEOHASH_NAME";F[F.GEOMETRY_PROPERTIES=5]="GEOMETRY_PROPERTIES";F[F.SERVER_GENS=6]="SERVER_GENS";F[F.GEOMETRY_TYPE=7]="GEOMETRY_TYPE";F[F.SPATIAL_REFERENCE=8]="SPATIAL_REFERENCE";F[F.EXCEEDED_TRANSFER_LIMIT=9]="EXCEEDED_TRANSFER_LIMIT";F[F.HAS_Z=10]="HAS_Z";F[F.HAS_M=11]="HAS_M";F[F.TRANSFORM=12]="TRANSFORM";F[F.FIELDS=13]="FIELDS";F[F.FEATURES=15]="FEATURES";var H=new h.OptimizedFeatureSet;for(H.geometryType=m(0);v.next();)switch(v.tag()){case u.OBJECT_ID_NAME:H.objectIdFieldName=v.getString();
break;case u.GLOBAL_ID_NAME:H.globalIdFieldName=v.getString();break;case u.GEOHASH_NAME:H.geohashFieldName=v.getString();break;case u.GEOMETRY_PROPERTIES:var J=v.getMessage(),I=void 0,G=I||(I={});G[G.AREA_FIELD_NAME=1]="AREA_FIELD_NAME";G[G.LENGTH_FIELD_NAME=2]="LENGTH_FIELD_NAME";G[G.UNITS=3]="UNITS";for(var O={};J.next();)switch(J.tag()){case I.AREA_FIELD_NAME:O.shapeAreaFieldName=J.getString();break;case I.LENGTH_FIELD_NAME:O.shapeLengthFieldName=J.getString();break;case I.UNITS:O.units=J.getString();
break;default:J.skip()}H.geometryProperties=O;break;case u.GEOMETRY_TYPE:H.geometryType=m(v.getEnum());break;case u.SPATIAL_REFERENCE:var X=v.getMessage(),K=(I=void 0,I={});K[K.WKID=1]="WKID";K[K.LASTEST_WKID=2]="LASTEST_WKID";K[K.VCS_WKID=3]="VCS_WKID";K[K.LATEST_VCS_WKID=4]="LATEST_VCS_WKID";K[K.WKT=5]="WKT";for(O={};X.next();)switch(X.tag()){case I.WKID:O.wkid=X.getUInt32();break;case I.WKT:O.wkt=X.getString();break;default:X.skip()}H.spatialReference=O;break;case u.HAS_Z:H.hasZ=v.getBool();break;
case u.HAS_M:H.hasM=v.getBool();break;case u.TRANSFORM:var aa=v.getMessage(),ba=(I=void 0,I={});ba[ba.ORIGIN_POSTION=1]="ORIGIN_POSTION";ba[ba.SCALE=2]="SCALE";ba[ba.TRANSLATE=3]="TRANSLATE";for(var ca=y[0],ea=O=void 0;aa.next();)switch(aa.tag()){case I.ORIGIN_POSTION:ca=y[aa.getEnum()];break;case I.SCALE:var ha=aa.getMessage(),U=void 0,Z=U||(U={});Z[Z.X=1]="X";Z[Z.Y=2]="Y";Z[Z.M=3]="M";Z[Z.Z=4]="Z";for(var V=[0,0];ha.next();)switch(ha.tag()){case U.X:V[0]=ha.getDouble();break;case U.Y:V[1]=ha.getDouble();
break;case U.M:V.push(ha.getDouble());break;case U.Z:V.push(ha.getDouble());break;default:ha.skip()}O=V;break;case I.TRANSLATE:var P=aa.getMessage(),M=(U=void 0,U={});M[M.X=1]="X";M[M.Y=2]="Y";M[M.M=3]="M";M[M.Z=4]="Z";for(V=[0,0];P.next();)switch(P.tag()){case U.X:V[0]=P.getDouble();break;case U.Y:V[1]=P.getDouble();break;case U.M:V.push(P.getDouble());break;case U.Z:V.push(P.getDouble());break;default:P.skip()}ea=V;break;default:aa.skip()}H.transform={originPosition:ca,scale:O,translate:ea};break;
case u.EXCEEDED_TRANSFER_LIMIT:var N=v.getBool();H.exceededTransferLimit=N;break;case u.FIELDS:var Q=v.getMessage();H.fields.push(k(Q));break;case u.FEATURES:var R=v.getMessage();H.features.push(l(R,H.fields));break;default:v.skip()}d.featureResult=H;break;default:q.skip()}n=d;break;default:f.skip()}return n.featureResult}catch(Y){return c=new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:Y}),p.error(c),new h.OptimizedFeatureSet}}})},"esri/layers/vectorTiles/layers/graphics/optimizedFeatures":function(){define(["require",
"exports","../../core/Error","../../core/Logger"],function(c,a,b,d){function e(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function h(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function m(a,b){return b*a.scale[0]+a.translate[0]}function f(a,b){return a.translate[1]-b*a.scale[1]}function k(a){a=a.coords;return{x:a[0],y:a[1]}}function l(a){var b=new ca;b.coords[0]=a.x;b.coords[1]=a.y;return b}function p(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function q(a){var b=new ca;b.coords[0]=
a.x;b.coords[1]=a.y;b.coords[2]=a.z;return b}function t(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function v(a){var b=new ca;b.coords[0]=a.x;b.coords[1]=a.y;b.coords[2]=a.m;return b}function y(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],m:a[3]}}function u(a){var b=new ca;b.coords[0]=a.x;b.coords[1]=a.y;b.coords[2]=a.z;b.coords[3]=a.m;return b}function A(a,b,c){for(var d=b?c?4:3:c?3:2,e=[],f=0;f<a.coords.length;f+=d){for(var g=[],h=0;h<d;h++)g.push(a.coords[f+h]);e.push(g)}return b?c?{points:e,hasZ:b,
hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function z(a,b,c){var d=b?c?4:3:c?3:2,e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],m=0;m<k;m++){for(var n=[],p=0;p<d;p++)n.push(e[g++]);l.push(n)}f.push(l)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function g(a,b,c){var d=b?c?4:3:c?3:2,e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],m=0;m<k;m++){for(var n=[],p=0;p<d;p++)n.push(e[g++]);l.push(n)}f.push(l)}return b?
c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function n(a,c,d,e){if(!c)return[];switch(c){case "esriGeometryPoint":c=l;e&&d?c=u:e?c=q:d&&(c=v);d=[];for(e=0;e<a.length;e++){var f=a[e],g=f.geometry,f=f.attributes,g=g?c(g):void 0;d.push(new ea(g,f))}return d;case "esriGeometryMultipoint":c=d?e?4:3:e?3:2;d=[];for(e=0;e<a.length;e++){var g=a[e],h=g.geometry,g=g.attributes,f=void 0;if(h){f=new ca;f.lengths[0]=h.points.length;for(var k=f.coords,m=0,n=0,h=h.points;n<h.length;n++)for(var p=
h[n],r=0;r<c;r++)k[m++]=p[r]}d.push(new ea(f,g))}return d;case "esriGeometryPolyline":c=d?e?4:3:e?3:2;d=[];for(e=0;e<a.length;e++){g=a[e];p=g.geometry;g=g.attributes;f=void 0;if(p)for(f=new ca,k=f.lengths,m=f.coords,h=n=0,p=p.paths;h<p.length;h++){for(var r=p[h],t=0,y=r;t<y.length;t++)for(var z=y[t],A=0;A<c;A++)m[n++]=z[A];k.push(r.length)}d.push(new ea(f,g))}return d;case "esriGeometryPolygon":c=d?e?4:3:e?3:2;d=[];for(e=0;e<a.length;e++){f=a[e];r=f.geometry;g=f.centroid;f=f.attributes;k=void 0;if(r)for(k=
new ca,m=k.lengths,n=k.coords,p=h=0,r=r.rings;p<r.length;p++){t=r[p];y=0;for(z=t;y<z.length;y++)for(var A=z[y],B=0;B<c;B++)n[h++]=A[B];m.push(t.length)}g?d.push(new ea(k,f,l(g))):d.push(new ea(k,f))}return d;default:return G.error("convertToFeatureSet:unknown-geometry",new b("Unable to parse unknown geometry type "+c)),[]}}function r(a,b,c,d,f,g){f=O[f];var k=b.coords;b=b.lengths;var m=c?d?4:3:d?3:2;c=c?d?aa:K:d?K:X;a.lengths.length=0;a.coords.length=0;if(!k.length)return a;if(!b.length)return c(a.coords,
k,0,0,e(g,k[0]),h(g,k[1])),a.lengths.length=0,a.coords.length=m,a;for(var l,n,p,q=0,r,t=0,v=0;v<b.length;v++){var u=b[v];if(!(u<f)){var y=0;r=t;n=d=e(g,k[q]);p=l=h(g,k[q+1]);c(a.coords,k,r,q,n,p);y++;q+=m;r+=m;for(var z=1;z<u;z++,q+=m)if(n=e(g,k[q]),p=h(g,k[q+1]),n!==d||p!==l)c(a.coords,k,r,q,n-d,p-l),r+=m,y++,d=n,l=p;y>=f&&(a.lengths.push(y),t=r)}}a.coords.length=t;return a.coords.length?a:null}function B(a,b,c,d,e){var g=b.coords;b=b.lengths;var h=c?d?aa:K:d?K:X;c=c?d?4:3:d?3:2;if(!g.length)return a.lengths.length=
0,a.coords.length=0,a;if(!b.length)return h(a.coords,g,0,0,m(e,g[0]),f(e,g[1])),a.lengths.length=0,a.coords.length=c,a;var k=e.scale;d=k[0];for(var k=k[1],l=0,n=0;n<b.length;n++){var p=b[n];a.lengths[n]=p;var q=m(e,g[l]),r=f(e,g[l+1]);h(a.coords,g,l,l,q,r);for(var l=l+c,t=1;t<p;t++,l+=c)q+=g[l]*d,r-=g[l+1]*k,h(a.coords,g,l,l,q,r)}a.lengths.length=b.length;a.coords.length=g.length;return a}function C(a,b,c,d,e,f){f=e?f?4:3:f?3:2;var g=c,h=c+f,k=0,l=0,m=c=0,n=0,p=0;for(--d;p<d;p++,g+=f,h+=f){var q=
b[g],r=b[g+1],t=b[g+2],v=b[h],u=b[h+1],y=b[h+2],z=q*u-v*r,m=m+z,k=k+(q+v)*z,l=l+(r+u)*z;e&&(z=q*y-v*t,c+=(t+y)*z,n+=z);q<a[0]&&(a[0]=q);q>a[1]&&(a[1]=q);r<a[2]&&(a[2]=r);r>a[3]&&(a[3]=r);e&&(t<a[4]&&(a[4]=t),t>a[5]&&(a[5]=t))}0<m&&(m*=-1);0<n&&(n*=-1);if(!m)return null;a=[k,l,.5*m];e&&(a[3]=c,a[4]=.5*n);return a}function D(a,b,c,d,e){e=d?e?4:3:e?3:2;for(var f=b,g=b+e,h=0,k=0,l=0,m=0,n=0,p=c-1;n<p;n++,f+=e,g+=e){var q=a[f],r=a[f+1],t=a[f+2],v=a[g],u=a[g+1],y=a[g+2],z=d?H(q,r,t,v,u,y):F(q,r,v,u);z&&
(h+=z,d?(q=I(q,r,t,v,u,y),k+=z*q[0],l+=z*q[1],m+=z*q[2]):(q=J(q,r,v,u),k+=z*q[0],l+=z*q[1]))}return 0<h?d?[k/h,l/h,m/h]:[k/h,l/h]:0<c?d?[a[b],a[b+1],a[b+2]]:[a[b],a[b+1]]:null}function F(a,b,c,d){a=c-a;b=d-b;return Math.sqrt(a*a+b*b)}function H(a,b,c,d,e,f){a=d-a;b=e-b;c=f-c;return Math.sqrt(a*a+b*b+c*c)}function J(a,b,c,d){return[a+.5*(c-a),b+.5*(d-b)]}function I(a,b,c,d,e,f){return[a+.5*(d-a),b+.5*(e-b),c+.5*(f-c)]}Object.defineProperty(a,"__esModule",{value:!0});var G=d.getLogger("esri.tasks.support.optimizedFeatureSet"),
O={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},X=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f},K=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2]},aa=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2];a[c+3]=b[d+3]};a.quantizeX=e;a.quantizeY=h;a.hydrateX=m;a.hydrateY=f;var ba=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=
!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();a.OptimizedFeatureSet=ba;var ca=function(){return function(a,b){void 0===a&&(a=[]);void 0===b&&(b=[]);this.lengths=a;this.coords=b}}();a.OptimizedGeometry=ca;var ea=function(){return function(a,b,c){void 0===a&&(a=null);void 0===b&&(b={});this.geometry=a;this.attributes=b;c&&(this.centroid=c)}}();a.OptimizedFeature=ea;a.convertToPoint=function(a,b,c){return b?c?y(a):p(a):c?t(a):k(a)};a.convertToMultipoint=A;a.convertToPolyline=
z;a.convertToPolygon=g;a.convertFromFeatures=n;a.convertToFeatureSet=function(a){var c=[],d=a.objectIdFieldName,e=a.spatialReference,f=a.transform,h=a.fields,l=a.hasM,m=a.hasZ,n=a.features,q=a.geometryType;a=a.exceededTransferLimit;switch(q){case "esriGeometryPoint":c=k;l&&m?c=y:l?c=p:m&&(c=t);for(var r=[],v=0;v<n.length;v++){var u=n[v],B=u.geometry,u=u.attributes,B=B?c(B):null;r.push({attributes:u,geometry:B})}c=r;break;case "esriGeometryMultipoint":c=[];for(r=0;r<n.length;r++)B=n[r],v=B.geometry,
B=B.attributes,u=void 0,v&&(u=A(v,m,l)),c.push({attributes:B,geometry:u});break;case "esriGeometryPolyline":c=[];for(r=0;r<n.length;r++)B=n[r],v=B.geometry,B=B.attributes,u=void 0,v&&(u=z(v,m,l)),c.push({attributes:B,geometry:u});break;case "esriGeometryPolygon":c=[];for(r=0;r<n.length;r++){var u=n[r],B=u.geometry,v=u.attributes,C=u.centroid,u=void 0;B&&(u=g(B,m,l));C?(B=k(C),c.push({attributes:v,centroid:B,geometry:u})):c.push({attributes:v,geometry:u})}break;default:G.error("convertToFeatureSet:unknown-geometry",
new b("Unable to parse unknown geometry type "+q))}d={features:c,fields:h,geometryType:q,objectIdFieldName:d,spatialReference:e};f&&(d.transform=f);a&&(d.exceededTransferLimit=a);l&&(d.hasM=l);m&&(d.hasZ=m);return d};a.convertFromFeatureSet=function(a){var b=new ba,c=a.hasM,d=a.hasZ,e=a.features,f=a.objectIdFieldName,g=a.spatialReference,h=a.geometryType,k=a.exceededTransferLimit,l=a.transform;b.fields=a.fields;b.geometryType=h;b.objectIdFieldName=f;b.spatialReference=g;b.features=n(e,h,d,c);k&&(b.exceededTransferLimit=
k);c&&(b.hasM=c);d&&(b.hasZ=d);l&&(b.transform=l);return b};a.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];B(g.geometry,g.geometry,c,d,b);g.centroid&&B(g.centroid,g.centroid,c,d,b)}a.transform=null;return a};a.quantizeOptimizedFeatureSet=function(a,c){var d=c.geometryType,e=c.features,f=c.hasM,g=c.hasZ;if("esriGeometryEnvelope"===d)return G.error(new b("optimized-features:invalid-geometry-type",'FeatureSet with geometry type "'+
d+'" is not supported')),c;if(!a)return c;for(var h=0;h<e.length;h++){var k=e[h],l=new ea(new ca,k.attributes);r(l.geometry,k.geometry,f,g,d,a);k.centroid&&(l.centroid=new ca,r(l.centroid,k.centroid,f,g,"esriGeometryPoint",a));e[h]=l}c.transform=a;return c};a.quantizeOptimizedGeometry=r;a.quantizeOptimizedGeometryRemoveCollinear=function(a,b,c,d,f,g){f=O[f];var k=b.coords;b=b.lengths;var l=c?d?4:3:d?3:2;c=c?d?aa:K:d?K:X;a.lengths.length=0;a.coords.length=0;if(!k.length)return a;if(!b.length)return c(a.coords,
k,0,0,e(g,k[0]),h(g,k[1])),a.lengths.length=0,a.coords.length=l,a;for(var m,n,p,q=0,r,t=0,u=0;u<b.length;u++){var v=b[u];if(!(v<f)){var y=0;r=t;d=m=e(g,k[q]);p=n=h(g,k[q+1]);c(a.coords,k,r,q,d,p);y++;for(var q=q+l,z=!1,A=0,B=0,C=1;C<v;C++,q+=l)if(d=e(g,k[q]),p=h(g,k[q+1]),d!==m||p!==n)m=d-m,n=p-n,z&&(0===A&&0===m||0===B&&0===n)?(A+=m,B+=n):(z=!0,A=m,B=n,r+=l,y++),c(a.coords,k,r,q,A,B),m=d,n=p;z&&(r+=l,c(a.coords,k,r,q,A,B));y>=f&&(a.lengths.push(y),t=r)}}a.coords.length=t;return a.coords.length?a:
null};a.getBoundsOptimizedGeometry=function(a,b,c,d){c=c?d?4:3:d?3:2;b=b.coords;for(var e=d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=0;h<b.length;h+=c){var k=b[h],l=b[h+1];d=Math.min(d,k);f=Math.max(f,k);e=Math.min(e,l);g=Math.max(g,l)}a[0]=d;a[1]=e;a[2]=f;a[3]=g;return a};a.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=c?d?4:3:d?3:2;d=b.coords;var e=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,
k=0,l=0;for(b=b.lengths;l<b.length;l++)for(var m=b[l],n=d[k],p=d[k+1],e=Math.min(n,e),f=Math.min(p,f),g=Math.max(n,g),h=Math.max(p,h),k=k+c,q=1;q<m;q++,k+=c){var r=d[k],t=d[k+1],n=n+r,p=p+t;0>r&&(e=Math.min(e,n));0<r&&(g=Math.max(g,n));0>t?f=Math.min(f,p):0<t&&(h=Math.max(h,p))}a[0]=e;a[1]=f;a[2]=g;a[3]=h;return a};a.hydrateOptimizedGeometry=B;a.getCentroidOptimizedGeometry=function(a,b,c,d){if(!b||!b.lengths.length)return null;a.lengths.length=0;a.coords.length=0;for(var e=a.coords,f=[],g=c?[Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],h=b.lengths,k=b.coords,l=c?d?4:3:d?3:2,m=0,n=0;n<h.length;n++){var p=h[n],q=C(g,k,m,p,c,d);q&&f.push(q);m+=p*l}f.sort(function(a,b){var d=a[2]-b[2];0===d&&c&&(d=a[4]-b[4]);return d});f.length&&(l=6*f[0][2],e[0]=f[0][0]/l,e[1]=f[0][1]/l,c&&(l=6*f[0][4],e[2]=0!==l?f[0][3]/l:
0),e[0]<g[0]||e[0]>g[1]||e[1]<g[2]||e[1]>g[3]||c&&(e[2]<g[4]||e[2]>g[5]))&&(e.length=0);if(!e.length)if(b=b.lengths[0]?D(k,0,h[0],c,d):null)e[0]=b[0],e[1]=b[1],c&&2<b.length&&(e[2]=b[2]);else return null;return a};a.lineCentroid=D;a.getLength2D=F;a.getLength3D=H;a.getMidpoint2D=J;a.getMidpoint3D=I})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(c,a,b,d){function e(a,b){a.length=0;b.forEach(function(b){return a.push(b)});
return a}var h=new Set,m=[],f=new Map;return function(){function a(a){var c=this;this._keysToRequests=new Map;this.tileInfoView=null;var d=a.strategy&&"scale-first"!==a.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=a.tileInfoView;this._queues=a.tileServers&&0<a.tileServers.length?a.tileServers.map(function(e){return new b({concurrency:a.concurrency||6,process:function(b){b=c._keysToRequests.get(b);return a.process(b,e)},peeker:d})}):[new b({concurrency:a.concurrency||
6,process:function(b){b=c._keysToRequests.get(b);return a.process(b)},peeker:d})]}Object.defineProperty(a.prototype,"length",{get:function(){return this._queues.reduce(function(a,b){return a+b.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});a.prototype.clear=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].clear();this._keysToRequests.clear()};a.prototype.find=function(a,
b){var c=this;b=0;for(var d=this._queues;b<d.length;b++){var e=d[b].find(function(b){return a(c._keysToRequests.get(b).key)});if(e)return e}};a.prototype.get=function(a){a="string"===typeof a?a:a.id;for(var b=0,c=this._queues;b<c.length;b++){var d=c[b].get(a);if(d)return d}};a.prototype.getRequest=function(a){return this._keysToRequests.get("string"===typeof a?a:a.id)};a.prototype.has=function(a){return"string"===typeof a?this._keysToRequests.has(a):this._keysToRequests.has(a.id)};a.prototype.isOngoing=
function(a){var b="string"===typeof a?a:a.id;return this.has(b)&&this._queues.some(function(a){return a.isOngoing(b)})};a.prototype.pause=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].pause()};a.prototype.push=function(a){var b=this,c=a.key.id,d=this._queues[a.key.row%this._queues.length].push(c);this._keysToRequests.set(c,a);d.then(function(){b._keysToRequests.delete(c)});d.catch(function(){b._keysToRequests.delete(c)});return d};a.prototype.reset=function(){for(var a=0,b=this._queues;a<
b.length;a++)b[a].reset()};a.prototype.resume=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].resume()};a.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,k=0;k<a.length;k++){var l=this._keysToRequests.get(a[k]),u=this.tileInfoView.getTileScale(l.key);f.has(u)||(f.set(u,[]),c=Math.max(u,c),d=Math.min(u,d));f.get(u).push(l.key);h.add(u)}var A=this.state.scale;f.has(A)||(e(m,h),m.sort(),A=m.reduce(function(a,
b,c,d){return Math.abs(b-A)<Math.abs(a-A)?b:a},m[0]));A=Math.min(A,c);A=Math.max(A,d);a=f.get(A);var z=b.getClosestInfoForScale(A),g=z.getColumnForX(this.state.center[0]),n=z.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=z.denormalizeCol(a.col,a.world),d=z.denormalizeCol(b.col,b.world);return Math.sqrt((g-c)*(g-c)+(n-a.row)*(n-a.row))-Math.sqrt((g-d)*(g-d)+(n-b.row)*(n-b.row))});h.clear();f.clear();return a[0].id};a.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];
for(var b=this.tileInfoView,c=this.state.center,e=[0,0],f=Number.POSITIVE_INFINITY,h=null,k=0;k<a.length;k++){var m=this._keysToRequests.get(a[k]);b.getTileCoords(e,m.key);var l=d.distance(e,c);l<f&&(f=l,h=m.key)}return h.id};return a}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(c,a,b,d,e){return function(){function a(a){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=
null;this.concurrency=1;this.ordered=!1;a.concurrency&&(this.concurrency=a.concurrency);this.ordered=!!a.ordered;this._queue=new d(a.peeker?{peeker:a.peeker}:void 0);this.process=a.process}Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._queue.clear();var a=[];this._processingItems.forEach(function(b){return a.push(b.resultPromise)});this._processingItems.clear();a.forEach(function(a){return a.cancel()});
a.length=0;this._apiPromises.forEach(function(b){return a.push(b)});this._apiPromises.clear();a.forEach(function(a){return a.cancel()});this._cancelNext()};a.prototype.find=function(a,b){var c=this,d=void 0;this._apiPromises.forEach(function(e,f){a.call(b,f)&&(d=c._apiPromises.get(f).promise)});return d};a.prototype.get=function(a){return(a=this._apiPromises.get(a))&&a.promise||void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._apiPromises.has(a)};
a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a){var c=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;var d=new b(function(b){var d=c._processingItems.get(a);d?d.resultPromise.cancel(b):(c._remove(a),c._scheduleNext())});this._add(a,d);this._scheduleNext();return d.promise};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var b=
0;b<a.length;b++){var c=a[b];c.resultPromise.isFulfilled()?this._processReset(c):(c.isReset=!0,c.resultPromise.cancel())}};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};a.prototype._scheduleNext=function(){var a=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=e.schedule(function(){a._scheduledNextHandle=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};
a.prototype._processResult=function(a,b){this._remove(a.item);this._scheduleNext();a.dfd.resolve(b)};a.prototype._processError=function(a,b){a.isReset?this._processReset(a):(this._remove(a.item),this._scheduleNext(),a.dfd.reject(b))};a.prototype._processReset=function(a){this._remove(a.item);this._add(a.item,a.dfd);this._scheduleNext()};a.prototype._processOrdered=function(a,b){var c=this,d=!1;if(a.isReset)this._processReset(a);else{a.result=b;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(a){d||
(a.result?c._itemsToProcess.push(a):d=!0)});a=0;for(b=this._itemsToProcess;a<b.length;a++){var e=b[a];!1===e.result.ok?this._processError(e,e.result.error):this._processResult(e,e.result.value)}this._itemsToProcess.length=0}};a.prototype._process=function(a){var b=this;if(null!=a){var c=this._apiPromises.get(a),d=this.process(a);if(d&&"function"===typeof d.then){var e={item:a,resultPromise:d,result:null,dfd:c,isReset:!1};this._processingItems.set(a,e);this.ordered?d.then(function(a){return b._processOrdered(e,
{ok:!0,value:a})},function(a){return b._processOrdered(e,{ok:!1,error:a})}):d.then(function(a){return b._processResult(e,a)},function(a){return b._processError(e,a)})}else c.resolve(d),this._remove(a)}};a.prototype._add=function(a,b){this._apiPromises.set(a,b);this._queue.push(a)};a.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._processingItems.delete(a)};a.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=
null)};return a}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(c,a){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};this._length=0;a&&a.peeker&&(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==
this._length)return this._peeker(this._items)};a.prototype.push=function(a){this.contains(a)||this._add(a)};a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};a.prototype.pop=function(){if(0!==this._length){var a=this.peek();this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),
1);this._length--};return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./enums","./TileKey"],function(c,a,b,d,e){var h=new e(0,0,0,0),m=new Map,f=[],k=[];return function(){function a(a){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;
this.tileInfoView=a.tileInfoView;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer)}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var b=this,c=this.tileIndex,e=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);if(e){var l=e.spans,p=e.lodInfo,A=p.level,z=a.state.resolution,g=!a.stationary&&z>this._previousResolution;this._previousResolution=z;
c.forEach(function(a){return a.visible=!0});this.tiles.length=0;m.clear();var n=0,r=0;if(0<l.length)for(var B=0;B<l.length;B++){a=l[B];for(var C=a.row,D=a.colTo,F=a.colFrom;F<=D;F++)n++,a=h.set(A,C,p.normalizeCol(F),p.getWorldForColumn(F)).id,c.has(a)?(z=c.get(a),z.status!==d.TileStatus.INITIALIZED&&r++,z.attached?m.set(a,z):z.attached||g||this._addParentTile(a,m)):(z=this.acquireTile(h),this.tileIndex.set(a,z),g||this._addParentTile(a,m))}var H=r===n;k.length=0;f.length=0;c.forEach(function(a,c){h.set(c);
if(!m.has(c)){var l=b.tileInfoView.intersects(e,h);!l||!g&&H?"purge"===b.cachePolicy&&a.status!==d.TileStatus.MODIFIED&&a.status!==d.TileStatus.READY?f.push(c):(h.level>A||!l)&&f.push(c):a.attached?k.push(c):h.level>A&&f.push(c)}});for(l=0;l<k.length;l++)a=k[l],(z=c.get(a))&&z.attached&&m.set(a,z);for(l=0;l<f.length;l++)a=f[l],z=c.get(a),this.releaseTile(z),c["delete"](a);m.forEach(function(a){return b.tiles.push(a)});c.forEach(function(a){m.has(a.key.id)||(a.visible=!1)});k.length=0;f.length=0;m.clear()}};
a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});b.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)&&(c=this.tileIndex.get(a))&&c.attached){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec4 a_vertexOffsetAndTex;\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffsetAndTex.xy;\r\n      vec2 a_tex \x3d a_vertexOffsetAndTex.zw;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"*now":function(c){c(['dojo/i18n!*preload*esri/layers/support/nls/webglDeps*["ar","az","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});define("esri/layers/support/webglDeps",["./WebGLRenderer","../OnDemandDrillMode"],function(c,a){return{WebGLRenderer:c,OnDemandDrillMode:a}});