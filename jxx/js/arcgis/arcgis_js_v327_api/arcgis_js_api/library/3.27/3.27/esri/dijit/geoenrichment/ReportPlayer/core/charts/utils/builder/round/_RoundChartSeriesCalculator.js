// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/round/_RoundChartSeriesCalculator","../../ThemeCalculator ../../ChartTypes ../../ChartSorting ../../../../supportClasses/conditionalStyling/ConditionalStyleUtil ../utils/ChartDataUtil ../utils/TooltipInfoBuilder ../utils/ChartDataLabelBuilder dojo/i18n!esri/nls/jsapi".split(" "),function(z,h,r,t,u,A,B,G){return{calcSeries:function(a){var v=a.seriesItems,e=a.chartType,C=a.themeSettings,D=a.viewModel,d=a.visualProperties,E=a.currentFeatureIndex,
f=a.sorting;a=[];var k=v[0],l={name:"data",data:[]},w=[],m=0,n=0,p=1E6,q=-1E6,x,c=k.points;if(h.isConditionalStylingEnabled(e)&&d.conditionalStyling){var y=t.getStatistics(d.conditionalStyling);y&&k&&(x=u.getChartData(y,c.length))}c.forEach(function(b,a){b=u.getPointValue({point:b,index:a,seriesIndex:0,maxValue:!1,chartType:e,visualProperties:d,viewModel:D,currentFeatureIndex:E,chartData:x});b=(w[a]=b)||0;m+=b;n+=Math.abs(b);p=Math.min(p,b);q=Math.max(q,b)});var F=m/c.length;c.forEach(function(b,
a){var c=w[a],f=c||0,g;h.isConditionalStylingEnabled(e)&&d.conditionalStyling&&(g=(g=t.getConditionalStyle(f,d.conditionalStyling))&&g.backgroundColor);g=g||z.calcColorForPoint({point:b,seriesItem:k,pointIndex:a,seriesIndex:0,numSeries:v.length,chartType:e,themeSettings:C});l.data.push({originalValue:c,x:1,y:Math.max(1E-4,f),isUnavailableData:isNaN(c),valueProp:"y",unsortedIndex:a,name:b.label,point:b,fill:g,text:B.formatDataLabel(f,b.label,n,d,e),tooltip:A.getTooltipInfo({yValue:c,pointLabel:b.label,
seriesLabel:null,minInSeriesValue:p,maxInSeriesValue:q,sumInSeriesValue:m,absSumInSeriesValue:n,avgInSeriesValue:F,visualProperties:d,chartType:e,color:g,conditionalStyling:d.conditionalStyling,fieldInfo:b.fieldInfo,decimals:b.value&&b.value.decimals}),stroke:{width:0}})});h.isSortingEnabled(e)&&f&&f!==r.NONE&&l.data.sort(function(b,a){return(b.y-a.y)*(f===r.DESC?-1:1)});a.push(l);return a}}});