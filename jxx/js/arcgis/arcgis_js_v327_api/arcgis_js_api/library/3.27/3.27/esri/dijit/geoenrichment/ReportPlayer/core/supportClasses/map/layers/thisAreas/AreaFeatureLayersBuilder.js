// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/thisAreas/AreaFeatureLayersBuilder","dojo/_base/Color esri/graphic esri/layers/GraphicsLayer esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/renderers/SimpleRenderer ../../Projector esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/AreasInfoTemplateBuilder".split(" "),function(h,r,t,p,u,m,v,q,w){var n={addAreaFeatures:function(a,c){var f=a.features.filter(function(a){return"polygon"===
a.geometry.type}),h=a.features.filter(function(a){return"point"===a.geometry.type}),k=[],l=[],g={},b=new q;f.forEach(function(d,e){e=n._addFeaturesToNewLayer(d,!1,a,b,c,e);g[l.length]=a.featureIndexToAreaIndexMap[a.features.indexOf(d)];l.push(e)});h.forEach(function(d,e){d=n._addFeaturesToNewLayer(d,!0,a,b,c,e);k.push(d)});b.project();return{pointLayers:k,polygonLayers:l,polygonLayerIndexToAreaIndex:g}},_addFeaturesToNewLayer:function(a,c,f,h,k,l){var g=new t,b=new r(null,n._getSymbolForGraphic(a),
a.attributes),d=a.getLayer();b.setInfoTemplate(d&&d.infoTemplate||a.infoTemplate);var d=f.featureIndexToAreaIndexMap[f.features.indexOf(a)],e=f.analysisAreas[d],e=c&&e.locationName||e.name;!b.infoTemplate&&f.attachmentsStore&&w.buildInfoTemplateForFeature(f.attachmentsStore,b,d,e);g.name=b.infoTemplate&&b.infoTemplate.info&&b.infoTemplate.info.title||e;g.setRenderer(new v(b.symbol));q.needProject(a.geometry,f.map)?h.addForProjection(a.geometry,f.map).then(function(a){b.setGeometry(a);g.add(b)}):(b.setGeometry(a.geometry),
g.add(b));k.registerLayerInfo({layer:g,type:c?k.AREA_FEATURE_POINTS:k.AREA_FEATURE_POLYGONS,preferredIndex:l});return g},_getSymbolForGraphic:function(a){var c=a.getLayer();(c=c&&c.renderer&&c.renderer.getSymbol(a)||a.symbol)||("point"===a.geometry.type?a=new p(p.STYLE_CIRCLE,20,new m(m.STYLE_SOLID,new h([255,255,255,.7]),2),new h([255,0,0,.7])):(a=new u,a.setOutline(new m(m.STYLE_SOLID,new h([255,0,0,1]),2)),a.setColor(new h([100,100,100,.25]))),c=a);return c}};return n});