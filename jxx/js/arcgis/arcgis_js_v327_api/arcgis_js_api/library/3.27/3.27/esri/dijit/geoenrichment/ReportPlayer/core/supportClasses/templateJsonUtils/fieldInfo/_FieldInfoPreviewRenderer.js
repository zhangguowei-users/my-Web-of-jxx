// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoPreviewRenderer","dojo/string ./utils ./FieldInfoPreviewSampleUtil ./FieldInfoPreviewAttributeUtil ../../conditionalStyling/ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/DateUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig dojo/i18n!esri/nls/jsapi ../../../../_devConfig".split(" "),function(l,p,q,r,t,u,v,h,k,w){k=k.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;
var x={percent:[10,15,20,25,33,46,72,90,95],percentSmall:[2,3,4,5,6,7],index:[80,99,105,111,113,118,121,130],number:[1150,2013,5006,10135,20456,36813],numberSep:[1150,2013,5006,10135,20456,36813],numberSmall:[10,5,3,7,15]},y=/^MEDAGE|^AVGHHSZ|^UNEMPRT|ECYHSZAVG|ECYPTAMED/,m={percent:{MP19013a_B:72,MP19014a_B:70,EMP_TO_POP:25,NOHS:10,HSG:20,SC:30,BGPD:40},percentSmall:{UNEMPRT_CY:5},index:{},number:{MEDHINC_CY:55650,TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,
MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9074_A:326,X9045_A:42,ECYPTAPOP:20456,ECYHNIMED:55650},numberSep:{MEDHINC_CY:55650,TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9074_A:326,
X9045_A:42,ECYPTAPOP:20456,ECYHNIMED:55650},numberSmall:{AVGHHSZ_CY:2,MEDAGE_CY:36,ECYHSZAVG:2,ECYPTAMED:36},string:{TSEGNAME:"Bright Young Professionals",TLIFECODE:"L8",TLIFENAME:"Middle Ground",TSEGCODE:"8A",CONAME:"Coffee",NAICS:"1234",SIC:"5678",ADDR:"380 New York St, Redlands, CA",STATE:"CA",STATE_NAME:"California",ZIP:"92373",ZIP4:"92373",CITY:"Redlands",STREET:"New York st.",DIRECTION:"SW",FRNCOD:"24"}},z={"Employee/ Population Ratio":"EMP_TO_POP","No High School Diploma":"NOHS","High School Graduate":"HSG",
"Some College":"SC","Bachelors/Grad/Prof Degree":"BGPD"},n={};return{getValuePreview:function(a,b){return a.hasVariable||a.script?this._getVariableOrScriptPreview(a,b):this._getNonVariablePreview(a,b)},_getVariableOrScriptPreview:function(a,b){function f(a){return{formattedValue:a,value:a,formatFunction:null,isUnavailableData:!1}}function g(b,c){function d(b){b=0<a.decimals?b+.5432123456789:Math.round(b);return u.formatNumber(b,{places:a.decimals||0,noSeparator:!a.useThousandsSeparator})}c=b;c=0<
a.decimals?Number((c+.5432123456789).toFixed(a.decimals)):Math.round(c);return{formattedValue:d(b),value:c,formatFunction:function(a){return d(a)},isUnavailableData:!1}}var c=this._getSampleCacheType(a),e=q.findNonEmptySample(a);if("string"===typeof e)return f(e);if("number"===typeof e)return g(e,c);var d=a.type||a.isSiteAttribute&&a.attribute.type,e=a.isSiteAttribute&&r.getAttributePreviewValue(a.attribute);if("esriFieldTypeDate"===d)return c=new Date,e&&c.setTime(e),f(v.formatDateShort(c));if("esriFieldTypeString"===
d)return f(m.string[a.isDataLayerAttribute?a.attribute.name:a.variableID]||e||k.sampleTextValue);if(w.preview.bigValues&&("number"===c||"numberSep"===c))return g(1E12,c);if(b.getPreviewValueFunction)return"percent"!==c&&(c="number"),g(b.getPreviewValueFunction()[c],c);if("number"===typeof e)return g(e,c);b=n[c]=n[c]||{};e=a.name+";"+a.decimals;d=b[e];if(!d){var d=m[c],h;h=a.variableID?a.variableID:a.script&&z[a.script.alias];d=d[h];d||(d=x[c],d=d[Math.round((d.length-1)*Math.random())]);d=b[e]=d}return g(d,
c)},_getSampleCacheType:function(a){var b=a.statefulName?"p"===a.statefulName.charAt(0):a.showPercent,f=a.statefulName&&"i"===a.statefulName.charAt(0),g=a.hasVariable&&y.test(a.variableID);return b?g?"percentSmall":"percent":f?"index":g?"numberSmall":a.useThousandsSeparator?"numberSep":"number"},_getNonVariablePreview:function(a,b){"headers.AREA_DESC"===a.name&&-1<b.currentFeatureIndex?(a=1+2*b.currentFeatureIndex,a=1===a?h.getSingleUnits()?"1 "+h.getSingleUnits():l.substitute(k.fieldPreviewAreaDescWithRadiusSingular,
{radius:a}):h.getPluralUnits()?a+" "+h.getPluralUnits():l.substitute(k.fieldPreviewAreaDescWithRadiusPlural,{radius:a})):a=p.fields.getPreview(a.name,b.isGraphicReport,b.isMultiFeature)||a.alias;return{formattedValue:a,value:a,formatFunction:null,isUnavailableData:!1}},getConditionalStylePreview:function(a,b){if(a.triggerJson&&void 0!==b.rowIndex&&(b=a.triggerJson.cases[b.rowIndex%a.triggerJson.cases.length])){a=t.styleFromSetters(b.setters);var f;1===b.compareInfos.length?(f=Number(b.compareInfos[0].value),
b=b.compareInfos[0].operator,"\x3e"===b?f++:"\x3c"===b&&f--):2===b.compareInfos.length&&(f=(Number(b.compareInfos[1].value)+Number(b.compareInfos[0].value))/2);return{style:a,value:f}}return null}}});