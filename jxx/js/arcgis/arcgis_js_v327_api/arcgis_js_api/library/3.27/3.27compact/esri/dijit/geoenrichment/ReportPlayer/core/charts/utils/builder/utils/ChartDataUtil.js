// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/utils/ChartDataUtil",["../../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer","esri/dijit/geoenrichment/utils/ObjectUtil","../../ChartTypes"],function(k,n,p){var e={formatNumber:function(a,b,c,e){a=n.formatNumber(a||0,{places:b.dataLabelsDecimals||0,preserveTrailingZeroes:!0});c&&(a+="%");return a},undefinedToDefault:function(a,b){return void 0===a?b:a}},g=[1E3,1100,1200,150,70,900,110,300,80,200,1700],q=[1E3,
-300,700,-150,70,100,-200,900,110,300,80,200,1700],r=[1,.7,1.2,.5,1.1,1.3,.3,2,.4],t=[.91,.92,.9,1.2,1.2,1.3];e.CHART_DATA_SMOOTH=[1145,1134,1159,1275,1404,1408,1337,1149,1074,1040,1065,1078,964,798,531,360,254,258];e.getPointValue=function(a){var b=a.point,c=a.index,e=a.seriesIndex,d=a.chartType,f=a.visualProperties,l=a.viewModel,m=a.currentFeatureIndex,h=a.chartData,u=a.isComparisonSeries,v=a.comparisonFeatureId,w=a.ge;a=a.allowNegativeValuesInPreview;if(b.value&&(b.value.value||l.dynamicReportInfo))return b.value.value;
l.dynamicReportInfo?(d=u?w.getFieldValueAt(b.fieldInfo.name,v):k.getFieldDataValue(b.fieldInfo,l.dynamicReportInfo.fieldData,m),d=n.parseNumber(d),isNaN(d)&&console.log("Can't render chart value for field \x3d\x3e "+(b.fieldInfo?b.fieldInfo.name:"missing field"))):(b=b.fieldInfo&&b.fieldInfo.statefulName&&b.fieldInfo.statefulName.charAt(0),d===p.GAUGE&&"p"!==b&&f.gaugeRangeMax?(c=f.gaugeRangeMin||0,d=.4*(f.gaugeRangeMax-c)+c):(h=h||(a?q:g),d=h[c%h.length],d*=r[e%r.length]*(0===e?1:t[c%t.length]),
f.conditionalStyling||(f=d,"p"===b&&(f=Number((f/25).toFixed(1))),"i"===b&&(f=Number((f/7).toFixed(1))),d=f)));return d};e.getCaptionValue=function(a,b){return a.captionFieldInfo?b.dynamicReportInfo?k.getFieldDataValue(a.captionFieldInfo,b.dynamicReportInfo.fieldData):k.renderFieldInfoInTableCell(a.captionFieldInfo).formattedValue:""};e.allowNegativeValuesInPreview=function(a,b){return p.supportsNegativeValues(a)&&!b.isStacked&&!b.renderColumnBarsInOppositeDirections};e.getChartData=function(a,b,
c,e){c=(c||(e?q:g)).slice();c.length=Math.min(c.length,b);var d=-Infinity;c.forEach(function(a){d=Math.max(d,a)});var f=1.1*a.max/d;return c=c.map(function(a){return a*f})};var m=g;e.setPreviewChartData=function(a){g=a||m};return e});