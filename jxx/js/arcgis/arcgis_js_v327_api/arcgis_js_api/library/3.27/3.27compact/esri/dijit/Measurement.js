// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/debounce":function(){define([],function(){return function(q,n){var m;return function(){m&&clearTimeout(m);var l=this,f=arguments;m=setTimeout(function(){q.apply(l,f)},n)}}})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(q,n,m,l,f,h,k,g,c,d,b,y,t){function w(){}
function u(a){return function(e,c,b,d){return e&&"string"==typeof c&&e[c]==w?e.on(c.substring(2).toLowerCase(),k.hitch(b,d)):a.apply(m,arguments)}}q.around(m,"connect",u);h.connect&&q.around(h,"connect",u);q=l("dijit._Widget",[b,y,t],{onClick:w,onDblClick:w,onKeyDown:w,onKeyPress:w,onKeyUp:w,onMouseDown:w,onMouseMove:w,onMouseOut:w,onMouseOver:w,onMouseLeave:w,onMouseEnter:w,onMouseUp:w,constructor:function(a){this._toConnect={};for(var e in a)this[e]===w&&(this._toConnect[e.replace(/^on/,"").toLowerCase()]=
a[e],delete a[e])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,e){return this[this._onMap(a)]===w?m.connect(this.domNode,a.toLowerCase(),this,e):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,e){h.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,e)},attr:function(a,
e){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){h.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?g("[widgetId]",this.containerNode).map(d.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});f("dijit-legacy-requires")&&c(0,function(){require(["dijit/_base"])});return q})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(q,n,m,l,f,h,k,g,c,d,b,y,t,w,u,a,e,r,x,z,v,A,p){function C(a){return function(e){g[e?"set":"remove"](this.domNode,a,e);this._set(a,e)}}t.add("dijit-legacy-requires",!w.isAsync);t.add("dojo-bidi",!1);t("dijit-legacy-requires")&&e(0,function(){q(["dijit/_base/manager"])});var E={};l=h("dijit._WidgetBase",[r,v],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:C("lang"),dir:"",_setDirAttr:C("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:l.blankGif||q.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var e=a.prototype,c=a._setterAttrs=[],a=a._onMap={},b;for(b in e.attributeMap)c.push(b);for(b in e)/^on/.test(b)&&(a[b.substring(2).toLowerCase()]=b),/^_set[A-Z](.*)Attr$/.test(b)&&(b=b.charAt(4).toLowerCase()+
b.substr(5,b.length-9),e.attributeMap&&b in e.attributeMap||c.push(b))}},postscript:function(a,e){this.create(a,e)},create:function(a,e){this._introspect();this.srcNodeRef=k.byId(e);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,u.mixin(this,a));this.postMixInProperties();this.id||(this.id=p.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=z.body(this.ownerDocument);p.add(this);this.buildRendering();var b;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),b=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();b&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},e;for(e in this.params||{})a[e]=this._get(e);n.forEach(this.constructor._setterAttrs,
function(e){if(!(e in a)){var b=this._get(e);b&&this.set(e,b)}},this);for(e in a)this.set(e,a[e])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(n.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,n.forEach(this.getChildren(),function(a){a._started||
a._destroyed||!u.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function e(e){e.destroyRecursive?e.destroyRecursive(a):e.destroy&&e.destroy(a)}this._beingDestroyed=!0;this.uninitialize();n.forEach(this._connects,u.hitch(this,"disconnect"));n.forEach(this._supportingWidgets,e);this.domNode&&n.forEach(p.findWidgets(this.domNode,this.containerNode),e);this.destroyRendering(a);
p.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?g.remove(this.domNode,"widgetId"):d.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||d.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){n.forEach(this.getChildren(),function(e){e.destroyRecursive&&e.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var e=this.domNode;u.isObject(a)?
y.set(e,a):e.style.cssText=e.style.cssText?e.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,e,b){b=3<=arguments.length?b:this.attributeMap[a];n.forEach(u.isArray(b)?b:[b],function(b){var r=this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":u.isFunction(e)&&(e=u.hitch(this,e));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;r.tagName?g.set(r,b,e):r.set(b,e);break;case "innerText":r.innerHTML="";r.appendChild(this.ownerDocument.createTextNode(e));
break;case "textContent":r.textContent=e;break;case "innerHTML":r.innerHTML=e;break;case "class":c.replace(r,e,this[a]);break;case "toggleClass":c.toggle(r,b.className||a,e)}},this)},get:function(a){var e=this._getAttrNames(a);return this[e.g]?this[e.g]():this._get(a)},set:function(a,e){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var c=this[b.s];if(u.isFunction(c))var r=c.apply(this,Array.prototype.slice.call(arguments,1));else{var c=this.focusNode&&
!u.isFunction(this.focusNode)?"focusNode":"domNode",x=this[c]&&this[c].tagName,d;if((d=x)&&!(d=E[x])){d=this[c];var p={},t;for(t in d)p[t.toLowerCase()]=!0;d=E[x]=p}t=d;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:t&&b.l in t&&"function"!=typeof e||/^aria-|^data-|^role$/.test(a)?c:null;null!=b&&this._attrToDom(a,e,b);this._set(a,e)}return r||this},_attrPairNames:{},_getAttrNames:function(a){var e=this._attrPairNames;if(e[a])return e[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return e[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,e){var b=this[a];this[a]=e;!this._created||b===e||b!==b&&e!==e||(this._watchCallbacks&&this._watchCallbacks(a,b,e),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:e}}))},_get:function(a){return this[a]},emit:function(e,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var r,x=this["on"+e];x&&
(r=x.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&a.emit(this.domNode,e.toLowerCase(),b);return r},on:function(e,b){var c=this._onMap(e);return c?m.after(this,c,b,!0):this.own(a(this.domNode,e,b))[0]},_onMap:function(a){var e=this.constructor,b=e._onMap;if(!b){var b=e._onMap={},c;for(c in e.prototype)/^on/.test(c)&&(b[c.replace(/^on/,"").toLowerCase()]=c)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?p.findWidgets(this.containerNode):[]},getParent:function(){return p.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,e,b){return this.own(f.connect(a,e,this,b))[0]},disconnect:function(a){a.remove()},subscribe:function(a,e){return this.own(x.subscribe(a,u.hitch(this,e)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():b.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=y.get(this.domNode,"display")},placeAt:function(a,e){var b=!a.tagName&&p.byId(a);!b||!b.addChild||e&&"number"!==typeof e?(a=b&&"domNode"in b?b.containerNode&&!/after|before|replace/.test(e||"")?b.containerNode:b.domNode:k.byId(a,this.ownerDocument),d.place(this.domNode,a,e),!this._started&&(this.getParent()||{})._started&&this.startup()):b.addChild(this,e);return this},defer:function(a,e){var b=setTimeout(u.hitch(this,function(){b&&(b=null,this._destroyed||u.hitch(this,a)())}),e||0);return{remove:function(){b&&
(clearTimeout(b),b=null);return null}}}});t("dojo-bidi")&&l.extend(A);return l})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(q,n,m){return m("dijit.Destroyable",null,{destroy:function(l){this._destroyed=!0},own:function(){var l=["destroyRecursive","destroy","remove"];q.forEach(arguments,function(f){function h(){g.remove();q.forEach(c,function(c){c.remove()})}var k,g=n.before(this,"destroy",function(c){f[k](c)}),c=[];f.then?(k="cancel",f.then(h,
h)):q.forEach(l,function(d){"function"===typeof f[d]&&(k||(k=d),c.push(n.after(f,d,h,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(q,n,m,l,f,h){q=l("dijit._OnDijitClickMixin",null,{connect:function(f,g,c){return this.inherited(arguments,[f,"ondijitclick"==g?h:g,c])}});q.a11yclick=h;return q})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare",
"dojo/_base/lang"],function(q,n,m,l){l.extend(n,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return m("dijit._FocusMixin",null,{_focusManager:q})})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(q,n,m,l){m(function(){n("highcontrast")&&q.add(l.body(),"dijit_a11y")});return n})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(q,n,m,l,f,h,k){f.add("highcontrast",function(){var g=k.doc.createElement("div");try{g.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(n.blankGif||q.toUrl("./resources/blank.gif"))+'");';k.body().appendChild(g);var c=l.getComputedStyle(g),d=c.backgroundImage;return c.borderTopColor==c.borderRightColor||d&&("none"==d||"url(invalid-url:)"==d)}catch(b){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+
b.toString()),!1}finally{8>=f("ie")?g.outerHTML="":k.body().removeChild(g)}});h(function(){f("highcontrast")&&m.add(k.body(),"dj_a11y")});return f})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(q,n,m,l,f,h,k,g,c,d,b,y,t,w,u,a){b("dijit-legacy-requires")&&a(0,function(){q(["dijit/MenuItem",
"dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return m("dijit.Menu",u,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):n.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return t.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||
a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=l.byId(a,this.ownerDocument);var e;if("iframe"==a.tagName.toLowerCase()){var b=a;e=this._iframeContentWindow(b);e=y.body(e.document)}else e=a==y.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var t={node:a,iframe:b};f.set(a,"_dijitMenu"+this.id,
this._bindings.push(t));var v=c.hitch(this,function(a){var e=this.selector,c=e?function(a){return d.selector(e,a)}:function(a){return a},r=this;return[d(a,c(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<r._lastKeyDown+500||r._scheduleOpen(this,b,{x:a.pageX,y:a.pageY},a.target)}),d(a,c("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==g.F10||r.leftClickToOpen&&a.keyCode==g.SPACE)a.stopPropagation(),a.preventDefault(),
r._scheduleOpen(this,b,null,a.target),r._lastKeyDown=(new Date).getTime()})]});t.connects=e?v(e):[];b&&(t.onloadHandler=c.hitch(this,function(){var a=this._iframeContentWindow(b),a=y.body(a.document);t.connects=v(a)}),b.addEventListener?b.addEventListener("load",t.onloadHandler,!1):b.attachEvent("onload",t.onloadHandler))},unBindDomNode:function(a){var e;try{e=l.byId(a,this.ownerDocument)}catch(A){return}a="_dijitMenu"+this.id;if(e&&f.has(e,a)){for(var b=f.get(e,a)-1,c=this._bindings[b],d;d=c.connects.pop();)d.remove();
(d=c.iframe)&&(d.removeEventListener?d.removeEventListener("load",c.onloadHandler,!1):d.detachEvent("onload",c.onloadHandler));f.remove(e,a);delete this._bindings[b]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function e(){m.refocus&&n&&n.focus();w.close(m)}var c=a.target,d=a.iframe,t=a.coords,g=!t;this.currentTarget=a.delegatedTarget;
if(t){if(d){a=h.position(d,!0);var c=this._iframeContentWindow(d),c=h.docScroll(c.document),p=k.getComputedStyle(d),f=k.toPixelValue,y=(b("ie")&&b("quirks")?0:f(d,p.paddingLeft))+(b("ie")&&b("quirks")?f(d,p.borderLeftWidth):0),d=(b("ie")&&b("quirks")?0:f(d,p.paddingTop))+(b("ie")&&b("quirks")?f(d,p.borderTopWidth):0);t.x+=a.x+y-c.x;t.y+=a.y+d-c.y}}else t=h.position(c,!0),t.x+=10,t.y+=10;var m=this,d=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var n=!a||l.isDescendant(a,
this.domNode)?d:a;w.open({popup:this,x:t.x,y:t.y,onExecute:e,onCancel:e,orient:this.isLeftToRight()?"L":"R"});this.focus();g||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);w.close(this)}},destroy:function(){n.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(q,n,m,l,f,h,k,g,c,d,b,y,t,w,u,a){function e(){this._popupWrapper&&(h.destroy(this._popupWrapper),delete this._popupWrapper)}m=m(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,e=k.position(this._firstAroundNode,!0),c=e.x-a.x,a=e.y-a.y;if(c||a)for(this._firstAroundPosition=e,e=0;e<this._stack.length;e++){var d=this._stack[e].wrapper.style;d.top=parseFloat(d.top)+a+"px";"auto"==d.right?d.left=parseFloat(d.left)+c+
"px":d.right=parseFloat(d.right)-c+"px"}this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),c||a?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,c=a.domNode;b||(b=h.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=b,n.after(a,"destroy",e,!0),"ontouchend"in document&&y(b,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),b.dojoClick=!0);return b},moveOffScreen:function(a){var e=this._createWrapper(a);a=k.isBodyLtr(a.ownerDocument);var b={visibility:"hidden",top:"-9999px",display:""};b[a?"left":"right"]="-9999px";b[a?"right":"left"]="auto";g.set(e,b);return e},hide:function(a){var e=this._createWrapper(a);g.set(e,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,e=a.length-1;0<e&&a[e].parent===a[e-1].widget;e--);return a[e]},open:function(a){for(var e=this._stack,r=a.popup,v=r.domNode,A=a.orient||["below","below-alt","above","above-alt"],p=a.parent?a.parent.isLeftToRight():k.isBodyLtr(r.ownerDocument),h=a.around,m=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++;e.length&&(!a.parent||!l.isDescendant(a.parent.domNode,e[e.length-1].widget.domNode));)this.close(e[e.length-1].widget);var n=this.moveOffScreen(r);
r.startup&&!r._started&&r.startup();var q,J=k.position(v);if("maxHeight"in a&&-1!=a.maxHeight)q=a.maxHeight||Infinity;else{q=u.getEffectiveBox(this.ownerDocument);var M=h?k.position(h,!1):{y:a.y-(a.padding||0),h:2*(a.padding||0)};q=Math.floor(Math.max(M.y,q.h-(M.y+M.h)))}J.h>q&&(J=g.getComputedStyle(v),g.set(n,{overflowY:"scroll",height:q+"px",border:J.borderLeftWidth+" "+J.borderLeftStyle+" "+J.borderLeftColor}),v._originalStyle=v.style.cssText,v.style.border="none");f.set(n,{id:m,style:{zIndex:this._beginZIndex+
e.length},"class":"dijitPopup "+(r.baseClass||r["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""});0==e.length&&h&&(this._firstAroundNode=h,this._firstAroundPosition=k.position(h,!0),this._aroundMoveListener=setTimeout(b.hitch(this,"_repositionAll"),50));c("config-bgIframe")&&!r.bgIframe&&(r.bgIframe=new w(n));m=r.orient?b.hitch(r,"orient"):null;A=h?t.around(n,h,A,p,m):t.at(n,a,"R"==A?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding,m);n.style.visibility="visible";
v.style.visibility="visible";v=[];v.push(y(n,"keydown",b.hitch(this,function(e){if(e.keyCode==d.ESCAPE&&a.onCancel)e.stopPropagation(),e.preventDefault(),a.onCancel();else if(e.keyCode==d.TAB&&(e.stopPropagation(),e.preventDefault(),(e=this.getTopPopup())&&e.onCancel))e.onCancel()})));r.onCancel&&a.onCancel&&v.push(r.on("cancel",a.onCancel));v.push(r.on(r.onExecute?"execute":"change",b.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));e.push({widget:r,wrapper:n,parent:a.parent,
onExecute:a.onExecute,onCancel:a.onCancel,onClose:a.onClose,handlers:v});if(r.onOpen)r.onOpen(A);return A},close:function(a){for(var e=this._stack;a&&q.some(e,function(e){return e.widget==a})||!a&&e.length;){var b=e.pop(),c=b.widget,d=b.onClose;c.bgIframe&&(c.bgIframe.destroy(),delete c.bgIframe);if(c.onClose)c.onClose();for(var t;t=b.handlers.pop();)t.remove();c&&c.domNode&&this.hide(c);d&&d()}0==e.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return a.popup=new m})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(q,n,m,l,f,h,k){function g(c,b,g,t){var d=h.getEffectiveBox(c.ownerDocument);c.parentNode&&"body"==String(c.parentNode.tagName).toLowerCase()||f.body(c.ownerDocument).appendChild(c);var k=null;q.some(b,function(a){var e=a.corner,b=a.pos,r=0,f={w:{L:d.l+d.w-b.x,R:b.x-d.l,M:d.w}[e.charAt(1)],
h:{T:d.t+d.h-b.y,B:b.y-d.t,M:d.h}[e.charAt(0)]},p=c.style;p.left=p.right="auto";g&&(r=g(c,a.aroundCorner,e,f,t),r="undefined"==typeof r?0:r);var l=c.style,h=l.display,m=l.visibility;"none"==l.display&&(l.visibility="hidden",l.display="");p=n.position(c);l.display=h;l.visibility=m;h={L:b.x,R:b.x-p.w,M:Math.max(d.l,Math.min(d.l+d.w,b.x+(p.w>>1))-p.w)}[e.charAt(1)];m={T:b.y,B:b.y-p.h,M:Math.max(d.t,Math.min(d.t+d.h,b.y+(p.h>>1))-p.h)}[e.charAt(0)];b=Math.max(d.l,h);l=Math.max(d.t,m);h=Math.min(d.l+d.w,
h+p.w)-b;m=Math.min(d.t+d.h,m+p.h)-l;r+=p.w-h+(p.h-m);if(null==k||r<k.overflow)k={corner:e,aroundCorner:a.aroundCorner,x:b,y:l,w:h,h:m,overflow:r,spaceAvailable:f};return!r});k.overflow&&g&&g(c,k.aroundCorner,k.corner,k.spaceAvailable,t);b=k.y;var a=k.x,e=f.body(c.ownerDocument);/relative|absolute/.test(m.get(e,"position"))&&(b-=m.get(e,"marginTop"),a-=m.get(e,"marginLeft"));e=c.style;e.top=b+"px";e.left=a+"px";e.right="auto";return k}var c={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return k.place={at:function(d,
b,f,t,k){f=q.map(f,function(d){var a={corner:d,aroundCorner:c[d],pos:{x:b.x,y:b.y}};t&&(a.pos.x+="L"==d.charAt(1)?t.x:-t.x,a.pos.y+="T"==d.charAt(0)?t.y:-t.y);return a});return g(d,f,k)},around:function(c,b,f,t,k){function d(a,e){G.push({aroundCorner:a,corner:e,pos:{x:{L:A,R:A+C,M:A+(C>>1)}[a.charAt(1)],y:{T:p,B:p+w,M:p+(w>>1)}[a.charAt(0)]}})}var a;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(a=n.position(b,!0),/^(above|below)/.test(f[0])){var e=n.getBorderExtents(b),r=b.firstChild?
n.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},x=n.getBorderExtents(c),h=c.firstChild?n.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};a.y+=Math.min(e.t+r.t,x.t+h.t);a.h-=Math.min(e.t+r.t,x.t+h.t)+Math.min(e.b+r.b,x.b+h.b)}}else a=b;if(b.parentNode)for(e="absolute"==m.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){r=n.position(b,!0);x=m.getComputedStyle(b);/relative|absolute/.test(x.position)&&(e=!1);if(!e&&/hidden|auto|scroll/.test(x.overflow)){var h=Math.min(a.y+
a.h,r.y+r.h),y=Math.min(a.x+a.w,r.x+r.w);a.x=Math.max(a.x,r.x);a.y=Math.max(a.y,r.y);a.h=h-a.y;a.w=y-a.x}"absolute"==x.position&&(e=!0);b=b.parentNode}var A=a.x,p=a.y,C="w"in a?a.w:a.w=a.width,w="h"in a?a.h:(l.deprecated("place.around: dijit/place.__Rectangle: { x:"+A+", y:"+p+", height:"+a.height+", width:"+C+" } has been deprecated.  Please use { x:"+A+", y:"+p+", h:"+a.height+", w:"+C+" }","","2.0"),a.h=a.height),G=[];q.forEach(f,function(a){var e=t;switch(a){case "above-centered":d("TM","BM");
break;case "below-centered":d("BM","TM");break;case "after-centered":e=!e;case "before-centered":d(e?"ML":"MR",e?"MR":"ML");break;case "after":e=!e;case "before":d(e?"TL":"TR",e?"TR":"TL");d(e?"BL":"BR",e?"BR":"BL");break;case "below-alt":e=!e;case "below":d(e?"BL":"BR",e?"TL":"TR");d(e?"BR":"BL",e?"TR":"TL");break;case "above-alt":e=!e;case "above":d(e?"TL":"TR",e?"BL":"BR");d(e?"TR":"TL",e?"BR":"BL");break;default:d(a.aroundCorner,a.corner)}});c=g(c,G,k,{w:C,h:w});c.aroundNodePos=a;return c}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(q,n,m,l,f){var h=new q,k;m(function(){var g=f.getBox();h._rlh=n(window,"resize",function(){var c=f.getBox();if(g.h!=c.h||g.w!=c.w)g=c,h.emit("resize")});if(8==l("ie")){var c=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=c&&(c=screen.deviceXDPI,h.emit("resize"))},500)}l("ios")&&(n(document,"focusin",function(c){k=c.target}),n(document,"focusout",function(c){k=null}))});h.getEffectiveBox=
function(g){g=f.getBox(g);var c=k&&k.tagName&&k.tagName.toLowerCase();l("ios")&&k&&!k.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(k.type))&&(g.h*=0==orientation||180==orientation?.66:.4,c=k.getBoundingClientRect(),g.h=Math.max(g.h,c.top+c.height));return g};return h})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(q,n,m,l,f,h,
k,g){g.add("config-bgIframe",(g("ie")||g("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var c=new function(){var c=[];this.pop=function(){var b;c.length?(b=c.pop(),b.style.display=""):(9>g("ie")?(b=m.dojoBlankHtmlUrl||q.toUrl("dojo/resources/blank.html")||'javascript:""',b=document.createElement("\x3ciframe src\x3d'"+b+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(b=l.create("iframe"),b.src='javascript:""',
b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),f.set(b,"opacity",.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";c.push(b)}};n.BackgroundIframe=function(d){if(!d.id)throw Error("no id");if(g("config-bgIframe")){var b=this.iframe=c.pop();d.appendChild(b);7>g("ie")||g("quirks")?(this.resize(d),this._conn=k(d,"resize",h.hitch(this,"resize",d))):f.set(b,{width:"100%",height:"100%"})}};h.extend(n.BackgroundIframe,{resize:function(c){this.iframe&&f.set(this.iframe,
{width:c.offsetWidth+"px",height:c.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),c.push(this.iframe),delete this.iframe)}});return n.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(q,n,m,l){return q("dijit.DropDownMenu",l,{templateString:m,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},
_onDownArrow:function(){this.focusNext()},_onRightArrow:function(f){this._moveToPopup(f);f.stopPropagation();f.preventDefault()},_onLeftArrow:function(f){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else f.stopPropagation(),f.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(q,n,m,l,f,h,k,g,c,d,b,y,t,w,u){return n("dijit._MenuBase",[y,u,w,t],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){f.toggle(this.domNode,"dijitMenuActive",a);f.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var e=b.byNode(a);return a.parentNode==this.containerNode&&e&&e.focus},postCreate:function(){var a=this,e="string"==typeof this.childSelector?this.childSelector:h.hitch(this,"childSelector");this.own(g(this.containerNode,g.selector(e,k.enter),function(){a.onItemHover(b.byNode(this))}),g(this.containerNode,g.selector(e,k.leave),function(){a.onItemUnhover(b.byNode(this))}),g(this.containerNode,g.selector(e,d),function(e){a.onItemClick(b.byNode(this),e);e.stopPropagation()}),
g(this.containerNode,g.selector(e,"focusin"),function(){a._onItemFocus(b.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,e,b,c){this.inherited(arguments);if(a&&(-1==c||a.popup&&1==c))this.onItemClick(a,e)},_keyboardSearchCompare:function(a,e){return a.shortcutKey?e==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),!a.popup||a.disabled||this.hover_timer||(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,e){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;a.popup?(this.set("selected",a),this.set("activated",!0),e=/^key/.test(e._origType||
e.type)||0==e.clientX&&0==e.clientY,this._openItemPopup(a,e)):(this.onExecute(),a._onClick?a._onClick(e):a.onClick(e))},_openItemPopup:function(a,e){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var b=a.popup;b.parentMenu=this;this.own(this._mouseoverHandle=g.once(b.domNode,"mouseover",h.hitch(this,"_onPopupHover")));var c=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){e&&
c.focusChild(a);c._cleanUp()},onExecute:h.hitch(this,"_cleanUp",!0),onClose:function(){c._mouseoverHandle&&(c._mouseoverHandle.remove(),delete c._mouseoverHandle)}},e);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(l.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(q,n,m,l,f,h,k,g,c,d,b,y){n=n("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);q.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(b){this.watch(b,h.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(b){if(!this.disabled)switch(b.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(a){c=c.concat(q.map(c,function(e){return e+a}),"dijit"+a)}var c=this.baseClass.split(" ");
this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d);this.state&&b(this.state);this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var d=this.stateNode||this.domNode,a={};q.forEach(d.className.split(" "),function(e){a[e]=!0});"_stateClasses"in this&&q.forEach(this._stateClasses,function(e){delete a[e]});q.forEach(c,
function(e){a[e]=!0});var e=[],r;for(r in a)e.push(r);d.className=e.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(b,c,d){function a(a){l.toggle(b,c+"Active",a)}if(!this.disabled&&!this.readOnly)switch(d.type){case "mouseover":case "MSPointerOver":case "pointerover":l.toggle(b,c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":l.toggle(b,c+"Hover",!1);a(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":a(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":a(!1);break;case "focus":case "focusin":l.toggle(b,c+"Focused",!0);break;case "blur":case "focusout":l.toggle(b,c+"Focused",!1)}},_trackMouseState:function(b,c){b._cssState=c}});g(function(){function t(a,e,b){if(!b||!m.isDescendant(b,e))for(;e&&e!=b;e=e.parentNode)if(e._cssState){var c=y.getEnclosingWidget(e);c&&(e==c.domNode?c._cssMouseEvent(a):c._subnodeCssMouseEvent(e,e._cssState,a))}}var g=d.body(),f;k(g,
c.over,function(a){t(a,a.target,a.relatedTarget)});k(g,c.out,function(a){t(a,a.target,a.relatedTarget)});k(g,b.press,function(a){f=a.target;t(a,f)});k(g,b.release,function(a){t(a,f);f=null});k(g,"focusin, focusout",function(a){var e=a.target;if(e._cssState&&!e.getAttribute("widgetId")){var b=y.getEnclosingWidget(e);b&&b._subnodeCssMouseEvent(e,e._cssState,a)}})});return n})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(q,n,m,l,f,h,k,g,c,d){return n("dijit._KeyNavContainer",[c,d,g],{connectKeyNavHandlers:function(b,c){var d=this._keyNavCodes={},g=h.hitch(this,"focusPrev"),k=h.hitch(this,"focusNext");q.forEach(b,function(a){d[a]=g});q.forEach(c,function(a){d[a]=k});d[f.HOME]=h.hitch(this,"focusFirstChild");d[f.END]=h.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){l.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);q.forEach(this.getChildren(),
h.hitch(this,"_startupChild"))},addChild:function(b,c){this.inherited(arguments);this._startupChild(b)},_startupChild:function(b){b.set("tabIndex","-1")},_getFirst:function(){var b=this.getChildren();return b.length?b[0]:null},_getLast:function(){var b=this.getChildren();return b.length?b[b.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(b){return(b=
k.byNode(b))&&b.getParent()==this}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(q,n,m,l){return n("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(f,h){var k=this.containerNode;if(0<h){for(k=k.firstChild;0<h;)1==k.nodeType&&h--,k=k.nextSibling;k?h="before":(k=this.containerNode,h="last")}m.place(f.domNode,k,h);
this._started&&!f._started&&f.startup()},removeChild:function(f){"number"==typeof f&&(f=this.getChildren()[f]);f&&(f=f.domNode)&&f.parentNode&&f.parentNode.removeChild(f)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(f,h){var k=this.getChildren();f=q.indexOf(k,f);return k[f+h]},getIndexOfChild:function(f){return q.indexOf(this.getChildren(),f)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(q,n,m,l,f,h,k,g){return n("dijit._KeyNavMixin",g,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);m.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var c=this._keyNavCodes={};c[l.HOME]=f.hitch(this,"focusFirstChild");c[l.END]=f.hitch(this,"focusLastChild");c[this.isLeftToRight()?l.LEFT_ARROW:l.RIGHT_ARROW]=f.hitch(this,"_onLeftArrow");c[this.isLeftToRight()?l.RIGHT_ARROW:l.LEFT_ARROW]=f.hitch(this,"_onRightArrow");c[l.UP_ARROW]=f.hitch(this,
"_onUpArrow");c[l.DOWN_ARROW]=f.hitch(this,"_onDownArrow")}var d=this,c="string"==typeof this.childSelector?this.childSelector:f.hitch(this,"childSelector");this.own(h(this.domNode,"keypress",f.hitch(this,"_onContainerKeypress")),h(this.domNode,"keydown",f.hitch(this,"_onContainerKeydown")),h(this.domNode,"focus",f.hitch(this,"_onContainerFocus")),h(this.containerNode,h.selector(c,"focusin"),function(b){d._onChildFocus(k.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(c,d){c&&(this.focusedChild&&c!==this.focusedChild&&this._onChildBlur(this.focusedChild),
c.set("tabIndex",this.tabIndex),c.focus(d?"end":"start"))},_onContainerFocus:function(c){c.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){m.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(c){m.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(c){c&&c!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),c.set("tabIndex",this.tabIndex),this.lastFocused=c,this._set("focusedChild",c))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(c,d,b,g){c&&this.focusChild(c)},_keyboardSearchCompare:function(c,d){var b=c.domNode;c=(c.label||(b.focusNode?b.focusNode.label:"")||b.innerText||b.textContent||"").replace(/^\s+/,"").substr(0,d.length).toLowerCase();return d.length&&c==d?-1:0},_isFormElement:function(c){return"INPUT"===
c.tagName||"TEXTAREA"===c.tagName||"SELECT"===c.tagName||"BUTTON"===c.tagName},_onContainerKeydown:function(c){if(!this._isFormElement(document.activeElement)){var d=this._keyNavCodes[c.keyCode];d?(d(c,this.focusedChild),c.stopPropagation(),c.preventDefault(),this._searchString=""):c.keyCode!=l.SPACE||!this._searchTimer||c.ctrlKey||c.altKey||c.metaKey||(c.stopImmediatePropagation(),c.preventDefault(),this._keyboardSearch(c," "))}},_onContainerKeypress:function(c){this._isFormElement(document.activeElement)||
c.charCode<=l.SPACE||c.ctrlKey||c.altKey||c.metaKey||(c.preventDefault(),c.stopPropagation(),this._keyboardSearch(c,String.fromCharCode(c.charCode).toLowerCase()))},_keyboardSearch:function(c,d){var b=null,g,t=0;f.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=d;var c=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;g=this._searchString.substr(0,c);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);
var f=this.focusedChild||null;if(1==c||!f)if(f=this._getNextFocusableChild(f,1),!f)return;c=f;do{var a=this._keyboardSearchCompare(f,g);a&&0==t++&&(b=f);if(-1==a){t=-1;break}f=this._getNextFocusableChild(f,1)}while(f&&f!=c)})();this.onKeyboardSearch(b,c,g,t)},_onChildBlur:function(){},_getNextFocusableChild:function(c,d){var b=c;do{if(c)c=this._getNext(c,d);else if(c=this[0<d?"_getFirst":"_getLast"](),!c)break;if(null!=c&&c!=b&&c.isFocusable())return c}while(c!=b);return null},_getFirst:function(){return null},
_getLast:function(){return null},_getNext:function(c,d){if(c)for(c=c.domNode;c;)if((c=c[0>d?"previousSibling":"nextSibling"])&&"getAttribute"in c){var b=k.byNode(c);if(b)return b}return null}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(q,n,m,l,f,h,k,g){var c=n("dijit._TemplatedMixin",g,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,
_stringRepl:function(c){var b=this.declaredClass,d=this;return k.substitute(c,this,function(c,g){"!"==g.charAt(0)&&(c=l.getObject(g.substr(1),!1,d));if("undefined"==typeof c)throw Error(b+" template:"+g);return null==c?"":"!"==g.charAt(0)?c:this._escapeValue(""+c)},this)},_escapeValue:function(c){return c.replace(/["'<>&]/g,function(b){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[b]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=q(this.templatePath,{sanitize:!0}));var d=c.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(l.isString(d)){if(b=m.toDom(this._stringRepl(d),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+d);}else b=d.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(c){var b=this.containerNode;if(c&&b)for(;c.hasChildNodes();)b.appendChild(c.firstChild)}});
c._templateCache={};c.getCachedTemplate=function(d,b,g){var f=c._templateCache,h=d,l=f[h];if(l){try{if(!l.ownerDocument||l.ownerDocument==(g||document))return l}catch(a){}m.destroy(l)}d=k.trim(d);if(b||d.match(/\$\{([^\}]+)\}/g))return f[h]=d;b=m.toDom(d,g);if(1!=b.nodeType)throw Error("Invalid template: "+d);return f[h]=b};h("ie")&&f(window,"unload",function(){var d=c._templateCache,b;for(b in d){var g=d[b];"object"==typeof g&&m.destroy(g);delete d[b]}});return c})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(q){return q.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(q,n,m,l,f,h,k,g,c){var d=f.delegate(g,{mouseenter:h.enter,mouseleave:h.leave,keypress:m._keypress}),b;m=l("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(b){for(var c=b;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(b,c){return b.getAttribute(c)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==b)break;for(;!c.nextSibling;)if(c=c.parentNode,c==b)return;c=c.nextSibling}},_processTemplateNode:function(b,c,d){var g=!0,a=this.attachScope||this,e=c(b,"dojoAttachPoint")||c(b,"data-dojo-attach-point");if(e)for(var r=e.split(/\s*,\s*/);e=
r.shift();)f.isArray(a[e])?a[e].push(b):a[e]=b,g="containerNode"!=e,this._attachPoints.push(e);if(c=c(b,"dojoAttachEvent")||c(b,"data-dojo-attach-event"))for(e=c.split(/\s*,\s*/),r=f.trim;c=e.shift();)if(c){var k=null;-1!=c.indexOf(":")?(k=c.split(":"),c=r(k[0]),k=r(k[1])):c=r(c);k||(k=c);this._attachEvents.push(d(b,c,f.hitch(a,k)))}return g},_attach:function(c,g,f){g=g.replace(/^on/,"").toLowerCase();g="dijitclick"==g?b||(b=q("./a11yclick")):d[g]||g;return k(c,g,f)},_detachTemplateNodes:function(){var b=
this.attachScope||this;n.forEach(this._attachPoints,function(c){delete b[c]});this._attachPoints=[];n.forEach(this._attachEvents,function(b){b.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});f.extend(c,{dojoAttachEvent:"",dojoAttachPoint:""});return m})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(q,n,m,l,f,h,k,g,c,d,b,y){k=q("dijit.MenuItem"+(h("dojo-bidi")?"_NoBidi":""),[g,c,d,b],{templateString:y,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(b){this._set("label",b);var c="",d;d=b.search(/{\S}/);if(0<=d){var c=b.charAt(d+1),a=b.substr(0,d);b=b.substr(d+3);d=a+c+b;b=a+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+c+"\x3c/span\x3e"+b}else d=b;this.domNode.setAttribute("aria-label",d+" "+this.accelKey);this.containerNode.innerHTML=b;this._set("shortcutKey",c)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(b){!b||"label"in this.params||this._set("label",b.innerHTML)},buildRendering:function(){this.inherited(arguments);m.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&m.set(this.accelKeyNode,"id",this.id+"_accel");n.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==h("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(t){}},_setSelected:function(b){l.toggle(this.domNode,
"dijitMenuItemSelected",b)},setLabel:function(b){f.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},setDisabled:function(b){f.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",b)},_setDisabledAttr:function(b){this.focusNode.setAttribute("aria-disabled",b?"true":"false");this._set("disabled",b)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=
b?"":"none",this.accelKeyNode.innerHTML=b,m.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});h("dojo-bidi")&&(k=q("dijit.MenuItem",k,{_setLabelAttr:function(b){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return k})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(q,n){return q("dijit._Contained",null,{_getSibling:function(m){var l=this.getParent();return l&&l._getSiblingOfChild&&l._getSiblingOfChild(this,
"previous"==m?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var m=this.getParent();return m&&m.getIndexOfChild?m.getIndexOfChild(this):-1}})})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(q,n,m,l,f,h){q=q(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",
polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var f=m.map(this.polygons,function(c){return c.toJson()}),g={};g.polygons=l.toJson(f);f=this.polygons[0].spatialReference;g.sr=f.wkid?f.wkid:l.toJson(f.toJson());this.lengthUnit&&(g.lengthUnit=this.lengthUnit);this.areaUnit&&(n.isString(this.areaUnit)?g.areaUnit=l.toJson({areaUnit:this.areaUnit}):g.areaUnit=this.areaUnit);this.calculationType&&(g.calculationType=this.calculationType);return g}});f("extend-esri")&&n.setObject("tasks.AreasAndLengthsParameters",
q,h);return q})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(q,n,m,l,f,h){q=q(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var f=m.map(this.polylines,function(c){return c.toJson()}),g={};g.polylines=l.toJson(f);f=this.polylines[0].spatialReference;g.sr=f.wkid?f.wkid:l.toJson(f.toJson());this.lengthUnit&&
(g.lengthUnit=this.lengthUnit);this.geodesic&&(g.geodesic=this.geodesic);this.calculationType&&(g.calculationType=this.calculationType);return g}});f("extend-esri")&&n.setObject("tasks.LengthsParameters",q,h);return q})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(q,n,m,l,f,h,k,g,c,d,b,y,t,w,u){q=q(d,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=n.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=
a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);
this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJson());
return{geometryType:u.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var e=u.getGeometryType(b);a=a.geometries;var d=[],g={spatialReference:c.toJson()},f=n.mixin;m.forEach(a,function(a,b){d[b]=new e(f(a,g))});return d},_toProjectGeometry:function(a){var c=a.spatialReference.toJson();return a instanceof b?new t({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:c}):new y({paths:[[].concat(a.points)],spatialReference:c})},
_fromProjectedGeometry:function(a,c,d){return"esriGeometryEnvelope"===c?(a=a.rings[0],new b(a[0][0],a[0][1],a[2][0],a[2][1],d)):new w({points:a.paths[0],spatialReference:d.toJson()})},project:function(a,b,d,k){var e=n.mixin({},this._url.query,{f:"json"}),r;a.geometries?(k=d,d=b,b=a.outSR,r=a.geometries[0],e=n.mixin(e,a.toJson())):(r=a[0],e=n.mixin(e,{outSR:b.wkid||l.toJson(b.toJson()),inSR:r.spatialReference.wkid||l.toJson(r.spatialReference.toJson()),geometries:l.toJson(this._encodeGeometries(a))}));
var h=u.getJsonType(r),p=this._projectHandler,m=this._errorHandler,x=new f(c._dfdCanceller);x._pendingDfd=g({url:this._url.path+"/project",content:e,callbackParamName:"callback",load:function(a,c){p(a,c,h,b,d,k,x)},error:function(a){m(a,k,x)}});return x},_projectHandler:function(a,b,c,d,g,f,k){try{var e=this._decodeGeometries(a,c,d);this._successHandler([e],"onProjectComplete",g,k)}catch(C){this._errorHandler(C,f,k)}},onProjectComplete:function(){},simplify:function(a,b,d){var e=a[0].spatialReference,
r=n.mixin({},this._url.query,{f:"json",sr:e.wkid?e.wkid:l.toJson(e.toJson()),geometries:l.toJson(this._encodeGeometries(a))}),k=u.getJsonType(a[0]),h=this._simplifyHandler,p=this._errorHandler,m=new f(c._dfdCanceller);m._pendingDfd=g({url:this._url.path+"/simplify",content:r,callbackParamName:"callback",load:function(a,c){h(a,c,k,e,b,d,m)},error:function(a){p(a,d,m)}});return m},_simplifyHandler:function(a,b,c,d,g,f,k){try{var e=this._decodeGeometries(a,c,d);this._successHandler([e],"onSimplifyComplete",
g,k)}catch(C){this._errorHandler(C,f,k)}},onSimplifyComplete:function(){},convexHull:function(a,b,d){var e=a[0].spatialReference;a=n.mixin({},this._url.query,{f:"json",sr:l.toJson(e.toJson()),geometries:l.toJson(this._encodeGeometries(a))});var k=this._convexHullHandler,r=this._errorHandler,h=new f(c._dfdCanceller);h._pendingDfd=g({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(a,c){k(a,c,e,b,d,h)},error:function(a){r(a,d,h)}});return h},_convexHullHandler:function(a,
b,c,d,g,f){try{var e=u.fromJson(a.geometry).setSpatialReference(c);this._successHandler([e],"onConvexHullComplete",d,f)}catch(p){this._errorHandler(p,g,f)}},onConvexHullComplete:function(){},union:function(a,b,d){var e=a[0].spatialReference;a=n.mixin({},this._url.query,{f:"json",sr:l.toJson(e.toJson()),geometries:l.toJson(this._encodeGeometries(a))});var k=this._unionHandler,r=this._errorHandler,h=new f(c._dfdCanceller);h._pendingDfd=g({url:this._url.path+"/union",content:a,callbackParamName:"callback",
load:function(a,c){k(a,c,e,b,d,h)},error:function(a){r(a,d,h)}});return h},_unionHandler:function(a,b,c,d,g,f){try{var e=u.fromJson(a.geometry).setSpatialReference(c);this._successHandler([e],"onUnionComplete",d,f)}catch(p){this._errorHandler(p,g,f)}},onUnionComplete:function(){},autoComplete:function(a,b,d,k){var e=a[0].spatialReference;a=n.mixin({},this._url.query,{f:"json",sr:l.toJson(e.toJson()),polygons:l.toJson(this._encodeGeometries(a).geometries),polylines:l.toJson(this._encodeGeometries(b).geometries)});
var h=this._autoCompleteHandler,r=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,e,d,k,p)},error:function(a){r(a,k,p)}});return p},_autoCompleteHandler:function(a,b,c,d,g,f){try{var e=a.geometries;a=[];var p,k=e.length;for(p=0;p<k;p++)a[p]=new t({spatialReference:c,rings:e[p].rings});this._successHandler([a],"onAutoCompleteComplete",d,f)}catch(E){this._errorHandler(E,g,f)}},onAutoCompleteComplete:function(){},
reshape:function(a,b,d,k){var e=a.spatialReference;a=n.mixin({},this._url.query,{f:"json",sr:l.toJson(e.toJson()),target:l.toJson({geometryType:u.getJsonType(a),geometry:a.toJson()}),reshaper:l.toJson(b.toJson())});var h=this._reshapeHandler,r=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,e,d,k,p)},error:function(a){r(a,k,p)}});return p},_reshapeHandler:function(a,b,c,d,g,f){try{var e=u.fromJson(a.geometry).setSpatialReference(c);
this._successHandler([e],"onReshapeComplete",d,f)}catch(p){this._errorHandler(p,g,f)}},onReshapeComplete:function(){},cut:function(a,b,d,k){var e=a[0].spatialReference,h=m.map(a,function(a){return a.toJson()});a=n.mixin({},this._url.query,{f:"json",sr:l.toJson(e.toJson()),target:l.toJson({geometryType:u.getJsonType(a[0]),geometries:h}),cutter:l.toJson(b.toJson())});var r=this._cutHandler,p=this._errorHandler,t=new f(c._dfdCanceller);t._pendingDfd=g({url:this._url.path+"/cut",content:a,callbackParamName:"callback",
load:function(a,b){r(a,b,e,d,k,t)},error:function(a){p(a,k,t)}});return t},_cutHandler:function(a,b,c,d,g,f){try{var e=a.geometries,p={};p.cutIndexes=a.cutIndexes;p.geometries=[];m.forEach(e,function(a){p.geometries.push(u.fromJson(a).setSpatialReference(c))});this._successHandler([p],"onCutComplete",d,f)}catch(C){this._errorHandler(C,g,f)}},onCutComplete:function(){},intersect:function(a,b,d,k){var e=a[0].spatialReference;a=n.mixin({},this._url.query,{f:"json",sr:l.toJson(e.toJson()),geometries:l.toJson(this._encodeGeometries(a)),
geometry:l.toJson({geometryType:u.getJsonType(b),geometry:b.toJson()})});var h=this._intersectHandler,r=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,e,d,k,p)},error:function(a){r(a,k,p)}});return p},_intersectHandler:function(a,b,c,d,g,f){try{var e=[];m.forEach(a.geometries,function(a){e.push(u.fromJson(a).setSpatialReference(c))});this._successHandler([e],"onIntersectComplete",d,f)}catch(p){this._errorHandler(p,
g,f)}},onIntersectComplete:function(){},difference:function(a,b,d,k){var e=a[0].spatialReference;a=n.mixin({},this._url.query,{f:"json",sr:l.toJson(e.toJson()),geometries:l.toJson(this._encodeGeometries(a)),geometry:l.toJson({geometryType:u.getJsonType(b),geometry:b.toJson()})});var h=this._differenceHandler,r=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(a,b){h(a,b,e,d,k,p)},error:function(a){r(a,
k,p)}});return p},_differenceHandler:function(a,b,c,d,g,f){try{var e=[];m.forEach(a.geometries,function(a){e.push(u.fromJson(a).setSpatialReference(c))});this._successHandler([e],"onDifferenceComplete",d,f)}catch(p){this._errorHandler(p,g,f)}},onDifferenceComplete:function(){},buffer:function(a,b,d){var e=n.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.outSpatialReference||a.geometries[0].spatialReference,h=this._bufferHandler,l=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+
"/buffer",content:e,callbackParamName:"callback",load:function(a,c){h(a,c,k,b,d,p)},error:function(a){l(a,d,p)}});return p},_bufferHandler:function(a,b,c,d,f,g){try{var e=a.geometries;a=[];var k,h=e.length;for(k=0;k<h;k++)a[k]=new t({spatialReference:c,rings:e[k].rings});this._successHandler([a],"onBufferComplete",d,g)}catch(E){this._errorHandler(E,f,g)}},onBufferComplete:function(){},areasAndLengths:function(a,b,d){a=n.mixin({},this._url.query,{f:"json"},a.toJson());var e=this._areasAndLengthsHandler,
k=this._errorHandler,h=new f(c._dfdCanceller);h._pendingDfd=g({url:this._url.path+"/areasAndLengths",content:a,callbackParamName:"callback",load:function(a,c){e(a,c,b,d,h)},error:function(a){k(a,d,h)}});return h},_areasAndLengthsHandler:function(a,b,c,d,g){try{this._successHandler([a],"onAreasAndLengthsComplete",c,g)}catch(v){this._errorHandler(v,d,g)}},onAreasAndLengthsComplete:function(){},lengths:function(a,b,d){a=n.mixin({},this._url.query,{f:"json"},a.toJson());var e=this._lengthsHandler,k=this._errorHandler,
h=new f(c._dfdCanceller);h._pendingDfd=g({url:this._url.path+"/lengths",content:a,callbackParamName:"callback",load:function(a,c){e(a,c,b,d,h)},error:function(a){k(a,d,h)}});return h},_lengthsHandler:function(a,b,c,d,g){try{this._successHandler([a],"onLengthsComplete",c,g)}catch(v){this._errorHandler(v,d,g)}},onLengthsComplete:function(){},labelPoints:function(a,b,d){var e=m.map(a,function(a){return a.toJson()}),k=a[0].spatialReference,e=n.mixin({},this._url.query,{f:"json",sr:k.wkid?k.wkid:l.toJson(k.toJson()),
polygons:l.toJson(e)}),h=this._labelPointsHandler,r=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/labelPoints",content:e,callbackParamName:"callback",load:function(c,e){h(c,e,a,k,b,d,p)},error:function(a){r(a,d,p)}});return p},_labelPointsHandler:function(a,b,c,d,g,f,k){try{var e=[];m.forEach(a.labelPoints,function(a){e.push(u.fromJson(a).setSpatialReference(d))});this._successHandler([e],"onLabelPointsComplete",g,k)}catch(C){this._errorHandler(C,f,k)}},onLabelPointsComplete:function(){},
relation:function(a,b,d){a=n.mixin({},this._url.query,{f:"json"},a.toJson());var e=this._relationHandler,k=this._errorHandler,h=new f(c._dfdCanceller);h._pendingDfd=g({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(a,c){e(a,c,b,d,h)},error:function(a){k(a,d,h)}});return h},_relationHandler:function(a,b,c,d,g){try{this._successHandler([a.relations],"onRelationComplete",c,g)}catch(v){this._errorHandler(v,d,g)}},onRelationComplete:function(){},trimExtend:function(a,
b,d){var e=n.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.sr,h=this._trimExtendHandler,l=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/trimExtend",content:e,callbackParamName:"callback",load:function(a,c){h(a,c,k,b,d,p)},error:function(a){l(a,d,p)}});return p},_trimExtendHandler:function(a,b,c,d,g,f){try{var e=a.geometries;a=[];var k,h=e.length;for(k=0;k<h;k++)a[k]=new y({spatialReference:c,paths:e[k].paths});this._successHandler([a],"onTrimExtendComplete",
d,f)}catch(E){this._errorHandler(E,g,f)}},onTrimExtendComplete:function(){},densify:function(a,b,d){var e=n.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.geometries[0].spatialReference,h=this._densifyHandler,l=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/densify",content:e,callbackParamName:"callback",load:function(a,c){h(a,c,k,b,d,p)},error:function(a){l(a,d,p)}});return p},_densifyHandler:function(a,b,c,d,g,f){try{var e=[];m.forEach(a.geometries,function(a){e.push(u.fromJson(a).setSpatialReference(c))});
this._successHandler([e],"onDensifyComplete",d,f)}catch(p){this._errorHandler(p,g,f)}},onDensifyComplete:function(){},generalize:function(a,b,d){var e=n.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.geometries[0].spatialReference,h=this._generalizeHandler,l=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/generalize",content:e,callbackParamName:"callback",load:function(a,c){h(a,c,k,b,d,p)},error:function(a){l(a,d,p)}});return p},_generalizeHandler:function(a,
b,c,d,g,f){try{var e=[];m.forEach(a.geometries,function(a){e.push(u.fromJson(a).setSpatialReference(c))});this._successHandler([e],"onGeneralizeComplete",d,f)}catch(p){this._errorHandler(p,g,f)}},onGeneralizeComplete:function(){},offset:function(a,b,d){var e=n.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.geometries[0].spatialReference,h=this._offsetHandler,l=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=g({url:this._url.path+"/offset",content:e,callbackParamName:"callback",load:function(a,
c){h(a,c,k,b,d,p)},error:function(a){l(a,d,p)}});return p},_offsetHandler:function(a,b,c,d,g,f){try{var e=[];m.forEach(a.geometries,function(a){e.push(u.fromJson(a).setSpatialReference(c))});this._successHandler([e],"onOffsetComplete",d,f)}catch(p){this._errorHandler(p,g,f)}},onOffsetComplete:function(){},distance:function(a,b,d){var e=n.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.geometry1.spatialReference,h=this._distanceHandler,l=this._errorHandler,p=new f(c._dfdCanceller);p._pendingDfd=
g({url:this._url.path+"/distance",content:e,callbackParamName:"callback",load:function(a,c){h(a,c,k,b,d,p)},error:function(a){l(a,d,p)}});return p},_distanceHandler:function(a,b,c,d,g,f){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",d,f)}catch(A){this._errorHandler(A,g,f)}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,b,d){var e={};n.isObject(a.sr)?e.sr=a.sr.wkid||l.toJson(a.sr.toJson()):e.sr=a.sr;e.coordinates=l.toJson(a.coordinates);e.conversionType=a.conversionType||
"MGRS";e.conversionMode=a.conversionMode;e.numOfDigits=a.numOfDigits;e.rounding=a.rounding;e.addSpaces=a.addSpaces;a=n.mixin({},this._url.query,{f:"json"},e);var k=this._toGeoCoordinateHandler,h=this._errorHandler,m=new f(c._dfdCanceller);m._pendingDfd=g({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,c){k(a,c,b,d,m)},error:function(a){h(a,d,m)}});return m},_toGeoCoordinateHandler:function(a,b,c,d,g){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",
c,g)}catch(v){this._errorHandler(v,d,g)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(a,b,d){var e={};n.isObject(a.sr)?e.sr=a.sr.wkid||l.toJson(a.sr.toJson()):e.sr=a.sr;e.strings=l.toJson(a.strings);e.conversionType=a.conversionType||"MGRS";e.conversionMode=a.conversionMode;a=n.mixin({},this._url.query,{f:"json"},e);var k=this._fromGeoCoordinateHandler,h=this._errorHandler,m=new f(c._dfdCanceller);m._pendingDfd=g({url:this._url.path+"/fromGeoCoordinateString",content:a,
callbackParamName:"callback",load:function(a,c){k(a,c,b,d,m)},error:function(a){h(a,d,m)}});return m},_fromGeoCoordinateHandler:function(a,b,c,d,g){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",c,g)}catch(v){this._errorHandler(v,d,g)}},onFromGeoCoordinateStringComplete:function(){}});n.mixin(q,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});h("extend-esri")&&n.setObject("tasks.GeometryService",q,k);return q})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(q,n,m,l,f,h,k,g){q=q(g,{declaredClass:"esri.tasks._Task",
_eventMap:{error:["error"],complete:["result"]},constructor:function(c,d){c&&n.isString(c)&&(this._url=k.urlToObject(this.url=c));d&&d.requestOptions&&(this.requestOptions=d.requestOptions);this.normalization=!0;this._errorHandler=n.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var c=this._url,d=/^http:/i;this.url&&(this.url=this.url.replace(d,"https:"));c&&c.path&&(c.path=c.path.replace(d,"https:"))},_encode:function(c,d,b){var g,f,k={},h,a;for(h in c)if("declaredClass"!==
h&&(g=c[h],f=typeof g,null!==g&&void 0!==g&&"function"!==f))if(n.isArray(g))for(k[h]=[],a=g.length,f=0;f<a;f++)k[h][f]=this._encode(g[f]);else"object"===f?g.toJson&&(f=g.toJson(b&&b[h]),"esri.tasks.FeatureSet"===g.declaredClass&&f.spatialReference&&(f.sr=f.spatialReference,delete f.spatialReference),k[h]=d?f:m.toJson(f)):k[h]=g;return k},_successHandler:function(c,d,b,g){d&&this[d].apply(this,c);b&&b.apply(null,c);g&&h._resDfd(g,c)},_errorHandler:function(c,d,b){this.onError(c);d&&d(c);b&&b.errback(c)},
setNormalization:function(c){this.normalization=c},onError:function(){}});l("extend-esri")&&(f.Task=q);return q})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(q,n,m,l){var f=function(f,g){return f-g},h={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(f){var g=String(f),c=g.match(h._reNumber);f={integer:0,fractional:0};c&&c[1]?(f.integer=c[1].split("").length,f.fractional=c[3]?c[3].split("").length:0):-1<g.toLowerCase().indexOf("e")&&
(c=g.split("e"),g=c[0],c=c[1],g&&c&&(g=Number(g),c=Number(c),(f=0<c)||(c=Math.abs(c)),g=h.getDigits(g),f?(g.integer+=c,g.fractional=c>g.fractional?0:g.fractional-c):(g.fractional+=c,g.integer=c>g.integer?1:g.integer-c),f=g));return f},getFixedNumbers:function(f,g){var c;c=Number(f.toFixed(g));c<f?f=c+1/Math.pow(10,g):(f=c,c-=1/Math.pow(10,g));c=Number(c.toFixed(g));f=Number(f.toFixed(g));return[c,f]},getPctChange:function(f,g,c,d){var b={prev:null,next:null},h;null!=c&&(h=f-c,b.prev=Math.floor(Math.abs(100*
(g-c-h)/h)));null!=d&&(h=d-f,b.next=Math.floor(Math.abs(100*(d-g-h)/h)));return b},round:function(k,g){k=k.slice(0);var c,d,b,l,m,n,q,a,e=g&&null!=g.tolerance?g.tolerance:2,r=g&&g.indexes,x=g&&null!=g.strictBounds?g.strictBounds:!1;if(r)r.sort(f);else for(r=[],m=0;m<k.length;m++)r.push(m);for(m=0;m<r.length;m++)if(a=r[m],g=k[a],c=0===a?null:k[a-1],d=a===k.length-1?null:k[a+1],b=h.getDigits(g),b=b.fractional){n=0;for(q=!1;n<=b&&!q;)l=h.getFixedNumbers(g,n),l=x&&0===m?l[1]:l[0],q=h.hasMinimalChange(g,
l,c,d,e),n++;q&&(k[a]=l)}return k},hasMinimalChange:function(f,g,c,d,b){f=h.getPctChange(f,g,c,d);g=null==f.prev||f.prev<=b;c=null==f.next||f.next<=b;return g&&c||f.prev+f.next<=2*b},_reAllZeros:new RegExp("\\"+m.decimal+"0+$","g"),_reSomeZeros:/(\d)0*$/g,format:function(f,g){g=g||{places:20,round:-1};(f=n.format(f,g))&&(f=f.replace(h._reSomeZeros,"$1").replace(h._reAllZeros,""));return f}};q("extend-esri")&&(l.numberUtils=h);return h})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(q,n,m,l,f){return m("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var h=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);f.parse(h,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,
contextRequire:this.contextRequire,scope:"dojo"}).then(l.hitch(this,function(f){this._startupWidgets=f;for(var g=0;g<f.length;g++)this._processTemplateNode(f[g],function(c,d){return c[d]},function(c,d,b){return d in c?c.connect(c,d,b):c.on(d,b,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(f,k,g){return k(f,"dojoType")||k(f,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){q.forEach(this._startupWidgets,function(f){f&&!f._started&&f.startup&&f.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(q,
n,m,l,f,h,k,g,c,d,b,y,t,w,u,a){function e(a){return eval("("+a+")")}function r(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<z){var b=a._nameCaseMap={},e;for(e in c)"_"!==e.charAt(0)&&(b[e.toLowerCase()]=e);b._extendCnt=z}return b}function x(a,b){b||(b=q);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),e=a.join();if(!c[e]){for(var d=[],f=0,g=a.length;f<g;f++){var h=a[f];d[d.length]=c[h]=c[h]||m.getObject(h)||~h.indexOf("/")&&b(h)}a=d.shift();c[e]=d.length?a.createSubclass?a.createSubclass(d):
a.extend.apply(a,d):a}return c[e]}new Date("X");var z=0;c.after(m,"extend",function(){z++},!0);var v={_clearCache:function(){z++;_ctorMap={}},_functionFromScript:function(a,b){var c="",e="",d=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");d=(d||"").split(/\s*,\s*/);b&&b.length&&l.forEach(b.split(/\s*,\s*/),function(a){c+="with("+a+"){";e+="}"});return new Function(d,c+a.innerHTML+e)},instantiate:function(a,b,c){b=b||{};c=c||{};var e=(c.scope||n._scopeName)+"Type",d="data-"+
(c.scope||n._scopeName)+"-",f=d+"type",g=d+"mixins",h=[];l.forEach(a,function(a){var c=e in b?b[e]:a.getAttribute(f)||a.getAttribute(e);if(c){var d=a.getAttribute(g),c=d?[c].concat(d.split(/\s*,\s*/)):[c];h.push({node:a,types:c})}});return this._instantiate(h,b,c)},_instantiate:function(a,b,c,e){function f(a){b._started||c.noStart||l.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=l.map(a,function(a){var e=a.ctor||x(a.types,c.contextRequire);if(!e)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(e,a.node,b,c,a.scripts,a.inherited)},this);return e?d(a).then(f):f(a)},construct:function(a,d,f,h,k,q){function p(a){E&&m.setObject(E,a);for(B=0;B<I.length;B++)c[I[B].advice||"after"](a,I[B].method,m.hitch(a,I[B].func),!0);for(B=0;B<H.length;B++)H[B].call(a);for(B=0;B<P.length;B++)a.watch(P[B].prop,P[B].func);for(B=0;B<N.length;B++)u(a,N[B].event,N[B].func);return a}var y=a&&a.prototype;h=h||{};var x={};h.defaults&&m.mixin(x,h.defaults);q&&m.mixin(x,q);var v;
t("dom-attributes-explicit")?v=d.attributes:t("dom-attributes-specified-flag")?v=l.filter(d.attributes,function(a){return a.specified}):(q=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),v=l.map(q.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):d.getAttributeNode(b).value}}));var A=h.scope||n._scopeName;
q="data-"+A+"-";var z={};"dojo"!==A&&(z[q+"props"]="data-dojo-props",z[q+"type"]="data-dojo-type",z[q+"mixins"]="data-dojo-mixins",z[A+"type"]="dojotype",z[q+"id"]="data-dojo-id");for(var B=0,D,A=[],E,C;D=v[B++];){var F=D.name,G=F.toLowerCase();D=D.value;switch(z[G]||G){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":C=D;break;case "data-dojo-id":case "jsid":E=D;break;case "data-dojo-attach-point":case "dojoattachpoint":x.dojoAttachPoint=D;break;case "data-dojo-attach-event":case "dojoattachevent":x.dojoAttachEvent=
D;break;case "class":x["class"]=d.className;break;case "style":x.style=d.style&&d.style.cssText;break;default:if(F in y||(F=r(a)[G]||F),F in y)switch(typeof y[F]){case "string":x[F]=D;break;case "number":x[F]=D.length?Number(D):NaN;break;case "boolean":x[F]="false"!=D.toLowerCase();break;case "function":""===D||-1!=D.search(/[^\w\.]+/i)?x[F]=new Function(D):x[F]=m.getObject(D,!1)||new Function(D);A.push(F);break;default:G=y[F],x[F]=G&&"length"in G?D?D.split(/\s*,\s*/):[]:G instanceof Date?""==D?new Date(""):
"now"==D?new Date:b.fromISOString(D):G instanceof g?n.baseUrl+D:e(D)}else x[F]=D}}for(v=0;v<A.length;v++)z=A[v].toLowerCase(),d.removeAttribute(z),d[z]=null;if(C)try{C=e.call(h.propsThis,"{"+C+"}"),m.mixin(x,C)}catch(U){throw Error(U.toString()+" in data-dojo-props\x3d'"+C+"'");}m.mixin(x,f);k||(k=a&&(a._noScript||y._noScript)?[]:w("\x3e script[type^\x3d'dojo/']",d));var I=[],H=[],P=[],N=[];if(k)for(B=0;B<k.length;B++)z=k[B],d.removeChild(z),f=z.getAttribute(q+"event")||z.getAttribute("event"),h=
z.getAttribute(q+"prop"),C=z.getAttribute(q+"method"),A=z.getAttribute(q+"advice"),v=z.getAttribute("type"),z=this._functionFromScript(z,q),f?"dojo/connect"==v?I.push({method:f,func:z}):"dojo/on"==v?N.push({event:f,func:z}):x[f]=z:"dojo/aspect"==v?I.push({method:C,advice:A,func:z}):"dojo/watch"==v?P.push({prop:h,func:z}):H.push(z);a=(k=a.markupFactory||y.markupFactory)?k(x,d,a):new a(x,d);return a.then?a.then(p):p(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,e=
c(a.parent),b={dir:b.getAttribute("dir")||e.dir,lang:b.getAttribute("lang")||e.lang,textDir:b.getAttribute(m)||e.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var e=[],d=[],f={},g=(b.scope||n._scopeName)+"Type",h="data-"+(b.scope||n._scopeName)+"-",k=h+"type",m=h+"textdir",h=h+"mixins",p=a.firstChild,r=b.inherited;if(!r){var z=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&z(a.parentNode,b)},r={dir:z(a,"dir"),lang:z(a,"lang"),textDir:z(a,m)},w;for(w in r)r[w]||
delete r[w]}w={inherited:r};for(var v,u;;)if(p)if(1!=p.nodeType)p=p.nextSibling;else if(v&&"script"==p.nodeName.toLowerCase())(r=p.getAttribute("type"))&&/^dojo\/\w/i.test(r)&&v.push(p),p=p.nextSibling;else if(u)p=p.nextSibling;else if(r=p.getAttribute(k)||p.getAttribute(g),a=p.firstChild,r||a&&(3!=a.nodeType||a.nextSibling)){u=null;if(r){var A=p.getAttribute(h);v=A?[r].concat(A.split(/\s*,\s*/)):[r];try{u=x(v,b.contextRequire)}catch(I){}u||l.forEach(v,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,
d[d.length]=a)});A=u&&!u.prototype._noScript?[]:null;w={types:v,ctor:u,parent:w,node:p,scripts:A};w.inherited=c(w);e.push(w)}else w={node:p,scripts:v,parent:w};v=A;u=p.stopParser||u&&u.prototype.stopParser&&!b.template;p=a}else p=p.nextSibling;else{if(!w||!w.node)break;p=w.node.nextSibling;u=!1;w=w.parent;v=w.scripts}var O=new y;d.length?(t("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+d.join(", ")),(b.contextRequire||q)(d,function(){O.resolve(l.filter(e,function(a){if(!a.ctor)try{a.ctor=
x(a.types,b.contextRequire)}catch(N){}for(var c=a.parent;c&&!c.types;)c=c.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):O.resolve(e);return O.promise},_require:function(a,b){a=e("{"+a.innerHTML+"}");var c=[],d=[],f=new y;b=b&&b.contextRequire||q;for(var g in a)c.push(g),d.push(a[g]);b(d,function(){for(var a=0;a<c.length;a++)m.setObject(c[a],arguments[a]);f.resolve(arguments)});
return f.promise},_scanAmd:function(a,b){var c=new y,e=c.promise;c.resolve(!0);var d=this;w("script[type\x3d'dojo/require']",a).forEach(function(a){e=e.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return e},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var c=a?h.byId(a):k.body();b=b||{};var e=b.template?{template:!0}:{},d=[],f=this;a=this._scanAmd(c,b).then(function(){return f.scan(c,b)}).then(function(a){return f._instantiate(a,e,b,!0)}).then(function(a){return d=
d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});m.mixin(d,a);return d}};n.parser=v;f.parseOnLoad&&a(100,v,"parse");return v})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(q,n){var m={};q.setObject("dojo.date.stamp",m);m.fromISOString=function(l,f){m._isoRegExp||(m._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var h=m._isoRegExp.exec(l);l=null;
if(h){h.shift();h[1]&&h[1]--;h[6]&&(h[6]*=1E3);f&&(f=new Date(f),n.forEach(n.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(c){return f["get"+c]()}),function(c,d){h[d]=h[d]||c}));l=new Date(h[0]||1970,h[1]||0,h[2]||1,h[3]||0,h[4]||0,h[5]||0,h[6]||0);100>h[0]&&l.setFullYear(h[0]||1970);var k=0,g=h[7]&&h[7].charAt(0);"Z"!=g&&(k=60*(h[8]||0)+(Number(h[9])||0),"-"!=g&&(k*=-1));g&&(k-=l.getTimezoneOffset());k&&l.setTime(l.getTime()+6E4*k)}return l};m.toISOString=function(l,
f){var h=function(c){return 10>c?"0"+c:c};f=f||{};var k=[],g=f.zulu?"getUTC":"get",c="";"time"!=f.selector&&(c=l[g+"FullYear"](),c=["0000".substr((c+"").length)+c,h(l[g+"Month"]()+1),h(l[g+"Date"]())].join("-"));k.push(c);"date"!=f.selector&&(c=[h(l[g+"Hours"]()),h(l[g+"Minutes"]()),h(l[g+"Seconds"]())].join(":"),g=l[g+"Milliseconds"](),f.milliseconds&&(c+="."+(100>g?"0":"")+h(g)),f.zulu?c+="Z":"time"!=f.selector&&(l=l.getTimezoneOffset(),f=Math.abs(l),c+=(0<l?"-":"+")+h(Math.floor(f/60))+":"+h(f%
60)),k.push(c));return k.join("T")};return m})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(q,n,m,l,f,h){return q([h,f],{_onMap:function(f){var g=this.constructor._onMap,c;g&&g.FINAL||(delete this.constructor._onMap,g=this.registerConnectEvents(),g.FINAL=!0);f=f.toLowerCase();g[f]?c=this[g[f].method]:(f=this._onCamelCase(f),this[f]&&(c=f));return c},on:function(f,g){var c=this._onMap(f),d=f.replace(/\-/g,
""),b="on"+d in this.domNode;return c||!b?this.inherited(arguments):this.own(l(this.domNode,d,g))[0]},emit:function(f,g,c){var d,b,h,k=f.toLowerCase(),l=this.constructor._onMap||this.registerConnectEvents();b=this[this._onMap(k)];g=g||{};g.target||(g.target=this);b&&l&&l[k]&&(this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},l[k].argKeys)(g),h=n.mixin({},arguments),h[2]=d,h[0]=l[k].name.replace(/^on/,""));return this.inherited(h||arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(q,n,m,l){return q("dijit.form.ToggleButton",[m,l],{baseClass:"dijitToggleButton",setChecked:function(f){n.deprecated("setChecked("+f+") is deprecated. Use set('checked',"+f+") instead.","","2.0");this.set("checked",f)}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(q,n,m,l,f,h,k,g,c,d){l("dijit-legacy-requires")&&k(0,function(){q(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});k=n("dijit.form.Button"+(l("dojo-bidi")?"_NoBidi":""),[g,c],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:d,_setValueAttr:"valueNode",_setNameAttr:function(b){this.valueNode&&this.valueNode.setAttribute("name",b)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=h.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(b){this.containerNode&&m.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(b){f.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",b)},onLabelSet:function(){this.inherited(arguments);this.showLabel||
"title"in this.params||(this.titleNode.title=h.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});l("dojo-bidi")&&(k=n("dijit.form.Button",k,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(b){this._created&&this.textDir!=b&&(this._set("textDir",b),this._setLabelAttr(this.label))}}));return k})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(q,n,m,l,f,h,k,g){n("dijit-legacy-requires")&&l(0,function(){require(["dijit/form/_FormValueWidget"])});return q("dijit.form._FormWidget",[f,k,h,g],{setDisabled:function(c){m.deprecated("setDisabled("+c+") is deprecated. Use set('disabled',"+c+") instead.","","2.0");this.set("disabled",c)},setValue:function(c){m.deprecated("dijit.form._FormWidget:setValue("+c+") is deprecated.  Use set('value',"+c+") instead.","","2.0");this.set("value",c)},getValue:function(){m.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!n("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(q,n,m,l,f,h,k,g,c,d){return n("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(m.set(this.focusNode,"disabled",b),g("trident")&&"readOnly"in this&&m.set(this.focusNode,"readonly",b||this.readOnly)):this.focusNode.setAttribute("aria-disabled",b?"true":"false");
this.valueNode&&m.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",q.forEach(f.isArray(b)?b:[b],function(b){b=this[b];g("webkit")||d.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(b){if("mouse"==b&&this.isFocusable())var d=this.own(k(this.focusNode,
"focus",function(){l.remove();d.remove()}))[0],h=g("pointer-events")?"pointerup":g("MSPointer")?"MSPointerUp":g("touch-events")?"touchend, mouseup":"mouseup",l=this.own(k(this.ownerDocumentBody,h,f.hitch(this,function(b){l.remove();d.remove();this.focused&&("touchend"==b.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){c.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=l.get(this.domNode,
"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(b){}},compare:function(b,c){return"number"==typeof b&&"number"==typeof c?isNaN(b)&&isNaN(c)?0:b-c:b>c?1:b<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(b,c){void 0!=this._lastValueReported||null!==c&&this._onChangeActive||(this._resetValue=this._lastValueReported=b);this._pendingOnChange=this._pendingOnChange||typeof b!=typeof this._lastValueReported||0!=this.compare(b,
this._lastValueReported);(this.intermediateChanges||c||void 0===c)&&this._pendingOnChange&&(this._lastValueReported=b,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(b)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},
"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(q,n,m,l){var f=q("dijit.form._ButtonMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(f){f.stopPropagation();f.preventDefault();this.disabled||this.valueNode.click(f);return!1},_onClick:function(f){if(this.disabled)return f.stopPropagation(),f.preventDefault(),!1;!1===this.onClick(f)&&f.preventDefault();var h=f.defaultPrevented;if(!h&&"submit"==this.type&&
!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var c=l.byNode(g);if(c&&"function"==typeof c._onSubmit){c._onSubmit(f);f.preventDefault();h=!0;break}}return!h},postCreate:function(){this.inherited(arguments);n.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(f){this._set("label",f);(this.containerNode||this.focusNode).innerHTML=f;this.onLabelSet()},onLabelSet:function(){}});m("dojo-bidi")&&(f=q("dijit.form._ButtonMixin",
f,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return f})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(q,n){return q("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(m){var l=this.checked;this._set("checked",!l);var f=this.inherited(arguments);this.set("checked",f?this.checked:l);return f},_setCheckedAttr:function(m,l){this._set("checked",
m);var f=this.focusNode||this.domNode;this._created&&n.get(f,"checked")!=!!m&&n.set(f,"checked",!!m);f.setAttribute(this._aria_attr,String(m));this._handleOnChange(m,l)},postCreate:function(){this.inherited(arguments);var m=this.focusNode||this.domNode;this.checked&&m.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),
function(q,n,m,l,f,h,k,g,c,d){return q("dijit.form.DropDownButton",[k,g,c],{baseClass:"dijitDropDownButton",templateString:d,_fillContent:function(){var b=this.srcNodeRef,c=this.containerNode;if(b&&c)for(;b.hasChildNodes();){var d=b.firstChild;d.hasAttribute&&(d.hasAttribute("data-dojo-type")||d.hasAttribute("dojoType")||d.hasAttribute("data-"+n._scopeName+"-type")||d.hasAttribute(n._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(d)):
c.appendChild(d)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=f.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),this.dropDown&&h.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var b=this.dropDown;return!!b&&(!b.href||b.isLoaded)},loadDropDown:function(b){var c=this.dropDown,d=c.on("load",m.hitch(this,function(){d.remove();b()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},
"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(q,n,m,l,f,h,k,g,c,d,b,y,t,w,u,a){return q("dijit._HasDropDown",a,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,
_onDropDownMouseDown:function(a){this.disabled||this.readOnly||("MSPointerDown"!=a.type&&a.preventDefault(),this.own(b.once(this.ownerDocument,y.release,d.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var b=this.dropDown,c=!1;if(a&&this._opened){var e=h.position(this._buttonNode,!0);if(!(a.pageX>=e.x&&a.pageX<=e.x+e.w&&a.pageY>=e.y&&a.pageY<=e.y+e.h)){for(e=a.target;e&&!c;)f.contains(e,"dijitPopup")?c=!0:e=e.parentNode;if(c){e=a.target;if(b.onItemClick){for(var d;e&&
!(d=t.byNode(e));)e=e.parentNode;if(d&&d.onClick&&d.getParent)d.getParent().onItemClick(d,a)}return}}}this._opened?b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){b.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||
this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";f.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(b(this._buttonNode,y.press,d.hitch(this,"_onDropDownMouseDown")),
b(this._buttonNode,"click",d.hitch(this,"_onDropDownClick")),b(a,"keydown",d.hitch(this,"_onKey")),b(a,"keyup",d.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,e=a.target;b&&this._opened&&b.handleKey&&!1===b.handleKey(a)?(a.stopPropagation(),a.preventDefault()):b&&this._opened&&
a.keyCode==c.ESCAPE?(this.closeDropDown(),a.stopPropagation(),a.preventDefault()):!this._opened&&(a.keyCode==c.DOWN_ARROW||(a.keyCode==c.ENTER||a.keyCode==c.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(e.tagName||"").toLowerCase()||e.type&&"text"!==e.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(d.hitch(a,
"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new n,b=d.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,b=a.domNode,c=this._aroundNode||
this.domNode,g=this,k=u.open({parent:this,popup:a,around:c,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){g.closeDropDown(!0)},onCancel:function(){g.closeDropDown(!0)},onClose:function(){l.set(g._popupStateNode,"popupActive",!1);f.remove(g._popupStateNode,"dijitHasDropDownOpen");g._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&c.offsetWidth>a._popupWrapper.offsetWidth){var c=c.offsetWidth-a._popupWrapper.offsetWidth,m={w:a.domNode.offsetWidth+c};this._origStyle=
b.style.cssText;d.isFunction(a.resize)?a.resize(m):h.setMarginBox(b,m);"R"==k.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-c+"px")}l.set(this._popupStateNode,"popupActive","true");f.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"===b.getAttribute("role")||b.getAttribute("aria-labelledby")||b.setAttribute("aria-labelledby",
this.id);return k},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),u.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(q,n,m,l,f,h,k,g,c,d,b,y,t,w,u,a){return c("dijit.layout.ContentPane",[m,l,f],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:q._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var e=new c(a,b);return!e.href&&e._contentSetter&&e._contentSetter.parseDeferred&&!e._contentSetter.parseDeferred.isFulfilled()?e._contentSetter.parseDeferred.then(function(){return e}):e},create:function(a,c){if(!(a&&a.template||!c||"href"in a||"content"in a)){c=b.byId(c);for(var e=c.ownerDocument.createDocumentFragment();c.firstChild;)e.appendChild(c.firstChild);
a=n.delegate(a,{content:e})}this.inherited(arguments,[a,c])},postMixInProperties:function(){this.inherited(arguments);var a=u.getLocalization("dijit","loading",this.lang);this.loadingMessage=h.substitute(this.loadingMessage,a);this.errorMessage=h.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&g.forEach(this._contentSetter.parseResults,
function(a){a._started||a._destroyed||!n.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){g.forEach(this.getChildren(),function(a){a._started||a._destroyed||!n.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!n.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){q.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new d(n.hitch(this,"cancel"));this.onLoadDeferred.then(n.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){q.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new d(n.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(n.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new d(n.hitch(this,"cancel"));this.onLoadDeferred.then(n.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
n.isObject(this.ioArgs)&&n.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||w.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(A){a._onError("Content",A)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(r){console.error("Error "+(this.widgetId||
this.id)+" running custom onLoad code: "+r.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;g.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(g.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||t.empty(this.containerNode);delete this._singleChild},_setContent:function(b,c){b=this.preprocessContent(b);this.destroyDescendants();var d=this._contentSetter;d&&d instanceof k._ContentSetter||(d=this._contentSetter=new k._ContentSetter({node:this.containerNode,_onError:n.hitch(this,this._onError),onContentError:n.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(p){console.error("Fatal "+
this.id+" could not change content due to "+p.message,p)}})}));var e=n.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!b.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=d.set(n.isObject(b)&&b.domNode?b.domNode:b,e),f=this;return a(e&&e.then?e:d.parseDeferred,function(){delete f._contentSetterParams;c||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(b))})},
preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(q,n,m,l,f,h,k,g,c,d){return n("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(c.on("resize",h.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],c=!1;k("\x3e *",this.containerNode).some(function(d){var f=
g.byNode(d);f&&f.resize?b.push(f):!/script|link|style/i.test(d.nodeName)&&d.offsetHeight&&(c=!0)});this._singleChild=1!=b.length||c?null:b[0];m.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(b,c){this._resizeCalled=!0;this._scheduleLayout(b,c)},_scheduleLayout:function(b,c){this._isShown()?this._layout(b,c):(this._needLayout=!0,this._changeSize=b,this._resultSize=c)},_layout:function(b,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
b&&l.setMarginBox(this.domNode,b);var f=this.containerNode;f===this.domNode?(c=c||{},h.mixin(c,b||{}),"h"in c&&"w"in c||(c=h.mixin(l.getMarginBox(f),c)),this._contentBox=d.marginBox2contentBox(f,c)):this._contentBox=l.getContentBox(f);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var b=this._contentBox||l.getContentBox(this.containerNode);this._singleChild.resize({w:b.w,h:b.h})}else for(var b=this.getChildren(),c,d=0;c=
b[d++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var b=this.domNode,c=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!m.contains(b,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(q,n,m,l,f){function h(c){return c.substring(0,1).toUpperCase()+c.substring(1)}function k(c,d){var b=c.resize?c.resize(d):m.setMarginBox(c.domNode,d);b?f.mixin(c,b):(f.mixin(c,m.getMarginBox(c.domNode)),f.mixin(c,d))}var g={marginBox2contentBox:function(c,d){var b=l.getComputedStyle(c),f=m.getMarginExtents(c,b),g=m.getPadBorderExtents(c,b);return{l:l.toPixelValue(c,b.paddingLeft),t:l.toPixelValue(c,b.paddingTop),w:d.w-
(f.w+g.w),h:d.h-(f.h+g.h)}},layoutChildren:function(c,d,b,g,l){d=f.mixin({},d);n.add(c,"dijitLayoutContainer");b=q.filter(b,function(b){return"center"!=b.region&&"client"!=b.layoutAlign}).concat(q.filter(b,function(b){return"center"==b.region||"client"==b.layoutAlign}));q.forEach(b,function(b){var c=b.domNode,a=b.region||b.layoutAlign;if(!a)throw Error("No region setting for "+b.id);var e=c.style;e.left=d.l+"px";e.top=d.t+"px";e.position="absolute";n.add(c,"dijitAlign"+h(a));c={};g&&g==b.id&&(c["top"==
b.region||"bottom"==b.region?"h":"w"]=l);"leading"==a&&(a=b.isLeftToRight()?"left":"right");"trailing"==a&&(a=b.isLeftToRight()?"right":"left");"top"==a||"bottom"==a?(c.w=d.w,k(b,c),d.h-=b.h,"top"==a?d.t+=b.h:e.top=d.t+d.h+"px"):"left"==a||"right"==a?(c.h=d.h,k(b,c),d.w-=b.w,"left"==a?d.l+=b.w:e.left=d.l+d.w+"px"):"client"!=a&&"center"!=a||k(b,d)})}};f.setObject("dijit.layout.utils",g);return g})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(q,n,m,l,f,h,k){var g=0,c={_secureForInnerHtml:function(c){return c.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:h.empty,_setNodeContent:function(c,b){h.empty(c);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=h.toDom(b,c.ownerDocument)),!b.nodeType&&n.isArrayLike(b))for(var d=b.length,f=0;f<b.length;f=d==b.length?f+1:0)h.place(b[f],c,"last");else h.place(b,c,"last");return c},_ContentSetter:l("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:q._scopeName,startup:!0,constructor:function(c,b){n.mixin(this,c||{});b=this.node=f.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",g++].join("_"))},set:function(c,b){void 0!==c&&(this.content=c);"number"==typeof c&&(c=c.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(c=this.onEnd())&&c.then?c:this.node},setContent:function(){var d=this.node;if(!d)throw Error(this.declaredClass+
": setContent given no node");try{d=c._setNodeContent(d,this.content)}catch(y){var b=this.onContentError(y);try{d.innerHTML=b}catch(t){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+t.message,t)}}this.node=d},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(m.forEach(this.parseResults,function(c){c.destroy&&c.destroy()}),delete this.parseResults);
h.empty(this.node)},onBegin:function(){var d=this.content;if(n.isString(d)&&(this.cleanContent&&(d=c._secureForInnerHtml(d)),this.extractContent)){var b=d.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(d=b[1])}this.empty();this.content=d;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(c){return"Error occurred setting content: "+
c},onExecError:function(c){return"Error occurred executing scripts: "+c},_mixin:function(c){var b={},d;for(d in c)d in b||(this[d]=c[d])},_parse:function(){var c=this.node;try{var b={};m.forEach(["dir","lang","textDir"],function(c){this[c]&&(b[c]=this[c])},this);var f=this;this.parseDeferred=k.parse({rootNode:c,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(b){return f.parseResults=b},function(b){f._onError("Content",b,"Error parsing in _ContentSetter#"+f.id)})}catch(t){this._onError("Content",
t,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(d,b,f){d=this["on"+d+"Error"].call(this,b);f?console.error(f,b):d&&c._setNodeContent(this.node,d,!0)}}),set:function(d,b,f){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");"number"==typeof b&&(b=b.toString());return f?(new c._ContentSetter(n.mixin(f,{content:b,node:d}))).set():c._setNodeContent(d,b,!0)}};n.setObject("dojo.html",c);return c})},"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:esri/dijit/templates/Measurement.html":"\x3cdiv class\x3d\"esriMeasurement\"\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' class\x3d'esriMeasurementButtonContainer'\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_areaButton' iconClass\x3d'areaIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_areaButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_distanceButton' iconClass\x3d'distanceIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_distanceButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_locationButton' iconClass\x3d'locationIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_locationButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d\"esriMeasurementSeparator\"\x3e|\x3c/div\x3e\r\n    \x3cbutton dojoType\x3d'dijit.form.DropDownButton' baseClass\x3d'esriToggleButton' dojoAttachPoint\x3d'_unitDropDown' label\x3d'unit' value\x3d'unit' style\x3d'visibility:hidden;'\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultLabel' class\x3d'resultLabel esriMeasurementResultLabel'\x3e\x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValueContainer' align\x3d'leading' class\x3d\"esriMeasurementResultValue\"\x3e\r\n    \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValue' class\x3d'result'\x3e\x26nbsp;\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultTable' align\x3d'leading' class\x3d\"resultTable esriMeasurementTableContainer\" style\x3d\"display:none;\"\x3e\r\n    \x3ctable class\x3d\"esriMeasurementResultTable\"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableHeader\" colspan\x3d\"2\"\x3e${_NLS_Lat}\x3c/td\x3e\x3ctd class\x3d\"esriMeasurementTableHeader\"\x3e${_NLS_Lon}\x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\" dojoAttachPoint\x3d\"_mouseRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"mouseCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"pinCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"*now":function(q){q(['dojo/i18n!*preload*esri/dijit/nls/Measurement*["ar","az","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("esri/dijit/Measurement","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/debounce dojo/sniff dojo/dom-style dojo/dom-construct dojox/gfx dijit/_Widget dijit/registry dijit/Menu dijit/MenuItem ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../graphic ../tasks/AreasAndLengthsParameters ../tasks/LengthsParameters ../tasks/GeometryService ../kernel ../config ../domUtils ../numberUtils ../lang ../units ../WKIDUnitConversion ../SpatialReference dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./_EventedWidget dojo/text!./templates/Measurement.html dojo/i18n!../nls/jsapi dijit/form/ToggleButton dijit/form/DropDownButton dijit/layout/ContentPane".split(" "),function(q,
n,m,l,f,h,k,g,c,d,b,y,t,w,u,a,e,r,x,z,v,A,p,C,E,G,R,J,M,S,K,L,T,B,D,Q,V,F,O,I,H){n=n([O,y,V,F],{declaredClass:"esri.dijit.Measurement",widgetsInTemplate:!0,templateString:I,_map:null,_geometryService:null,_interpolatedMap:null,_mouseImgURL:null,_defaultPinURL:null,_measureGraphics:[],_measureGraphic:null,_locationGraphic:null,_tempGraphic:null,_polylineGraphics:null,_polygonGraphic:null,_pointSymbol:null,_useDefaultPointSymbol:!0,_defaultLineSymbol:null,_lineSymbol:null,_areaLineSymbol:null,_defaultFillSymbol:null,
_fillSymbol:null,_borderlessFillSymbol:null,_defaultCustomPointSymbolHeight:25,_defaultCustomPointSymbolWidth:25,_userGeometry:null,_currentGeometry:null,_inputPoints:[],_unitDictionary:[],_densificationRatio:.07848050723825097,numberPattern:"#,###,###,##0.0",result:null,_defaultDistanceUnit:null,_defaultAreaUnit:null,_defaultLocationUnit:null,currentDistanceUnit:null,currentAreaUnit:null,currentLocationUnit:null,_unitStrings:{},_locationUnitStrings:[],_locationUnitStringsLong:[],_distanceUnitStrings:[],
_distanceUnitStringsLong:[],_areaUnitStrings:[],_areaUnitStringsLong:[],_calculatingMsg:null,_gsErrorMsg:null,_NLS_Lat:null,_NLS_Lon:null,_mouseMoveMapHandler:null,_mouseClickMapHandler:null,_doubleClickMapHandler:null,_mouseDragMapHandler:null,_clickMapHandler:null,_mapExtentChangeHandler:null,_geometryAreaHandler:null,_snappingCallback:null,_calcTimer:null,_buttonDijits:{},previousTool:null,activeTool:null,markerLongitude:null,markerLatitude:null,mouseLongitude:null,mouseLatitude:null,_eventMap:{"measure-start":["toolName",
"unitName"],measure:["toolName","geometry","values","unitName","segmentLength"],"measure-end":["toolName","geometry","values","unitName"],"tool-change":["toolName","unitName","previousToolName"],"unit-change":["unitName","toolName"]},constructor:function(b,c){if(b&&b.map){this._map=b.map;if(this._map.loaded)this._map.cs=this._checkCS(this._map.spatialReference),this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs);else var d=f.connect(this._map,"onLoad",this,function(){f.disconnect(d);
d=null;this._map.cs=this._checkCS(this._map.spatialReference);this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs)});this._geometryService=S.defaults.geometryService;this._mouseImgURL=q.toUrl("./images/cursor16x24.png");this._defaultPinURL=q.toUrl("./images/esriGreenPin16x26.png");this._defaultLineSymbol=new e(e.STYLE_SOLID,new h([0,128,255]),3);this._defaultFillSymbol=new r(e.STYLE_SOLID,this._defaultLineSymbol,new h([0,0,0,.5]));b.pointSymbol?(this._pointSymbol=b.pointSymbol,
this._useDefaultPointSymbol=!1):(this._pointSymbol=new a(this._defaultPinURL,16,26),this._pointSymbol.setOffset(0,12));this._fillSymbol=c=b.fillSymbol||this._defaultFillSymbol;this._areaLineSymbol=c.outline||this._defaultLineSymbol;this._borderlessFillSymbol=x.fromJson(c.toJson());this._borderlessFillSymbol.setOutline(null);this._lineSymbol=b.lineSymbol?b.lineSymbol:this._defaultLineSymbol;this._defaultDistanceUnit=b.defaultLengthUnit?b.defaultLengthUnit:B.MILES;this._defaultAreaUnit=b.defaultAreaUnit?
b.defaultAreaUnit:B.ACRES;this._defaultLocationUnit=b.defaultLocationUnit?b.defaultLocationUnit:B.DECIMAL_DEGREES;this._snappingCallback=m.hitch(this,this._snappingCallback);b.geometry&&(this._userGeometry=b.geometry);this._calcTimer=null;this.advancedLocationUnits=b.advancedLocationUnits||!1;this._NLS_Lon=H.widgets.measurement.NLS_longitude;this._NLS_Lat=H.widgets.measurement.NLS_latitude;this._gsErrorMsg=H.widgets.measurement.NLS_geometry_service_error;this._calculatingMsg=H.widgets.measurement.NLS_calculating;
this._geometryServiceLength=k(this._geometryServiceLength,250)}else console.log("Unable to find the required 'map' property in widget parameters")},startup:function(){this._setupDictionaries();d.create("img",{src:this._mouseImgURL,style:"vertical-align: middle"},this.mouseCell);this._useDefaultPointSymbol?d.create("img",{src:this._defaultPinURL,style:"vertical-align: middle"},this.pinCell):this._drawPointGraphics(this.pinCell);if(this._userGeometry)if(this._map.loaded)this._measureCustomGeometry(this._userGeometry),
this._userGeometry=null;else var a=f.connect(this._map,"onLoad",this,function(){f.disconnect(a);a=null;this._measureCustomGeometry(this._userGeometry);this._userGeometry=null})},destroy:function(){this._resetToolState();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this._measureGraphics=this._measureGraphic=this._tempGraphic=null},setTool:function(a,b){this.previousTool=this.activeTool||null;this._polylineGraphics=[];this._resetToolState();this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),
this._polygonGraphic=null);var d=t.byNode(this._buttonDijits[a].domNode).checked;c.set(this._unitDropDown.domNode,"visibility","visible");t.byNode(this._buttonDijits.area.domNode).set("checked",!1);t.byNode(this._buttonDijits.distance.domNode).set("checked",!1);t.byNode(this._buttonDijits.location.domNode).set("checked",!1);if(!0===b||!1===b)d=b;t.byNode(this._buttonDijits[a].domNode).set("checked",d);this._toggleLocationResultsTable(!1,!0);d?(this.activeTool=a,(this._dblClickZoom=this._map.isDoubleClickZoom)&&
this._map.disableDoubleClickZoom(),"area"===a?this._setupAreaTool():"distance"===a?this._setupDistanceTool():"location"===a&&this._setupLocationTool(),this._map.snappingManager&&(this._map.snappingManager._startSelectionLayerQuery(),this._map.snappingManager._setUpSnapping())):(this.activeTool=null,c.set(this._unitDropDown.domNode,"visibility","hidden"));if(this.activeTool!==this.previousTool)this.onToolChange(this.activeTool,this.getUnit(),this.previousTool)},measure:function(a){a&&this._measureCustomGeometry(a)},
clearResult:function(){var a=this._map,b;this.result=0;this.resultValue.setContent("\x26nbsp");for(b=0;b<this._measureGraphics.length;b++)a.graphics.remove(this._measureGraphics[b]);this._measureGraphic=this._locationGraphic=this._currentGeometry=null;this._measureGraphics=[];a.graphics.remove(this._tempGraphic);f.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null},show:function(){K.show(this.domNode)},hide:function(){K.hide(this.domNode)},showTool:function(a){c.set(this._buttonDijits[a].domNode,
"display","inline-block")},hideTool:function(a){c.set(this._buttonDijits[a].domNode,"display","none")},getTool:function(){if(this.activeTool)return{toolName:this.activeTool,unitName:this.getUnit()}},getUnit:function(){if("unit"!==this._unitDropDown.label)return this._unitDropDown.label},_setupLocationTool:function(){this._map.navigationManager.setImmediateClick(!0);this._measureGraphics=[];this._map.graphics.remove(this._locationGraphic);this._createLocationUnitList();"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),
this._mapExtentChangeHandler=f.connect(this._map,"onExtentChange",m.hitch(this,this._projectMapExtent)));this._clickMapHandler=f.connect(this._map,"onClick",this,"_locationClickHandler");if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=f.connect(this._map,"onMouseMove",this,"_locationMoveHandler")},_locationButtonToggle:function(){this.clearResult();this.setTool("location")},_measureCustomPoint:function(a){this.setTool("location",
!0);"Web Mercator"===this._map.cs&&a.spatialReference!==this._map.spatialReference&&(a=v.geographicToWebMercator(a));this._measureGraphic=new E;this._measureGraphic.setSymbol(this._pointSymbol);this._measureGraphic.setGeometry(a);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._currentGeometry=a;this._calculateLocation(a,!0)},_calculateLocation:function(a,b){var c=!("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit);
c&&this._mouseMoveMapHandler&&(f.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null);a=m.clone(a);if(b){if("Web Mercator"!==this.map.cs&&this.map.spatialReference&&4326!==this.map.spatialReference.wkid){this._projectLocation(a,c);return}this._updateMarkerLocation(a.x,a.y)}a=this._getGCSLocation(a);this._advancedLocationDisplayHandler(a,c,b)},_projectLocation:function(a,b){this._geometryService.project([a],new Q({wkid:4326}),m.hitch(this,function(a){this._advancedLocationDisplayHandler(a[0],
b,!0)}),m.hitch(this,function(a){console.log(this._gsErrorMsg,a)}))},_advancedLocationDisplayHandler:function(a,b,c){b?this._updateGeocoordinateStringLocation({coordinates:[[a.x,a.y]],sr:{wkid:4326},conversionType:this._unitStrings[this.currentLocationUnit]},a):(b=this._calculateXY(a.x,a.y),c?(this._updateClickLocation(b[0],b[1]),this.onMeasureEnd(this.activeTool,a,[b[0],b[1]],this.getUnit())):this._updateMouseLocation(b[0],b[1]))},_updateMarkerLocation:function(a,b){this.markerLocationX=a;this.markerLocationY=
b},_updateMouseLocation:function(a,b){this.mouseLongitude.innerHTML=a;this.mouseLatitude.innerHTML=b},_updateClickLocation:function(a,b){this._updateMouseLocation(a,b);this.markerLongitude.innerHTML=a;this.markerLatitude.innerHTML=b},_updateGeocoordinateStringLocation:function(a,b){this.resultValue.setContent("\x26nbsp");this._geometryService.toGeoCoordinateString(a,m.hitch(this,function(a){clearTimeout(this._calcTimer);a?(this.resultValue.setContent(a[0]),this.onMeasureEnd(this.activeTool,b,a,this.getUnit())):
(this.resultValue.setContent(this._gsErrorMsg),this.onMeasureEnd(this.activeTool,null,null,this.getUnit()))}));clearTimeout(this._calcTimer);this._calcTimer=setTimeout(m.hitch(this,function(){this.resultValue.setContent(this._calculatingMsg)},1E3))},_switchLocationUnit:function(a){t.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);this.currentLocationUnit=a;f.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;this.onUnitChange(this._unitStrings[a],this.activeTool);
if("esriDegreeMinuteSeconds"===a||"esriDecimalDegrees"===a)this._mouseMoveMapHandler=f.connect(this._map,"onMouseMove",this,"_locationMoveHandler"),this._toggleLocationResultsTable(!0,!1),this._locationGraphic&&this._calculateLocation(this._locationGraphic.geometry,!0);else if(this._toggleLocationResultsTable(!1,!1),null!==this.resultValue&&(null!==this.markerLocationX||null!==this.markerLocationY)&&this._locationGraphic){var b=this._getGCSLocation(this._locationGraphic.geometry);this._updateGeocoordinateStringLocation({coordinates:[[b.x,
b.y]],sr:{wkid:4326},conversionType:this._unitStrings[a]},this._locationGraphic.geometry)}},_toggleLocationResultsTable:function(a,b){b&&(this.resultValue.setContent("\x26nbsp"),this.markerLongitude.innerHTML="---",this.markerLatitude.innerHTML="---",this.mouseLongitude.innerHTML="---",this.mouseLatitude.innerHTML="---");a?(K.show(this.resultTable.domNode),K.hide(this.resultValueContainer.domNode)):(K.hide(this.resultTable.domNode),K.show(this.resultValueContainer.domNode),f.disconnect(this._mouseMoveMapHandler));
"PCS"===this._map.cs&&K.hide(this._mouseRow)},_setupDistanceTool:function(){this._map.navigationManager.setImmediateClick(!0);"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=f.connect(this._map,"onExtentChange",this,"_projectMapExtent"));this._inputPoints=[];this._createDistanceUnitList();this._mouseClickMapHandler=f.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this._doubleClickMapHandler=f.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler")},
_distanceButtonToggle:function(){this.clearResult();this.setTool("distance")},_measureCustomDistance:function(a){if(1<a.paths[0].length){this.setTool("distance",!0);this._inputPoints=[];l.forEach(a.paths[0],m.hitch(this,function(b,c){this._inputPoints.push(b);var d=new E(new A(b[0],b[1],a.spatialReference),this._pointSymbol);this._measureGraphics.push(d);this._map.graphics.add(d);0!==c&&(this.result+=this._geodesicDistance(b,a.paths[0][c-1]))}));this._measureGraphic=new E;this._measureGraphic.setSymbol(this._lineSymbol);
this._measureGraphics.push(this._measureGraphic);var b=this._densifyGeometry(a);this._measureGraphic.setGeometry(b);this._map.graphics.add(this._measureGraphic);this._inputPoints=[];b=this._outputResult(this.result,this.getUnit());this._currentGeometry=a;this.onMeasureEnd(this.activeTool,a,b,this.getUnit())}},_showDistance:function(a){a&&this._outputResult(a,t.byNode(this._unitDropDown.domNode).label)},_setupAreaTool:function(){this._map.navigationManager.setImmediateClick(!0);this._inputPoints=[];
this._createAreaUnitList();this._tempGraphic=new E;this._tempGraphic.setSymbol(this._areaLineSymbol);this._tempGraphic.setGeometry(new p(this._map.spatialReference));this._map.graphics.add(this._tempGraphic);"PCS"===this._map.cs&&(this._geometryAreaHandler=f.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea"));this._mouseClickMapHandler=f.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this._doubleClickMapHandler=f.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler")},
_areaButtonToggle:function(){this.clearResult();this.setTool("area")},_generatePolygonFromPaths:function(){var a=[];l.forEach(this._polylineGraphics,m.hitch(this,function(b){l.forEach(b.geometry.paths,m.hitch(this,function(b){l.forEach(b,m.hitch(this,function(b){a.push(b)}))}))}));a.push(a[0]);var b=new C(this._map.spatialReference);b.addRing(a);var b=this._densifyGeometry(b),c=new E;c.setGeometry(b);c.setSymbol(this._borderlessFillSymbol);this._measureGraphic=c;this._measureGraphics.push(c);return c},
_getArea:function(a){var b=[],c=new G;c.areaUnit=J.UNIT_SQUARE_METERS;c.calculationType="geodesic";C.prototype.isSelfIntersecting(a)?this._geometryService.simplify([a],m.hitch(this,function(a){l.forEach(a,m.hitch(this,function(d){"PCS"===this._map.cs?(c.polygons=a,this._geometryService.areasAndLengths(c)):("Web Mercator"===this._map.cs&&(d=v.webMercatorToGeographic(d)),b.push(d))}));var d=z.geodesicAreas(b,B.SQUARE_METERS);this._showArea(d[0])})):("Web Mercator"===this._map.cs&&(a=v.webMercatorToGeographic(a)),
b.push(a),"PCS"===this._map.cs?(c.polygons=b,this._geometryService.areasAndLengths(c)):(a=z.geodesicAreas(b,B.SQUARE_METERS),this._showArea(Math.abs(a[0]))))},_outputArea:function(a){this._showArea(Math.abs(a.areas[0]))},_showArea:function(a){if(a)if(this.result=a,a=t.byNode(this._unitDropDown.domNode).label,a=this._outputResult(this.result,a),this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._currentGeometry,a,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,this._currentGeometry,
a,this.getUnit())},_measureCustomArea:function(a){this.setTool("area",!0);this._inputPoints=[];var b=this._densifyGeometry(a);this._currentGeometry=a;this._measureGraphic=new E;this._measureGraphic.setGeometry(b);this._measureGraphic.setSymbol(this._fillSymbol);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._getArea(a);this._inputPoints=[]},_resetToolState:function(){var a=this._map;a.navigationManager.setImmediateClick(!1);this._dblClickZoom&&a.enableDoubleClickZoom();
this._inputPoints=[];f.disconnect(this._mouseClickMapHandler);f.disconnect(this._mouseMoveMapHandler);f.disconnect(this._doubleClickMapHandler);f.disconnect(this._mouseDragMapHandler);f.disconnect(this._clickMapHandler);f.disconnect(this._mapExtentChangeHandler);f.disconnect(this._geometryAreaHandler);this._mouseClickMapHandler=this._mouseMoveMapHandler=this._doubleClickMapHandler=this._mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;a.snappingManager&&
a.snappingManager._snappingGraphic&&a.graphics.remove(a.snappingManager._snappingGraphic);this._map.snappingManager&&(this._map.snappingManager._stopSelectionLayerQuery(),this._map.snappingManager._killOffSnapping());this._unitDropDown._opened&&this._unitDropDown.closeDropDown()},_measureCustomGeometry:function(a){this.clearResult();switch(a.type){case "point":this._measureCustomPoint(a);break;case "polyline":this._measureCustomDistance(a);break;case "polygon":this._measureCustomArea(a)}},_densifyGeometry:function(a){var b=
this._map.cs,c=z.getSpheroidInfo(a.spatialReference).radius*this._densificationRatio;"Web Mercator"===b?(a=v.webMercatorToGeographic(a),c=z.geodesicDensify(a,c),c=v.geographicToWebMercator(c)):c="PCS"===b?a:z.geodesicDensify(a,c);return c},_geodesicDistance:function(a,b){var c=new p(this._map.spatialReference);"PCS"===this._map.cs&&(a=this._getGCSLocation(a),b=this._getGCSLocation(b));c.addPath([a,b]);"Web Mercator"===this._map.cs&&(c=v.webMercatorToGeographic(c));return z.geodesicLengths([c],B.METERS)[0]},
_calculateXY:function(a,b){var c=H.widgets.measurement,d=this._map.getScale(),e,f;if(this.getUnit()===c.NLS_decimal_degrees)f=500<=d?6:500>d&&50<=d?7:50>d&&5<=d?8:9,e=a.toFixed(f),this._map.spatialReference._isWrappable()||(e=this._roundX(e)),e=L.format(e),f=L.format(this._roundY(b.toFixed(f)));else if(this.getUnit()===c.NLS_deg_min_sec){var g=c=!1,h,k;f=9E4<=d?0:9E4>d&&9E3<=d?1:9E3>d&&900<=d?2:900>d&&90<d?3:4;0>a&&(c=!0,a=Math.abs(a));0>b&&(g=!0,b=Math.abs(b));b=this._roundY(b);this._map.spatialReference._isWrappable()||
(a=this._roundX(a));h=Math.floor(b)+"\u00b0";e=Math.floor(a)+"\u00b0";k=Math.floor(this._getDegreeMinutes(b))+"'";d=Math.floor(this._getDegreeMinutes(a))+"'";b=L.format(this._getDegreeSeconds(b).toFixed(f))+'"';a=L.format(this._getDegreeSeconds(a).toFixed(f))+'"';f=h+k+b;e=e+d+a;c&&(e="-"+e);g&&(f="-"+f)}return[e,f]},_getDegreeMinutes:function(a){return 60*(a-Math.floor(a))},_getDegreeSeconds:function(a){return 60*(60*(a-Math.floor(a))-Math.floor(60*(a-Math.floor(a))))},_roundY:function(a){90<a?a=
90:-90>a&&(a=-90);return a},_roundX:function(a){180<a?a=180:-180>a&&(a=-180);return a},_getGCSLocation:function(a){a=m.clone(a);var b=this._map,c=b.extent,d=b._newExtent;"Web Mercator"===b.cs?a=v.webMercatorToGeographic(a):"PCS"===b.cs?d&&(a=new A((a.x-c.xmin)*Math.abs((d.xmax-d.xmin)/(c.xmax-c.xmin))+d.xmin,(a.y-c.ymin)*Math.abs((d.ymax-d.ymin)/(c.ymax-c.ymin))+d.ymin,b.spatialReference)):a=a.normalize();return a},_projectMapExtent:function(a){a=new E(a);var b=new Q({wkid:4326});this._geometryService.project([a.geometry],
b,m.hitch(this,function(a){if(!this._mouseMoveMapHandler&&"location"===this.activeTool){if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=f.connect(this._map,"onMouseMove",m.hitch(this,this._locationMoveHandler));this._mouseMoveMapHandler=f.connect(this._map,"onMouseMove",m.hitch(this,this._locationMoveHandler))}this._map._newExtent=a[0]}))},_checkCS:function(a){if(a.wkid)return 3857===a.wkid||102100===a.wkid||102113===
a.wkid?"Web Mercator":T.isDefined(D[a.wkid])?"PCS":"GCS";if(a.wkt)return-1!==a.wkt.indexOf("WGS_1984_Web_Mercator")?"Web Mercator":0===a.wkt.indexOf("PROJCS")?"PCS":"GCS"},_switchUnit:function(a){"distance"===this.activeTool?this.currentDistanceUnit=a:"area"===this.activeTool?this.currentAreaUnit=a:"location"===this.activeTool&&(this.currentLocationUnit=a);t.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);if(null!==this.result){var b=this._outputResult(this.result,this._unitStrings[a]);
this.onUnitChange(this._unitStrings[a],this.activeTool);if(null!==this._currentGeometry||null!==this._measureGraphic)if(a=this._currentGeometry||this._measureGraphic.geometry,this._mouseMoveMapHandler)this.onMeasure(this.activeTool,a,b,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,a,b,this.getUnit())}},_setupDictionaries:function(){var a=H.widgets.measurement;this._unitDictionary[a.NLS_length_meters]=1;this._unitDictionary[a.NLS_length_kilometers]=1E3;this._unitDictionary[a.NLS_length_feet]=
.3048;this._unitDictionary[a.NLS_length_miles]=1609.344;this._unitDictionary[a.NLS_length_yards]=.9144;this._unitDictionary[a.NLS_length_nautical_miles]=1852;this._unitDictionary[a.NLS_length_miles_us]=1609.347218694438;this._unitDictionary[a.NLS_length_feet_us]=.3048006096012192;this._unitDictionary[a.NLS_length_yards_us]=.9144018288036576;this._unitDictionary[a.NLS_area_sq_meters]=1;this._unitDictionary[a.NLS_area_sq_kilometers]=1E6;this._unitDictionary[a.NLS_area_sq_feet]=.09290304;this._unitDictionary[a.NLS_area_acres]=
4046.8564224;this._unitDictionary[a.NLS_area_sq_miles]=2589988.110336;this._unitDictionary[a.NLS_area_hectares]=1E4;this._unitDictionary[a.NLS_area_sq_yards]=.83612736;this._unitDictionary[a.NLS_area_sq_nautical_miles]=3429904;this._unitDictionary[a.NLS_area_acres_us]=4046.872609874252;this._unitDictionary[a.NLS_area_sq_miles_us]=2589998.470319522;this._unitDictionary[a.NLS_area_sq_feet_us]=.09290341161327487;this._unitDictionary[a.NLS_area_sq_yards_us]=.8361307045194736;this._unitStrings={esriMiles:a.NLS_length_miles,
esriKilometers:a.NLS_length_kilometers,esriFeet:a.NLS_length_feet,esriFeetUS:a.NLS_length_feet_us,esriMeters:a.NLS_length_meters,esriYards:a.NLS_length_yards,esriNauticalMiles:a.NLS_length_nautical_miles,esriMilesUS:a.NLS_length_miles_us,esriYardsUS:a.NLS_length_yards_us,esriAcres:a.NLS_area_acres,esriSquareMiles:a.NLS_area_sq_miles,esriSquareKilometers:a.NLS_area_sq_kilometers,esriHectares:a.NLS_area_hectares,esriSquareYards:a.NLS_area_sq_yards,esriSquareFeet:a.NLS_area_sq_feet,esriSquareFeetUS:a.NLS_area_sq_feet_us,
esriSquareMeters:a.NLS_area_sq_meters,esriAcresUS:a.NLS_area_acres_us,esriSquareMilesUS:a.NLS_area_sq_miles_us,esriSquareYardsUS:a.NLS_area_sq_yards_us,esriSquareNauticalMiles:a.NLS_area_sq_nautical_miles,esriDecimalDegrees:a.NLS_decimal_degrees,esriDegreeMinuteSeconds:a.NLS_deg_min_sec,esriMGRS:a.NLS_MGRS,esriUSNG:a.NLS_USNG,esriUTM:a.NLS_UTM,esriGARS:a.NLS_GARS,esriGeoRef:a.NLS_GeoRef,esriDDM:a.NLS_DDM,esriDD:a.NLS_DD};this._locationUnitStrings=[a.NLS_decimal_degrees,a.NLS_deg_min_sec,a.NLS_MGRS,
a.NLS_USNG,a.NLS_UTM,a.NLS_GeoRef,a.NLS_GARS];this._locationUnitStringsLong="esriDecimalDegrees esriDegreeMinuteSeconds esriMGRS esriUSNG esriUTM esriGeoRef esriGARS".split(" ");this._distanceUnitStrings=[a.NLS_length_miles,a.NLS_length_kilometers,a.NLS_length_feet,a.NLS_length_feet_us,a.NLS_length_meters,a.NLS_length_yards,a.NLS_length_nautical_miles];this._distanceUnitStringsLong="esriMiles esriKilometers esriFeet esriFeetUS esriMeters esriYards esriNauticalMiles".split(" ");this._areaUnitStrings=
[a.NLS_area_acres,a.NLS_area_sq_miles,a.NLS_area_sq_kilometers,a.NLS_area_hectares,a.NLS_area_sq_yards,a.NLS_area_sq_feet,a.NLS_area_sq_feet_us,a.NLS_area_sq_meters];this._areaUnitStringsLong="esriAcres esriSquareMiles esriSquareKilometers esriHectares esriSquareYards esriSquareFeet esriSquareFeetUS esriSquareMeters".split(" ");this._buttonDijits={area:this._areaButton,distance:this._distanceButton,location:this._locationButton};t.byNode(this._distanceButton.domNode).setLabel(a.NLS_distance);t.byNode(this._areaButton.domNode).setLabel(a.NLS_area);
t.byNode(this._locationButton.domNode).setLabel(a.NLS_location);t.byNode(this.resultLabel.domNode).setContent(a.NLS_resultLabel)},onToolChange:function(){},onUnitChange:function(){},onMeasureStart:function(){},onMeasure:function(){},onMeasureEnd:function(){},_measureAreaMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);b=b||a.mapPoint;this._inputPoints.push(b);this._currentStartPt=b;if(1===this._inputPoints.length){this._tempGraphic.setGeometry(new p(this._map.spatialReference));
for(a=0;a<this._measureGraphics.length;a++)this._map.graphics.remove(this._measureGraphics[a]);this._measureGraphics=[];this.result=0;this._outputResult(this.result,H.widgets.measurement.NLS_area_sq_meters);this._mouseMoveMapHandler=f.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._measureGraphic=new E;this._measureGraphic.setSymbol(this._areaLineSymbol);this._measureGraphics.push(this._measureGraphic);if(1<this._inputPoints.length){a=
new p(this._map.spatialReference);a.addPath([this._inputPoints[this._inputPoints.length-2],b]);var c=new p(this._map.spatialReference);c.addPath([this._inputPoints[0],b]);b=this._densifyGeometry(a);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);this._measureGraphic.setGeometry(b);this._map.graphics.add(this._measureGraphic);b=new E;b.setGeometry(a);this._polylineGraphics.push(b);if(2<this._inputPoints.length){b=new C(this._map.spatialReference);c=[];for(a=0;a<this._inputPoints.length;a++)c.push([this._inputPoints[a].x,
this._inputPoints[a].y]);c.push([this._inputPoints[0].x,this._inputPoints[0].y]);b.addRing(c);this._currentGeometry=b;this._polygonGraphic?(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic),this._measureGraphic=this._polygonGraphic,this._polylineGraphics.pop()):(this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));
this._getArea(b)}}else this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null)},_measureAreaMouseMoveHandler:function(a){var b;if(0<this._inputPoints.length){var c=new p(this._map.spatialReference),d;this._map.snappingManager&&(d=this._map.snappingManager._snappingPoint);b=d||a.mapPoint;c.addPath([this._currentStartPt,b]);a=this._densifyGeometry(c);this._tempGraphic.setGeometry(a)}1<this._inputPoints.length&&(a=new p(this._map.spatialReference),a.addPath([b,
this._inputPoints[0]]),b=this._densifyGeometry(a),this._tempGraphic.setGeometry(this._tempGraphic.geometry.addPath(b.paths[0])))},_measureAreaDblClickHandler:function(a){f.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&g("ios")&&this._measureAreaMouseClickHandler(a);a=new C(this._map.spatialReference);var b=[],c;for(c=0;c<this._inputPoints.length;c++)b.push([this._inputPoints[c].x,this._inputPoints[c].y]);b.push([this._inputPoints[0].x,
this._inputPoints[0].y]);a.addRing(b);this._inputPoints=[];this._currentGeometry=a;this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(a);this._polylineGraphics=[]},_measureDistanceMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._inputPoints.push(a);
this._currentStartPt=a;if(1===this._inputPoints.length){for(b=0;b<this._measureGraphics.length;b++)this._map.graphics.remove(this._measureGraphics[b]);this._map.graphics.remove(this._tempGraphic);this._measureGraphics=[];this.result=0;this._outputResult(this.result,H.widgets.measurement.NLS_length_meters);this._tempGraphic=new E;this._tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this._tempGraphic);this._mouseMoveMapHandler=f.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");
this.onMeasureStart(this.activeTool,this.getUnit())}this._tempGraphic.setGeometry(new p(this._map.spatialReference));b=new E;b.setSymbol(this._pointSymbol);b.setGeometry(a);this._measureGraphics.push(b);this._map.graphics.add(b);if(1<this._inputPoints.length){this._measureGraphic=new E;this._measureGraphic.setSymbol(this._lineSymbol);this._measureGraphics.push(this._measureGraphic);b=new p(this._map.spatialReference);b.addPath([this._inputPoints[this._inputPoints.length-2],a]);var c=this._densifyGeometry(b);
this._measureGraphic.setGeometry(c);this._map.graphics.add(this._measureGraphic);"PCS"===this._map.cs?this._geometryServiceLength(b,!1):(c=this._geodesicDistance(this._inputPoints[this._inputPoints.length-2],a),b=this._outputResult(c,this.getUnit()),this.result+=c,this._showDistance(this.result),c=this._outputResult(this.result,this.getUnit()),this.onMeasure(this.activeTool,a,c,this.getUnit(),b))}else b.setSymbol(this._pointSymbol)},_measureDistanceMouseMoveHandler:function(a){if(0<this._inputPoints.length){var b,
c=new p(this._map.spatialReference);this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;c.addPath([this._currentStartPt,a]);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);"PCS"!==this._map.cs&&(b=this._geodesicDistance(this._currentStartPt,a),c=this._outputResult(b,this.getUnit()),b+=this.result,this._showDistance(b),b=this._outputResult(b,this.getUnit()),this.onMeasure(this.activeTool,a,b,this.getUnit(),c))}},_measureDistanceDblClickHandler:function(a){var b;
f.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&g("ios")&&this._measureDistanceMouseClickHandler(a);a=new p(this._map.spatialReference);a.addPath(this._inputPoints);this._currentGeometry=a;b=this._densifyGeometry(a);this._measureGraphic.geometry=b;"PCS"===this._map.cs?this._geometryServiceLength(a,!0):(this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit()))},_geometryServiceLength:function(a,
b){var c=new R;c.polylines=[a];c.lengthUnit=9001;c.calculationType="geodesic";this._geometryService.lengths(c,m.hitch(this,function(c){c=c.lengths[0];if(b)this.result=c,this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit());else{var d=this._outputResult(c,this.getUnit());this.result+=c;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),
d)}}))},_locationClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._locationButtonToggle();this._locationGraphic=new E;this._locationGraphic.setGeometry(a);this._locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this._locationGraphic);this._measureGraphics.push(this._locationGraphic);this._calculateLocation(a,!0)},_locationMoveHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);
this._calculateLocation(b||a.mapPoint,!1)},_outputResult:function(a,b){a/=this._unitDictionary[b];0===a?this.resultValue.setContent("\x26nbsp"):1E6<a?this.resultValue.setContent(L.format(a.toPrecision(9),{pattern:this.numberPattern})+" "+b):10>a?this.resultValue.setContent(L.format(a.toFixed(2),{pattern:this.numberPattern+"0"})+" "+b):this.resultValue.setContent(L.format(a.toFixed(2),{pattern:this.numberPattern})+" "+b);return a},_createDistanceUnitList:function(){var a,b=new w({style:"display: none;"});
l.forEach(this._distanceUnitStrings,m.hitch(this,function(a,c){a=new u({label:a,onClick:m.hitch(this,function(){this._switchUnit(this._distanceUnitStringsLong[c])})});a.set("class","unitDropDown");b.addChild(a)}));t.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentDistanceUnit?(a=this._unitStrings[this.currentDistanceUnit],t.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultDistanceUnit],t.byNode(this._unitDropDown.domNode).set("label",a),this.currentDistanceUnit=
this._defaultDistanceUnit)},_createAreaUnitList:function(){var a,b=new w({style:"display: none;"});l.forEach(this._areaUnitStrings,m.hitch(this,function(a,c){a=new u({label:a,onClick:m.hitch(this,function(){this._switchUnit(this._areaUnitStringsLong[c])})});a.set("class","unitDropDown");b.addChild(a)}));t.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentAreaUnit?(a=this._unitStrings[this.currentAreaUnit],t.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultAreaUnit],
t.byNode(this._unitDropDown.domNode).set("label",a),this.currentAreaUnit=this._defaultAreaUnit)},_createLocationUnitList:function(){var a;a=this._locationUnitStrings;var b=new w({style:"display: none;"});if(null===this._geometryService||!1===this.advancedLocationUnits)a=a.slice(0,2);l.forEach(a,m.hitch(this,function(a,c){a=new u({label:a,onClick:m.hitch(this,function(){this._switchLocationUnit(this._locationUnitStringsLong[c])})});a.set("class","unitDropDown");b.addChild(a)}));t.byNode(this._unitDropDown.domNode).set("dropDown",
b);this.currentLocationUnit||(this.currentLocationUnit=this._defaultLocationUnit);a=this._unitStrings[this.currentLocationUnit];t.byNode(this._unitDropDown.domNode).set("label",a);"esriDegreeMinuteSeconds"!==this.currentLocationUnit&&"esriDecimalDegrees"!==this.currentLocationUnit||this._toggleLocationResultsTable(!0,!1)},_drawPointGraphics:function(a){var e=this._pointSymbol,f=this._defaultCustomPointSymbolWidth,h=this._defaultCustomPointSymbolHeight,k,l;a=d.create("div",{"class":"esriLocationResultSymbol"},
a);a=b.createSurface(a,f,h);9>g("ie")&&(k=a.getEventSource(),c.set(k,"position","relative"),c.set(k.parentNode,"position","relative"));e=e.getShapeDescriptors();try{l=a.createShape(e.defaultShape).setFill(e.fill).setStroke(e.stroke)}catch(W){a.clear();a.destroy();return}var n=l.getBoundingBox(),e=n.width;k=n.height;var p=-(n.x+e/2),n=-(n.y+k/2);a=a.getDimensions();a={dx:p+a.width/2,dy:n+a.height/2};if(e>f||k>h)p=e/f>k/h,f=((p?f:h)-5)/(p?e:k),m.mixin(a,{xx:f,yy:f});l.applyTransform(a)}});g("extend-esri")&&
m.setObject("dijit.Measurement",n,M);return n});