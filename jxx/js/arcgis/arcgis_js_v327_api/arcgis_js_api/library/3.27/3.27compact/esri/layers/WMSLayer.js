// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(q,n,h,l,e,a,r,y){q=q([a,r],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(a,p){n.mixin(this,p);this.initialize(a,p)},getTitle:function(a){var p;this.info&&(p=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(a,
this._fetchAttributes(a,null,this.getExpressionFieldsInTitle()),!0).title);return p||""},getContent:function(a){return this.info?(new y({template:this,graphic:a,chartTheme:this.chartTheme},l.create("div"))).domNode:""}});h("extend-esri")&&n.setObject("dijit.PopupTemplate",q,e);return q})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(q,n,h,l,e,a,r,y,d,p,u,D,z,A,B,C,F,k,c,v,x,w){q=q(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",initialize:function(b,g){if(b){n.mixin(this,g);this.info=b;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var t=this._fieldLabels={},m=this._fieldsMap={};this.info.fieldInfos&&
h.forEach(this.info.fieldInfos,function(b){var f=b.fieldName.toLowerCase(),g=this._isExpressionField(f)?this.getExpressionInfo(f):null;t[f]=g?g.title:b.label;m[f]=b},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions()}},toJson:function(){return l.fromJson(l.toJson(this.info))},getTitle:function(){},getContent:function(){},getFieldInfo:function(b){var g;h.some(this.info&&this.info.fieldInfos,
function(t){t.fieldName===b&&(g=t);return!!g});return g},getExpressionInfo:function(b){if(this._isExpressionField(b)){b=b.replace(this._reExprField,"");b=b.toLowerCase();var g;h.some(this.info.expressionInfos,function(t){t.name.toLowerCase()===b&&(g=t);return!!g});return g}},getExpressionFieldsInTitle:function(){var b=this.info.title?this.info.title.match(this._reExprFieldPattern):null;return h.map(b,function(b){return b.replace(this._reExprFieldPattern,"$1")},this)},hasGeometryOperations:function(){return h.some(this._getArcadeExpressions(),
function(b){return b.hasGeometryOperations()})},hasAsyncExpressions:function(){return h.some(this._getArcadeExpressions(),function(b){return b.async})},initializeArcadeEngine:function(){return v.initialize(this._getArcadeExpressions())},getComponents:function(b){var g=this.info,t={};g.fieldInfos&&(g=h.filter(g.fieldInfos,function(b){return-1!==b.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<g.length&&(t.relatedInfo=this._getRelatedRecords({graphic:b,fieldsInfo:g}));this._needFullResolutionFeature(b)&&
(t.fullResolutionFeature=this._getFullResolutionFeature(b));return A(t).then(n.hitch(this,function(m){m=m.fullResolutionFeature;m=this.hasAsyncExpressions()?this._fetchAttributesAsync(b,m):this._fetchAttributes(b,m);return A([m]).then(n.hitch(this,function(m){return this._getPopupValues(b,m[0])}))}))},getAttachments:function(b){var g=b.getSourceLayer();b=b.attributes;if(this.info.showAttachments&&g&&g.hasAttachments&&g.objectIdField&&(b=b&&b[g.objectIdField]))return g.queryAttachmentInfos(b)},_needFullResolutionFeature:function(b){return(b=
b.getSourceLayer())?"function"===typeof b.getMaxAllowableOffset&&0<b.getMaxAllowableOffset()&&this.hasGeometryOperations():!1},_getFullResolutionFeature:function(b){var g=b.getSourceLayer(),t=g.objectIdField;b=(b=b.attributes)&&t&&b[t];if(null==b)return null;var m=new C;m.objectIds=[b];m.maxAllowableOffset=0;m.outFields=[t];return g.queryFeatures(m).then(function(b){return b.features&&b.features[0]})},_isExpressionField:function(b){return this._reExprField.test(b)},_titleHasAsyncExpressions:function(){return h.some(this.getExpressionFieldsInTitle(),
function(b){b=this._exprCache[b];return!(!b||!b.async)},this)},_compileExpressions:function(b){var g={};h.forEach(b,function(b){var m=b.returnType&&b.returnType.toLowerCase();g[b.name]=new B({expression:b.expression,returnType:"number"===m?"number":"string",profile:v})});return g},_getArcadeExpressions:function(){var b=[],g;for(g in this._exprCache)b.push(this._exprCache[g]);return b},_fetchAttributesAsync:function(b,g){var t=this._fetchAttributes(b,g);b={};for(var m in t)(g=t[m])&&g.then&&(b[m]=
g);return A(b).then(function(b){for(var m in b){var f=b[m];t[m]=f instanceof Error?null:f}return t})},_fetchAttributes:function(b,g,t){var m=n.clone(b.attributes)||{},f=g&&g.geometry,c=this._exprPrefix,k=this._exprCache;t=t||h.map(this.info.expressionInfos,function(b){return b.name});h.forEach(t,function(g){var t=c+g;g=(g=k[g])?b.evaluateExpression(g,this._getEvalOptions(g,b,f)):null;"string"===typeof g&&(g=p.encode(g));m[t]=g},this);return m},_getEvalOptions:function(b,g,t){var m=b.hasGeometryOperations(),
f=g.getSourceLayer(),c=f&&(f.getMap()||f.parentLayer&&f.parentLayer.getMap());b=v.getEvalOptions({expression:b,feature:g,layer:f,map:c,spatialReference:c&&c.spatialReference});g=b.context.vars.$feature;m=!(!m||!t);g&&m&&(g._geometry=t);b.skipCache=m;return b},_getPopupValues:function(b,g,t){g=g||this._fetchAttributes(b);var m=this.info,f=b.getSourceLayer(),c=n.clone(g),k="",a="",w,p,v,d,x,e=f&&f._getDateOpts&&f._getDateOpts().properties,e=e&&e.slice(0),r={dateFormat:{properties:e,formatter:"DateFormat"+
this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo)for(d in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(d)){var z=this._relatedInfo[d],y=this._relatedLayersInfo[d];z&&(h.forEach(z.relatedFeatures,function(b){for(x in b.attributes)if(b.attributes.hasOwnProperty(x)&&"esriRelCardinalityOneToOne"===y.relation.cardinality){var m=this._toRelatedFieldName([y.relation.id,x]);g[m]=c[m]=b.attributes[x]}},this),h.forEach(z.relatedStatsFeatures,function(b){for(x in b.attributes)if(b.attributes.hasOwnProperty(x)){var m=
this._toRelatedFieldName([y.relation.id,x]);g[m]=c[m]=b.attributes[x]}},this))}for(p in c)d=this._fieldsMap[p.toLowerCase()],z=this._getLayerFieldInfo(f,p),d&&z&&(d.fieldName=z.name),c[p]=this._formatValue(c[p],p,r),e&&d&&d.format&&d.format.dateFormat&&(d=h.indexOf(e,p),-1<d&&e.splice(d,1));if(f)for(p in e=f.typeIdField,g)g.hasOwnProperty(p)&&-1===p.indexOf(this._relatedFieldPrefix)&&(v=g[p],u.isDefined(v)&&(d=this._getDomainName(f,b,p,v),u.isDefined(d)?c[p]=d:p===e&&(d=this._getTypeName(f,b,v),u.isDefined(d)&&
(c[p]=d))));m.title&&(k=this._processFieldsInLinks(this._fixTokens(m.title,f),g),k=n.trim(this._removeEmptyHref(u.substitute(c,k,r)||"")));if(t)return{title:k};m.description&&(a=this._processFieldsInLinks(this._fixTokens(m.description,f),g),a=n.trim(this._removeEmptyHref(u.substitute(c,a,r)||"")));m.fieldInfos&&(w=[],h.forEach(m.fieldInfos,function(b){(p=b.fieldName)&&b.visible&&w.push([this._fieldLabels[p.toLowerCase()]||p,u.substitute(c,"${"+p+"}",r)||""])},this));var l,q;m.mediaInfos&&(l=[],h.forEach(m.mediaInfos,
function(b){q=0;v=b.value;switch(b.type){case "image":var m=v.sourceURL,m=m&&n.trim(this._removeEmptyHref(u.substitute(g,this._fixTokens(m,f))));q=!!m;break;case "piechart":case "linechart":case "columnchart":case "barchart":var t,m=v.normalizeField;v.fields=h.map(v.fields,function(b){return(t=this._getLayerFieldInfo(f,b))?t.name:b},this);m&&(t=this._getLayerFieldInfo(f,m),v.normalizeField=t?t.name:m);q=h.some(v.fields,function(b){return u.isDefined(g[b])||-1!==b.indexOf(this._relatedFieldPrefix)&&
this._relatedInfo},this);break;default:return}if(q){b=n.clone(b);v=b.value;var m=b.title?this._processFieldsInLinks(this._fixTokens(b.title,f),g):"",k=b.caption?this._processFieldsInLinks(this._fixTokens(b.caption,f),g):"";b.title=m?n.trim(this._removeEmptyHref(u.substitute(c,m,r)||"")):"";b.caption=k?n.trim(this._removeEmptyHref(u.substitute(c,k,r)||"")):"";if("image"===b.type)v.sourceURL=u.substitute(g,this._fixTokens(v.sourceURL,f)),v.linkURL&&(v.linkURL=n.trim(u.substitute(g,this._fixTokens(v.linkURL,
f))||""));else{var E,a;h.forEach(v.fields,function(b,m){if(-1!==b.indexOf(this._relatedFieldPrefix))a=this._getRelatedChartInfos(b,v,g,r),a instanceof Array?v.fields=a:v.fields[m]=a;else{var f=g[b],f=void 0===f?null:f;E=g[v.normalizeField]||0;f&&E&&(f/=E);v.fields[m]={y:f,tooltip:(this._fieldLabels[b.toLowerCase()]||b)+":\x3cbr/\x3e"+this._formatValue(f,b,r,!!E)}}},this)}l.push(b)}},this));return{title:k,description:a,hasDescription:!!m.description,fields:w&&w.length?w:null,mediaInfos:l&&l.length?
l:null,formatted:c,editSummary:!1!==m.showLastEditInfo&&f&&f.getEditSummary?f.getEditSummary(b):""}},_getRelatedChartInfos:function(b,g,t,m){var f,c,k,a,v,p;f=[];p=this._fromRelatedFieldName(b);v=p[0];c=this._relatedInfo[v];v=this._relatedLayersInfo[v];c&&h.forEach(c.relatedFeatures,function(c){c=c.attributes;var E,v;for(v in c)if(c.hasOwnProperty(v)&&v===p[1]){E={};a=c[v];g.normalizeField&&(k=-1!==g.normalizeField.indexOf(this._relatedFieldPrefix)?c[this._fromRelatedFieldName(g.normalizeField)[1]]:
t[g.normalizeField]);a&&k&&(a/=k);if(g.tooltipField)if(-1!==g.tooltipField.indexOf(this._relatedFieldPrefix)){var d=this._fromRelatedFieldName(g.tooltipField)[1],w=u.isDefined(c[d])?this._formatValue(c[d],g.tooltipField,m,!!k):d;E.tooltip=w+":\x3cbr/\x3e"+this._formatValue(a,d,m,!!k)}else E.tooltip=(this._fieldLabels[b.toLowerCase()]||b)+":\x3cbr/\x3e"+this._formatValue(a,g.tooltipField,m,!!k);else E.tooltip=a;E.y=a;f.push(E)}},this);return"esriRelCardinalityOneToMany"===v.relation.cardinality||"esriRelCardinalityManyToMany"===
v.relation.cardinality?f:f[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",
longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,_fixTokens:function(b,g){var t=this;return b.replace(/(\{([^\{\r\n]+)\})/g,function(b,f,c){b=t._getLayerFieldInfo(g,c);return"$"+(b?"{"+b.name+"}":f)})},_encodeAttributes:function(b){b=n.clone(b)||{};var g,t;for(g in b)(t=b[g])&&"string"===typeof t&&(t=encodeURIComponent(t).replace(/\'/g,
"\x26apos;"),b[g]=t);return b},_processFieldsInLinks:function(b,g){var t=this._encodeAttributes(g);g=n.hitch(this,this._addValuesToHref,g,t);b&&(b=b.replace(this._reHref,g).replace(this._reHrefApos,g));return b},_addValuesToHref:function(b,g,t,m){m=m&&n.trim(m);return t=u.substitute(m&&0===m.indexOf("${")?b:g,t)},_getLayerFieldInfo:function(b,g){return b&&b.getField?b.getField(g):null},_formatValue:function(b,g,t,m){var f=this._fieldsMap[g.toLowerCase()],c=f&&f.format;g=-1!==h.indexOf(t.dateFormat.properties,
g);var k="number"===typeof b&&!g&&(!c||!c.dateFormat);if(!u.isDefined(b)||!f||!u.isDefined(c))return this._applyFormatting(b,k);var a="",f=[],v=c.hasOwnProperty("places")||c.hasOwnProperty("digitSeparator"),p=c.hasOwnProperty("digitSeparator")?c.digitSeparator:!0;if(v&&!g)a="NumberFormat",f.push("places: "+(u.isDefined(c.places)&&(!m||0<c.places)?Number(c.places):"Infinity")),f.length&&(a+="("+f.join(",")+")");else if(c.dateFormat)a="DateFormat"+this._insertOffset(this._dateFormats[c.dateFormat]||
this._dateFormats.shortDateShortTime);else return this._applyFormatting(b,k);var d=this._applyFormatFunctions(b,a,t);v&&-1<b.constructor.toString().indexOf("Array")&&(d="",h.forEach(b,n.hitch(this,function(b,m){m&&(d+=" ");d+=this._applyFormatFunctions(b,a,t)})));v&&!p&&w.group&&(d=d.replace(new RegExp("\\"+w.group,"g"),""));g&&(d='\x3cspan class\x3d"esriDateValue"\x3e'+d+"\x3c/span\x3e");return this._applyFormatting(d,k)},_applyFormatFunctions:function(b,g,c){return u.substitute({myKey:b},"${myKey:"+
g+"}",c)||""},_applyFormatting:function(b,g){return g?this._forceLTR(b):this._applyPreWrap(b)},_forceLTR:function(b){var g=y("ie");return g&&10>=g?b:"\x3cspan class\x3d'esriNumericValue'\x3e"+b+"\x3c/span\x3e"},_applyPreWrap:function(b){return"string"===typeof b?b.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):b},_insertOffset:function(b){b&&(b=u.isDefined(this.utcOffset)?b.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):b);return b},_getDomainName:function(b,g,
c,m){return(b=b.getDomain&&b.getDomain(c,{feature:g}))&&b.codedValues?b.getName(m):null},_getTypeName:function(b,g,c){return(b=b.getType&&b.getType(g))&&b.name},_getRelatedRecords:function(b){var g=b.graphic,c;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=this._getRelatedLayersInfo(b).then(n.hitch(this,function(b){for(c in b)b.hasOwnProperty(c)&&b[c]&&(this._relatedLayersInfo[c].relatedLayerInfo=b[c])})));return this._relatedLayersInfoPromise.then(n.hitch(this,function(){return this._queryRelatedLayers(g)})).then(n.hitch(this,
function(b){this._setRelatedRecords(g,b);return b}))},_getRelatedLayersInfo:function(b){var g=b.fieldsInfo,t,m,f={};t=b.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});h.forEach(g,function(b){var m,f,g,k;m=this._fromRelatedFieldName(b.fieldName);f=m[0];m=m[1];f&&(!this._relatedLayersInfo[f]&&t&&t.relationships&&(h.some(t.relationships,function(b){if(b.id==f)return k=b,!0}),k&&(this._relatedLayersInfo[f]={relation:k,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[f]&&
(this._relatedLayersInfo[f].relatedFields.push(m),b.statisticType&&(g=new c,g.statisticType=b.statisticType,g.onStatisticField=m,g.outStatisticFieldName=m,this._relatedLayersInfo[f].outStatistics.push(g))))},this);for(m in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(m)&&this._relatedLayersInfo[m]&&(b=this._relatedLayersInfo[m].relation,b=t.url.replace(/[0-9]+$/,b.relatedTableId),this._relatedLayersInfo[m].relatedLayerUrl=b,f[m]=z({url:b,content:{f:"json"},callbackParamName:"callback"}));
return d(f)},_queryRelatedLayers:function(b){var g={},c;for(c in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(c)&&(g[c]=this._queryRelatedLayer({graphic:b,relatedInfo:this._relatedLayersInfo[c]}));return d(g)},_queryRelatedLayer:function(b){var c,t,m,f,k,a,v,p,w,x,e,z,u;c=b.graphic;t=c.getSourceLayer();m=t.url.match(/[0-9]+$/g)[0];e=b.relatedInfo;x=e.relatedLayerInfo;z=e.relatedLayerUrl;b=e.relation;h.some(x.relationships,function(b){if(b.relatedTableId===parseInt(m,10))return f=
b,!0},this);f&&(k=new C,h.some(x.fields,function(b){if(b.name===f.keyField)return p=-1!==h.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],b.type)?"number":"string",!0}),f.relationshipTableId&&f.keyFieldInRelationshipTable?(u=new r,this._queryRelatedRecords(c,f).then(n.hitch(this,function(b){var m;(m=b[c.attributes[t.objectIdField]])?(b=h.map(m.features,function(b){return b.attributes[x.objectIdField]},this),e.outStatistics&&0<e.outStatistics.length&&
x.supportsStatistics&&(w=new C,w.objectIds=b,w.outFields=k.outFields,w.outStatistics=e.outStatistics),w&&(a=new F(z),a.execute(w).then(n.hitch(this,function(b){var f=[];f.push(m);f.push(b);u.resolve(f)})))):u.resolve()}))):(v="string"===p?f.keyField+"\x3d'"+c.attributes[b.keyField]+"'":f.keyField+"\x3d"+c.attributes[b.keyField],k.where=v,k.outFields=e.relatedFields,e.outStatistics&&0<e.outStatistics.length&&x.supportsStatistics&&(w=new C,w.where=k.where,w.outFields=k.outFields,w.outStatistics=e.outStatistics),
a=new F(z),v=[],v.push(a.execute(k)),w&&v.push(a.execute(w))));return v?d(v):u?u.promise:void 0},_setRelatedRecords:function(b,c){this._relatedInfo=[];for(var g in c)c.hasOwnProperty(g)&&c[g]&&(b=c[g],this._relatedInfo[g]={},this._relatedInfo[g].relatedFeatures=b[0].features,u.isDefined(b[1])&&(this._relatedInfo[g].relatedStatsFeatures=b[1].features))},_handlerErrorResponse:function(b,c){b.reject(c)},_fromRelatedFieldName:function(b){var c=[];-1!==b.indexOf(this._relatedFieldPrefix)&&(b=b.split("/"),
c=b.slice(1));return c},_toRelatedFieldName:function(b){var c="";b&&0<b.length&&(c=this._relatedFieldPrefix+b[0]+"/"+b[1]);return c},_queryRelatedRecords:function(b,c){var g=b.getSourceLayer(),m=new k;m.outFields=["*"];m.relationshipId=c.id;m.objectIds=[b.attributes[g.objectIdField]];return g.queryRelatedFeatures(m)},_removeEmptyHref:function(b){return b.replace(/href=(""|'')/gi,"")}});a("extend-esri")&&(D.PopupInfo=D.PopupInfoTemplate=q);return q})},"dojox/html/entities":function(){define(["dojo/_base/lang"],
function(q){var n=q.getObject("dojox.html.entities",!0),h=function(e,a){var r,h;if(a._encCache&&a._encCache.regexp&&a._encCache.mapper&&a.length==a._encCache.length)r=a._encCache.mapper,h=a._encCache.regexp;else{r={};h=["["];var d;for(d=0;d<a.length;d++)r[a[d][0]]="\x26"+a[d][1]+";",h.push(a[d][0]);h.push("]");h=new RegExp(h.join(""),"g");a._encCache={mapper:r,regexp:h,length:a.length}}return e=e.replace(h,function(a){return r[a]})},l=function(e,a){var h,l;if(a._decCache&&a._decCache.regexp&&a._decCache.mapper&&
a.length==a._decCache.length)h=a._decCache.mapper,l=a._decCache.regexp;else{h={};l=["("];var d;for(d=0;d<a.length;d++){var p="\x26"+a[d][1]+";";d&&l.push("|");h[p]=a[d][0];l.push(p)}l.push(")");l=new RegExp(l.join(""),"g");a._decCache={mapper:h,regexp:l,length:a.length}}return e=e.replace(l,function(a){return h[a]})};n.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];n.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],
["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0",
"Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da",
"Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4",
"ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f",
"Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3",
"sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0",
"lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245",
"cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],
["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];n.encode=function(e,a){e&&(a?
e=h(e,a):(e=h(e,n.html),e=h(e,n.latin)));return e};n.decode=function(e,a){e&&(a?e=l(e,a):(e=l(e,n.html),e=l(e,n.latin)));return e};return n})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(q,n,h,l,e,a){q=q(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,
_compiled:!1,constructor:function(a){n.mixin(this,a);this.returnType=this.returnType||"string";this.id=e.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var e=this._traits.geometryOperations;void 0===e&&(e=this._traits.geometryOperations=a.hasGeometryOperations(this.syntaxTree));return e},hasFeatureSetOperations:function(){var e=this._traits.featureSetOperations;void 0===e&&(e=this._traits.featureSetOperations=
a.hasFeatureSetOperations(this.syntaxTree));return e},hasVariable:function(e){var h=this._traits.variables;void 0===h[e]&&(h[e]=a.hasVariable(this.syntaxTree,e));return h[e]},evaluate:function(e){this._compile();var h=this._attributeCache.compiledFunc;return this.async?a.executeAsyncFunction(h,e):a.executeFunction(h,e)},_setSyntaxTree:function(a){this.syntaxTree=a;this._compiled=!1;this._traits={variables:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef=
{valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});h("extend-esri")&&(l.ArcadeExpression=q);return q})},
"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(q,n,h,l,e,a,r,y,d,p,u,D,z,A,B){var C=d("esri-pbf"),F=n(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(c){this._handleSuccess=
h.hitch(this,this._handleSuccess);this._handleError=h.hitch(this,this._handleError);h.mixin(this,c);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var c=new e(this._canceler);this._fetchDfd=c;this._result=null;this._sendRequest();return c.promise},_canceler:function(c){var k=c._pendingRequest,a;c.isFulfilled()||!k||k.isFulfilled()||(k.cancel(),a=k.results&&k.results[1]);c._pendingRequest=null;return a},_sendRequest:function(c){var k=this.query;
this.pagination&&(this._startPage=k.resultOffset=null==c?0:c,k.resultRecordCount=this.pageSize);c=this.requestOptions;this._fetchDfd._pendingRequest=p({url:this.url,content:k,handleAs:"pbf"===k.f?"arraybuffer":"json",callbackParamName:"callback",timeout:c&&c.timeout},c);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(c){this.pagination?(c.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=
this._result.features.concat(c.features):this._result=c,this._fetchDfd.progress(c),c.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(c),this._fetchDfd.resolve(c))},_handleError:function(c){this._fetchDfd.reject(c)}}),k=n(A,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(c,k){this._handler=
h.hitch(this,this._handler);this._relationshipQueryHandler=h.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=h.hitch(this,this._executeForIdsHandler);this._countHandler=h.hitch(this,this._countHandler);this._extentHandler=h.hitch(this,this._extentHandler);this.source=k&&k.source;this.gdbVersion=k&&k.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,
p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(c,v,d,w,b){var g=b.assembly;c=this._encode(h.mixin({},this._url.query,{f:w&&w.format||"json"},c.toJson(g&&g[0])));var t=this._handler,
m=this._errorHandler;this.source&&(w={source:this.source.toJson()},c.layer=a.toJson(w));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);var f="pbf"===c.f;if(f){var E;C||(E="QueryTask.execute: 'pbf' format is not supported in your browser.");if(E)return c=new e,c.addErrback(function(f){m(f,d,b.dfd)}),c.reject(Error(E)),c}E=this.requestOptions;E=p({url:this._url.path+"/query",content:c,callbackParamName:"callback",handleAs:f?"arraybuffer":"json",timeout:E&&E.timeout},E);c=[E];f&&c.push(k.loadPBFReader());
(new r(c)).then(function(c){b.dfd.isFulfilled()||(c=c[0],c[0]?t(c[1],f,v,d,b.dfd):m(c[1],d,b.dfd))});return E},rawExecute:function(c,k,d){k=k||{};c=this._encode(h.mixin({},this._url.query,{f:k.format||"json"},c.toJson(d.assembly&&d.assembly[0])));this.source&&(c.layer=a.toJson({source:this.source.toJson()}));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);return(new F({url:this._url.path+"/query",query:c,requestOptions:this.requestOptions,pagination:k.pagination,pageSize:k.pageSize})).execute().then(null,
null,function(c){d.dfd.progress(c)}).then(h.hitch(this,function(c){this._successHandler([c],"onRawExecuteComplete",null,d.dfd)})).otherwise(h.hitch(this,function(c){this._errorHandler(c,null,d.dfd)}))},executeRelationshipQuery:function(c,k,a){c=this._encode(h.mixin({},this._url.query,{f:"json"},c.toJson()));var d=this._relationshipQueryHandler,b=this._errorHandler;this.gdbVersion&&(c.gdbVersion=this.gdbVersion);var g=new e(u._dfdCanceller),t=this.requestOptions;g._pendingDfd=p({url:this._url.path+
"/queryRelatedRecords",content:c,callbackParamName:"callback",timeout:t&&t.timeout,load:function(b,f){d(b,f,k,a,g)},error:function(m){b(m,a,g)}},t);return g},executeForIds:function(c,k,d,w){var b=w.assembly;c=this._encode(h.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},c.toJson(b&&b[0])));var g=this._executeForIdsHandler,t=this._errorHandler;this.source&&(b={source:this.source.toJson()},c.layer=a.toJson(b));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);b=this.requestOptions;return p({url:this._url.path+
"/query",content:c,callbackParamName:"callback",timeout:b&&b.timeout,load:function(b,f){g(b,f,k,d,w.dfd)},error:function(b){t(b,d,w.dfd)}},b)},executeForCount:function(c,k,d,w){var b=w.assembly;c=this._encode(h.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},c.toJson(b&&b[0])));var g=this._countHandler,t=this._errorHandler;this.source&&(b={source:this.source.toJson()},c.layer=a.toJson(b));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);b=this.requestOptions;return p({url:this._url.path+
"/query",content:c,callbackParamName:"callback",timeout:b&&b.timeout,load:function(b,f){g(b,f,k,d,w.dfd)},error:function(b){t(b,d,w.dfd)}},b)},executeForExtent:function(c,k,d,w){var b=w.assembly;c=this._encode(h.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},c.toJson(b&&b[0])));var g=this._extentHandler,t=this._errorHandler;this.source&&(b={source:this.source.toJson()},c.layer=a.toJson(b));this.gdbVersion&&(c.gdbVersion=this.gdbVersion);b=this.requestOptions;return p({url:this._url.path+
"/query",content:c,callbackParamName:"callback",timeout:b&&b.timeout,load:function(b,f){g(b,f,k,d,w.dfd)},error:function(b){t(b,d,w.dfd)}},b)},_handler:function(c,a,d,p,b){try{c&&a&&(c=k.pbfDeps.optimizedFeatures.convertToFeatureSet(k.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(c)));var g=new B(c);this._successHandler([g],"onComplete",d,b)}catch(t){this._errorHandler(t,p,b)}},_relationshipQueryHandler:function(c,k,a,d,b){try{var g=c.geometryType,t=c.spatialReference,m={};l.forEach(c.relatedRecordGroups,
function(b){var f={};f.geometryType=g;f.spatialReference=t;f.features=b.relatedRecords;f=new B(f);if(null!=b.objectId)m[b.objectId]=f;else for(var c in b)b.hasOwnProperty(c)&&"relatedRecords"!==c&&(m[b[c]]=f)});this._successHandler([m],"onExecuteRelationshipQueryComplete",a,b)}catch(f){this._errorHandler(f,d,b)}},_executeForIdsHandler:function(c,k,a,d,b){try{this._successHandler([c.objectIds],"onExecuteForIdsComplete",a,b)}catch(g){this._errorHandler(g,d,b)}},_countHandler:function(c,k,a,d,b){try{var g,
t=c.features,m=c.objectIds;if(m)g=m.length;else{if(t)throw Error("Unable to perform query. Please check your parameters.");g=c.count}this._successHandler([g],"onExecuteForCountComplete",a,b)}catch(f){this._errorHandler(f,d,b)}},_extentHandler:function(c,k,a,d,b){try{c.extent&&(c.extent=new D(c.extent)),this._successHandler([c],"onExecuteForExtentComplete",a,b)}catch(g){this._errorHandler(g,d,b)}}});k.loadPBFReader=function(){var c=new e;k.pbfDeps?c.resolve():q(["./support/pbfDeps"],function(a){k.pbfDeps=
a;c.isFulfilled()||c.resolve()});return c.promise};z._createWrappers(k);d("extend-esri")&&h.setObject("tasks.QueryTask",k,y);return k})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(q,n,h){q.DeferredList=function(l,e,a,r,q){var d=[];n.call(this);var p=this;0!==l.length||e||this.resolve([0,[]]);var u=0;h.forEach(l,function(h,z){function n(a,e){d[z]=[a,e];u++;u===l.length&&p.resolve(d)}h.then(function(a){e?p.resolve([z,a]):n(!0,a)},function(d){a?
p.reject(d):n(!1,d);if(r)return null;throw d;})})};q.DeferredList.prototype=new n;q.DeferredList.prototype.gatherResults=function(l){l=new q.DeferredList(l,!1,!0,!1);l.addCallback(function(e){var a=[];h.forEach(e,function(e){a.push(e[1])});return a});return l};return q.DeferredList})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(q,n,h,l,e,a,r,y){q=q(y,{declaredClass:"esri.tasks._Task",
_eventMap:{error:["error"],complete:["result"]},constructor:function(a,p){a&&n.isString(a)&&(this._url=r.urlToObject(this.url=a));p&&p.requestOptions&&(this.requestOptions=p.requestOptions);this.normalization=!0;this._errorHandler=n.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var a=this._url,p=/^http:/i;this.url&&(this.url=this.url.replace(p,"https:"));a&&a.path&&(a.path=a.path.replace(p,"https:"))},_encode:function(a,p,e){var d,z,u={},l,r;for(l in a)if("declaredClass"!==
l&&(d=a[l],z=typeof d,null!==d&&void 0!==d&&"function"!==z))if(n.isArray(d))for(u[l]=[],r=d.length,z=0;z<r;z++)u[l][z]=this._encode(d[z]);else"object"===z?d.toJson&&(z=d.toJson(e&&e[l]),"esri.tasks.FeatureSet"===d.declaredClass&&z.spatialReference&&(z.sr=z.spatialReference,delete z.spatialReference),u[l]=p?z:h.toJson(z)):u[l]=d;return u},_successHandler:function(d,p,e,h){p&&this[p].apply(this,d);e&&e.apply(null,d);h&&a._resDfd(h,d)},_errorHandler:function(a,e,h){this.onError(a);e&&e(a);h&&h.errback(a)},
setNormalization:function(a){this.normalization=a},onError:function(){}});l("extend-esri")&&(e.Task=q);return q})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(q,n,h,l,e,a,r,y,d,p,u,D){q=q(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(a,d){if(a){n.mixin(this,a);var e=this.features=
this.features||[],p=a.spatialReference,p=this.spatialReference=u.createInstance(y.simpleConstructor,p),l=u.getGeometryType(a.geometryType);this.geometryType=a.geometryType;a.fields&&(this.fields=a.fields);a=u.supportsLazyUnquantization(this.geometryType);var k=u.unquantizeFunction(this.geometryType,this.transform),c=!!(d&&a&&k),v=l&&(c?l.accessorConstructor:l.simpleConstructor);h.forEach(e,function(a,d){var b=u.createInstance(r.simpleConstructor),g=a.geometry;if(l&&g){var t=b.geometry=u.createInstance(v,
c?null:g);t.setSpatialReference(g.spatialReference?u.createInstance(y.simpleConstructor,g.spatialReference):p);c&&t.setupLazyUnquantization(k,g)}b.symbol=a.symbol?D.fromJson(a.symbol):null;b.attributes=a.attributes;e[d]=b});c||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(e){var p={};this.displayFieldName&&(p.displayFieldName=this.displayFieldName);this.fields&&(p.fields=this.fields);this.spatialReference?p.spatialReference=
this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(p.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(p.geometryType=u.getJsonType(this.features[0].geometry)),p.features=d._encodeGraphics(this.features,e));p.geometryType=p.geometryType||this.geometryType;p.exceededTransferLimit=this.exceededTransferLimit;p.transform=this.transform;return a.fixJson(p)},_hydrate:function(){u.unquantize(this.features,this.geometryType,
this.transform);this.transform=null},quantize:function(a){if(!this.geometryType)return this.transform=null,this;var d=a.translate[0],p=a.translate[1],e=a.scale[0],h=a.scale[1],k=this.features,c=function(b,c,k){var m,f,g,a,t,d,p=[];m=0;for(f=b.length;m<f;m++)if(g=b[m],0<m){if(d=c(g[0]),g=k(g[1]),d!==a||g!==t)p.push([d-a,g-t]),a=d,t=g}else a=c(g[0]),t=k(g[1]),p.push([a,t]);return 0<p.length?p:null},v=function(b,g,k){if("esriGeometryPoint"===b)return function(b){b.x=g(b.x);b.y=k(b.y);return b};if("esriGeometryPolyline"===
b||"esriGeometryPolygon"===b)return function(b){var f,m,a,t,d;a=b.rings||b.paths;d=[];f=0;for(m=a.length;f<m;f++)t=a[f],(t=c(t,g,k))&&d.push(t);return 0<d.length?(b.rings?b.rings=d:b.paths=d,b):null};if("esriGeometryMultipoint"===b)return function(b){var f;f=c(b.points,g,k);return 0<f.length?(b.points=f,b):null};if("esriGeometryEnvelope"===b)return function(b){return b}}(this.geometryType,function(b){return Math.round((b-d)/e)},function(b){return Math.round((p-b)/h)}),l,w;l=0;for(w=k.length;l<w;l++)k[l].geometry&&
(v(k[l].geometry)||k[l].setGeometry(null));this.transform=a;return this}});q.createGraphics=function(a){var d=a.geometryType,p=u.createInstance(y.simpleConstructor,a.spatialReference),e=u.getGeometryType(d).accessorConstructor,l=u.unquantizeFunction(d,a.transform);return h.map(a.features,function(a,c){c=u.createInstance(r.simpleConstructor);var k=a.geometry;if(k){var d=c.geometry=u.createInstance(e);d.setSpatialReference(p);d.setupLazyUnquantization(l,k)}c.attributes=a.attributes;return c})};q.createPolygon=
function(a,d,e){var h;a&&(h=u.createInstance(p.accessorConstructor),h.setSpatialReference(d),d=u.unquantizeFunction("esriGeometryPolygon",e),h.setupLazyUnquantization(d,a));return h};l("extend-esri")&&n.setObject("tasks.FeatureSet",q,e);return q})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(q,n,h,l,e){q=q(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,
objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var a={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},e=this.objectIds,l=this.outFields,d=this.outSpatialReference,p=this.orderByFields;e&&(a.objectIds=e.join(","));l&&(a.outFields=l.join(","));d&&(a.outSR=d.wkid||h.toJson(d.toJson()));p&&(a.orderByFields=
p.join(","));a._ts=this._ts;return a}});l("extend-esri")&&n.setObject("tasks.RelationshipQuery",q,e);return q})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,n,h,l){q=q(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,
maxVertexCount:this.maxVertexCount}}});h("extend-esri")&&n.setObject("tasks.StatisticDefinition",q,l);return q})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(q,n,h,l,e,a,r,y){q=new (q(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map"],async:["$layer","$datastore","$map"]},context:{vars:{$feature:"any",
$layer:"any",$datastore:"any",$map:"any"}}},initialize:function(a){var d=[];y.hasGeometryOperations(a)&&d.push(r.enableGeometryOperations());(y.hasFeatureSetOperations(a)||y.hasVariables(a,this.defaults.globals.featureSet))&&d.push(r.enableFeatureSetOperations());y.isAsync(a)&&d.push(r.enableAsyncOperations());return e(d)},isAsync:function(a){a=[a];return y.hasFeatureSetOperations(a)||y.hasVariables(a,this.defaults.globals.async)},parse:function(a){return r.createSyntaxTree(a.expression)},compile:function(a){var d=
n.clone(this.defaults.context);d.useAsync=a.async;return a.syntaxTree?r.createFunction(a.syntaxTree,d):null},getEvalOptions:function(d){var e=d.expression,h=d.feature,l=d.layer,n=d.map;d=d.spatialReference;var h=h&&e.hasVariable("$feature")?a.createFromGraphicLikeObject(h.geometry,h.attributes,l):null,q,B;if(l){var C={spatialReference:d};e.hasVariable("$layer")&&(q=l.getMap()?r.createFeatureSetFromLayer(l,C):r.createFeatureSetFromLayerUrl(l.url,C));e.hasVariable("$datastore")&&(B=(B=y.getServiceUrl(l.url))?
r.createFeatureSetCollectionFromServiceUrl(B,C):null)}e=n&&e.hasVariable("$map")?r.createFeatureSetCollectionFromMap(n):null;return{context:{vars:{$feature:h,$layer:q,$datastore:B,$map:e},spatialReference:d}}}}));h("extend-esri")&&n.setObject("arcadeProfiles.popupProfile",q,l);return q})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(q,n,h,l,e,a,r,y,d,p,u,D,z,A,B,C,F,k,c,v,x){var w=0,b=x.widgets.popup,g=x.widgets.templatePicker;n=n([v,B,C],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=l.mixin({},b)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(g.loading);this._contentDfd=this.template.getComponents(this.graphic).then(l.hitch(this,this._handleComponentsSuccess)).otherwise(l.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var b=this._mediaInfos,m=b.length,f=this.domNode,c=this._prevMedia,g=this._nextMedia;if(1<m){var k=0,d=0;e.forEach(b,function(b){"image"===b.type?k++:-1!==b.type.indexOf("chart")&&d++});k&&(p.set(this._imageCount,"innerHTML",k),a.query(".summary .image",
f).removeClass("hidden"));d&&(p.set(this._chartCount,"innerHTML",d),a.query(".summary .chart",f).removeClass("hidden"))}else a.query(".summary",f).addClass("hidden"),u.add(c,"hidden"),u.add(g,"hidden");b=this._mediaPtr;0===b?u.add(c,"hidden"):u.remove(c,"hidden");b===m-1?u.add(g,"hidden"):u.remove(g,"hidden");this._destroyFrame()},_displayMedia:function(){var b=this._mediaInfos[this._mediaPtr],m=b.title,f=b.caption,c=a.query(".mediaSection .hzLine",this.domNode)[0];p.set(this._mediaTitle,"innerHTML",
m);u[m?"remove":"add"](this._mediaTitle,"hidden");p.set(this._mediaCaption,"innerHTML",f);u[f?"remove":"add"](this._mediaCaption,"hidden");u[m&&f?"remove":"add"](c,"hidden");this._rid=null;if("image"===b.type)this._showImage(b);else{var g=this,m=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],f=b.value.theme||this.chartTheme;l.isString(f)&&(f=f.replace(/\./gi,"/"),-1===f.indexOf("/")&&(f="dojox/charting/themes/"+f));f||(f="./Rainbow");m.push(f);try{var k=this._rid=w++;q(m,function(f,
m,c){k===g._rid&&(g._rid=null,g._showChart(b.type,b.value,f,m,c))})}catch(N){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(b){return(b=b&&l.trim(b).toLowerCase())&&(0===b.indexOf("mailto:")||0===b.indexOf("tel:"))},_showImage:function(b){u.add(this._mediaFrame,"image");var m=z.get(this._gallery,"height"),f=b.value,c;f.linkURL&&(c=D.create("a",{href:f.linkURL,target:this._preventNewTab(f.linkURL)?"":"_blank"},this._mediaFrame));f=b.refreshInterval?this._addURLParameter(f.sourceURL,
"timestamp",Date.now()):f.sourceURL;D.create("img",{className:"esriPopupMediaImage",src:f},c||this._mediaFrame);var g=a.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=h.connect(g,"onload",this,function(){this._clearImageHandles();this._imageLoaded(g,m);this._initImageRefresh(b)})},_addURLParameter:function(b,m,f){var c=-1===b.indexOf("?")?"?":"\x26";return b+c+m+"\x3d"+f},_initImageRefresh:function(b){if(b.refreshInterval){var m=6E4*b.refreshInterval;this._imageRefreshHandle=
setTimeout(l.hitch(this,function(){this._destroyFrame();this._showImage(b)}),m)}},_clearImageHandles:function(){h.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(b,m,f,c,a){u.remove(this._mediaFrame,"image");f=this._chart=new f(D.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});a&&f.setTheme(a);switch(b){case "piechart":f.addPlot("default",{type:"Pie",labels:!1});f.addSeries("Series A",
m.fields);break;case "linechart":f.addPlot("default",{type:"Markers"});f.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});f.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});e.forEach(m.fields,function(b,f){b.x=f+1});f.addSeries("Series A",m.fields);break;case "columnchart":f.addPlot("default",{type:"Columns",gap:3});f.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});f.addSeries("Series A",m.fields);break;case "barchart":f.addPlot("default",{type:"Bars",
gap:3}),f.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),f.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),f.addSeries("Series A",m.fields)}this._action=new c(f);f.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);p.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(b,m){var f=b.height;f<m&&z.set(b,"marginTop",
Math.round((m-f)/2)+"px")},_attListHandler:function(b,m){if(b===this._attachmentsDfd){this._attachmentsDfd=null;var f="";m instanceof Error||!m||!m.length||e.forEach(m,function(b){f+="\x3cli\x3e";f+="\x3ca href\x3d'"+c.addProxy(b.url)+"' target\x3d'_blank'\x3e"+(b.name||"[No name]")+"\x3c/a\x3e";f+="\x3c/li\x3e"});p.set(this._attachmentsList,"innerHTML",f||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_supportedURIInfos:[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:b.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:b.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:b.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:b.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:b.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,
appName:"Survey123",label:b.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:b.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:b.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:b.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:b.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:b.NLS_openLinkInApp},
{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:b.NLS_openLinkInApp}],_findURIInfo:function(b){var m;e.some(this._supportedURIInfos,function(f){f.pattern.test(b)&&(m=f);return!!m});return m},_createLinkIfURI:function(b){var m=this._findURIInfo(b);if(m){var f=b.match(m.pattern);return b.replace(m.pattern,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+k.substitute({appName:m.appName,hierPart:f&&f[2]},m.label)+"\x3c/a\x3e")}return b},_showStatus:function(b){p.set(this._status,
"innerHTML",b);u.remove(this._status,"hidden");a.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){p.set(this._status,"innerHTML","");u.add(this._status,"hidden");a.query(".mainSection",this.domNode).removeClass("hidden")},_handleComponentsSuccess:function(c){if(c){this._hideStatus();var m=this.showTitle?c.title:"",f=c.description,g=c.fields,k=c.mediaInfos,t=this.domNode,h=this._nls,w=this,v=this.template,n=this.graphic;this._prevMedia.title=h.NLS_prevMedia;this._nextMedia.title=
h.NLS_nextMedia;p.set(this._title,"innerHTML",m);m||u.add(this._title,"hidden");!c.hasDescription&&g&&(f="",e.forEach(g,function(b){f+="\x3ctr valign\x3d'top'\x3e";f+="\x3ctd class\x3d'attrName'\x3e"+A.encode(b[0])+"\x3c/td\x3e";f+="\x3ctd class\x3d'attrValue'\x3e"+this._createLinkIfURI(b[1])+"\x3c/td\x3e";f+="\x3c/tr\x3e"},this),f&&(f="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+f+"\x3c/table\x3e"));p.set(this._description,"innerHTML",f);f||u.add(this._description,
"hidden");a.query("a",this._description).forEach(function(b){w._preventNewTab(b.href)?"_blank"===b.target&&p.remove(b,"target"):p.set(b,"target","_blank")});m&&f?a.query(".mainSection .hzLine",t).removeClass("hidden"):m||f?a.query(".mainSection .hzLine",t).addClass("hidden"):a.query(".mainSection",t).addClass("hidden");if(m=this._attachmentsDfd=v.getAttachments(n))m.addBoth(l.hitch(this,this._attListHandler,m)),p.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+h.NLS_searching+"...\x3c/li\x3e"),
a.query(".attachmentsSection",t).removeClass("hidden");k&&k.length&&(a.query(".mediaSection",t).removeClass("hidden"),d.setSelectable(this._mediaFrame,!1),this._mediaInfos=k,this._mediaPtr=0,this._updateUI(),this._displayMedia());c.editSummary&&(p.set(this._editSummary,"innerHTML",c.editSummary),k&&k.length&&u.remove(this._mediaBreak,"hidden"),u.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(b.NLS_noInfo)},_handleComponentsError:function(c){c&&"cancel"===
c.dojoType||(console.log("PopupRenderer: error loading template",c),this._showStatus(b.NLS_noInfo))}});r("extend-esri")&&l.setObject("dijit._PopupRenderer",n,F);return n})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(q,n,h,l,e,a,r,y,d,p,u,D,z){function A(){}function B(a){return function(d,
k,c,e){return d&&"string"==typeof k&&d[k]==A?d.on(k.substring(2).toLowerCase(),r.hitch(c,e)):a.apply(h,arguments)}}q.around(h,"connect",B);a.connect&&q.around(a,"connect",B);q=l("dijit._Widget",[u,D,z],{onClick:A,onDblClick:A,onKeyDown:A,onKeyPress:A,onKeyUp:A,onMouseDown:A,onMouseMove:A,onMouseOut:A,onMouseOver:A,onMouseLeave:A,onMouseEnter:A,onMouseUp:A,constructor:function(a){this._toConnect={};for(var d in a)this[d]===A&&(this._toConnect[d.replace(/^on/,"").toLowerCase()]=a[d],delete a[d])},postCreate:function(){this.inherited(arguments);
for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,d){return this[this._onMap(a)]===A?h.connect(this.domNode,a.toLowerCase(),this,d):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(d,e){a.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(d,e)},attr:function(a,d){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,
arguments):this.get(a)},getDescendants:function(){a.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?y("[widgetId]",this.containerNode).map(p.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});return q})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(q,n,h,l,e,a,r,y,d,p,u,D,z,A,B,C,F,k,c,v,x,w,b){function g(b){return function(f){y[f?"set":"remove"](this.domNode,b,f);this._set(b,f)}}z.add("dijit-legacy-requires",!A.isAsync);z.add("dojo-bidi",!1);z("dijit-legacy-requires")&&F(0,function(){q(["dijit/_base/manager"])});var t={};l=a("dijit._WidgetBase",[k,x],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:g("lang"),dir:"",_setDirAttr:g("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(b){this._set("ownerDocument",b)},attributeMap:{},_blankGif:l.blankGif||q.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var b=this.constructor;if(!b._setterAttrs){var f=b.prototype,c=b._setterAttrs=[],b=b._onMap={},a;for(a in f.attributeMap)c.push(a);for(a in f)/^on/.test(a)&&(b[a.substring(2).toLowerCase()]=a),/^_set[A-Z](.*)Attr$/.test(a)&&(a=a.charAt(4).toLowerCase()+
a.substr(5,a.length-9),f.attributeMap&&a in f.attributeMap||c.push(a))}},postscript:function(b,f){this.create(b,f)},create:function(c,f){this._introspect();this.srcNodeRef=r.byId(f);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);c&&(this.params=c,B.mixin(this,c));this.postMixInProperties();this.id||(this.id=b.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=v.body(this.ownerDocument);b.add(this);this.buildRendering();var a;this.domNode&&(this._applyAttributes(),(c=this.srcNodeRef)&&c.parentNode&&this.domNode!==c&&(c.parentNode.replaceChild(this.domNode,c),a=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();a&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var b={},f;for(f in this.params||{})b[f]=this._get(f);n.forEach(this.constructor._setterAttrs,
function(f){if(!(f in b)){var c=this._get(f);c&&this.set(f,c)}},this);for(f in b)this.set(f,b[f])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var b=this.baseClass.split(" ");this.isLeftToRight()||(b=b.concat(n.map(b,function(b){return b+"Rtl"})));d.add(this.domNode,b)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,n.forEach(this.getChildren(),function(b){b._started||
b._destroyed||!B.isFunction(b.startup)||(b.startup(),b._started=!0)}))},destroyRecursive:function(b){this._beingDestroyed=!0;this.destroyDescendants(b);this.destroy(b)},destroy:function(c){function f(b){b.destroyRecursive?b.destroyRecursive(c):b.destroy&&b.destroy(c)}this._beingDestroyed=!0;this.uninitialize();n.forEach(this._connects,B.hitch(this,"disconnect"));n.forEach(this._supportingWidgets,f);this.domNode&&n.forEach(b.findWidgets(this.domNode,this.containerNode),f);this.destroyRendering(c);
b.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?y.remove(this.domNode,"widgetId"):p.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||p.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(b){n.forEach(this.getChildren(),function(c){c.destroyRecursive&&c.destroyRecursive(b)})},uninitialize:function(){return!1},_setStyleAttr:function(b){var c=this.domNode;B.isObject(b)?
D.set(c,b):c.style.cssText=c.style.cssText?c.style.cssText+("; "+b):b;this._set("style",b)},_attrToDom:function(b,c,a){a=3<=arguments.length?a:this.attributeMap[b];n.forEach(B.isArray(a)?a:[a],function(f){var a=this[f.node||f||"domNode"];switch(f.type||"attribute"){case "attribute":B.isFunction(c)&&(c=B.hitch(this,c));f=f.attribute?f.attribute:/^on[A-Z][a-zA-Z]*$/.test(b)?b.toLowerCase():b;a.tagName?y.set(a,f,c):a.set(f,c);break;case "innerText":a.innerHTML="";a.appendChild(this.ownerDocument.createTextNode(c));
break;case "textContent":a.textContent=c;break;case "innerHTML":a.innerHTML=c;break;case "class":d.replace(a,c,this[b]);break;case "toggleClass":d.toggle(a,f.className||b,c)}},this)},get:function(b){var c=this._getAttrNames(b);return this[c.g]?this[c.g]():this._get(b)},set:function(b,c){if("object"===typeof b){for(var a in b)this.set(a,b[a]);return this}a=this._getAttrNames(b);var f=this[a.s];if(B.isFunction(f))var g=f.apply(this,Array.prototype.slice.call(arguments,1));else{var f=this.focusNode&&
!B.isFunction(this.focusNode)?"focusNode":"domNode",k=this[f]&&this[f].tagName,m;if((m=k)&&!(m=t[k])){m=this[f];var d={},e;for(e in m)d[e.toLowerCase()]=!0;m=t[k]=d}e=m;a=b in this.attributeMap?this.attributeMap[b]:a.s in this?this[a.s]:e&&a.l in e&&"function"!=typeof c||/^aria-|^data-|^role$/.test(b)?f:null;null!=a&&this._attrToDom(b,c,a);this._set(b,c)}return g||this},_attrPairNames:{},_getAttrNames:function(b){var c=this._attrPairNames;if(c[b])return c[b];var a=b.replace(/^[a-z]|-[a-zA-Z]/g,function(b){return b.charAt(b.length-
1).toUpperCase()});return c[b]={n:b+"Node",s:"_set"+a+"Attr",g:"_get"+a+"Attr",l:a.toLowerCase()}},_set:function(b,c){var a=this[b];this[b]=c;!this._created||a===c||a!==a&&c!==c||(this._watchCallbacks&&this._watchCallbacks(b,a,c),this.emit("attrmodified-"+b,{detail:{prevValue:a,newValue:c}}))},_get:function(b){return this[b]},emit:function(b,c,a){c=c||{};void 0===c.bubbles&&(c.bubbles=!0);void 0===c.cancelable&&(c.cancelable=!0);c.detail||(c.detail={});c.detail.widget=this;var f,g=this["on"+b];g&&
(f=g.apply(this,a?a:[c]));this._started&&!this._beingDestroyed&&C.emit(this.domNode,b.toLowerCase(),c);return f},on:function(b,c){var a=this._onMap(b);return a?h.after(this,a,c,!0):this.own(C(this.domNode,b,c))[0]},_onMap:function(b){var c=this.constructor,a=c._onMap;if(!a){var a=c._onMap={},g;for(g in c.prototype)/^on/.test(g)&&(a[g.replace(/^on/,"").toLowerCase()]=g)}return a["string"==typeof b&&b.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?b.findWidgets(this.containerNode):[]},getParent:function(){return b.getEnclosingWidget(this.domNode.parentNode)},connect:function(b,c,a){return this.own(e.connect(b,c,this,a))[0]},disconnect:function(b){b.remove()},subscribe:function(b,a){return this.own(c.subscribe(b,B.hitch(this,a)))[0]},unsubscribe:function(b){b.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():u.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=D.get(this.domNode,"display")},placeAt:function(c,a){var f=!c.tagName&&b.byId(c);!f||!f.addChild||a&&"number"!==typeof a?(c=f&&"domNode"in f?f.containerNode&&!/after|before|replace/.test(a||"")?f.containerNode:f.domNode:r.byId(c,this.ownerDocument),p.place(this.domNode,c,a),!this._started&&(this.getParent()||{})._started&&this.startup()):f.addChild(this,a);return this},defer:function(b,c){var a=setTimeout(B.hitch(this,function(){a&&(a=null,this._destroyed||B.hitch(this,b)())}),c||0);return{remove:function(){a&&
(clearTimeout(a),a=null);return null}}}});z("dojo-bidi")&&l.extend(w);return l})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(q,n,h){return h("dijit.Destroyable",null,{destroy:function(h){this._destroyed=!0},own:function(){var h=["destroyRecursive","destroy","remove"];q.forEach(arguments,function(e){function a(){y.remove();q.forEach(d,function(a){a.remove()})}var l,y=n.before(this,"destroy",function(a){e[l](a)}),d=[];e.then?(l="cancel",e.then(a,
a)):q.forEach(h,function(h){"function"===typeof e[h]&&(l||(l=h),d.push(n.after(e,h,a,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(q,n,h,l,e,a){q=l("dijit._OnDijitClickMixin",null,{connect:function(e,h,d){return this.inherited(arguments,[e,"ondijitclick"==h?a:h,d])}});q.a11yclick=a;return q})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare",
"dojo/_base/lang"],function(q,n,h,l){l.extend(n,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return h("dijit._FocusMixin",null,{_focusManager:q})})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(q,n,h,l){h(function(){n("highcontrast")&&q.add(l.body(),"dijit_a11y")});return n})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(q,n,h,l,e,a,r){e.add("highcontrast",function(){var a=r.doc.createElement("div");try{a.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(n.blankGif||q.toUrl("./resources/blank.gif"))+'");';r.body().appendChild(a);var d=l.getComputedStyle(a),h=d.backgroundImage;return d.borderTopColor==d.borderRightColor||h&&("none"==h||"url(invalid-url:)"==h)}catch(u){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+
u.toString()),!1}finally{8>=e("ie")?a.outerHTML="":r.body().removeChild(a)}});a(function(){e("highcontrast")&&h.add(r.body(),"dj_a11y")});return e})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),function(q,n,h,l,e,a,r){a.extend(q,{waiRole:"",waiState:""});return e("dijit._Templated",[n,h],{constructor:function(){r.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin",
"","2.0")},_processNode:function(a,d){var e=this.inherited(arguments),h=d(a,"waiRole");h&&a.setAttribute("role",h);(h=d(a,"waiState"))&&l.forEach(h.split(/\s*,\s*/),function(d){-1!=d.indexOf("-")&&(d=d.split("-"),a.setAttribute("aria-"+d[0],d[1]))});return e}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(q,n,h,l,e,a,r,y){var d=n("dijit._TemplatedMixin",y,{templateString:null,
templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var d=this.declaredClass,e=this;return r.substitute(a,this,function(a,h){"!"==h.charAt(0)&&(a=l.getObject(h.substr(1),!1,e));if("undefined"==typeof a)throw Error(d+" template:"+h);return null==a?"":"!"==h.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=q(this.templatePath,{sanitize:!0}));var a=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),e;if(l.isString(a)){if(e=h.toDom(this._stringRepl(a),this.ownerDocument),1!=e.nodeType)throw Error("Invalid template: "+a);}else e=a.cloneNode(!0);this.domNode=e}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var d=this.containerNode;if(a&&d)for(;a.hasChildNodes();)d.appendChild(a.firstChild)}});
d._templateCache={};d.getCachedTemplate=function(a,e,l){var p=d._templateCache,n=a,q=p[n];if(q){try{if(!q.ownerDocument||q.ownerDocument==(l||document))return q}catch(C){}h.destroy(q)}a=r.trim(a);if(e||a.match(/\$\{([^\}]+)\}/g))return p[n]=a;e=h.toDom(a,l);if(1!=e.nodeType)throw Error("Invalid template: "+a);return p[n]=e};a("ie")&&e(window,"unload",function(){var a=d._templateCache,e;for(e in a){var l=a[e];"object"==typeof l&&h.destroy(l);delete a[e]}});return d})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(q){return q.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(q,n,h,l,e,a,r,y,d){var p=e.delegate(y,{mouseenter:a.enter,mouseleave:a.leave,keypress:h._keypress}),u;h=l("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var d=a;;)if(1==d.nodeType&&(this._processTemplateNode(d,function(a,d){return a.getAttribute(d)},this._attach)||this.searchContainerNode)&&d.firstChild)d=d.firstChild;else{if(d==a)break;for(;!d.nextSibling;)if(d=d.parentNode,d==a)return;d=d.nextSibling}},_processTemplateNode:function(a,d,h){var l=!0,p=this.attachScope||this,n=d(a,"dojoAttachPoint")||d(a,"data-dojo-attach-point");if(n)for(var k=n.split(/\s*,\s*/);n=
k.shift();)e.isArray(p[n])?p[n].push(a):p[n]=a,l="containerNode"!=n,this._attachPoints.push(n);if(d=d(a,"dojoAttachEvent")||d(a,"data-dojo-attach-event"))for(n=d.split(/\s*,\s*/),k=e.trim;d=n.shift();)if(d){var c=null;-1!=d.indexOf(":")?(c=d.split(":"),d=k(c[0]),c=k(c[1])):d=k(d);c||(c=d);this._attachEvents.push(h(a,d,e.hitch(p,c)))}return l},_attach:function(a,d,e){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?u||(u=q("./a11yclick")):p[d]||d;return r(a,d,e)},_detachTemplateNodes:function(){var a=
this.attachScope||this;n.forEach(this._attachPoints,function(d){delete a[d]});this._attachPoints=[];n.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});e.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return h})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(q,n,h,l,e){return h("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var a=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);e.parse(a,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(l.hitch(this,function(a){this._startupWidgets=a;for(var e=0;e<a.length;e++)this._processTemplateNode(a[e],
function(a,e){return a[e]},function(a,e,h){return e in a?a.connect(a,e,h):a.on(e,h,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(a,e,h){return e(a,"dojoType")||e(a,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){q.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(q,n,h,l,e,a,r,y,d,p,u,D,z,A,B,C){function F(a){return eval("("+a+")")}function k(a){var b=
a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<v){var b=a._nameCaseMap={},k;for(k in c)"_"!==k.charAt(0)&&(b[k.toLowerCase()]=k);b._extendCnt=v}return b}function c(a,b){b||(b=q);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),k=a.join();if(!c[k]){for(var d=[],f=0,e=a.length;f<e;f++){var l=a[f];d[d.length]=c[l]=c[l]||h.getObject(l)||~l.indexOf("/")&&b(l)}a=d.shift();c[k]=d.length?a.createSubclass?a.createSubclass(d):a.extend.apply(a,d):a}return c[k]}new Date("X");var v=0;d.after(h,"extend",
function(){v++},!0);var x={_clearCache:function(){v++;_ctorMap={}},_functionFromScript:function(a,b){var c="",k="",d=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");d=(d||"").split(/\s*,\s*/);b&&b.length&&l.forEach(b.split(/\s*,\s*/),function(b){c+="with("+b+"){";k+="}"});return new Function(d,c+a.innerHTML+k)},instantiate:function(a,b,c){b=b||{};c=c||{};var k=(c.scope||n._scopeName)+"Type",g="data-"+(c.scope||n._scopeName)+"-",f=g+"type",d=g+"mixins",e=[];l.forEach(a,function(a){var c=
k in b?b[k]:a.getAttribute(f)||a.getAttribute(k);if(c){var g=a.getAttribute(d),c=g?[c].concat(g.split(/\s*,\s*/)):[c];e.push({node:a,types:c})}});return this._instantiate(e,b,c)},_instantiate:function(a,b,k,d){function g(a){b._started||k.noStart||l.forEach(a,function(b){"function"!==typeof b.startup||b._started||b.startup()});return a}a=l.map(a,function(a){var f=a.ctor||c(a.types,k.contextRequire);if(!f)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(f,
a.node,b,k,a.scripts,a.inherited)},this);return d?p(a).then(g):g(a)},construct:function(a,b,c,e,m,f){function g(b){D&&h.setObject(D,b);for(x=0;x<I.length;x++)d[I[x].advice||"after"](b,I[x].method,h.hitch(b,I[x].func),!0);for(x=0;x<L.length;x++)L[x].call(b);for(x=0;x<K.length;x++)b.watch(K[x].prop,K[x].func);for(x=0;x<J.length;x++)B(b,J[x].event,J[x].func);return b}var t=a&&a.prototype;e=e||{};var v={};e.defaults&&h.mixin(v,e.defaults);f&&h.mixin(v,f);var p;z("dom-attributes-explicit")?p=b.attributes:
z("dom-attributes-specified-flag")?p=l.filter(b.attributes,function(b){return b.specified}):(f=(/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),p=l.map(f.split(/\s+/),function(a){var c=a.toLowerCase();return{name:a,value:"LI"==b.nodeName&&"value"==a||"enctype"==c?b.getAttribute(c):b.getAttributeNode(c).value}}));var q=e.scope||n._scopeName;f="data-"+q+"-";var w={};"dojo"!==q&&(w[f+"props"]=
"data-dojo-props",w[f+"type"]="data-dojo-type",w[f+"mixins"]="data-dojo-mixins",w[q+"type"]="dojotype",w[f+"id"]="data-dojo-id");for(var x=0,r,q=[],D,C;r=p[x++];){var G=r.name,H=G.toLowerCase();r=r.value;switch(w[H]||H){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":C=r;break;case "data-dojo-id":case "jsid":D=r;break;case "data-dojo-attach-point":case "dojoattachpoint":v.dojoAttachPoint=r;break;case "data-dojo-attach-event":case "dojoattachevent":v.dojoAttachEvent=
r;break;case "class":v["class"]=b.className;break;case "style":v.style=b.style&&b.style.cssText;break;default:if(G in t||(G=k(a)[H]||G),G in t)switch(typeof t[G]){case "string":v[G]=r;break;case "number":v[G]=r.length?Number(r):NaN;break;case "boolean":v[G]="false"!=r.toLowerCase();break;case "function":""===r||-1!=r.search(/[^\w\.]+/i)?v[G]=new Function(r):v[G]=h.getObject(r,!1)||new Function(r);q.push(G);break;default:H=t[G],v[G]=H&&"length"in H?r?r.split(/\s*,\s*/):[]:H instanceof Date?""==r?new Date(""):
"now"==r?new Date:u.fromISOString(r):H instanceof y?n.baseUrl+r:F(r)}else v[G]=r}}for(p=0;p<q.length;p++)w=q[p].toLowerCase(),b.removeAttribute(w),b[w]=null;if(C)try{C=F.call(e.propsThis,"{"+C+"}"),h.mixin(v,C)}catch(M){throw Error(M.toString()+" in data-dojo-props\x3d'"+C+"'");}h.mixin(v,c);m||(m=a&&(a._noScript||t._noScript)?[]:A("\x3e script[type^\x3d'dojo/']",b));var I=[],L=[],K=[],J=[];if(m)for(x=0;x<m.length;x++)w=m[x],b.removeChild(w),c=w.getAttribute(f+"event")||w.getAttribute("event"),e=
w.getAttribute(f+"prop"),C=w.getAttribute(f+"method"),q=w.getAttribute(f+"advice"),p=w.getAttribute("type"),w=this._functionFromScript(w,f),c?"dojo/connect"==p?I.push({method:c,func:w}):"dojo/on"==p?J.push({event:c,func:w}):v[c]=w:"dojo/aspect"==p?I.push({method:C,advice:q,func:w}):"dojo/watch"==p?K.push({prop:e,func:w}):L.push(w);a=(m=a.markupFactory||t.markupFactory)?m(v,b,a):new a(v,b);return a.then?a.then(g):g(a)},scan:function(a,b){function k(b){if(!b.inherited){b.inherited={};var a=b.node,c=
k(b.parent),a={dir:a.getAttribute("dir")||c.dir,lang:a.getAttribute("lang")||c.lang,textDir:a.getAttribute(w)||c.textDir},f;for(f in a)a[f]&&(b.inherited[f]=a[f])}return b.inherited}var d=[],e=[],f={},h=(b.scope||n._scopeName)+"Type",v="data-"+(b.scope||n._scopeName)+"-",p=v+"type",w=v+"textdir",v=v+"mixins",x=a.firstChild,r=b.inherited;if(!r){var u=function(b,a){return b.getAttribute&&b.getAttribute(a)||b.parentNode&&u(b.parentNode,a)},r={dir:u(a,"dir"),lang:u(a,"lang"),textDir:u(a,w)},y;for(y in r)r[y]||
delete r[y]}y={inherited:r};for(var A,B;;)if(x)if(1!=x.nodeType)x=x.nextSibling;else if(A&&"script"==x.nodeName.toLowerCase())(r=x.getAttribute("type"))&&/^dojo\/\w/i.test(r)&&A.push(x),x=x.nextSibling;else if(B)x=x.nextSibling;else if(r=x.getAttribute(p)||x.getAttribute(h),a=x.firstChild,r||a&&(3!=a.nodeType||a.nextSibling)){B=null;if(r){var C=x.getAttribute(v);A=C?[r].concat(C.split(/\s*,\s*/)):[r];try{B=c(A,b.contextRequire)}catch(I){}B||l.forEach(A,function(b){~b.indexOf("/")&&!f[b]&&(f[b]=!0,
e[e.length]=b)});C=B&&!B.prototype._noScript?[]:null;y={types:A,ctor:B,parent:y,node:x,scripts:C};y.inherited=k(y);d.push(y)}else y={node:x,scripts:A,parent:y};A=C;B=x.stopParser||B&&B.prototype.stopParser&&!b.template;x=a}else x=x.nextSibling;else{if(!y||!y.node)break;x=y.node.nextSibling;B=!1;y=y.parent;A=y.scripts}var F=new D;e.length?(z("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+e.join(", ")),(b.contextRequire||q)(e,function(){F.resolve(l.filter(d,function(a){if(!a.ctor)try{a.ctor=
c(a.types,b.contextRequire)}catch(J){}for(var f=a.parent;f&&!f.types;)f=f.parent;var k=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(k&&k.stopParser&&!b.template);a.instantiate=!f||f.instantiate&&f.instantiateChildren;return a.instantiate}))})):F.resolve(d);return F.promise},_require:function(a,b){a=F("{"+a.innerHTML+"}");var c=[],k=[],d=new D;b=b&&b.contextRequire||q;for(var f in a)c.push(f),k.push(a[f]);b(k,function(){for(var b=0;b<c.length;b++)h.setObject(c[b],arguments[b]);d.resolve(arguments)});
return d.promise},_scanAmd:function(a,b){var c=new D,k=c.promise;c.resolve(!0);var d=this;A("script[type\x3d'dojo/require']",a).forEach(function(a){k=k.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return k},parse:function(c,b){!c||"string"==typeof c||"nodeType"in c||(b=c,c=b.rootNode);var k=c?a.byId(c):r.body();b=b||{};var d=b.template?{template:!0}:{},e=[],f=this;c=this._scanAmd(k,b).then(function(){return f.scan(k,b)}).then(function(a){return f._instantiate(a,d,b,!0)}).then(function(b){return e=
e.concat(b)}).otherwise(function(b){console.error("dojo/parser::parse() error",b);throw b;});h.mixin(e,c);return e}};n.parser=x;e.parseOnLoad&&C(100,x,"parse");return x})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(q,n){var h={};q.setObject("dojo.date.stamp",h);h.fromISOString=function(l,e){h._isoRegExp||(h._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var a=h._isoRegExp.exec(l);l=null;
if(a){a.shift();a[1]&&a[1]--;a[6]&&(a[6]*=1E3);e&&(e=new Date(e),n.forEach(n.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(a){return e["get"+a]()}),function(d,e){a[e]=a[e]||d}));l=new Date(a[0]||1970,a[1]||0,a[2]||1,a[3]||0,a[4]||0,a[5]||0,a[6]||0);100>a[0]&&l.setFullYear(a[0]||1970);var r=0,q=a[7]&&a[7].charAt(0);"Z"!=q&&(r=60*(a[8]||0)+(Number(a[9])||0),"-"!=q&&(r*=-1));q&&(r-=l.getTimezoneOffset());r&&l.setTime(l.getTime()+6E4*r)}return l};h.toISOString=function(h,
e){var a=function(a){return 10>a?"0"+a:a};e=e||{};var l=[],n=e.zulu?"getUTC":"get",d="";"time"!=e.selector&&(d=h[n+"FullYear"](),d=["0000".substr((d+"").length)+d,a(h[n+"Month"]()+1),a(h[n+"Date"]())].join("-"));l.push(d);"date"!=e.selector&&(d=[a(h[n+"Hours"]()),a(h[n+"Minutes"]()),a(h[n+"Seconds"]())].join(":"),n=h[n+"Milliseconds"](),e.milliseconds&&(d+="."+(100>n?"0":"")+a(n)),e.zulu?d+="Z":"time"!=e.selector&&(h=h.getTimezoneOffset(),e=Math.abs(h),d+=(0<h?"-":"+")+a(Math.floor(e/60))+":"+a(e%
60)),l.push(d));return l.join("T")};return h})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(q,n,h,l,e,a){return q([a,e],{_onMap:function(a){var e=this.constructor._onMap,d;e&&e.FINAL||(delete this.constructor._onMap,e=this.registerConnectEvents(),e.FINAL=!0);a=a.toLowerCase();e[a]?d=this[e[a].method]:(a=this._onCamelCase(a),this[a]&&(d=a));return d},on:function(a,e){var d=this._onMap(a),h=a.replace(/\-/g,
""),n="on"+h in this.domNode;return d||!n?this.inherited(arguments):this.own(l(this.domNode,h,e))[0]},emit:function(a,e,d){var h,l,q,r=a.toLowerCase(),y=this.constructor._onMap||this.registerConnectEvents();l=this[this._onMap(r)];e=e||{};e.target||(e.target=this);l&&y&&y[r]&&(this._onObj2Arr(function(){h=Array.prototype.slice.call(arguments)},y[r].argKeys)(e),q=n.mixin({},arguments),q[2]=h,q[0]=y[r].name.replace(/^on/,""));return this.inherited(q||arguments)}})})},"esri/layers/WMSLayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../kernel"],function(q,n,h,l,e){q=q(null,{declaredClass:"esri.layers.WMSLayerInfo",name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],queryable:!1,showPopup:!1,constructor:function(a){a&&(this.name=a.name,this.title=a.title,this.description=a.description,this.extent=a.extent,this.legendURL=a.legendURL,this.subLayers=a.subLayers?a.subLayers:[],this.allExtents=a.allExtents?a.allExtents:[],
this.spatialReferences=a.spatialReferences?a.spatialReferences:[],this.queryable=!!a.queryable,this.showPopup=!!a.showPopup)},clone:function(){var a={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL},e;this.extent&&(a.extent=this.extent.getExtent());a.subLayers=[];h.forEach(this.subLayers,function(e){a.subLayers.push(e.clone())});a.allExtents=[];for(e in this.allExtents)e=parseInt(e,10),isNaN(e)||(a.allExtents[e]=this.allExtents[e].getExtent());a.spatialReferences=
[];h.forEach(this.spatialReferences,function(e){a.spatialReferences.push(e)});a.queryable=this.queryable;a.showPopup=this.showPopup;return a}});l("extend-esri")&&n.setObject("layers.WMSLayerInfo",q,e);return q})},"*noref":1}});
define("esri/layers/WMSLayer","require dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff ../config ../graphic ../kernel ../request ../urlUtils ../dijit/PopupTemplate ../SpatialReference ../geometry/Extent ../geometry/Point ./DynamicMapServiceLayer ./WMSLayerInfo dojo/query".split(" "),function(q,n,h,l,e,a,r,y,d,p,u,D,z,A,B,C,F){h=h([C],{declaredClass:"esri.layers.WMSLayer",_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,
2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,
27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],version:null,constructor:function(a,c){var k=u.urlToObject(a);k.query&&(k.query.version||k.query.Version||k.query.VERSION)&&(this.version=k.query.version||k.query.Version||k.query.VERSION);this.url=a=this._stripParameters(a,"version service request bbox format height width layers srs crs styles transparent bgcolor exceptions time elevation sld wfs".split(" "));
this._url=u.urlToObject(a);this._getCapabilitiesURL=a;this._initLayer=l.hitch(this,this._initLayer);this._parseCapabilities=l.hitch(this,this._parseCapabilities);this._getCapabilitiesError=l.hitch(this,this._getCapabilitiesError);c?(this.customParameters=c.customParameters,this.customLayerParameters=c.customLayerParameters,this.imageFormat=this._getImageFormat(c.format),this.imageTransparency=!1!==c.transparent,this.visibleLayers=c.visibleLayers?c.visibleLayers:[],this.version=c.version||this.version,
c.resourceInfo?this._readResourceInfo(c.resourceInfo):this._getCapabilities()):(this.imageFormat="image/png",this.imageTransparency=!0,this.visibleLayers=[],this._getCapabilities());this._blankImageURL=q.toUrl("../images/pixel.png");this.extentProcessor=this._createExtentProcessor(0);this._createChildLayer()},setVisibleLayers:function(a){this.visibleLayers=(a=this._checkVisibleLayersList(a))?a:[];this.refresh(!0)},setImageFormat:function(a){this.imageFormat=this._getImageFormat(a);this.refresh(!0)},
setImageTransparency:function(a){this.imageTransparency=a;this.refresh(!0)},setCustomParameters:function(a,c){this.customParameters=a;this.customLayerParameters=c;this.refresh(!0)},refresh:function(){this.inherited(arguments);this._childLayer&&this._childLayer.refresh.apply(this._childLayer,arguments)},getImageUrl:function(a,c,d,e){if(this.visibleLayers&&0!==this.visibleLayers.length){a=this._getImageParams(a,c,d);a=this._mixinCustomLayerParameters(a);c=this.getMapURL;var k;c+=-1===c.indexOf("?")?
"?":"";for(k in a)a.hasOwnProperty(k)&&(c+="?"===c.substring(c.length-1,c.length)?"":"\x26",c+=k+"\x3d"+a[k]);e(u.addProxy(c))}else e(this._blankImageURL)},_setMap:function(a,c,d){var k=this.inherited(arguments);a.wrapAround180?this._childLayer&&(this.suspended&&this._childLayer.suspend(),this._childLayer._setMap(a,k)):this._childLayer=this.extentProcessor=null;return k},_unsetMap:function(a,c){this._childLayer&&this._childLayer._unsetMap(a,this._div);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);
this._childLayer&&this._childLayer.suspend()},onResume:function(){this.inherited(arguments);this._childLayer&&this._childLayer.resume()},_createChildLayer:function(){this._childLayer=new C(null,{extentProcessor:this._createExtentProcessor(1)});this._childLayer._isChildLayer=!0;this._childLayer.getImageUrl=l.hitch(this,this.getImageUrl);this._childLayer.loaded=!0},_createExtentProcessor:function(a){return l.hitch(this,this._extentProcessor,a)},_extentProcessor:function(a,c){var k=c.extent,d=c.width,
e=0;if(k){c=k.getWidth()/d;var b=k.bisect(),k=b.extents,g=k[a];g&&(d=b.marginLeft/c,e=0===a?d:d+k[0].getWidth()/c,d=Math.ceil(g.getWidth()/c),e=Math.ceil(e));k=g}return{extent:k,width:d,marginLeft:e}},_getImageParams:function(a,c,d){var k=a.spatialReference.wkid;-1===e.indexOf(this.spatialReferences,k)&&a.spatialReference.latestWkid&&(k=a.spatialReference.latestWkid);if(e.some(this._WEB_MERCATOR,function(b){return b==k})){var h=e.filter(this.spatialReferences,function(b){return e.some(this._WEB_MERCATOR,
function(a){return a==b})},this);0===h.length&&(h=e.filter(this.spatialReferences,function(b){return e.some(this._WORLD_MERCATOR,function(a){return a==b})},this));k=0<h.length?h[0]:this._WEB_MERCATOR[1]}this.spatialReferences=e.filter(this.spatialReferences,function(b){return b!==k});this.spatialReferences.unshift(k);var h=a.xmin,b=a.xmax,g=a.ymin;a=a.ymax;var l={SERVICE:"WMS",REQUEST:"GetMap"};l.FORMAT=this.imageFormat;l.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";l.STYLES="";l.VERSION=this.version;
l.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;l.WIDTH=c;l.HEIGHT=d;this.maxWidth<c&&(l.WIDTH=this.maxWidth);this.maxHeight<d&&(l.HEIGHT=this.maxHeight);c=k?k:NaN;isNaN(c)||("1.3.0"==this.version?l.CRS="EPSG:"+c:l.SRS="EPSG:"+c);"1.3.0"==this.version&&this._useLatLong(c)?l.BBOX=g+","+h+","+a+","+b:l.BBOX=h+","+g+","+b+","+a;return l},_initLayer:function(k,c){this.spatialReference=new z(this.extent.spatialReference);this.initialExtent=new A(this.extent);this.fullExtent=new A(this.extent);
this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);var d=l.hitch(this,function(){this.loaded=!0;this.onLoad(this);var a=this._loadCallback;a&&(delete this._loadCallback,a(this))});a("chrome")?(k=r.defaults.io,c="with-credentials"===k.useCors?u.canUseXhr(this.getMapURL,!0):-1,(k=-1<c?k.corsEnabledServers[c]:null)&&k.withCredentials?p({url:this.getMapURL,handleAs:"text",content:{SERVICE:"WMS",REQUEST:"GetMap"}}).addBoth(function(){d()}):d()):d()},_readResourceInfo:function(a){a.extent?
a.layerInfos?(this.extent=a.extent,this.allExtents[0]=a.extent,this.layerInfos=a.layerInfos,this.description=a.description?a.description:"",this.copyright=a.copyright?a.copyright:"",this.title=a.title?a.title:"",this.getMapURL=a.getMapURL?a.getMapURL:this._getCapabilitiesURL,this.getFeatureInfoURL=a.getFeatureInfoURL,this.featureInfoFormat=a.featureInfoFormat,this.version=a.version?a.version:"1.3.0",this.maxWidth=a.maxWidth?a.maxWidth:5E3,this.maxHeight=a.maxHeight?a.maxHeight:5E3,this.spatialReferences=
a.spatialReferences?a.spatialReferences:[],this.imageFormat=this._getImageFormat(a.format),this.setScaleRange(a.minScale,a.maxScale),this.customLayerParameters=a.customLayerParameters||this.customLayerParameters,this.customParameters=a.customParameters||this.customParameters,this._initLayer()):this._errorHandler(Error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo")):this._errorHandler(Error("esri.layers.WMSLayer: Unable to find the 'extent' property in resourceInfo."))},
_getCapabilities:function(){var a=this._url.query?this._url.query:{};a.SERVICE="WMS";a.REQUEST="GetCapabilities";this.version&&(a.VERSION=this.version);var a=this._mixinCustomParameters(a),c=this._url.path+"?",d;for(d in a)a.hasOwnProperty(d)&&(c+="?"==c.substring(c.length-1,c.length)?"":"\x26",c+=d+"\x3d"+a[d]);p({url:c,handleAs:"xml",headers:{"Content-Type":null},load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:!1})},_parseCapabilities:function(a){if(a){var c=this;this.version=
this._getAttributeValue("WMS_Capabilities","version",a,null);this.version||(this.version=this._getAttributeValue("WMT_MS_Capabilities","version",a,"1.3.0"));var d=this._getTag("Service",a);this.title=this._getTagValue("Title",d,"");this.title||(this.title=this._getTagValue("Name",d,""));this.copyright=this._getTagValue("AccessConstraints",d,"");this.description=this._getTagValue("Abstract",d,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",d,5E3),10);this.maxHeight=parseInt(this._getTagValue("MaxHeight",
d,5E3),10);if(d=this._getTag("Layer",a)){var k=this._getLayerInfo(d),h=0,b=null,d=this._getTag("Capability",a);e.forEach(d.childNodes,function(a){"Layer"==a.nodeName&&(0===h?b=a:(1===h&&k.name&&(k.name="",k.subLayers=[],k.subLayers.push(this._getLayerInfo(b))),k.subLayers.push(this._getLayerInfo(a))),h++)},this);if(k&&(this.layerInfos=k.subLayers,this.layerInfos&&0!==this.layerInfos.length||(this.layerInfos=[k]),this.extent=k.extent,this.extent||(k.extent=new A(this.layerInfos[0].extent.toJson()),
this.extent=k.extent),this.allExtents=k.allExtents,this.allExtents&&this.allExtents.length||(k.allExtents=[],e.forEach(this.layerInfos[0].allExtents,function(a,b){a&&(k.allExtents[b]=new A(a.toJson()))}),this.allExtents=k.allExtents),this.spatialReferences=k.spatialReferences,!this.spatialReferences.length&&0<this.layerInfos.length))for(var g=function(a){var b;for(b=0;b<a.subLayers.length;b++){var c=a.subLayers[b],d=c.spatialReferences;!d.length&&c.subLayers&&0<c.subLayers.length&&(d=g(c));if(d.length)return d}return[]},
d=0;d<this.layerInfos.length;d++){var l=this.layerInfos[d];this.spatialReferences=this.layerInfos[0].spatialReferences;!this.spatialReferences.length&&l.subLayers&&0<l.subLayers.length&&(this.spatialReferences=g(l));if(this.spatialReferences.length)break}d=function(b){return(b=n.query("DCPType",c._getTag(b,a)))&&0<b.length&&(b=n.query("HTTP",b[0]))&&0<b.length&&(b=n.query("Get",b[0]))&&0<b.length&&(b=c._getAttributeValue("OnlineResource","xlink:href",b[0],null))?(b.indexOf("\x26")===b.length-1&&(b=
b.substring(0,b.length-1)),c._stripParameters(b,["service","request"])):null};l=function(b){var d=[];0===n.query("Operation",a).length?e.forEach(n.query("Format",c._getTag(b,a)),function(b){d.push(b.text?b.text:b.textContent)}):e.forEach(n.query("Operation",a),function(a){a.getAttribute("name")===b&&e.forEach(n.query("Format",a),function(b){d.push(b.text?b.text:b.textContent)})});return d};this.getMapURL=d("GetMap")||this._getCapabilitiesURL;this.getMapFormats=l("GetMap");e.some(this.getMapFormats,
function(b){return-1<b.indexOf(this.imageFormat)},this)||(this.imageFormat=this.getMapFormats[0]);if(this.getFeatureInfoURL=d("GetFeatureInfo"))this.getFeatureInfoFormats=l("GetFeatureInfo"),-1<e.indexOf(this.getFeatureInfoFormats,"text/html")?this.featureInfoFormat="text/html":-1<e.indexOf(this.getFeatureInfoFormats,"text/plain")&&(this.featureInfoFormat="text/plain");if(!this.featureInfoFormat){var m=function(b){if(b&&(b.queryable=!1,b.subLayers))for(var a=0;a<b.subLayers.length;a++)m(b.subLayers[a])};
m(k)}this._initLayer()}else this._errorHandler(Error("esri.layers.WMSLayer: Response does not contain any layers."))}else this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)"))},_getCapabilitiesError:function(a){a&&a.message&&(a.message="GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+a.message+")");this._errorHandler(a)},_getLayerInfo:function(a){if(!a)return null;var c=new F;c.name="";c.title="";c.description="";c.allExtents=
[];c.spatialReferences=[];c.queryable="1"===a.getAttribute("queryable");c.subLayers=[];var d=this._getTag("LatLonBoundingBox",a);d&&(c.allExtents[0]=this._getExtent(d,4326));var k=this._getTag("EX_GeographicBoundingBox",a),h;k&&(h=new A(0,0,0,0,new z({wkid:4326})),h.xmin=parseFloat(this._getTagValue("westBoundLongitude",k,0)),h.ymin=parseFloat(this._getTagValue("southBoundLatitude",k,0)),h.xmax=parseFloat(this._getTagValue("eastBoundLongitude",k,0)),h.ymax=parseFloat(this._getTagValue("northBoundLatitude",
k,0)),c.allExtents[0]=h);d||k||(h=new A(-180,-90,180,90,new z({wkid:4326})),c.allExtents[0]=h);c.extent=c.allExtents[0];var b=-1<e.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)?"SRS":"CRS";e.forEach(a.childNodes,function(a){if("Name"==a.nodeName)c.name=(a.text?a.text:a.textContent)||"";else if("Title"==a.nodeName)c.title=(a.text?a.text:a.textContent)||"";else if("Abstract"==a.nodeName)c.description=(a.text?a.text:a.textContent)||"";else if("BoundingBox"==a.nodeName){var d=a.getAttribute(b);d&&0===
d.indexOf("EPSG:")?(d=parseInt(d.substring(5),10),0===d||isNaN(d)||(a="1.3.0"==this.version?this._getExtent(a,d,this._useLatLong(d)):this._getExtent(a,d),c.allExtents[d]=a,c.extent||(c.extent=a))):d&&0===d.indexOf("CRS:")?(d=parseInt(d.substring(4),10),0===d||isNaN(d)||(this._CRS_TO_EPSG[d]&&(d=this._CRS_TO_EPSG[d]),c.allExtents[d]=this._getExtent(a,d))):(d=parseInt(d,10),0===d||isNaN(d)||(c.allExtents[d]=this._getExtent(a,d)))}else if(a.nodeName==b)a=(a.text?a.text:a.textContent).split(" "),e.forEach(a,
function(a){a=-1<a.indexOf(":")?parseInt(a.split(":")[1],10):parseInt(a,10);0===a||isNaN(a)||(this._CRS_TO_EPSG[a]&&(a=this._CRS_TO_EPSG[a]),-1==e.indexOf(c.spatialReferences,a)&&c.spatialReferences.push(a))},this);else if("Style"!=a.nodeName||c.legendURL)"Layer"===a.nodeName&&c.subLayers.push(this._getLayerInfo(a));else if(a=this._getTag("LegendURL",a))if(a=this._getTag("OnlineResource",a))c.legendURL=a.getAttribute("xlink:href")},this);c.title=c.title||c.name;return c},_getImageFormat:function(a){switch(a?
a.toLowerCase():""){case "jpg":return"image/jpeg";case "bmp":return"image/bmp";case "gif":return"image/gif";case "svg":return"image/svg+xml";default:return"image/png"}},getImageFormat:function(){switch(this.imageFormat?this.imageFormat.toLowerCase():""){case "image/jpeg":return"jpg";case "image/bmp":return"bmp";case "image/gif":return"gif";case "image/svg+xml":return"svg";default:return"png"}},_getExtent:function(a,c,d){var e;if(a){e=new A;var k=parseFloat(a.getAttribute("minx")),b=parseFloat(a.getAttribute("miny")),
g=parseFloat(a.getAttribute("maxx"));a=parseFloat(a.getAttribute("maxy"));d?(e.xmin=isNaN(b)?-1*Number.MAX_VALUE:b,e.ymin=isNaN(k)?-1*Number.MAX_VALUE:k,e.xmax=isNaN(a)?Number.MAX_VALUE:a,e.ymax=isNaN(g)?Number.MAX_VALUE:g):(e.xmin=isNaN(k)?-1*Number.MAX_VALUE:k,e.ymin=isNaN(b)?-1*Number.MAX_VALUE:b,e.xmax=isNaN(g)?Number.MAX_VALUE:g,e.ymax=isNaN(a)?Number.MAX_VALUE:a);e.spatialReference=new z({wkid:c})}return e},_useLatLong:function(a){var c,d;for(d=0;d<this._REVERSED_LAT_LONG_RANGES.length;d++){var e=
this._REVERSED_LAT_LONG_RANGES[d];if(a>=e[0]&&a<=e[1]){c=!0;break}}return c},_getTag:function(a,c){return(a=n.query(a,c))&&0<a.length?a[0]:null},_getTagValue:function(a,c,d){return(a=n.query(a,c))&&0<a.length?a[0].text?a[0].text:a[0].textContent:d},_getAttributeValue:function(a,c,d,e){return(a=n.query(a,d))&&0<a.length?a[0].getAttribute(c):e},_checkVisibleLayersList:function(a){if(a&&0<a.length&&this.layerInfos&&0<this.layerInfos.length&&"number"==typeof a[0]){var c=[];e.forEach(a,function(a){a<this.layerInfos.length&&
c.push(this.layerInfos[a].name)},this);a=c}return a},_stripParameters:function(a,c){a=u.urlToObject(a);var d,k=[];for(d in a.query)a.query.hasOwnProperty(d)&&-1===e.indexOf(c,d.toLowerCase())&&k.push(d+"\x3d"+a.query[d]);return a.path+(k.length?"?"+k.join("\x26"):"")},_getPopupGraphic:function(a,c){var d=this.visibleLayers;if(!d||0===d.length)return null;var h=this._popupGraphic;h||(h=new D({title:this.title||"",description:'\x3cdiv style\x3d"position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;"\x3e\x3ciframe src\x3d"{QUERY_URL}" width\x3d"250" height\x3d"147" frameborder\x3d"0" marginwidth\x3d"0" marginheight\x3d"0" style\x3d"position:absolute;top:0;left:0;width:100%;height:100%;border:0;background:url(\''+
q.toUrl("../dijit/images/loading-throb.gif")+"') transparent center no-repeat;\" onload\x3d\"(event.target || event.srcElement).style.background \x3d 'none';\"\x3e\x3c/iframe\x3e\x3c/div\x3e"}),h=this._popupGraphic=new y(null,null,{},h),h._layer=this);var k=function(a){var b=[];if(a&&(a.queryable&&a.showPopup&&a.name&&b.push(a.name),a.subLayers))for(var c=0;c<a.subLayers.length;c++){var d=k(a.subLayers[c]);d.length&&(b=b.concat(d))}return b},b=k({subLayers:this.layerInfos}),b=e.filter(b,function(a){return-1<
e.indexOf(d,a)});if(b.length){var g=this.getFeatureInfoURL;a=this._getImageParams(a.extent,a.width,a.height);a=this._mixinCustomLayerParameters(a);a.REQUEST="GetFeatureInfo";a.INFO_FORMAT=this.featureInfoFormat;a.QUERY_LAYERS=b.join();a.FEATURE_COUNT=25;"1.3.0"===this.version?(a.I=Math.round(c.x),a.J=Math.round(c.y)):(a.X=Math.round(c.x),a.Y=Math.round(c.y));var g=g+(-1===g.indexOf("?")?"?":""),l;for(l in a)a.hasOwnProperty(l)&&(g+="?"===g.substring(g.length-1,g.length)?"":"\x26",g+=l+"\x3d"+a[l]);
h.attributes.QUERY_URL=g;return h}return null},_mixinCustomParameters:function(a){if(this.customParameters)for(var c in this.customParameters)a[c]=encodeURIComponent(this.customParameters[c]);return a},_mixinCustomLayerParameters:function(a){if(this.customLayerParameters||this.customParameters){var c=l.clone(this.customParameters||{});l.mixin(c,this.customLayerParameters||{});for(var d in c)"styles"===d.toLowerCase()&&delete a.STYLES,a[d]=encodeURIComponent(c[d])}return a}});a("extend-esri")&&l.setObject("layers.WMSLayer",
h,d);return h});