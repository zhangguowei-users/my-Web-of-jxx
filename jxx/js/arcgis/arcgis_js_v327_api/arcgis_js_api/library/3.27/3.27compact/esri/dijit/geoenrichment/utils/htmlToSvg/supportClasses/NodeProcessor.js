// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/NodeProcessor","dojo/Deferred dojo/when ./drawing/SVGDrawer ./DomProcessor ./Clipper ./VisualsCollector".split(" "),function(w,g,l,x,t,p){return{processNode:function(q,h){function u(b,c,q,d,n){function k(a){a&&(Array.isArray(a)?a.forEach(function(a){k(a)}):(m.push({text:a,stackIndex:++n}),e++))}var e=0;if("#comment"===b.nodeName)return e;var a=p.getNodeVisuals(b,d);if(!a)return e;a.style.isRelAbs&&(n=y+=1E5);a.parentVs=d;var f;if("svg"===
b.nodeName)return k(l.drawSVG(b,a,c)),e;if("IMG"===b.nodeName)return g(l.drawImage(b,a,c),function(a){k(a);return e});d=function(){var b=a.style;return b.getBorder().radius||"auto"===b.getBackground().size||b.getBackground().repeatX||b.getBackground().repeatY?t.addClipping(a,h.definitions):c};a.style.getBackground().image&&"none"!==a.style.getBackground().image&&(f=g(l.drawBackgroundImage(a,d()),function(a){k(a)}));f=g(f,function(){k(l.drawRect(a,c));k(l.drawBorder(a,c))});return g(f,function(){x.replaceTextWithSpans(b,
a);var d;if(b.childNodes.length){var f=function(){function d(){"#text"===e.nodeName?(k(l.drawText(b,a,c,{encodeText:h.encodeText})),f()):g(u(e,c,r,a,n),function(a){n+=a;f()})}var e=b.childNodes[p++];e?++v>(h.iterationsPerScript||500)?(v=0,setTimeout(d,30)):d():m.resolve()},m=new w;d=m.promise;var r;"hidden"===a.style.overflow&&(r=h.clipFunc&&h.clipFunc(b),c=(q||h.useClipping||r)&&t.addClipping(a,h.definitions,c));var p=0;f()}return g(d,function(){return e})})}var v=0,m=[],y=0;return g(u(q,null,null,
null,0),function(){m.sort(function(b,c){return b.stackIndex-c.stackIndex});return m})}}});