//>>built
require({cache:{"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(g,n,p,w,t,b,e,k,q,d){function m(a,d){for(var b=a.length-1;d<b;)a[d]=a[++d];a.length=b}var h=g.shape={};h.Shape=p("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;
if(t("gfxRegistry")){var a=h.register(this);this.getUID=function(){return a}}},destroy:function(){t("gfxRegistry")&&h.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},
getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var b=this._getRealMatrix();return[d.multiplyPoint(b,a.x,a.y),d.multiplyPoint(b,a.x+a.width,a.y),d.multiplyPoint(b,a.x+a.width,a.y+a.height),d.multiplyPoint(b,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=g.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=
null,this;var d=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":d=g.makeParameters(g.defaultLinearGradient,a);break;case "radial":d=g.makeParameters(g.defaultRadialGradient,a);break;case "pattern":d=g.makeParameters(g.defaultPattern,a)}else d=g.normalizeColor(a);this.fillStyle=d;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||n.isArray(a)||a instanceof q)a={color:a};a=this.strokeStyle=g.makeParameters(g.defaultStroke,a);a.color=
g.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=d.clone(a?d.normalize(a):d.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,
a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,d){this.parent=a;return this._updateParentMatrix(d)},_updateParentMatrix:function(a){this.parentMatrix=a?d.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,b=this.parent;b;)b.matrix&&(a=d.multiply(b.matrix,
a)),b=b.parent;return a}});h._eventsProcessing={on:function(a,d){return b(this.getEventSource(),a,h.fixCallback(this,g.fixTarget,d))},connect:function(a,d,b){"on"==a.substring(0,2)&&(a=a.substring(2));return this.on(a,b?n.hitch(d,b):d)},disconnect:function(a){return a.remove()}};h.fixCallback=function(a,d,b,e){e||(e=b,b=null);if(n.isString(e)){b=b||w.global;if(!b[e])throw['dojox.gfx.shape.fixCallback: scope["',e,'"] is null (scope\x3d"',b,'")'].join("");return function(h){return d(h,a)?b[e].apply(b,
arguments||[]):void 0}}return b?function(h){return d(h,a)?e.apply(b,arguments||[]):void 0}:function(h){return d(h,a)?e.apply(b,arguments):void 0}};n.extend(h.Shape,h._eventsProcessing);h.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var d=a.getParent();d&&d.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,d){for(var b=0;b<this.children.length;++b)if(this.children[b]==
a){d||(a.parent=null,a.parentMatrix=null);m(this.children,b);break}return this},clear:function(a){for(var d,b=0;b<this.children.length;++b)d=this.children[b],d.parent=null,d.parentMatrix=null,a&&d.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var a=null;e.forEach(this.children,function(b){var e=b.getBoundingBox();e&&((b=b.getTransform())&&(e=d.multiplyRectangle(b,e)),a?(a.x=Math.min(a.x,e.x),a.y=Math.min(a.y,e.y),a.endX=Math.max(a.endX,e.x+e.width),a.endY=Math.max(a.endY,
e.y+e.height)):a={x:e.x,y:e.y,endX:e.x+e.width,endY:e.y+e.height})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a}return null},_moveChildToFront:function(a){for(var d=0;d<this.children.length;++d)if(this.children[d]==a){m(this.children,d);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var d=0;d<this.children.length;++d)if(this.children[d]==a){m(this.children,d);this.children.unshift(a);break}return this}};h.Surface=p("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=
this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){e.forEach(this._nodes,k.destroy);this._nodes=[];e.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(t("ie"))for(;this._parent.lastChild;)k.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,d){var e=n.hitch(a,d);if(this.isLoaded)e(this);
else b.once(this,"load",function(a){e(a)})}});n.extend(h.Surface,h._eventsProcessing);h.Rect=p("dojox.gfx.shape.Rect",h.Shape,{constructor:function(a){this.shape=g.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});h.Ellipse=p("dojox.gfx.shape.Ellipse",h.Shape,{constructor:function(a){this.shape=g.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});
h.Circle=p("dojox.gfx.shape.Circle",h.Shape,{constructor:function(a){this.shape=g.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});h.Line=p("dojox.gfx.shape.Line",h.Shape,{constructor:function(a){this.shape=g.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-
a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});h.Polyline=p("dojox.gfx.shape.Polyline",h.Shape,{constructor:function(a){this.shape=g.getDefault("Polyline");this.rawNode=a},setShape:function(a,d){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),d&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,d=a&&a.length;if(d&&"number"==typeof a[0]){for(var b=[],e=0;e<d;e+=
2)b.push({x:a[e],y:a[e+1]});this.shape.points=b}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,d=a.length,b=a[0],e=b.x,h=b.y,k=b.x,m=b.y,g=1;g<d;++g)b=a[g],e>b.x&&(e=b.x),k<b.x&&(k=b.x),h>b.y&&(h=b.y),m<b.y&&(m=b.y);this.bbox={x:e,y:h,width:k-e,height:m-h}}return this.bbox}});h.Image=p("dojox.gfx.shape.Image",h.Shape,{constructor:function(a){this.shape=g.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},
setFill:function(){return this}});h.Text=p(h.Shape,{constructor:function(a){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?g.splitFontString(a):g.makeParameters(g.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=null;this.getShape().text&&(a=g._base._computeTextBoundingBox(this));return a}});h.Creator={createShape:function(a){switch(a.type){case g.defaultPath.type:return this.createPath(a);
case g.defaultRect.type:return this.createRect(a);case g.defaultCircle.type:return this.createCircle(a);case g.defaultEllipse.type:return this.createEllipse(a);case g.defaultLine.type:return this.createLine(a);case g.defaultPolyline.type:return this.createPolyline(a);case g.defaultImage.type:return this.createImage(a);case g.defaultText.type:return this.createText(a);case g.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(g.Group)},createRect:function(a){return this.createObject(g.Rect,
a)},createEllipse:function(a){return this.createObject(g.Ellipse,a)},createCircle:function(a){return this.createObject(g.Circle,a)},createLine:function(a){return this.createObject(g.Line,a)},createPolyline:function(a){return this.createObject(g.Polyline,a)},createImage:function(a){return this.createObject(g.Image,a)},createText:function(a){return this.createObject(g.Text,a)},createPath:function(a){return this.createObject(g.Path,a)},createTextPath:function(a){return this.createObject(g.TextPath,{}).setText(a)},
createObject:function(a,d){return null}};return h})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(g,n,p,w,t){t=p("dojox.gfx.path.Path",t.Shape,{constructor:function(b){this.shape=n.clone(g.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=b;this.segmented=!1},setAbsoluteMode:function(b){this._confirmSegmented();this.absolute="string"==typeof b?"absolute"==b:b;return this},getAbsoluteMode:function(){this._confirmSegmented();
return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var b=this.bbox,e=this._getRealMatrix();this.bbox=null;for(var k=0,g=this.segments.length;k<g;++k)this._updateWithSegment(this.segments[k],e);e=this.bbox;this.bbox=b;return this.tbbox=e?[{x:e.l,y:e.t},{x:e.r,y:e.t},{x:e.r,
y:e.b},{x:e.l,y:e.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(b,e,k){k&&(e=w.multiplyPoint(k,b,e),b=e.x,e=e.y);this.bbox&&"l"in this.bbox?(this.bbox.l>b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>e&&(this.bbox.t=e),this.bbox.b<e&&(this.bbox.b=e)):this.bbox={l:b,b:e,r:b,t:e}},_updateWithSegment:function(b,e){var k=b.args,q=k.length,
d;switch(b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(d=0;d<q;d+=2)this._updateBBox(k[d],k[d+1],e);this.last.x=k[q-2];this.last.y=k[q-1];this.absolute=!0;break;case "H":for(d=0;d<q;++d)this._updateBBox(k[d],this.last.y,e);this.last.x=k[q-1];this.absolute=!0;break;case "V":for(d=0;d<q;++d)this._updateBBox(this.last.x,k[d],e);this.last.y=k[q-1];this.absolute=!0;break;case "m":d=0;"x"in this.last||(this._updateBBox(this.last.x=k[0],this.last.y=k[1],e),d=2);for(;d<q;d+=2)this._updateBBox(this.last.x+=
k[d],this.last.y+=k[d+1],e);this.absolute=!1;break;case "l":case "t":for(d=0;d<q;d+=2)this._updateBBox(this.last.x+=k[d],this.last.y+=k[d+1],e);this.absolute=!1;break;case "h":for(d=0;d<q;++d)this._updateBBox(this.last.x+=k[d],this.last.y,e);this.absolute=!1;break;case "v":for(d=0;d<q;++d)this._updateBBox(this.last.x,this.last.y+=k[d],e);this.absolute=!1;break;case "c":for(d=0;d<q;d+=6)this._updateBBox(this.last.x+k[d],this.last.y+k[d+1],e),this._updateBBox(this.last.x+k[d+2],this.last.y+k[d+3],e),
this._updateBBox(this.last.x+=k[d+4],this.last.y+=k[d+5],e);this.absolute=!1;break;case "s":case "q":for(d=0;d<q;d+=4)this._updateBBox(this.last.x+k[d],this.last.y+k[d+1],e),this._updateBBox(this.last.x+=k[d+2],this.last.y+=k[d+3],e);this.absolute=!1;break;case "A":for(d=0;d<q;d+=7)this._updateBBox(k[d+5],k[d+6],e);this.last.x=k[q-2];this.last.y=k[q-1];this.absolute=!0;break;case "a":for(d=0;d<q;d+=7)this._updateBBox(this.last.x+=k[d+5],this.last.y+=k[d+6],e);this.absolute=!1}b=[b.action];for(d=0;d<
q;++d)b.push(g.formatNumber(k[d],!0));if("string"==typeof this.shape.path)this.shape.path+=b.join("");else for(d=0,q=b.length;d<q;++d)this.shape.path.push(b[d])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(b,e){this.tbbox=null;var k=this._validSegments[b.toLowerCase()];"number"==typeof k&&(k?e.length>=k&&(b={action:b,args:e.slice(0,e.length-e.length%k)},this.segments.push(b),this._updateWithSegment(b)):(b={action:b,args:[]},this.segments.push(b),this._updateWithSegment(b)))},
_collectArgs:function(b,e){for(var k=0;k<e.length;++k){var g=e[k];"boolean"==typeof g?b.push(g?1:0):"number"==typeof g?b.push(g):g instanceof Array?this._collectArgs(b,g):"x"in g&&"y"in g&&b.push(g.x,g.y)}},moveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"M":"m",b);return this},lineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"L":"l",b);return this},hLineTo:function(){this._confirmSegmented();
var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"H":"h",b);return this},vLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"V":"v",b);return this},curveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"C":"c",b);return this},smoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"S":
"s",b);return this},qCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"Q":"q",b);return this},qSmoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"T":"t",b);return this},arcTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"A":"a",b);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",
[]);return this},_confirmSegmented:function(){if(!this.segmented){var b=this.shape.path;this.shape.path=[];this._setPath(b);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(b){b=n.isArray(b)?b:b.match(g.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(b){for(var e="",k=[],p=b.length,d=0;d<p;++d){var m=b[d],h=parseFloat(m);isNaN(h)?(e&&this._pushSegment(e,k),k=[],e=m):k.push(h)}this._pushSegment(e,k)}},setShape:function(b){this.inherited(arguments,
["string"==typeof b?{path:b}:b]);this.segmented=!1;this.segments=[];g.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});p=p("dojox.gfx.path.TextPath",t,{constructor:function(b){"text"in this||(this.text=n.clone(g.defaultTextPath));"fontStyle"in this||(this.fontStyle=n.clone(g.defaultFont))},getText:function(){return this.text},setText:function(b){this.text=g.makeParameters(this.text,"string"==typeof b?{text:b}:b);this._setText();return this},getFont:function(){return this.fontStyle},
setFont:function(b){this.fontStyle="string"==typeof b?g.splitFontString(b):g.makeParameters(g.defaultFont,b);this._setFont();return this}});return g.path={Path:t,TextPath:p}})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],function(g,n,p){function w(d){var b=Math.cos(d);d=Math.sin(d);var e={x:b+4/3*(1-b),y:d-4/3*b*(1-b)/d};return{s:{x:b,y:-d},c1:{x:e.x,y:-e.y},c2:e,e:{x:b,y:d}}}var t=2*Math.PI,b=Math.PI/4,e=Math.PI/8,k=b+e,q=w(e);return g.arc={unitArcAsBezier:w,curvePI4:q,
arcAsBezier:function(d,g,h,a,n,x,r,v){n=!!n;x=!!x;var l=p._degToRad(a);a=g*g;var m=h*h,u=p.multiplyPoint(p.rotate(-l),{x:(d.x-r)/2,y:(d.y-v)/2}),c=u.x*u.x,f=u.y*u.y;a=Math.sqrt((a*m-a*f-m*c)/(a*f+m*c));isNaN(a)&&(a=0);a={x:a*g*u.y/h,y:-a*h*u.x/g};n==x&&(a={x:-a.x,y:-a.y});a=p.multiplyPoint([p.translate((d.x+r)/2,(d.y+v)/2),p.rotate(l)],a);g=p.normalize([p.translate(a.x,a.y),p.rotate(l),p.scale(g,h)]);a=p.invert(g);d=p.multiplyPoint(a,d);v=p.multiplyPoint(a,r,v);r=Math.atan2(d.y,d.x);a=r-Math.atan2(v.y,
v.x);x&&(a=-a);0>a?a+=t:a>t&&(a-=t);h=e;v=q;h=x?h:-h;d=[];for(n=a;0<n;n-=b)n<k&&(h=n/2,v=w(h),h=x?h:-h,n=0),u=p.normalize([g,p.rotate(r+h)]),x?(a=p.multiplyPoint(u,v.c1),l=p.multiplyPoint(u,v.c2),u=p.multiplyPoint(u,v.e)):(a=p.multiplyPoint(u,v.c2),l=p.multiplyPoint(u,v.c1),u=p.multiplyPoint(u,v.s)),d.push([a.x,a.y,l.x,l.y,u.x,u.y]),r+=2*h;return d}}})},"dojox/gfx/gradient":function(){define(["dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,n,p){function w(b,g,p,d,m,h){b=n.multiplyPoint(p,
b,g);d=n.multiplyPoint(d,b);return{r:b,p:d,o:n.multiplyPoint(m,d).x/h}}function t(b,g){return b.o-g.o}var b=g.getObject("dojox.gfx.gradient",!0);b.rescale=function(b,g,n){var d=b.length,e=n<g,h;e&&(h=g,g=n,n=h);if(!d)return[];if(n<=b[0].offset)h=[{offset:0,color:b[0].color},{offset:1,color:b[0].color}];else if(g>=b[d-1].offset)h=[{offset:0,color:b[d-1].color},{offset:1,color:b[d-1].color}];else{var a=n-g,k,q,r;h=[];0>g&&h.push({offset:0,color:new p(b[0].color)});for(r=0;r<d&&!(k=b[r],k.offset>=g);++r);
r?(q=b[r-1],h.push({offset:0,color:p.blendColors(new p(q.color),new p(k.color),(g-q.offset)/(k.offset-q.offset))})):h.push({offset:0,color:new p(k.color)});for(;r<d;++r){k=b[r];if(k.offset>=n)break;h.push({offset:(k.offset-g)/a,color:new p(k.color)})}r<d?(q=b[r-1],h.push({offset:1,color:p.blendColors(new p(q.color),new p(k.color),(n-q.offset)/(k.offset-q.offset))})):h.push({offset:1,color:new p(b[d-1].color)})}if(e)for(h.reverse(),r=0,d=h.length;r<d;++r)k=h[r],k.offset=1-k.offset;return h};b.project=
function(e,g,p,d,m,h){e=e||n.identity;var a=n.multiplyPoint(e,g.x1,g.y1),k=n.multiplyPoint(e,g.x2,g.y2);m=Math.atan2(k.y-a.y,k.x-a.x);h=n.project(k.x-a.x,k.y-a.y);a=n.multiplyPoint(h,a);k=n.multiplyPoint(h,k);a=new n.Matrix2D([n.rotate(-m),{dx:-a.x,dy:-a.y}]);k=n.multiplyPoint(a,k).x;e=[w(p.x,p.y,e,h,a,k),w(d.x,d.y,e,h,a,k),w(p.x,d.y,e,h,a,k),w(d.x,p.y,e,h,a,k)].sort(t);g=b.rescale(g.colors,e[0].o,e[3].o);return{type:"linear",x1:e[0].p.x,y1:e[0].p.y,x2:e[3].p.x,y2:e[3].p.y,colors:g,angle:m}};return b})},
"*noref":1}});
define("dojox/gfx/vml","dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/Color dojo/_base/sniff dojo/_base/config dojo/dom dojo/dom-geometry dojo/dom-style dojo/_base/kernel ./_base ./shape ./path ./arc ./gradient ./matrix".split(" "),function(g,n,p,w,t,b,e,k,q,d,m,h,a,u,x,r){function v(c,f,a){a=a||d.global;f.call(a,c);(c instanceof m.Surface||c instanceof m.Group)&&p.forEach(c.children,function(c){v(c,f,a)})}var l=m.vml={},z=function(){l.xmlns="urn:schemas-microsoft-com:vml";try{document.namespaces.add("v",
l.xmlns);var c="* group roundrect oval shape rect imagedata path textpath text".split(" "),f=0,a=1,b=document.createStyleSheet();8<=t("ie")&&(f=1,a=c.length);for(;f<a;++f)b.addRule("v\\:"+c[f],"behavior:url(#default#VML); display:inline-block")}catch(A){setTimeout(z,10)}};z();l.text_alignment={start:"left",middle:"center",end:"right"};l._parseFloat=function(c){return c.match(/^\d+f$/i)?parseInt(c)/65536:parseFloat(c)};l._bool={t:1,"true":1};l._reparentEvents=function(c,f){for(var a in f)"on"==a.substr(0,
2).toLowerCase()&&(c[a]=f[a],f[a]=null)};l.Shape=n("dojox.gfx.vml.Shape",h.Shape,{setFill:function(c){if(!c)return this.fillStyle=null,this.rawNode.filled="f",this;var f,a,b;if("object"==typeof c&&"type"in c){switch(c.type){case "linear":var d=this._getRealMatrix(),e=this.getBoundingBox(),g=this._getRealBBox?this._getRealBBox():this.getTransformedBoundingBox();b=[];this.fillStyle!==c&&(this.fillStyle=m.makeParameters(m.defaultLinearGradient,c));c=m.gradient.project(d,this.fillStyle,{x:e.x,y:e.y},
{x:e.x+e.width,y:e.y+e.height},g[0],g[2]);a=c.colors;"0.00000"!=a[0].offset.toFixed(5)&&b.push("0 "+m.normalizeColor(a[0].color).toHex());for(f=0;f<a.length;++f)b.push(a[f].offset.toFixed(5)+" "+m.normalizeColor(a[f].color).toHex());f=a.length-1;"1.00000"!=a[f].offset.toFixed(5)&&b.push("1 "+m.normalizeColor(a[f].color).toHex());f=this.rawNode.fill;f.colors.value=b.join(";");f.method="sigma";f.type="gradient";f.angle=(270-r._radToDeg(c.angle))%360;f.on=!0;break;case "radial":this.fillStyle=c=m.makeParameters(m.defaultRadialGradient,
c);var d=parseFloat(this.rawNode.style.left),e=parseFloat(this.rawNode.style.top),g=parseFloat(this.rawNode.style.width),h=parseFloat(this.rawNode.style.height),k=isNaN(g)?1:2*c.r/g;a=[];0<c.colors[0].offset&&a.push({offset:1,color:m.normalizeColor(c.colors[0].color)});p.forEach(c.colors,function(c,f){a.push({offset:1-c.offset*k,color:m.normalizeColor(c.color)})});for(f=a.length-1;0<=f&&0>a[f].offset;)--f;if(f<a.length-1){b=a[f];var l=a[f+1];l.color=w.blendColors(b.color,l.color,b.offset/(b.offset-
l.offset));for(l.offset=0;2<a.length-f;)a.pop()}f=a.length-1;b=[];for(0<a[f].offset&&b.push("0 "+a[f].color.toHex());0<=f;--f)b.push(a[f].offset.toFixed(5)+" "+a[f].color.toHex());f=this.rawNode.fill;f.colors.value=b.join(";");f.method="sigma";f.type="gradientradial";isNaN(g)||isNaN(h)||isNaN(d)||isNaN(e)?f.focusposition="0.5 0.5":f.focusposition=((c.cx-d)/g).toFixed(5)+" "+((c.cy-e)/h).toFixed(5);f.focussize="0 0";f.on=!0;break;case "pattern":this.fillStyle=c=m.makeParameters(m.defaultPattern,c),
f=this.rawNode.fill,f.type="tile",f.src=c.src,c.width&&c.height&&(f.size.x=m.px2pt(c.width),f.size.y=m.px2pt(c.height)),f.alignShape="f",f.position.x=0,f.position.y=0,f.origin.x=c.width?c.x/c.width:0,f.origin.y=c.height?c.y/c.height:0,f.on=!0}this.rawNode.fill.opacity=1;return this}this.fillStyle=m.normalizeColor(c);(f=this.rawNode.fill)||(f=this.rawNode.ownerDocument.createElement("v:fill"));f.method="any";f.type="solid";f.opacity=this.fillStyle.a;if(b=this.rawNode.filters["DXImageTransform.Microsoft.Alpha"])b.opacity=
Math.round(100*this.fillStyle.a);this.rawNode.fillcolor=this.fillStyle.toHex();this.rawNode.filled=!0;return this},setStroke:function(c){if(!c)return this.strokeStyle=null,this.rawNode.stroked="f",this;if("string"==typeof c||g.isArray(c)||c instanceof w)c={color:c};c=this.strokeStyle=m.makeParameters(m.defaultStroke,c);c.color=m.normalizeColor(c.color);var f=this.rawNode;f.stroked=!0;f.strokecolor=c.color.toCss();f.strokeweight=c.width+"px";f.stroke&&(f.stroke.opacity=c.color.a,f.stroke.endcap=this._translate(this._capMap,
c.cap),"number"==typeof c.join?(f.stroke.joinstyle="miter",f.stroke.miterlimit=c.join):f.stroke.joinstyle=c.join,f.stroke.dashstyle="none"==c.style?"Solid":c.style);return this},_capMap:{butt:"flat"},_capMapReversed:{flat:"butt"},_translate:function(c,f){return f in c?c[f]:f},_applyTransform:function(){var c=this._getRealMatrix();if(c){var f=this.rawNode.skew;if("undefined"==typeof f)for(var a=0;a<this.rawNode.childNodes.length;++a)if("skew"==this.rawNode.childNodes[a].tagName){f=this.rawNode.childNodes[a];
break}if(f){f.on="f";var a=c.xx.toFixed(8)+" "+c.xy.toFixed(8)+" "+c.yx.toFixed(8)+" "+c.yy.toFixed(8)+" 0 0",c=Math.floor(c.dx).toFixed()+"px "+Math.floor(c.dy).toFixed()+"px",b=this.rawNode.style,d=parseFloat(b.left),e=parseFloat(b.top),g=parseFloat(b.width),b=parseFloat(b.height);isNaN(d)&&(d=0);isNaN(e)&&(e=0);if(isNaN(g)||!g)g=1;if(isNaN(b)||!b)b=1;d=(-d/g-.5).toFixed(8)+" "+(-e/b-.5).toFixed(8);f.matrix=a;f.origin=d;f.offset=c;f.on=!0}}this.fillStyle&&"linear"==this.fillStyle.type&&this.setFill(this.fillStyle);
this.clip&&this.setClip(this.clip);return this},_setDimensions:function(c,f){return this},setRawNode:function(c){c.stroked="f";c.filled="f";this.rawNode=c;this.rawNode.__gfxObject__=this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){var c=this.rawNode,f=c.parentNode,a=f.firstChild;f.insertBefore(c,a);"rect"==a.tagName&&a.swapNode(c);return this},_getRealMatrix:function(){return this.parentMatrix?new r.Matrix2D([this.parentMatrix,this.matrix]):
this.matrix},setClip:function(c){this.inherited(arguments);var f=this.rawNode.style;if(!c)f.position="absolute",f.clip="rect(0px "+f.width+" "+f.height+" 0px)";else if("width"in c){var a=this._getRealMatrix(),b=parseFloat(f.left),d=parseFloat(f.top);isNaN(b)&&(b=0);isNaN(d)&&(d=0);var e=r.multiplyRectangle(a,c),a=r.multiplyPoint(a,{x:b,y:d});f.clip="rect("+Math.round(e.y-a.y)+"px "+Math.round(e.x-a.x+e.width)+"px "+Math.round(e.y-a.y+e.height)+"px "+Math.round(e.x-a.x)+"px)"}return this}});(function(){var c=
l.Shape,f=c.prototype.setStroke,a=c.prototype.setFill;c.prototype.setStroke=function(){var c=f.apply(this,arguments),a=this.rawNode,a=a&&a.stroke,b=this.getParent();a&&b&&(a.opacity*=void 0!==b._esriIeOpacity&&null!==b._esriIeOpacity?b._esriIeOpacity:1);return c};c.prototype.setFill=function(){var c=a.apply(this,arguments),f=this.rawNode,b=f&&f.fill,d=this.getParent();b&&d&&(d=void 0!==d._esriIeOpacity&&null!==d._esriIeOpacity?d._esriIeOpacity:1,"tile"===b.type?q.set(f,"opacity",d):b.opacity*=d);
return c}})();l.Group=n("dojox.gfx.vml.Group",l.Shape,{constructor:function(){h.Container._init.call(this)},_applyTransform:function(){for(var c=this._getRealMatrix(),a=0;a<this.children.length;++a)this.children[a]._updateParentMatrix(c);this.clip&&this.setClip(this.clip);return this},_setDimensions:function(c,a){var f=this.rawNode,b=f.style,d=this.bgNode.style;b.width=c;b.height=a;f.coordsize=c+" "+a;d.width=c;d.height=a;for(f=0;f<this.children.length;++f)this.children[f]._setDimensions(c,a);return this},
setClip:function(c){this.clip=c;var a=this.rawNode.style;if(!c)a.position="absolute",a.clip="rect(0px "+a.width+" "+a.height+" 0px)";else if("width"in c){var b=this._getRealMatrix();c=r.multiplyRectangle(b,c);var d=this.getBoundingBox(),b=(d=d?r.multiplyRectangle(b,d):null)&&0>d.x?d.x:0,d=d&&0>d.y?d.y:0;a.position="absolute";a.clip="rect("+Math.round(c.y-d)+"px "+Math.round(c.x+c.width-b)+"px "+Math.round(c.y+c.height-d)+"px "+Math.round(c.x-b)+"px)"}return this},destroy:function(){this.clear(!0);
l.Shape.prototype.destroy.apply(this,arguments)}});l.Group.nodeType="group";l.Rect=n("dojox.gfx.vml.Rect",[l.Shape,h.Rect],{setShape:function(c){c=this.shape=m.makeParameters(this.shape,c);this.bbox=null;var a=Math.min(1,c.r/Math.min(parseFloat(c.width),parseFloat(c.height))).toFixed(8),b=this.rawNode.parentNode,d=null;if(b){if(b.lastChild!==this.rawNode)for(var e=0;e<b.childNodes.length;++e)if(b.childNodes[e]===this.rawNode){d=b.childNodes[e+1];break}b.removeChild(this.rawNode)}7<t("ie")?(e=this.rawNode.ownerDocument.createElement("v:roundrect"),
e.arcsize=a,e.style.display="inline-block",l._reparentEvents(e,this.rawNode),this.rawNode=e,this.rawNode.__gfxObject__=this):this.rawNode.arcsize=a;b&&(d?b.insertBefore(this.rawNode,d):b.appendChild(this.rawNode));a=this.rawNode.style;a.left=c.x.toFixed();a.top=c.y.toFixed();a.width="string"==typeof c.width&&0<=c.width.indexOf("%")?c.width:Math.max(c.width.toFixed(),0);a.height="string"==typeof c.height&&0<=c.height.indexOf("%")?c.height:Math.max(c.height.toFixed(),0);return this.setTransform(this.matrix).setFill(this.fillStyle).setStroke(this.strokeStyle)}});
l.Rect.nodeType="roundrect";l.Ellipse=n("dojox.gfx.vml.Ellipse",[l.Shape,h.Ellipse],{setShape:function(c){c=this.shape=m.makeParameters(this.shape,c);this.bbox=null;var a=this.rawNode.style;a.left=(c.cx-c.rx).toFixed();a.top=(c.cy-c.ry).toFixed();a.width=(2*c.rx).toFixed();a.height=(2*c.ry).toFixed();return this.setTransform(this.matrix)}});l.Ellipse.nodeType="oval";l.Circle=n("dojox.gfx.vml.Circle",[l.Shape,h.Circle],{setShape:function(c){c=this.shape=m.makeParameters(this.shape,c);this.bbox=null;
var a=this.rawNode.style;a.left=(c.cx-c.r).toFixed();a.top=(c.cy-c.r).toFixed();a.width=(2*c.r).toFixed();a.height=(2*c.r).toFixed();return this}});l.Circle.nodeType="oval";l.Line=n("dojox.gfx.vml.Line",[l.Shape,h.Line],{constructor:function(c){c&&c.setAttribute("dojoGfxType","line")},setShape:function(c){c=this.shape=m.makeParameters(this.shape,c);this.bbox=null;this.rawNode.path.v="m"+c.x1.toFixed()+" "+c.y1.toFixed()+"l"+c.x2.toFixed()+" "+c.y2.toFixed()+"e";return this.setTransform(this.matrix)}});
l.Line.nodeType="shape";l.Polyline=n("dojox.gfx.vml.Polyline",[l.Shape,h.Polyline],{constructor:function(c){c&&c.setAttribute("dojoGfxType","polyline")},setShape:function(c,a){c&&c instanceof Array?(this.shape=m.makeParameters(this.shape,{points:c}),a&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=m.makeParameters(this.shape,c);this.bbox=null;this._normalizePoints();c=[];a=this.shape.points;if(0<a.length&&(c.push("m"),c.push(a[0].x.toFixed(),a[0].y.toFixed()),
1<a.length)){c.push("l");for(var f=1;f<a.length;++f)c.push(a[f].x.toFixed(),a[f].y.toFixed())}c.push("e");this.rawNode.path.v=c.join(" ");return this.setTransform(this.matrix)}});l.Polyline.nodeType="shape";l.Image=n("dojox.gfx.vml.Image",[l.Shape,h.Image],{setShape:function(c){c=this.shape=m.makeParameters(this.shape,c);this.bbox=null;this.rawNode.firstChild.src=c.src;return this.setTransform(this.matrix)},_applyTransform:function(){var c=this._getRealMatrix(),a=this.rawNode,b=a.style,d=this.shape,
c=c?r.multiply(c,{dx:d.x,dy:d.y}):r.normalize({dx:d.x,dy:d.y});if(0==c.xy&&0==c.yx&&0<c.xx&&0<c.yy)b.filter="",b.width=Math.floor(c.xx*d.width),b.height=Math.floor(c.yy*d.height),b.left=Math.floor(c.dx),b.top=Math.floor(c.dy);else{var e=a.parentNode.style;b.left="0px";b.top="0px";b.width=e.width;b.height=e.height;c=r.multiply(c,{xx:d.width/parseInt(b.width),yy:d.height/parseInt(b.height)});(a=a.filters["DXImageTransform.Microsoft.Matrix"])?(a.M11=c.xx,a.M12=c.xy,a.M21=c.yx,a.M22=c.yy,a.Dx=c.dx,a.Dy=
c.dy):b.filter="progid:DXImageTransform.Microsoft.Matrix(M11\x3d"+c.xx+", M12\x3d"+c.xy+", M21\x3d"+c.yx+", M22\x3d"+c.yy+", Dx\x3d"+c.dx+", Dy\x3d"+c.dy+")"}return this},_setDimensions:function(c,a){var f=this.rawNode;return f.filters["DXImageTransform.Microsoft.Matrix"]?(f=f.style,f.width=c,f.height=a,this._applyTransform()):this}});l.Image.nodeType="rect";l.Text=n("dojox.gfx.vml.Text",[l.Shape,h.Text],{constructor:function(c){c&&c.setAttribute("dojoGfxType","text");this.fontStyle=null},_alignment:{start:"left",
middle:"center",end:"right"},setShape:function(c){this.shape=m.makeParameters(this.shape,c);this.bbox=null;var a=this.rawNode;c=this.shape;var b=c.x,d=c.y.toFixed();switch(c.align){case "middle":b-=5;break;case "end":b-=10}for(var d="m"+b.toFixed()+","+d+"l"+(b+10).toFixed()+","+d+"e",e=null,b=null,g=a.childNodes,h=0;h<g.length;++h){var k=g[h].tagName;if("path"==k){if(e=g[h],b)break}else if("textpath"==k&&(b=g[h],e))break}e||(e=a.ownerDocument.createElement("v:path"),a.appendChild(e));b||(b=a.ownerDocument.createElement("v:textpath"),
a.appendChild(b));e.v=d;e.textPathOk=!0;b.on=!0;a=l.text_alignment[c.align];b.style["v-text-align"]=a?a:"left";b.style["text-decoration"]=c.decoration;b.style["v-rotate-letters"]=c.rotated;b.style["v-text-kern"]=c.kerning;b.string=c.text;return this.setTransform(this.matrix)},_setFont:function(){for(var c=this.fontStyle,a=this.rawNode.childNodes,b=0;b<a.length;++b)if("textpath"==a[b].tagName){a[b].style.font=m.makeFontString(c);break}this.setTransform(this.matrix)},_getRealMatrix:function(){var c=
this.inherited(arguments);c&&(c=r.multiply(c,{dy:.35*-m.normalizedLength(this.fontStyle?this.fontStyle.size:"10pt")}));return c},getTextWidth:function(){var c=this.rawNode,a=c.style.display;c.style.display="inline";var b=m.pt2px(parseFloat(c.currentStyle.width));c.style.display=a;return b}});l.Text.nodeType="shape";l.Path=n("dojox.gfx.vml.Path",[l.Shape,a.Path],{constructor:function(c){c&&!c.getAttribute("dojoGfxType")&&c.setAttribute("dojoGfxType","path");this.vmlPath="";this.lastControl={}},_updateWithSegment:function(c){var a=
g.clone(this.last);this.inherited(arguments);1<arguments.length||(a=this[this.renderers[c.action]](c,a),"string"==typeof this.vmlPath?(this.vmlPath+=a.join(""),this.rawNode.path.v=this.vmlPath+" r0,0 e"):Array.prototype.push.apply(this.vmlPath,a))},setShape:function(c){this.vmlPath=[];this.lastControl.type="";this.inherited(arguments);this.vmlPath=this.vmlPath.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";return this},_pathVmlToSvgMap:{m:"M",l:"L",t:"m",r:"l",c:"C",v:"c",qb:"Q",x:"z",e:""},
renderers:{M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"},_addArgs:function(c,a,b,d){for(a=a instanceof Array?a:a.args;b<d;++b)c.push(" ",a[b].toFixed())},_adjustRelCrd:function(c,a,b){a=a instanceof Array?a:a.args;var f=a.length,d=Array(f),e=0,g=
c.x;c=c.y;"number"!=typeof g&&(d[0]=g=a[0],d[1]=c=a[1],e=2);if("number"==typeof b&&2!=b)for(var h=b;h<=f;){for(;e<h;e+=2)d[e]=g+a[e],d[e+1]=c+a[e+1];g=d[h-2];c=d[h-1];h+=b}else for(;e<f;e+=2)d[e]=g+=a[e],d[e+1]=c+=a[e+1];return d},_adjustRelPos:function(c,a){a=a instanceof Array?a:a.args;for(var b=a.length,f=Array(b),d=0;d<b;++d)f[d]=c+=a[d];return f},_moveToA:function(c){var a=[" m"];c=c instanceof Array?c:c.args;var b=c.length;this._addArgs(a,c,0,2);2<b&&(a.push(" l"),this._addArgs(a,c,2,b));this.lastControl.type=
"";return a},_moveToR:function(a,b){return this._moveToA(this._adjustRelCrd(b,a))},_lineToA:function(a){var c=[" l"];a=a instanceof Array?a:a.args;this._addArgs(c,a,0,a.length);this.lastControl.type="";return c},_lineToR:function(a,b){return this._lineToA(this._adjustRelCrd(b,a))},_hLineToA:function(a,b){var c=[" l"];b=" "+b.y.toFixed();a=a instanceof Array?a:a.args;for(var d=a.length,f=0;f<d;++f)c.push(" ",a[f].toFixed(),b);this.lastControl.type="";return c},_hLineToR:function(a,b){return this._hLineToA(this._adjustRelPos(b.x,
a),b)},_vLineToA:function(a,b){var c=[" l"];b=" "+b.x.toFixed();a=a instanceof Array?a:a.args;for(var d=a.length,f=0;f<d;++f)c.push(b," ",a[f].toFixed());this.lastControl.type="";return c},_vLineToR:function(a,b){return this._vLineToA(this._adjustRelPos(b.y,a),b)},_curveToA:function(a){var c=[];a=a instanceof Array?a:a.args;for(var b=a.length,d=this.lastControl,e=0;e<b;e+=6)c.push(" c"),this._addArgs(c,a,e,e+6);d.x=a[b-4];d.y=a[b-3];d.type="C";return c},_curveToR:function(a,b){return this._curveToA(this._adjustRelCrd(b,
a,6))},_smoothCurveToA:function(a,b){var c=[];a=a instanceof Array?a:a.args;var d=a.length,f=this.lastControl,e=0;"C"!=f.type&&(c.push(" c"),this._addArgs(c,[b.x,b.y],0,2),this._addArgs(c,a,0,4),f.x=a[0],f.y=a[1],f.type="C",e=4);for(;e<d;e+=4)c.push(" c"),this._addArgs(c,[2*b.x-f.x,2*b.y-f.y],0,2),this._addArgs(c,a,e,e+4),f.x=a[e],f.y=a[e+1];return c},_smoothCurveToR:function(a,b){return this._smoothCurveToA(this._adjustRelCrd(b,a,4),b)},_qCurveToA:function(a){var c=[];a=a instanceof Array?a:a.args;
for(var b=a.length,d=this.lastControl,e=0;e<b;e+=4)c.push(" qb"),this._addArgs(c,a,e,e+4);d.x=a[b-4];d.y=a[b-3];d.type="Q";return c},_qCurveToR:function(a,b){return this._qCurveToA(this._adjustRelCrd(b,a,4))},_qSmoothCurveToA:function(a,b){var c=[];a=a instanceof Array?a:a.args;var d=a.length,f=this.lastControl,e=0;"Q"!=f.type&&(c.push(" qb"),this._addArgs(c,[f.x=b.x,f.y=b.y],0,2),f.type="Q",this._addArgs(c,a,0,2),e=2);for(;e<d;e+=2)c.push(" qb"),this._addArgs(c,[f.x=2*b.x-f.x,f.y=2*b.y-f.y],0,2),
this._addArgs(c,a,e,e+2);return c},_qSmoothCurveToR:function(a,b){return this._qSmoothCurveToA(this._adjustRelCrd(b,a,2),b)},_arcTo:function(a,b){var c=[],d=a.args,f=d.length;a="a"==a.action;for(var e=0;e<f;e+=7){var g=d[e+5],h=d[e+6];a&&(g+=b.x,h+=b.y);for(var k=u.arcAsBezier(b,d[e],d[e+1],d[e+2],d[e+3]?1:0,d[e+4]?1:0,g,h),l=0;l<k.length;++l){c.push(" c");var m=k[l];this._addArgs(c,m,0,m.length);this._updateBBox(m[0],m[1]);this._updateBBox(m[2],m[3]);this._updateBBox(m[4],m[5])}b.x=g;b.y=h}this.lastControl.type=
"";return c},_closePath:function(){this.lastControl.type="";return["x"]},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;"string"==typeof this.shape.path&&(this.shape.path="");return this.inherited(arguments)}});l.Path.nodeType="shape";l.EsriPath=n("dojox.gfx.vml.EsriPath",l.Path,{setShape:function(a){this.rawNode.path.v=this.vmlPath=a;return this}});l.EsriPath.nodeType="shape";l.TextPath=n("dojox.gfx.vml.TextPath",[l.Path,a.TextPath],{constructor:function(a){a&&a.setAttribute("dojoGfxType",
"textpath");this.fontStyle=null;"text"in this||(this.text=g.clone(m.defaultTextPath));"fontStyle"in this||(this.fontStyle=g.clone(m.defaultFont))},setText:function(a){this.text=m.makeParameters(this.text,"string"==typeof a?{text:a}:a);this._setText();return this},setFont:function(a){this.fontStyle="string"==typeof a?m.splitFontString(a):m.makeParameters(m.defaultFont,a);this._setFont();return this},_setText:function(){this.bbox=null;for(var a=this.rawNode,b=this.text,d=null,e=null,g=a.childNodes,
h=0;h<g.length;++h){var k=g[h].tagName;if("path"==k){if(d=g[h],e)break}else if("textpath"==k&&(e=g[h],d))break}d||(d=this.rawNode.ownerDocument.createElement("v:path"),a.appendChild(d));e||(e=this.rawNode.ownerDocument.createElement("v:textpath"),a.appendChild(e));d.textPathOk=!0;e.on=!0;a=l.text_alignment[b.align];e.style["v-text-align"]=a?a:"left";e.style["text-decoration"]=b.decoration;e.style["v-rotate-letters"]=b.rotated;e.style["v-text-kern"]=b.kerning;e.string=b.text},_setFont:function(){for(var a=
this.fontStyle,b=this.rawNode.childNodes,d=0;d<b.length;++d)if("textpath"==b[d].tagName){b[d].style.font=m.makeFontString(a);break}}});l.TextPath.nodeType="shape";l.Surface=n("dojox.gfx.vml.Surface",h.Surface,{constructor:function(){h.Container._init.call(this)},destroy:function(){this.clear(!0);this.inherited(arguments)},setDimensions:function(a,b){this.width=m.normalizedLength(a);this.height=m.normalizedLength(b);if(!this.rawNode)return this;var c=this.clipNode.style,d=this.rawNode,e=d.style,f=
this.bgNode.style,g=this._parent.style;g.width=a;g.height=b;c.width=a;c.height=b;c.clip="rect(0px "+a+"px "+b+"px 0px)";e.width=a;e.height=b;d.coordsize=a+" "+b;f.width=a;f.height=b;for(c=0;c<this.children.length;++c)this.children[c]._setDimensions(a,b);return this},getDimensions:function(){var a=this.rawNode?{width:m.normalizedLength(this.rawNode.style.width),height:m.normalizedLength(this.rawNode.style.height)}:null;0>=a.width&&(a.width=this.width);0>=a.height&&(a.height=this.height);return a}});
l.createSurface=function(a,b,d){if(!b&&!d){var c=k.position(a);b=b||c.w;d=d||c.h}"number"==typeof b&&(b+="px");"number"==typeof d&&(d+="px");c=new l.Surface;a=e.byId(a);var f=c.clipNode=a.ownerDocument.createElement("div"),g=c.rawNode=a.ownerDocument.createElement("v:group"),h=f.style,n=g.style;7<t("ie")&&(n.display="inline-block");c._parent=a;c._nodes.push(f);a.style.width=b;a.style.height=d;h.position="absolute";h.width=b;h.height=d;h.clip="rect(0px "+b+" "+d+" 0px)";n.position="absolute";n.width=
b;n.height=d;g.coordsize=("100%"===b?b:parseFloat(b))+" "+("100%"===d?d:parseFloat(d));g.coordorigin="0 0";var h=c.bgNode=g.ownerDocument.createElement("v:rect"),p=h.style;p.left=p.top=0;p.width=n.width;p.height=n.height;h.filled=h.stroked="f";g.appendChild(h);f.appendChild(g);a.appendChild(f);c.width=m.normalizedLength(b);c.height=m.normalizedLength(d);return c};n=function(a){if(this!=a.getParent()){var b=a.getParent();b&&b.remove(a);this.rawNode.appendChild(a.rawNode);y.add.apply(this,arguments);
v(this,function(a){"function"==typeof a.getFont&&(a.setShape(a.getShape()),a.setFont(a.getFont()));"function"==typeof a.setFill&&(a.setFill(a.getFill()),a.setStroke(a.getStroke()))})}return this};a=function(a){this!=a.getParent()&&(this.rawNode.appendChild(a.rawNode),a.getParent()||(a.setFill(a.getFill()),a.setStroke(a.getStroke())),y.add.apply(this,arguments));return this};var y=h.Container;b={add:!0===b.fixVmlAdd?n:a,remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&
this.rawNode.removeChild(a.rawNode),y.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.firstChild!=a.lastChild;)a.firstChild!=this.bgNode&&a.removeChild(a.firstChild),a.lastChild!=this.bgNode&&a.removeChild(a.lastChild);return y.clear.apply(this,arguments)},getBoundingBox:y.getBoundingBox,_moveChildToFront:y._moveChildToFront,_moveChildToBack:y._moveChildToBack};n={createGroup:function(){var a=this.createObject(l.Group,null),b=a.rawNode.ownerDocument.createElement("v:rect");
b.style.left=b.style.top=0;b.style.width=a.rawNode.style.width;b.style.height=a.rawNode.style.height;b.filled=b.stroked="f";a.rawNode.appendChild(b);a.bgNode=b;return a},createImage:function(a){if(!this.rawNode)return null;var b=new l.Image,c=this.rawNode.ownerDocument,d=c.createElement("v:rect");d.stroked="f";d.style.width=this.rawNode.style.width;d.style.height=this.rawNode.style.height;c=c.createElement("v:imagedata");d.appendChild(c);b.setRawNode(d);this.rawNode.appendChild(d);b.setShape(a);this.add(b);
return b},createRect:function(a){if(!this.rawNode)return null;var b=new l.Rect,c=this.rawNode.ownerDocument.createElement("v:roundrect");7<t("ie")&&(c.style.display="inline-block");b.setRawNode(c);this.rawNode.appendChild(c);b.setShape(a);this.add(b);return b},createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=this.rawNode.ownerDocument.createElement("v:"+a.nodeType);c.setRawNode(d);this.rawNode.appendChild(d);switch(a){case l.Group:case l.Line:case l.Polyline:case l.Image:case l.Text:case l.Path:case l.TextPath:this._overrideSize(d)}c.setShape(b);
this.add(c);return c},_overrideSize:function(a){var b=this.rawNode.style,c=b.width,b=b.height;a.style.width=c;a.style.height=b;a.coordsize=parseInt(c)+" "+parseInt(b)}};g.extend(l.Group,b);g.extend(l.Group,h.Creator);g.extend(l.Group,n);g.extend(l.Surface,b);g.extend(l.Surface,h.Creator);g.extend(l.Surface,n);l.fixTarget=function(a,b){a.gfxTarget||(a.gfxTarget=a.target.__gfxObject__);return!0};return l});