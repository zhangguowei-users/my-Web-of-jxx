// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.27/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/JsonXmlTypedConverter",["dojo/_base/declare","./RegExpUtil"],function(l,m){var n=l(null,{parseJson:function(e,d){function g(a,b){c+="\x3c"+b+' type\x3d"object"\x3e';for(var d in a)f(a[d],d);c+="\x3c/"+b+"\x3e"}function f(a,b){"string"===typeof a?c+="\x3c"+b+' type\x3d"string"\x3e'+m.encodeXML(a,!1)+"\x3c/"+b+"\x3e":"number"===typeof a?c+="\x3c"+b+' type\x3d"number"\x3e'+a+"\x3c/"+b+"\x3e":"boolean"===typeof a?c+="\x3c"+b+' type\x3d"boolean"\x3e'+a+"\x3c/"+b+
"\x3e":Array.isArray(a)?k(a,b):a&&"object"===typeof a&&g(a,b)}function k(a,b){c+="\x3c"+b+' type\x3d"array"\x3e';a.forEach(function(a){f(a,"item")});c+="\x3c/"+b+"\x3e"}var h=d&&d.rootName||"root",c="";d&&d.addDocumentOptions&&(c+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');g(e,h);return c=decodeURIComponent(encodeURIComponent(c).replace("%19",""))},parseXml:function(e){function d(c,a){if(a.childNodes)for(var b=0,d=a.childNodes.length;b<d;b++){var e=a.childNodes[b],f=g(e);void 0!==f&&(c[e.nodeName]=
f)}return c}function g(c){var a;a:{if(c.attributes)for(a=0;a<c.attributes.length;a++){var b=c.attributes[a];if("type"===b.name){a=b.value;break a}}a=null}if(c.nodeName&&a)switch(a){case "string":return c.childNodes[0]?m.decodeXML(c.childNodes[0].nodeValue):"";case "number":return Number(c.childNodes[0].nodeValue);case "boolean":return"true"===c.childNodes[0].nodeValue;case "object":return d({},c);case "array":a=[];if(c.childNodes)for(var b=0,e=c.childNodes.length;b<e;b++)a[b]=g(c.childNodes[b]);return a}}
var f={},k;e=(new DOMParser).parseFromString(e,"text/xml").childNodes;for(var h=0;h<e.length;h++)if(1===e[h].nodeType){k=e[h];break}k&&d(f,k);return f}});l=n();l.runTest=function(){console.log("------------------------------Testing JsonXmlTypedConverter.js------------------------------");var e={type:"uniqueValue",field1:"SubtypeCD",fieldDelimiter:", ",defaultSymbol:{type:"esriSLS",style:"esriSLSSolid",color:[130,130,130,255],width:1},defaultLabel:"\x3cOther values\x3e",uniqueValueInfos:[{value:"1",
label:"Duct Bank",description:"Duct Bank description",symbol:{type:"esriSLS",style:"esriSLSDash",color:[76,0,163,255],width:1}},{value:"2",label:"Trench",description:"Trench description",symbol:{type:"esriSLS",style:"esriSLSDot",color:[115,76,0,255],width:1}}],rotationType:"geographic",rotationExpression:"[Rotation] * 2"},d=new n,e=JSON.parse(JSON.stringify(e));console.log(JSON.stringify(e,void 0,4));var g=d.parseJson(e);console.log(g);var f=d.parseXml(g);console.log(JSON.stringify(f,void 0,4));d=
d.parseJson(f);console.log(d);console.log("Compare JSON1 and JSON2: "+(JSON.stringify(e)===JSON.stringify(f)));console.log("Compare XML1 and XML2: "+(g===d));console.log("------------------------------Testing JsonXmlTypedConverter.js------------------------------")};return l});